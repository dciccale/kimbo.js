<!DOCTYPE html>
<!-- Generated with comment.js -->
<meta charset="utf-8"><title>kimbo.js</title><link rel="stylesheet" href="../css/docs.min.css"><body id="cjs-src"><code id="L0"><span class="ln">0</span><span class="c"><span class="c">/*!</span>
</span></code><code id="L1"><span class="ln">1</span><span class="c"><span class="s"> * </span>kimbo v1<span class="d">.0</span><span class="d">.0</span><span class="s"> - </span><span class="d">2013</span>-<span class="d">02</span>-<span class="d">08</span>
</span></code><code id="L2"><span class="ln">2</span><span class="c"><span class="s"> * </span>http:<span class="c">//kimbojs.com</span>
</span></code><code id="L3"><span class="ln">3</span><span class="c"><span class="s"> * </span>Copyright (c) <span class="d">2013</span> Denis Ciccale (@tdecs)
</span></code><code id="L4"><span class="ln">4</span><span class="c"><span class="s"> * </span>Released under the MIT license
</span></code><code id="L5"><span class="ln">5</span><span class="c"><span class="s"> * </span>https:<span class="c">//github.com/dciccale/kimbo.js/blob/master/LICENSE.txt</span>
</span></code><code id="L6"><span class="ln">6</span><span class="c"> */</span>
</code><code id="L7"><span class="ln">7</span>
</code><code id="L8"><span class="ln">8</span>
</code><code id="L9"><span class="ln">9</span>(<b>function</b> (window, <b>undefined</b>) {
</code><code id="L10"><span class="ln">10</span>
</code><code id="L11"><span class="ln">11</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L12"><span class="ln">12</span><span class="c"><span class="s"> * </span>$
</span></code><code id="L13"><span class="ln">13</span><span class="c"> [ object ]
</span></code><code id="L14"><span class="ln">14</span><span class="c"><span class="s"> * </span>Global namespace <b>for</b> using Kimbo functions
</span></code><code id="L15"><span class="ln">15</span><span class="c">\*/</span>
</code><code id="L16"><span class="ln">16</span>
</code><code id="L17"><span class="ln">17</span><b>var</b> _push<span class="s"> = </span>Array.prototype.push,
</code><code id="L18"><span class="ln">18</span>  _slice<span class="s"> = </span>Array.prototype.slice,
</code><code id="L19"><span class="ln">19</span>  _filter<span class="s"> = </span>Array.prototype.filter,
</code><code id="L20"><span class="ln">20</span>  document<span class="s"> = </span>window.document,
</code><code id="L21"><span class="ln">21</span>  rootContext;
</code><code id="L22"><span class="ln">22</span>
</code><code id="L23"><span class="ln">23</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L24"><span class="ln">24</span><span class="c"><span class="s"> * </span>$(…)
</span></code><code id="L25"><span class="ln">25</span><span class="c"><span class="s"> * </span>Kimbo object collection.
</span></code><code id="L26"><span class="ln">26</span><span class="c"><span class="s"> * </span>All methods called from a Kimbo collection affects all elements <b>in</b> it.
</span></code><code id="L27"><span class="ln">27</span><span class="c">\*/</span>
</code><code id="L28"><span class="ln">28</span><b>function</b> Kimbo(selector, context) {
</code><code id="L29"><span class="ln">29</span>  <b>var</b> elem, match;
</code><code id="L30"><span class="ln">30</span>
</code><code id="L31"><span class="ln">31</span>  <b>if</b> (!Kimbo.isKimbo(<b>this</b>)) {
</code><code id="L32"><span class="ln">32</span>    <b>return</b> <b>new</b> Kimbo(selector, context);
</code><code id="L33"><span class="ln">33</span>  }
</code><code id="L34"><span class="ln">34</span>
</code><code id="L35"><span class="ln">35</span>  <span class="c">// no selector, <b>return</b> empty Kimbo object</span>
</code><code id="L36"><span class="ln">36</span>  <b>if</b> (!selector) {
</code><code id="L37"><span class="ln">37</span>    <b>return</b> <b>this</b>;
</code><code id="L38"><span class="ln">38</span>  }
</code><code id="L39"><span class="ln">39</span>
</code><code id="L40"><span class="ln">40</span>  <span class="c">// already a dom element</span>
</code><code id="L41"><span class="ln">41</span>  <b>if</b> (selector.nodeType) {
</code><code id="L42"><span class="ln">42</span>    <b>this</b>[<span class="d">0</span>]<span class="s"> = </span>selector;
</code><code id="L43"><span class="ln">43</span>    <b>this</b>.length<span class="s"> = </span><span class="d">1</span>;
</code><code id="L44"><span class="ln">44</span>    <b>return</b> <b>this</b>;
</code><code id="L45"><span class="ln">45</span>  }
</code><code id="L46"><span class="ln">46</span>
</code><code id="L47"><span class="ln">47</span>  <span class="c">// asume a css selector, query the dom</span>
</code><code id="L48"><span class="ln">48</span>  <b>if</b> (<b>typeof</b> selector<span class="s"> === </span><i>'string'</i>) {
</code><code id="L49"><span class="ln">49</span>
</code><code id="L50"><span class="ln">50</span>    match<span class="s"> = </span>r_id.exec(selector);
</code><code id="L51"><span class="ln">51</span>
</code><code id="L52"><span class="ln">52</span>    <span class="c">// handle $(<i>'#id'</i>);</span>
</code><code id="L53"><span class="ln">53</span>    <b>if</b> (match<span class="s"> &amp;&amp; </span>match[<span class="d">1</span>]) {
</code><code id="L54"><span class="ln">54</span>      elem<span class="s"> = </span>document.getElementById(match[<span class="d">1</span>]);
</code><code id="L55"><span class="ln">55</span>
</code><code id="L56"><span class="ln">56</span>      <b>if</b> (elem) {
</code><code id="L57"><span class="ln">57</span>        <b>this</b>[<span class="d">0</span>]<span class="s"> = </span>elem;
</code><code id="L58"><span class="ln">58</span>        <b>this</b>.length<span class="s"> = </span><span class="d">1</span>;
</code><code id="L59"><span class="ln">59</span>      }
</code><code id="L60"><span class="ln">60</span>
</code><code id="L61"><span class="ln">61</span>      <b>return</b> <b>this</b>;
</code><code id="L62"><span class="ln">62</span>    }
</code><code id="L63"><span class="ln">63</span>
</code><code id="L64"><span class="ln">64</span>    <span class="c">// <b>if</b> no context find it on document</span>
</code><code id="L65"><span class="ln">65</span>    <span class="c">// or on the specified Kimbo context</span>
</code><code id="L66"><span class="ln">66</span>    <b>if</b> (!context<span class="s"> || </span>context.kimbo) {
</code><code id="L67"><span class="ln">67</span>      <b>return</b> (context<span class="s"> || </span>rootContext).find(selector);
</code><code id="L68"><span class="ln">68</span>
</code><code id="L69"><span class="ln">69</span>    <span class="c">// create <b>new</b> Kimbo object <b>with</b> the specified context</span>
</code><code id="L70"><span class="ln">70</span>    } <b>else</b> <b>if</b> (context) {
</code><code id="L71"><span class="ln">71</span>      <b>return</b> Kimbo(context).find(selector);
</code><code id="L72"><span class="ln">72</span>    }
</code><code id="L73"><span class="ln">73</span>
</code><code id="L74"><span class="ln">74</span>  <span class="c">// is a <b>function</b>, call it when DOM is ready</span>
</code><code id="L75"><span class="ln">75</span>  } <b>else</b> <b>if</b> (Kimbo.isFunction(selector)) {
</code><code id="L76"><span class="ln">76</span>    <b>return</b> rootContext.ready(selector);
</code><code id="L77"><span class="ln">77</span>  }
</code><code id="L78"><span class="ln">78</span>
</code><code id="L79"><span class="ln">79</span>  <span class="c">// handle kimbo object, plain objects or other objects</span>
</code><code id="L80"><span class="ln">80</span>  <b>return</b> Kimbo.makeArray(selector, <b>this</b>);
</code><code id="L81"><span class="ln">81</span>}
</code><code id="L82"><span class="ln">82</span>
</code><code id="L83"><span class="ln">83</span>Kimbo.fn<span class="s"> = </span>Kimbo.prototype<span class="s"> = </span>{
</code><code id="L84"><span class="ln">84</span>
</code><code id="L85"><span class="ln">85</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L86"><span class="ln">86</span><span class="c">  <span class="s"> * </span>$(…).length
</span></code><code id="L87"><span class="ln">87</span><span class="c">   [ property ]
</span></code><code id="L88"><span class="ln">88</span><span class="c">  <span class="s"> * </span>The length of the current Kimbo collection.
</span></code><code id="L89"><span class="ln">89</span><span class="c">  <span class="s"> = </span>(number) Integer representing the lenght of the current collection.
</span></code><code id="L90"><span class="ln">90</span><span class="c">   > Usage
</span></code><code id="L91"><span class="ln">91</span><span class="c">  <span class="s"> * </span>Having these paragraphs:
</span></code><code id="L92"><span class="ln">92</span><span class="c">  <span class="s"> | </span>&lt;p>one&lt;/p>
</span></code><code id="L93"><span class="ln">93</span><span class="c">  <span class="s"> | </span>&lt;p>two&lt;/p>
</span></code><code id="L94"><span class="ln">94</span><span class="c">  <span class="s"> | </span>&lt;p>three&lt;/p>
</span></code><code id="L95"><span class="ln">95</span><span class="c">  <span class="s"> * </span>Grab them and check <b>for</b> the length property:
</span></code><code id="L96"><span class="ln">96</span><span class="c">  <span class="s"> | </span>$(<i>'p'</i>).length; <span class="c">// <span class="d">2</span></span>
</span></code><code id="L97"><span class="ln">97</span><span class="c">  \*/</span>
</code><code id="L98"><span class="ln">98</span>  length: <span class="d">0</span>,
</code><code id="L99"><span class="ln">99</span>
</code><code id="L100"><span class="ln">100</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L101"><span class="ln">101</span><span class="c">  <span class="s"> * </span>$(…).ready
</span></code><code id="L102"><span class="ln">102</span><span class="c">   [ method ]
</span></code><code id="L103"><span class="ln">103</span><span class="c">  <span class="s"> * </span>Execute a callback after de DOM is completely loaded
</span></code><code id="L104"><span class="ln">104</span><span class="c">   > Parameters
</span></code><code id="L105"><span class="ln">105</span><span class="c">  <span class="s"> - </span>callback (<b>function</b>) A <b>function</b> to call after de DOM is ready
</span></code><code id="L106"><span class="ln">106</span><span class="c">  <span class="s"> = </span>(object) The original element
</span></code><code id="L107"><span class="ln">107</span><span class="c">   > Usage
</span></code><code id="L108"><span class="ln">108</span><span class="c">  <span class="s"> | </span>$(document).ready(<b>function</b> () {
</span></code><code id="L109"><span class="ln">109</span><span class="c">  <span class="s"> | </span>  console.log(<i>'the DOM is loaded!'</i>);
</span></code><code id="L110"><span class="ln">110</span><span class="c">  <span class="s"> | </span>});
</span></code><code id="L111"><span class="ln">111</span><span class="c">  <span class="s"> * </span>Or using the shortcut
</span></code><code id="L112"><span class="ln">112</span><span class="c">  <span class="s"> | </span>$(<b>function</b> () {
</span></code><code id="L113"><span class="ln">113</span><span class="c">  <span class="s"> | </span>  console.log('the DOM is loaded!);
</span></code><code id="L114"><span class="ln">114</span><span class="c">  <span class="s"> | </span>});
</span></code><code id="L115"><span class="ln">115</span><span class="c">  \*/</span>
</code><code id="L116"><span class="ln">116</span>  ready: <b>function</b> (callback) {
</code><code id="L117"><span class="ln">117</span>    <span class="c">// first check <b>if</b> already loaded</span>
</code><code id="L118"><span class="ln">118</span>    <b>if</b> (/t/.test(document.readyState)) {
</code><code id="L119"><span class="ln">119</span>      callback.call(document);
</code><code id="L120"><span class="ln">120</span>
</code><code id="L121"><span class="ln">121</span>    <span class="c">// listen when it loads</span>
</code><code id="L122"><span class="ln">122</span>    } <b>else</b> {
</code><code id="L123"><span class="ln">123</span>      document.addEventListener(<i>'DOMContentLoaded'</i>, callback, <b>false</b>);
</code><code id="L124"><span class="ln">124</span>    }
</code><code id="L125"><span class="ln">125</span>
</code><code id="L126"><span class="ln">126</span>    <b>return</b> rootContext;
</code><code id="L127"><span class="ln">127</span>  },
</code><code id="L128"><span class="ln">128</span>
</code><code id="L129"><span class="ln">129</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L130"><span class="ln">130</span><span class="c">  <span class="s"> * </span>$(…).get
</span></code><code id="L131"><span class="ln">131</span><span class="c">   [ method ]
</span></code><code id="L132"><span class="ln">132</span><span class="c">  <span class="s"> * </span>Retrieve <b>native</b> DOM elements
</span></code><code id="L133"><span class="ln">133</span><span class="c">   > Parameters
</span></code><code id="L134"><span class="ln">134</span><span class="c">  <span class="s"> - </span>index (number) #optional A zero-based integer indicating which element to retrieve, supports going backwards <b>with</b> negative index.
</span></code><code id="L135"><span class="ln">135</span><span class="c">  <span class="s"> = </span>(array|object) An array of the <b>native</b> DOM elements or the specified element by index matched by Kimbo.
</span></code><code id="L136"><span class="ln">136</span><span class="c">   > Usage
</span></code><code id="L137"><span class="ln">137</span><span class="c">  <span class="s"> | </span>&lt;ul>
</span></code><code id="L138"><span class="ln">138</span><span class="c">  <span class="s"> | </span>  &lt;li id=<i>"foo"</i>>&lt;/li>
</span></code><code id="L139"><span class="ln">139</span><span class="c">  <span class="s"> | </span>  &lt;li id=<i>"bar"</i>>&lt;/li>
</span></code><code id="L140"><span class="ln">140</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L141"><span class="ln">141</span><span class="c">  <span class="s"> * </span>Get standard array of elements
</span></code><code id="L142"><span class="ln">142</span><span class="c">  <span class="s"> | </span>$(<i>'li'</i>).get(); <span class="c">// [&lt;li id=<i>"foo"</i>>, &lt;li id=<i>"bar"</i>>]</span>
</span></code><code id="L143"><span class="ln">143</span><span class="c">  <span class="s"> * </span>Get the first element
</span></code><code id="L144"><span class="ln">144</span><span class="c">  <span class="s"> | </span>$(<i>'li'</i>).get(<span class="d">0</span>); <span class="c">// &lt;li id=<i>"foo"</i>></span>
</span></code><code id="L145"><span class="ln">145</span><span class="c">  <span class="s"> * </span>Get the last element
</span></code><code id="L146"><span class="ln">146</span><span class="c">  <span class="s"> | </span>$(<i>'li'</i>).get(-<span class="d">1</span>); <span class="c">// &lt;li id=<i>"bar"</i>></span>
</span></code><code id="L147"><span class="ln">147</span><span class="c">  \*/</span>
</code><code id="L148"><span class="ln">148</span>  get: <b>function</b> (index) {
</code><code id="L149"><span class="ln">149</span>    <b>return</b> (!arguments.length) ? _slice.call(<b>this</b>) : (index &lt; <span class="d">0</span> ? <b>this</b>[<b>this</b>.length<span class="s"> + </span>index] : Kimbo(<b>this</b>[index]));
</code><code id="L150"><span class="ln">150</span>  },
</code><code id="L151"><span class="ln">151</span>
</code><code id="L152"><span class="ln">152</span>  <span class="c">// needed to have an array-like object</span>
</code><code id="L153"><span class="ln">153</span>  splice: Array.prototype.splice
</code><code id="L154"><span class="ln">154</span>};
</code><code id="L155"><span class="ln">155</span>
</code><code id="L156"><span class="ln">156</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L157"><span class="ln">157</span><span class="c"><span class="s"> * </span>$.forEach
</span></code><code id="L158"><span class="ln">158</span><span class="c"> [ method ]
</span></code><code id="L159"><span class="ln">159</span><span class="c"><span class="s"> * </span>Iterator <b>function</b> that can be used to seamlessly iterate over both objects and arrays.
</span></code><code id="L160"><span class="ln">160</span><span class="c"> > Parameters
</span></code><code id="L161"><span class="ln">161</span><span class="c"><span class="s"> - </span>obj (object) Object or array to iterate
</span></code><code id="L162"><span class="ln">162</span><span class="c"><span class="s"> - </span>callback (<b>function</b>) Function that will be executed on each iteration
</span></code><code id="L163"><span class="ln">163</span><span class="c"><span class="s"> = </span>(object) The original array or object
</span></code><code id="L164"><span class="ln">164</span><span class="c"> > Usage
</span></code><code id="L165"><span class="ln">165</span><span class="c"><span class="s"> | </span><span class="c">// iterating array</span>
</span></code><code id="L166"><span class="ln">166</span><span class="c"><span class="s"> | </span>$.forEach([<i>'a'</i>, <i>'b'</i>, <i>'c'</i>], <b>function</b> (index, value) {
</span></code><code id="L167"><span class="ln">167</span><span class="c"><span class="s"> | </span>  alert(index<span class="s"> + </span><i>': '</i><span class="s"> + </span>value);
</span></code><code id="L168"><span class="ln">168</span><span class="c"><span class="s"> | </span>});
</span></code><code id="L169"><span class="ln">169</span><span class="c"> |
</span></code><code id="L170"><span class="ln">170</span><span class="c"><span class="s"> | </span><span class="c">// iterating object</span>
</span></code><code id="L171"><span class="ln">171</span><span class="c"><span class="s"> | </span>$.forEach({name: <i>'Denis'</i>, surname: <i>'Ciccale'</i>}, <b>function</b> (key, value) {
</span></code><code id="L172"><span class="ln">172</span><span class="c"><span class="s"> | </span>  alert(key<span class="s"> + </span><i>': '</i><span class="s"> + </span>value);
</span></code><code id="L173"><span class="ln">173</span><span class="c"><span class="s"> | </span>});
</span></code><code id="L174"><span class="ln">174</span><span class="c">\*/</span>
</code><code id="L175"><span class="ln">175</span>Kimbo.forEach<span class="s"> = </span><b>function</b> (obj, callback) {
</code><code id="L176"><span class="ln">176</span>  <b>var</b> i,
</code><code id="L177"><span class="ln">177</span>    l<span class="s"> = </span>obj.length,
</code><code id="L178"><span class="ln">178</span>    isObj<span class="s"> = </span>l<span class="s"> === </span><b>undefined</b><span class="s"> || </span><b>typeof</b> obj<span class="s"> === </span><i>'<b>function</b>'</i>;
</code><code id="L179"><span class="ln">179</span>
</code><code id="L180"><span class="ln">180</span>  <b>if</b> (isObj) {
</code><code id="L181"><span class="ln">181</span>    <b>for</b> (i <b>in</b> obj) {
</code><code id="L182"><span class="ln">182</span>      <b>if</b> (obj.hasOwnProperty(i)<span class="s"> &amp;&amp; </span>callback.call(obj[i], i, obj[i], obj)<span class="s"> === </span><b>false</b>) {
</code><code id="L183"><span class="ln">183</span>        <b>break</b>;
</code><code id="L184"><span class="ln">184</span>      }
</code><code id="L185"><span class="ln">185</span>    }
</code><code id="L186"><span class="ln">186</span>  } <b>else</b> {
</code><code id="L187"><span class="ln">187</span>    <b>for</b> (i<span class="s"> = </span><span class="d">0</span>; i &lt; l; i++) {
</code><code id="L188"><span class="ln">188</span>      <b>if</b> (callback.call(obj[i], obj[i], i, obj)<span class="s"> === </span><b>false</b>) {
</code><code id="L189"><span class="ln">189</span>        <b>break</b>;
</code><code id="L190"><span class="ln">190</span>      }
</code><code id="L191"><span class="ln">191</span>    }
</code><code id="L192"><span class="ln">192</span>  }
</code><code id="L193"><span class="ln">193</span>
</code><code id="L194"><span class="ln">194</span>  <span class="c">// <b>return</b> original obj</span>
</code><code id="L195"><span class="ln">195</span>  <b>return</b> obj;
</code><code id="L196"><span class="ln">196</span>};
</code><code id="L197"><span class="ln">197</span>
</code><code id="L198"><span class="ln">198</span>
</code><code id="L199"><span class="ln">199</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L200"><span class="ln">200</span><span class="c"><span class="s"> * </span>$.extend
</span></code><code id="L201"><span class="ln">201</span><span class="c"> [ method ]
</span></code><code id="L202"><span class="ln">202</span><span class="c"><span class="s"> * </span>Merge the contents of two or more objects together into the first object.
</span></code><code id="L203"><span class="ln">203</span><span class="c"> > Parameters
</span></code><code id="L204"><span class="ln">204</span><span class="c"><span class="s"> - </span>target (object|<b>boolean</b>) Object that will receive the merged properties <b>if</b> objects are passed, or target will extend Kimbo object. If target is `<b>true</b>` the passed objects will be recursively merged.
</span></code><code id="L205"><span class="ln">205</span><span class="c"><span class="s"> - </span>objectN (object) #optional One or more objects <b>with</b> additional properties.
</span></code><code id="L206"><span class="ln">206</span><span class="c"><span class="s"> = </span>(object) The extended target or a <b>new</b> copy <b>if</b> target is an empty object.
</span></code><code id="L207"><span class="ln">207</span><span class="c"> > Usage
</span></code><code id="L208"><span class="ln">208</span><span class="c"><span class="s"> * </span>When passing two or more objects, all properties will be merged into the target object.
</span></code><code id="L209"><span class="ln">209</span><span class="c"><span class="s"> | </span><b>var</b> obj1<span class="s"> = </span>{ msg: <i>'hi'</i>, info: { from: <i>'Denis'</i> }};
</span></code><code id="L210"><span class="ln">210</span><span class="c"><span class="s"> | </span><b>var</b> obj2<span class="s"> = </span>{ msg: <i>'Hi!'</i>, info: { time: <i>'<span class="d">22</span>:00PM'</i> }};
</span></code><code id="L211"><span class="ln">211</span><span class="c"> |
</span></code><code id="L212"><span class="ln">212</span><span class="c"><span class="s"> | </span><span class="c">// merge obj1 into obj2</span>
</span></code><code id="L213"><span class="ln">213</span><span class="c"><span class="s"> | </span>$.extend(obj1, obj2);
</span></code><code id="L214"><span class="ln">214</span><span class="c"> |
</span></code><code id="L215"><span class="ln">215</span><span class="c"><span class="s"> | </span><span class="c">// now obj1 is equal to:</span>
</span></code><code id="L216"><span class="ln">216</span><span class="c"><span class="s"> | </span>{ msg: <i>'Hi!'</i>, info: { time: <i>'<span class="d">22</span>:00PM'</i> }}
</span></code><code id="L217"><span class="ln">217</span><span class="c"><span class="s"> * </span>If an empty target object is passed, none of the other objects will be directly modified
</span></code><code id="L218"><span class="ln">218</span><span class="c"><span class="s"> | </span><span class="c">// pass an empty target</span>
</span></code><code id="L219"><span class="ln">219</span><span class="c"><span class="s"> | </span><b>var</b> obj3<span class="s"> = </span>$.extend({}, obj1, obj);
</span></code><code id="L220"><span class="ln">220</span><span class="c"><span class="s"> * </span>To <b>do</b> a recursive merge, pass <b>true</b> as first argument, then the objects to merge
</span></code><code id="L221"><span class="ln">221</span><span class="c"><span class="s"> | </span>$.extend(<b>true</b>, obj1, obj2);
</span></code><code id="L222"><span class="ln">222</span><span class="c"><span class="s"> | </span><span class="c">// obj1 will be:</span>
</span></code><code id="L223"><span class="ln">223</span><span class="c"><span class="s"> | </span>{ msg: <i>'Hi!'</i>, info: { from: <i>'Denis'</i>, time: <i>'<span class="d">22</span>:00PM'</i> }}
</span></code><code id="L224"><span class="ln">224</span><span class="c">\*/</span>
</code><code id="L225"><span class="ln">225</span>Kimbo.extend<span class="s"> = </span>Kimbo.fn.extend<span class="s"> = </span><b>function</b> () {
</code><code id="L226"><span class="ln">226</span>  <b>var</b> objs<span class="s"> = </span>arguments,
</code><code id="L227"><span class="ln">227</span>    target<span class="s"> = </span>objs[<span class="d">0</span>]<span class="s"> || </span>{},
</code><code id="L228"><span class="ln">228</span>    deep<span class="s"> = </span>(target<span class="s"> === </span><b>true</b>),
</code><code id="L229"><span class="ln">229</span>    cut<span class="s"> = </span><span class="d">1</span>;
</code><code id="L230"><span class="ln">230</span>
</code><code id="L231"><span class="ln">231</span>  <span class="c">// check <b>for</b> deep copy</span>
</code><code id="L232"><span class="ln">232</span>  <b>if</b> (deep) {
</code><code id="L233"><span class="ln">233</span>    target<span class="s"> = </span>objs[<span class="d">1</span>]<span class="s"> || </span>{};
</code><code id="L234"><span class="ln">234</span>    cut<span class="s"> = </span><span class="d">2</span>;
</code><code id="L235"><span class="ln">235</span>
</code><code id="L236"><span class="ln">236</span>  <span class="c">// extend Kimbo itself <b>if</b> only one argument is passed</span>
</code><code id="L237"><span class="ln">237</span>  } <b>else</b> <b>if</b> (objs.length<span class="s"> === </span><span class="d">1</span>) {
</code><code id="L238"><span class="ln">238</span>    target<span class="s"> = </span><b>this</b>;
</code><code id="L239"><span class="ln">239</span>    cut<span class="s"> = </span><span class="d">0</span>;
</code><code id="L240"><span class="ln">240</span>  }
</code><code id="L241"><span class="ln">241</span>
</code><code id="L242"><span class="ln">242</span>  <span class="c">// make an array from the arguments</span>
</code><code id="L243"><span class="ln">243</span>  <span class="c">// removing unnecessary objects</span>
</code><code id="L244"><span class="ln">244</span>  objs<span class="s"> = </span>_slice.call(objs, cut);
</code><code id="L245"><span class="ln">245</span>
</code><code id="L246"><span class="ln">246</span>  <span class="c">// loop through the objects</span>
</code><code id="L247"><span class="ln">247</span>  Kimbo.forEach(objs, <b>function</b> (source) {
</code><code id="L248"><span class="ln">248</span>    <span class="c">// populate target from source</span>
</code><code id="L249"><span class="ln">249</span>    Kimbo.forEach(source, <b>function</b> (key, value) {
</code><code id="L250"><span class="ln">250</span>      <b>var</b> src;
</code><code id="L251"><span class="ln">251</span>
</code><code id="L252"><span class="ln">252</span>      <b>if</b> (deep<span class="s"> &amp;&amp; </span>(Kimbo.isObject(value)<span class="s"> || </span>Kimbo.isArray(value))) {
</code><code id="L253"><span class="ln">253</span>        src<span class="s"> = </span>target[key];
</code><code id="L254"><span class="ln">254</span>        target[key]<span class="s"> = </span>Kimbo.extend(deep, src, value);
</code><code id="L255"><span class="ln">255</span>
</code><code id="L256"><span class="ln">256</span>      } <b>else</b> <b>if</b> (value !== <b>undefined</b>) {
</code><code id="L257"><span class="ln">257</span>        target[key]<span class="s"> = </span>value;
</code><code id="L258"><span class="ln">258</span>      }
</code><code id="L259"><span class="ln">259</span>    });
</code><code id="L260"><span class="ln">260</span>  });
</code><code id="L261"><span class="ln">261</span>
</code><code id="L262"><span class="ln">262</span>  <b>return</b> target;
</code><code id="L263"><span class="ln">263</span>};
</code><code id="L264"><span class="ln">264</span>
</code><code id="L265"><span class="ln">265</span>
</code><code id="L266"><span class="ln">266</span><b>var</b> r_id<span class="s"> = </span>/^#([\w\-]+)$/,
</code><code id="L267"><span class="ln">267</span>  r_class<span class="s"> = </span>/^\.([\w\-]+)$/,
</code><code id="L268"><span class="ln">268</span>  r_tag<span class="s"> = </span>/^[\w\-]+$/,
</code><code id="L269"><span class="ln">269</span>  r_name<span class="s"> = </span>/^\[name=[<i>"']?([\w\-]+)["</i>']?\]$/;
</code><code id="L270"><span class="ln">270</span>
</code><code id="L271"><span class="ln">271</span>
</code><code id="L272"><span class="ln">272</span><span class="c">// use querySelectoAll but optimize <b>for</b> id, <b>class</b>, tagName and name</span>
</code><code id="L273"><span class="ln">273</span><span class="c">// much, much faster than only using querySelectorAll</span>
</code><code id="L274"><span class="ln">274</span><b>function</b> _query(element, selector) {
</code><code id="L275"><span class="ln">275</span>  <b>var</b> els<span class="s"> = </span>[], sel;
</code><code id="L276"><span class="ln">276</span>
</code><code id="L277"><span class="ln">277</span>  <span class="c">// #id</span>
</code><code id="L278"><span class="ln">278</span>  <b>if</b> (element<span class="s"> === </span>document<span class="s"> &amp;&amp; </span>(sel<span class="s"> = </span>r_id.exec(selector))) {
</code><code id="L279"><span class="ln">279</span>    els<span class="s"> = </span>element.getElementById(sel[<span class="d">1</span>]);
</code><code id="L280"><span class="ln">280</span>
</code><code id="L281"><span class="ln">281</span>  <span class="c">// .<b>class</b></span>
</code><code id="L282"><span class="ln">282</span>  } <b>else</b> <b>if</b> ((sel<span class="s"> = </span>r_class.exec(selector))) {
</code><code id="L283"><span class="ln">283</span>    els<span class="s"> = </span>element.getElementsByClassName(sel[<span class="d">1</span>]);
</code><code id="L284"><span class="ln">284</span>
</code><code id="L285"><span class="ln">285</span>  <span class="c">// tag</span>
</code><code id="L286"><span class="ln">286</span>  } <b>else</b> <b>if</b> (r_tag.test(selector)) {
</code><code id="L287"><span class="ln">287</span>    els<span class="s"> = </span>element.getElementsByTagName(selector);
</code><code id="L288"><span class="ln">288</span>
</code><code id="L289"><span class="ln">289</span>  <span class="c">// [name=val]</span>
</code><code id="L290"><span class="ln">290</span>  } <b>else</b> <b>if</b> ((sel<span class="s"> = </span>r_name.exec(selector))) {
</code><code id="L291"><span class="ln">291</span>    els<span class="s"> = </span>element.getElementsByName(sel[<span class="d">1</span>]);
</code><code id="L292"><span class="ln">292</span>
</code><code id="L293"><span class="ln">293</span>  <span class="c">// any other css selector</span>
</code><code id="L294"><span class="ln">294</span>  } <b>else</b> {
</code><code id="L295"><span class="ln">295</span>    els<span class="s"> = </span>element.querySelectorAll(selector);
</code><code id="L296"><span class="ln">296</span>  }
</code><code id="L297"><span class="ln">297</span>
</code><code id="L298"><span class="ln">298</span>  <span class="c">// <b>return</b> NodeList/Node as an array</span>
</code><code id="L299"><span class="ln">299</span>  <b>return</b> _slice.call(els);
</code><code id="L300"><span class="ln">300</span>}
</code><code id="L301"><span class="ln">301</span>
</code><code id="L302"><span class="ln">302</span><span class="c">// a better DOM Level <span class="d">4</span> contains</span>
</code><code id="L303"><span class="ln">303</span><span class="c">// http://webdecs.wordpress.com/<span class="d">2012</span>/<span class="d">08</span>/<span class="d">05</span>/mejorando-el-metodo-contains-dom4-javascript/</span>
</code><code id="L304"><span class="ln">304</span><b>function</b> _contains(el1, el2) {
</code><code id="L305"><span class="ln">305</span>  <b>return</b> (el1<span class="s"> === </span>window<span class="s"> &amp;&amp; </span>(el2<span class="s"> &amp;&amp; </span>(el2<span class="s"> === </span>window<span class="s"> || </span>el2.nodeType)))<span class="s"> || </span>((el1<span class="s"> &amp;&amp; </span>el1.nodeType)<span class="s"> &amp;&amp; </span>(el2<span class="s"> &amp;&amp; </span>el2.nodeType)) ? (el1.contains ? el1.contains(el2) : <b>true</b>) : <b>false</b>;
</code><code id="L306"><span class="ln">306</span>}
</code><code id="L307"><span class="ln">307</span>
</code><code id="L308"><span class="ln">308</span>
</code><code id="L309"><span class="ln">309</span><span class="c">// properties without <i>'px'</i> at the end</span>
</code><code id="L310"><span class="ln">310</span><b>var</b> cssNumber<span class="s"> = </span>{ fontWeight: <b>true</b>, lineHeight: <b>true</b>, opacity: <b>true</b>, zIndex: <b>true</b> },
</code><code id="L311"><span class="ln">311</span>  r_space<span class="s"> = </span>/\s+/;
</code><code id="L312"><span class="ln">312</span>
</code><code id="L313"><span class="ln">313</span><span class="c">// user <b>native</b> classList</span>
</code><code id="L314"><span class="ln">314</span><b>function</b> _hasClass(elem, name) {
</code><code id="L315"><span class="ln">315</span>  <b>return</b> (elem.nodeType<span class="s"> === </span><span class="d">1</span><span class="s"> &amp;&amp; </span>elem.classList.contains(name));
</code><code id="L316"><span class="ln">316</span>}
</code><code id="L317"><span class="ln">317</span>
</code><code id="L318"><span class="ln">318</span><span class="c">// wrap <b>native</b> to extend behavoiur</span>
</code><code id="L319"><span class="ln">319</span><b>function</b> _getComputedStyle(element, property) {
</code><code id="L320"><span class="ln">320</span>  <span class="c">// support both camelCase and dashed property names</span>
</code><code id="L321"><span class="ln">321</span>  property<span class="s"> = </span>property.replace(/([A-Z])/g, <i>'-$<span class="d">1</span>'</i>).toLowerCase();
</code><code id="L322"><span class="ln">322</span>  <b>return</b> window.getComputedStyle(element, <b>null</b>).getPropertyValue(property);
</code><code id="L323"><span class="ln">323</span>}
</code><code id="L324"><span class="ln">324</span>
</code><code id="L325"><span class="ln">325</span><b>var</b> _data<span class="s"> = </span>(<b>function</b>() {
</code><code id="L326"><span class="ln">326</span>  <b>var</b> cache<span class="s"> = </span>{},
</code><code id="L327"><span class="ln">327</span>    data_id<span class="s"> = </span><span class="d">1</span>;
</code><code id="L328"><span class="ln">328</span>
</code><code id="L329"><span class="ln">329</span>  <b>return</b> {
</code><code id="L330"><span class="ln">330</span>    get: <b>function</b>(dom, name) {
</code><code id="L331"><span class="ln">331</span>      <b>var</b> dom_cache<span class="s"> = </span>cache[dom.__data],
</code><code id="L332"><span class="ln">332</span>        value;
</code><code id="L333"><span class="ln">333</span>
</code><code id="L334"><span class="ln">334</span>      <span class="c">// look first <b>in</b> cached data</span>
</code><code id="L335"><span class="ln">335</span>      <b>if</b> (dom_cache) {
</code><code id="L336"><span class="ln">336</span>        value<span class="s"> = </span>dom_cache[name];
</code><code id="L337"><span class="ln">337</span>      }
</code><code id="L338"><span class="ln">338</span>
</code><code id="L339"><span class="ln">339</span>      <span class="c">// <b>if</b> none, <b>try</b> dataset</span>
</code><code id="L340"><span class="ln">340</span>      <b>if</b> (!value) {
</code><code id="L341"><span class="ln">341</span>        value<span class="s"> = </span>dom.dataset[name];
</code><code id="L342"><span class="ln">342</span>        <b>this</b>.set(dom, name, value);
</code><code id="L343"><span class="ln">343</span>      }
</code><code id="L344"><span class="ln">344</span>
</code><code id="L345"><span class="ln">345</span>      <b>return</b> value;
</code><code id="L346"><span class="ln">346</span>    },
</code><code id="L347"><span class="ln">347</span>
</code><code id="L348"><span class="ln">348</span>    set: <b>function</b> (dom, name, value) {
</code><code id="L349"><span class="ln">349</span>      <b>var</b> dom_data<span class="s"> = </span>dom.__data,
</code><code id="L350"><span class="ln">350</span>        dom_cache;
</code><code id="L351"><span class="ln">351</span>
</code><code id="L352"><span class="ln">352</span>      <b>if</b> (!dom_data) {
</code><code id="L353"><span class="ln">353</span>        dom_data<span class="s"> = </span>dom.__data<span class="s"> = </span>data_id++;
</code><code id="L354"><span class="ln">354</span>      }
</code><code id="L355"><span class="ln">355</span>
</code><code id="L356"><span class="ln">356</span>      dom_cache<span class="s"> = </span>cache[dom_data];
</code><code id="L357"><span class="ln">357</span>      <b>if</b> (!dom_cache) {
</code><code id="L358"><span class="ln">358</span>        dom_cache<span class="s"> = </span>cache[dom_data]<span class="s"> = </span>{};
</code><code id="L359"><span class="ln">359</span>      }
</code><code id="L360"><span class="ln">360</span>
</code><code id="L361"><span class="ln">361</span>      <span class="c">// set data</span>
</code><code id="L362"><span class="ln">362</span>      dom_cache[name]<span class="s"> = </span>value;
</code><code id="L363"><span class="ln">363</span>    },
</code><code id="L364"><span class="ln">364</span>
</code><code id="L365"><span class="ln">365</span>    remove: <b>function</b> (dom, name) {
</code><code id="L366"><span class="ln">366</span>      <b>delete</b> cache[dom.__data][name];
</code><code id="L367"><span class="ln">367</span>      <b>if</b> (Kimbo.isEmptyObject(cache[dom.__data])) {
</code><code id="L368"><span class="ln">368</span>        <b>delete</b> cache[dom.__data];
</code><code id="L369"><span class="ln">369</span>        <b>delete</b> dom.__data;
</code><code id="L370"><span class="ln">370</span>      }
</code><code id="L371"><span class="ln">371</span>    }
</code><code id="L372"><span class="ln">372</span>  };
</code><code id="L373"><span class="ln">373</span>}());
</code><code id="L374"><span class="ln">374</span>
</code><code id="L375"><span class="ln">375</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L376"><span class="ln">376</span><span class="c"><span class="s"> * </span>$(…).text
</span></code><code id="L377"><span class="ln">377</span><span class="c"> [ method ]
</span></code><code id="L378"><span class="ln">378</span><span class="c"><span class="s"> * </span>Get the text of the first element <b>in</b> the set or set the text of all the matched elements.
</span></code><code id="L379"><span class="ln">379</span><span class="c"> > Parameters
</span></code><code id="L380"><span class="ln">380</span><span class="c"><span class="s"> - </span>value (string) #optional A string of text to set as the text content of all matched elements.
</span></code><code id="L381"><span class="ln">381</span><span class="c"><span class="s"> = </span>(string) string value of the text content of the element <b>if</b> no parameter passed.
</span></code><code id="L382"><span class="ln">382</span><span class="c"><span class="s"> = </span>(object) current Kimbo object.
</span></code><code id="L383"><span class="ln">383</span><span class="c"> > Usage
</span></code><code id="L384"><span class="ln">384</span><span class="c"><span class="s"> * </span>Get the text content of an element
</span></code><code id="L385"><span class="ln">385</span><span class="c"><span class="s"> | </span>&lt;p>Demo text&lt;/p>
</span></code><code id="L386"><span class="ln">386</span><span class="c"><span class="s"> * </span>without passing any parameter to the <b>function</b>:
</span></code><code id="L387"><span class="ln">387</span><span class="c"><span class="s"> | </span>$(<i>'p'</i>).text(); <span class="c">// <i>'Demo text'</i></span>
</span></code><code id="L388"><span class="ln">388</span><span class="c"><span class="s"> * </span>To replace the text of the paragraph pass a string parameter to the <b>function</b>:
</span></code><code id="L389"><span class="ln">389</span><span class="c"><span class="s"> | </span>$(<i>'p'</i>).text(<i>'Another text'</i>);
</span></code><code id="L390"><span class="ln">390</span><span class="c"><span class="s"> * </span>Now the text content was replaced:
</span></code><code id="L391"><span class="ln">391</span><span class="c"><span class="s"> | </span>&lt;p>Another text&lt;/p>
</span></code><code id="L392"><span class="ln">392</span><span class="c"> \*/</span>
</code><code id="L393"><span class="ln">393</span>
</code><code id="L394"><span class="ln">394</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L395"><span class="ln">395</span><span class="c"><span class="s"> * </span>$(…).html
</span></code><code id="L396"><span class="ln">396</span><span class="c"> [ method ]
</span></code><code id="L397"><span class="ln">397</span><span class="c"><span class="s"> * </span>Get the HTML content of the first element <b>in</b> the set or set the HTML content of all the matched elements.
</span></code><code id="L398"><span class="ln">398</span><span class="c"> > Parameters
</span></code><code id="L399"><span class="ln">399</span><span class="c"><span class="s"> - </span>value (string) #optional A string of HTML to set as the HTML content of all matched elements.
</span></code><code id="L400"><span class="ln">400</span><span class="c"><span class="s"> = </span>(string) a string value of the HTML content of the element <b>if</b> no parameter passed.
</span></code><code id="L401"><span class="ln">401</span><span class="c"><span class="s"> = </span>(object) current Kimbo object.
</span></code><code id="L402"><span class="ln">402</span><span class="c"> > Usage
</span></code><code id="L403"><span class="ln">403</span><span class="c"><span class="s"> * </span>Get the HTML content of an element
</span></code><code id="L404"><span class="ln">404</span><span class="c"><span class="s"> | </span>&lt;p>&lt;span>Demo text&lt;span>&lt;/p>
</span></code><code id="L405"><span class="ln">405</span><span class="c"><span class="s"> * </span>without passing any parameter to the <b>function</b>:
</span></code><code id="L406"><span class="ln">406</span><span class="c"><span class="s"> | </span>$(<i>'p'</i>).html(); <span class="c">// <i>'&lt;span>Demo tetxt&lt;/span>'</i></span>
</span></code><code id="L407"><span class="ln">407</span><span class="c"><span class="s"> * </span>To replace the HTML content of the paragraph pass a string parameter to the <b>function</b>:
</span></code><code id="L408"><span class="ln">408</span><span class="c"><span class="s"> | </span>$(<i>'p'</i>).html(<i>'&lt;strong>Another content&lt;/strong>'</i>);
</span></code><code id="L409"><span class="ln">409</span><span class="c"><span class="s"> * </span>Now the text content was replaced:
</span></code><code id="L410"><span class="ln">410</span><span class="c"><span class="s"> | </span>&lt;p>&lt;strong>Another content&lt;/strong>&lt;/p>
</span></code><code id="L411"><span class="ln">411</span><span class="c"> \*/</span>
</code><code id="L412"><span class="ln">412</span>
</code><code id="L413"><span class="ln">413</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L414"><span class="ln">414</span><span class="c"><span class="s"> * </span>$(…).val
</span></code><code id="L415"><span class="ln">415</span><span class="c"> [ method ]
</span></code><code id="L416"><span class="ln">416</span><span class="c"><span class="s"> * </span>Get the current value of the first element <b>in</b> the set or set the value of all the matched elements.
</span></code><code id="L417"><span class="ln">417</span><span class="c"> > Parameters
</span></code><code id="L418"><span class="ln">418</span><span class="c"><span class="s"> - </span>value (string) #optional A string of text to set as the value of all matched elements.
</span></code><code id="L419"><span class="ln">419</span><span class="c"><span class="s"> = </span>(string) the current value of the first element <b>if</b> no parameter passed
</span></code><code id="L420"><span class="ln">420</span><span class="c"><span class="s"> = </span>(object) current Kimbo object
</span></code><code id="L421"><span class="ln">421</span><span class="c"> > Usage
</span></code><code id="L422"><span class="ln">422</span><span class="c"><span class="s"> * </span>Get the value of a form element:
</span></code><code id="L423"><span class="ln">423</span><span class="c"><span class="s"> | </span>&lt;input type=<i>"text"</i> name=<i>"color"</i> value=<i>"red"</i> />
</span></code><code id="L424"><span class="ln">424</span><span class="c"><span class="s"> * </span>without passing any parameter to the <b>function</b>:
</span></code><code id="L425"><span class="ln">425</span><span class="c"><span class="s"> | </span>$(<i>'input'</i>).val(); <span class="c">// <i>'red'</i></span>
</span></code><code id="L426"><span class="ln">426</span><span class="c"><span class="s"> * </span>To change the value of the input pass a string parameter to the <b>function</b>:
</span></code><code id="L427"><span class="ln">427</span><span class="c"><span class="s"> | </span>$(<i>'input'</i>).val(<i>'blue'</i>);
</span></code><code id="L428"><span class="ln">428</span><span class="c"><span class="s"> * </span>Now the value was changed:
</span></code><code id="L429"><span class="ln">429</span><span class="c"><span class="s"> | </span>$(<i>'input'</i>).val(); <span class="c">// <i>'blue'</i></span>
</span></code><code id="L430"><span class="ln">430</span><span class="c"> \*/</span>
</code><code id="L431"><span class="ln">431</span>Kimbo.forEach({
</code><code id="L432"><span class="ln">432</span>  text: <i>'textContent'</i>,
</code><code id="L433"><span class="ln">433</span>  html: <i>'innerHTML'</i>,
</code><code id="L434"><span class="ln">434</span>  val: <i>'value'</i>
</code><code id="L435"><span class="ln">435</span>}, <b>function</b> (method, prop) {
</code><code id="L436"><span class="ln">436</span>  Kimbo.fn[ method ]<span class="s"> = </span><b>function</b> (value) {
</code><code id="L437"><span class="ln">437</span>
</code><code id="L438"><span class="ln">438</span>    <span class="c">// no element</span>
</code><code id="L439"><span class="ln">439</span>    <b>if</b> (!<b>this</b>[<span class="d">0</span>]) {
</code><code id="L440"><span class="ln">440</span>      <b>return</b> <b>undefined</b>;
</code><code id="L441"><span class="ln">441</span>    }
</code><code id="L442"><span class="ln">442</span>
</code><code id="L443"><span class="ln">443</span>    <span class="c">// get</span>
</code><code id="L444"><span class="ln">444</span>    <b>if</b> (value<span class="s"> === </span><b>undefined</b>) {
</code><code id="L445"><span class="ln">445</span>      <b>return</b> <b>this</b>[<span class="d">0</span>][prop];
</code><code id="L446"><span class="ln">446</span>
</code><code id="L447"><span class="ln">447</span>      <span class="c">// set</span>
</code><code id="L448"><span class="ln">448</span>    } <b>else</b> {
</code><code id="L449"><span class="ln">449</span>      <b>return</b> <b>this</b>.each(<b>function</b> () {
</code><code id="L450"><span class="ln">450</span>        <b>this</b>[prop]<span class="s"> = </span>value;
</code><code id="L451"><span class="ln">451</span>      });
</code><code id="L452"><span class="ln">452</span>    }
</code><code id="L453"><span class="ln">453</span>  };
</code><code id="L454"><span class="ln">454</span>});
</code><code id="L455"><span class="ln">455</span>
</code><code id="L456"><span class="ln">456</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L457"><span class="ln">457</span><span class="c"><span class="s"> * </span>$(…).addClass
</span></code><code id="L458"><span class="ln">458</span><span class="c"> [ method ]
</span></code><code id="L459"><span class="ln">459</span><span class="c"><span class="s"> * </span>Adds a <b>class</b> to all matched elements.
</span></code><code id="L460"><span class="ln">460</span><span class="c"> > Parameters
</span></code><code id="L461"><span class="ln">461</span><span class="c"><span class="s"> - </span>name (string) Name of the <b>class</b> to add.
</span></code><code id="L462"><span class="ln">462</span><span class="c"><span class="s"> = </span>(object) Original matched collection.
</span></code><code id="L463"><span class="ln">463</span><span class="c"> > Usage
</span></code><code id="L464"><span class="ln">464</span><span class="c"><span class="s"> | </span>&lt;p>I want to be green&lt;/p>
</span></code><code id="L465"><span class="ln">465</span><span class="c"><span class="s"> | </span>&lt;script>
</span></code><code id="L466"><span class="ln">466</span><span class="c"><span class="s"> | </span>$(<i>'p'</i>).addClass(<i>'green'</i>);
</span></code><code id="L467"><span class="ln">467</span><span class="c"><span class="s"> | </span>&lt;/script>
</span></code><code id="L468"><span class="ln">468</span><span class="c"><span class="s"> * </span>Now it's green
</span></code><code id="L469"><span class="ln">469</span><span class="c"><span class="s"> | </span>&lt;p <b>class</b>=<i>"green"</i>>I want to be green&lt;/p>
</span></code><code id="L470"><span class="ln">470</span><span class="c"><span class="s"> * </span>You can add multiple classes separated by a space
</span></code><code id="L471"><span class="ln">471</span><span class="c"><span class="s"> | </span>&lt;p>Add classes to me&lt;/p>
</span></code><code id="L472"><span class="ln">472</span><span class="c"><span class="s"> | </span>&lt;script>
</span></code><code id="L473"><span class="ln">473</span><span class="c"><span class="s"> | </span>$(<i>'p'</i>).addClass(<i>'green big width100'</i>);
</span></code><code id="L474"><span class="ln">474</span><span class="c"><span class="s"> | </span>&lt;/script>
</span></code><code id="L475"><span class="ln">475</span><span class="c"><span class="s"> * </span>All classes added and they won't be repetead <b>if</b> you <b>try</b> to add an existing one
</span></code><code id="L476"><span class="ln">476</span><span class="c"><span class="s"> | </span>&lt;p <b>class</b>=<i>"green big width100"</i>>Add classes to me&lt;/p>
</span></code><code id="L477"><span class="ln">477</span><span class="c"> \*/</span>
</code><code id="L478"><span class="ln">478</span>
</code><code id="L479"><span class="ln">479</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L480"><span class="ln">480</span><span class="c"><span class="s"> * </span>$(…).removeClass
</span></code><code id="L481"><span class="ln">481</span><span class="c"> [ method ]
</span></code><code id="L482"><span class="ln">482</span><span class="c"><span class="s"> * </span>Removes a <b>class</b> to all matched elements.
</span></code><code id="L483"><span class="ln">483</span><span class="c"> > Parameters
</span></code><code id="L484"><span class="ln">484</span><span class="c"><span class="s"> - </span>name (string) Name of the <b>class</b> to remove.
</span></code><code id="L485"><span class="ln">485</span><span class="c"><span class="s"> = </span>(object) Original matched collection.
</span></code><code id="L486"><span class="ln">486</span><span class="c"> > Usage
</span></code><code id="L487"><span class="ln">487</span><span class="c"><span class="s"> | </span>&lt;p <b>class</b>=<i>"big green title <b>float</b>-rigth"</i>>Lorem ipsum&lt;/p>
</span></code><code id="L488"><span class="ln">488</span><span class="c"><span class="s"> * </span>Remove a specific <b>class</b> from the paragraph:
</span></code><code id="L489"><span class="ln">489</span><span class="c"><span class="s"> | </span>$(<i>'p'</i>).removeClass(<i>'green'</i>);
</span></code><code id="L490"><span class="ln">490</span><span class="c"><span class="s"> * </span>The specified <b>class</b> was removed:
</span></code><code id="L491"><span class="ln">491</span><span class="c"><span class="s"> | </span>&lt;p <b>class</b>=<i>"big title <b>float</b>-right"</i>>Lorem ipsum&lt;/p>
</span></code><code id="L492"><span class="ln">492</span><span class="c"><span class="s"> * </span>You can remove multiple classes separating them by a space when calling the <b>function</b>:
</span></code><code id="L493"><span class="ln">493</span><span class="c"><span class="s"> | </span>$(<i>'p'</i>).removeClass(<i>'big title'</i>);
</span></code><code id="L494"><span class="ln">494</span><span class="c"><span class="s"> * </span>Now only one <b>class</b> left:
</span></code><code id="L495"><span class="ln">495</span><span class="c"><span class="s"> | </span>&lt;p <b>class</b>=<i>"<b>float</b>-right"</i>>Lorem ipsum&lt;/p>
</span></code><code id="L496"><span class="ln">496</span><span class="c"><span class="s"> * </span>You can remove all classes just calling .removeClass() without parameters
</span></code><code id="L497"><span class="ln">497</span><span class="c"><span class="s"> | </span>$(<i>'p'</i>).removeClass();
</span></code><code id="L498"><span class="ln">498</span><span class="c"><span class="s"> * </span>All classes were removed including the <b>class</b> attribute:
</span></code><code id="L499"><span class="ln">499</span><span class="c"><span class="s"> | </span>&lt;p>Lorem ipsum&lt;/p>
</span></code><code id="L500"><span class="ln">500</span><span class="c"> \*/</span>
</code><code id="L501"><span class="ln">501</span>
</code><code id="L502"><span class="ln">502</span><span class="c">// generate addClass and removeClass methods</span>
</code><code id="L503"><span class="ln">503</span><span class="c">// use <b>native</b> classList</span>
</code><code id="L504"><span class="ln">504</span><span class="c">// mdn: https://developer.mozilla.org/en-US/docs/DOM/element.classList</span>
</code><code id="L505"><span class="ln">505</span><span class="c">// spec: http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#dom-classlist</span>
</code><code id="L506"><span class="ln">506</span>Kimbo.forEach([<i>'add'</i>, <i>'remove'</i>], <b>function</b> (method, i) {
</code><code id="L507"><span class="ln">507</span>  <b>var</b> isRemove<span class="s"> = </span>i > <span class="d">0</span>;
</code><code id="L508"><span class="ln">508</span>
</code><code id="L509"><span class="ln">509</span>  Kimbo.fn[method<span class="s"> + </span><i>'Class'</i>]<span class="s"> = </span><b>function</b> (name) {
</code><code id="L510"><span class="ln">510</span>    <b>var</b> classNames;
</code><code id="L511"><span class="ln">511</span>
</code><code id="L512"><span class="ln">512</span>    <b>if</b> (name<span class="s"> &amp;&amp; </span>Kimbo.isString(name)) {
</code><code id="L513"><span class="ln">513</span>      classNames<span class="s"> = </span>name.split(r_space);
</code><code id="L514"><span class="ln">514</span>      <b>this</b>.each(<b>function</b> (elem) {
</code><code id="L515"><span class="ln">515</span>        <span class="c">// skip comments, text, etc</span>
</code><code id="L516"><span class="ln">516</span>        <b>if</b> (elem.nodeType<span class="s"> === </span><span class="d">1</span>) {
</code><code id="L517"><span class="ln">517</span>          <span class="c">// iterate through all <b>class</b> names passed</span>
</code><code id="L518"><span class="ln">518</span>          Kimbo.forEach(classNames, <b>function</b> (className) {
</code><code id="L519"><span class="ln">519</span>            elem.classList[method](className);
</code><code id="L520"><span class="ln">520</span>          });
</code><code id="L521"><span class="ln">521</span>        }
</code><code id="L522"><span class="ln">522</span>      });
</code><code id="L523"><span class="ln">523</span>
</code><code id="L524"><span class="ln">524</span>      <span class="c">// remove all element classes <b>if</b> no classname specified</span>
</code><code id="L525"><span class="ln">525</span>    } <b>else</b> <b>if</b> (!name<span class="s"> &amp;&amp; </span>isRemove) {
</code><code id="L526"><span class="ln">526</span>      <b>this</b>.removeAttr(<i>'<b>class</b>'</i>);
</code><code id="L527"><span class="ln">527</span>    }
</code><code id="L528"><span class="ln">528</span>
</code><code id="L529"><span class="ln">529</span>    <b>return</b> <b>this</b>;
</code><code id="L530"><span class="ln">530</span>  };
</code><code id="L531"><span class="ln">531</span>});
</code><code id="L532"><span class="ln">532</span>
</code><code id="L533"><span class="ln">533</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L534"><span class="ln">534</span><span class="c"><span class="s"> * </span>$(…).append
</span></code><code id="L535"><span class="ln">535</span><span class="c"> [ method ]
</span></code><code id="L536"><span class="ln">536</span><span class="c"><span class="s"> * </span>Insert content to the end of all elements matched by Kimbo.
</span></code><code id="L537"><span class="ln">537</span><span class="c"> > Parameters
</span></code><code id="L538"><span class="ln">538</span><span class="c"><span class="s"> - </span>value (string|object) HTML string, DOM element, or Kimbo object to insert.
</span></code><code id="L539"><span class="ln">539</span><span class="c"><span class="s"> = </span>(object) Original matched collection.
</span></code><code id="L540"><span class="ln">540</span><span class="c"> > Usage
</span></code><code id="L541"><span class="ln">541</span><span class="c"><span class="s"> | </span>&lt;div <b>class</b>=<i>"container"</i>>
</span></code><code id="L542"><span class="ln">542</span><span class="c"><span class="s"> | </span>  &lt;p <b>class</b>=<i>"lorem"</i>>Lorem &lt;/p>
</span></code><code id="L543"><span class="ln">543</span><span class="c"><span class="s"> | </span>  &lt;p <b>class</b>=<i>"lorem"</i>>Lorem &lt;/p>
</span></code><code id="L544"><span class="ln">544</span><span class="c"><span class="s"> | </span>&lt;/div>
</span></code><code id="L545"><span class="ln">545</span><span class="c"><span class="s"> * </span>Insert content
</span></code><code id="L546"><span class="ln">546</span><span class="c"><span class="s"> | </span>$(<i>'.lorem'</i>).append(<i>'&lt;em>ipsum&lt;/em>'</i>)
</span></code><code id="L547"><span class="ln">547</span><span class="c"><span class="s"> * </span>Each element gets the content
</span></code><code id="L548"><span class="ln">548</span><span class="c"><span class="s"> | </span>&lt;div <b>class</b>=<i>"container"</i>>
</span></code><code id="L549"><span class="ln">549</span><span class="c"><span class="s"> | </span>  &lt;p <b>class</b>=<i>"lorem"</i>>Lorem &lt;em>ipsum&lt;/em>&lt;/p>
</span></code><code id="L550"><span class="ln">550</span><span class="c"><span class="s"> | </span>  &lt;p <b>class</b>=<i>"lorem"</i>>Lorem &lt;em>ipsum&lt;/em>&lt;/p>
</span></code><code id="L551"><span class="ln">551</span><span class="c"><span class="s"> | </span>&lt;/div>
</span></code><code id="L552"><span class="ln">552</span><span class="c"><span class="s"> * </span>You can also get an element and insert it elsewhere
</span></code><code id="L553"><span class="ln">553</span><span class="c"><span class="s"> | </span>$(<i>'.container'</i>).append($(<i>'.ipsum'</i>))
</span></code><code id="L554"><span class="ln">554</span><span class="c"><span class="s"> * </span>The selected element will be moved, not cloned.
</span></code><code id="L555"><span class="ln">555</span><span class="c"><span class="s"> | </span>&lt;div <b>class</b>=<i>"container"</i>>
</span></code><code id="L556"><span class="ln">556</span><span class="c"><span class="s"> | </span>  &lt;p <b>class</b>=<i>"lorem"</i>>Lorem&lt;/p>
</span></code><code id="L557"><span class="ln">557</span><span class="c"><span class="s"> | </span>  &lt;p <b>class</b>=<i>"lorem"</i>>Lorem&lt;/p>
</span></code><code id="L558"><span class="ln">558</span><span class="c"><span class="s"> | </span>  &lt;p <b>class</b>=<i>"ipsum"</i>>Ipsum&lt;/p>
</span></code><code id="L559"><span class="ln">559</span><span class="c"><span class="s"> | </span>&lt;/div>
</span></code><code id="L560"><span class="ln">560</span><span class="c"> \*/</span>
</code><code id="L561"><span class="ln">561</span>
</code><code id="L562"><span class="ln">562</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L563"><span class="ln">563</span><span class="c"><span class="s"> * </span>$(…).prepend
</span></code><code id="L564"><span class="ln">564</span><span class="c"> [ method ]
</span></code><code id="L565"><span class="ln">565</span><span class="c"><span class="s"> * </span>Insert content to the beginning of all elements matched by Kimbo.
</span></code><code id="L566"><span class="ln">566</span><span class="c"> > Parameters
</span></code><code id="L567"><span class="ln">567</span><span class="c"><span class="s"> - </span>value (string|object) HTML string, DOM element, or Kimbo object to insert.
</span></code><code id="L568"><span class="ln">568</span><span class="c"><span class="s"> = </span>(object) Original matched collection.
</span></code><code id="L569"><span class="ln">569</span><span class="c"> > Usage
</span></code><code id="L570"><span class="ln">570</span><span class="c"><span class="s"> | </span>&lt;div <b>class</b>=<i>"container"</i>>
</span></code><code id="L571"><span class="ln">571</span><span class="c"><span class="s"> | </span>  &lt;p <b>class</b>=<i>"lorem"</i>> Lorem&lt;/p>
</span></code><code id="L572"><span class="ln">572</span><span class="c"><span class="s"> | </span>  &lt;p <b>class</b>=<i>"lorem"</i>> Lorem&lt;/p>
</span></code><code id="L573"><span class="ln">573</span><span class="c"><span class="s"> | </span>&lt;/div>
</span></code><code id="L574"><span class="ln">574</span><span class="c"><span class="s"> * </span>Insert content
</span></code><code id="L575"><span class="ln">575</span><span class="c"><span class="s"> | </span>$(<i>'.lorem'</i>).prepend(<i>'&lt;em>ipsum&lt;/em>'</i>)
</span></code><code id="L576"><span class="ln">576</span><span class="c"><span class="s"> * </span>Each element gets the content
</span></code><code id="L577"><span class="ln">577</span><span class="c"><span class="s"> | </span>&lt;div <b>class</b>=<i>"container"</i>>
</span></code><code id="L578"><span class="ln">578</span><span class="c"><span class="s"> | </span>  &lt;p <b>class</b>=<i>"lorem"</i>>&lt;em>ipsum&lt;/em> Lorem&lt;/p>
</span></code><code id="L579"><span class="ln">579</span><span class="c"><span class="s"> | </span>  &lt;p <b>class</b>=<i>"lorem"</i>>&lt;em>ipsum&lt;/em> Lorem&lt;/p>
</span></code><code id="L580"><span class="ln">580</span><span class="c"><span class="s"> | </span>&lt;/div>
</span></code><code id="L581"><span class="ln">581</span><span class="c"><span class="s"> * </span>You can also get an element and insert it elsewhere
</span></code><code id="L582"><span class="ln">582</span><span class="c"><span class="s"> | </span>$(<i>'.container'</i>).prepend($(<i>'.ipsum'</i>))
</span></code><code id="L583"><span class="ln">583</span><span class="c"><span class="s"> * </span>The selected element will be moved, not cloned.
</span></code><code id="L584"><span class="ln">584</span><span class="c"><span class="s"> | </span>&lt;div <b>class</b>=<i>"container"</i>>
</span></code><code id="L585"><span class="ln">585</span><span class="c"><span class="s"> | </span>  &lt;p <b>class</b>=<i>"ipsum"</i>>Ipsum&lt;/p>
</span></code><code id="L586"><span class="ln">586</span><span class="c"><span class="s"> | </span>  &lt;p <b>class</b>=<i>"lorem"</i>>Lorem&lt;/p>
</span></code><code id="L587"><span class="ln">587</span><span class="c"><span class="s"> | </span>  &lt;p <b>class</b>=<i>"lorem"</i>>Lorem&lt;/p>
</span></code><code id="L588"><span class="ln">588</span><span class="c"><span class="s"> | </span>&lt;/div>
</span></code><code id="L589"><span class="ln">589</span><span class="c"> \*/</span>
</code><code id="L590"><span class="ln">590</span>
</code><code id="L591"><span class="ln">591</span><span class="c">// generate append and prepend methods</span>
</code><code id="L592"><span class="ln">592</span>Kimbo.forEach([<i>'append'</i>, <i>'prepend'</i>], <b>function</b> (method, i) {
</code><code id="L593"><span class="ln">593</span>  <b>var</b> isPrepend<span class="s"> = </span>i > <span class="d">0</span>;
</code><code id="L594"><span class="ln">594</span>
</code><code id="L595"><span class="ln">595</span>  Kimbo.fn[method]<span class="s"> = </span><b>function</b> (value) {
</code><code id="L596"><span class="ln">596</span>    <b>var</b> div;
</code><code id="L597"><span class="ln">597</span>
</code><code id="L598"><span class="ln">598</span>    <span class="c">// exit <b>if</b> no value passed</span>
</code><code id="L599"><span class="ln">599</span>    <b>if</b> (!<b>this</b>.length<span class="s"> || </span>!value) {
</code><code id="L600"><span class="ln">600</span>      <b>return</b> <b>this</b>;
</code><code id="L601"><span class="ln">601</span>    }
</code><code id="L602"><span class="ln">602</span>
</code><code id="L603"><span class="ln">603</span>    <span class="c">// handle html string</span>
</code><code id="L604"><span class="ln">604</span>    <b>if</b> (Kimbo.isString(value)) {
</code><code id="L605"><span class="ln">605</span>      <span class="c">// placeholder element</span>
</code><code id="L606"><span class="ln">606</span>      div<span class="s"> = </span>document.createElement(<i>'div'</i>);
</code><code id="L607"><span class="ln">607</span>      div.innerHTML<span class="s"> = </span>value;
</code><code id="L608"><span class="ln">608</span>      value<span class="s"> = </span>div.firstChild;
</code><code id="L609"><span class="ln">609</span>    }
</code><code id="L610"><span class="ln">610</span>
</code><code id="L611"><span class="ln">611</span>    <span class="c">// already a dom node or kimbo collection, just insert it</span>
</code><code id="L612"><span class="ln">612</span>    <b>if</b> (value.nodeType<span class="s"> || </span>Kimbo.isKimbo(value)) {
</code><code id="L613"><span class="ln">613</span>      <b>return</b> <b>this</b>.each(<b>function</b> (elem) {
</code><code id="L614"><span class="ln">614</span>        <span class="c">// be sure we can append/prepend to the element</span>
</code><code id="L615"><span class="ln">615</span>        <b>if</b> (<b>this</b>.nodeType<span class="s"> === </span><span class="d">1</span><span class="s"> || </span><b>this</b>.nodeType<span class="s"> === </span><span class="d">11</span>) {
</code><code id="L616"><span class="ln">616</span>          Kimbo(value).each(<b>function</b> () {
</code><code id="L617"><span class="ln">617</span>            elem.insertBefore(<b>this</b>, isPrepend ? elem.firstChild : <b>null</b>);
</code><code id="L618"><span class="ln">618</span>          });
</code><code id="L619"><span class="ln">619</span>        }
</code><code id="L620"><span class="ln">620</span>      });
</code><code id="L621"><span class="ln">621</span>    }
</code><code id="L622"><span class="ln">622</span>  };
</code><code id="L623"><span class="ln">623</span>});
</code><code id="L624"><span class="ln">624</span>
</code><code id="L625"><span class="ln">625</span>Kimbo.fn.extend({
</code><code id="L626"><span class="ln">626</span>
</code><code id="L627"><span class="ln">627</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L628"><span class="ln">628</span><span class="c">  <span class="s"> * </span>$(…).empty
</span></code><code id="L629"><span class="ln">629</span><span class="c">   [ method ]
</span></code><code id="L630"><span class="ln">630</span><span class="c">  <span class="s"> * </span>Remove all child nodes from the DOM of the elements <b>in</b> the collection.
</span></code><code id="L631"><span class="ln">631</span><span class="c">  <span class="s"> = </span>(object) Original matched collection.
</span></code><code id="L632"><span class="ln">632</span><span class="c">   > Usage
</span></code><code id="L633"><span class="ln">633</span><span class="c">  <span class="s"> | </span>&lt;div <b>class</b>=<i>"container"</i>>
</span></code><code id="L634"><span class="ln">634</span><span class="c">  <span class="s"> | </span>  &lt;p <b>class</b>=<i>"lorem"</i>>Lorem&lt;/p>
</span></code><code id="L635"><span class="ln">635</span><span class="c">  <span class="s"> | </span>  &lt;p <b>class</b>=<i>"lorem"</i>>Lorem&lt;/p>
</span></code><code id="L636"><span class="ln">636</span><span class="c">  <span class="s"> | </span>&lt;/div>
</span></code><code id="L637"><span class="ln">637</span><span class="c">  <span class="s"> * </span>Empty .container
</span></code><code id="L638"><span class="ln">638</span><span class="c">  <span class="s"> | </span>$(<i>'.container'</i>).empty();
</span></code><code id="L639"><span class="ln">639</span><span class="c">  <span class="s"> * </span>All elements inside <i>".container"</i> are removed from the DOM
</span></code><code id="L640"><span class="ln">640</span><span class="c">  <span class="s"> | </span>&lt;div <b>class</b>=<i>"container"</i>>&lt;/div>
</span></code><code id="L641"><span class="ln">641</span><span class="c">  \*/</span>
</code><code id="L642"><span class="ln">642</span>  empty: <b>function</b> () {
</code><code id="L643"><span class="ln">643</span>    <b>return</b> <b>this</b>.each(<b>function</b> () {
</code><code id="L644"><span class="ln">644</span>      <b>while</b> (<b>this</b>.hasChildNodes()) {
</code><code id="L645"><span class="ln">645</span>        <b>this</b>.removeChild(<b>this</b>.childNodes[<span class="d">0</span>]);
</code><code id="L646"><span class="ln">646</span>      }
</code><code id="L647"><span class="ln">647</span>    });
</code><code id="L648"><span class="ln">648</span>  },
</code><code id="L649"><span class="ln">649</span>
</code><code id="L650"><span class="ln">650</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L651"><span class="ln">651</span><span class="c">  <span class="s"> * </span>$(…).remove
</span></code><code id="L652"><span class="ln">652</span><span class="c">   [ method ]
</span></code><code id="L653"><span class="ln">653</span><span class="c">  <span class="s"> * </span>Remove all matched elements from the DOM.
</span></code><code id="L654"><span class="ln">654</span><span class="c">  <span class="s"> * </span>Similar to @$(…).empty but .remove() removes the element itself
</span></code><code id="L655"><span class="ln">655</span><span class="c">  <span class="s"> = </span>(object) Original matched collection.
</span></code><code id="L656"><span class="ln">656</span><span class="c">   > Usage
</span></code><code id="L657"><span class="ln">657</span><span class="c">  <span class="s"> | </span>&lt;div <b>class</b>=<i>"container"</i>>
</span></code><code id="L658"><span class="ln">658</span><span class="c">  <span class="s"> | </span>  &lt;p <b>class</b>=<i>"lorem"</i>>Lorem&lt;/p>
</span></code><code id="L659"><span class="ln">659</span><span class="c">  <span class="s"> | </span>  &lt;p>Lorem&lt;/p>
</span></code><code id="L660"><span class="ln">660</span><span class="c">  <span class="s"> | </span>&lt;/div>
</span></code><code id="L661"><span class="ln">661</span><span class="c">  <span class="s"> * </span>Remove one element
</span></code><code id="L662"><span class="ln">662</span><span class="c">  <span class="s"> | </span>$(<i>'.lorem'</i>).remove();
</span></code><code id="L663"><span class="ln">663</span><span class="c">  <span class="s"> * </span>The result element is:
</span></code><code id="L664"><span class="ln">664</span><span class="c">  <span class="s"> | </span>&lt;div <b>class</b>=<i>"container"</i>>
</span></code><code id="L665"><span class="ln">665</span><span class="c">  <span class="s"> | </span>  &lt;p>Lorem&lt;/p>
</span></code><code id="L666"><span class="ln">666</span><span class="c">  <span class="s"> | </span>&lt;/div>
</span></code><code id="L667"><span class="ln">667</span><span class="c">  \*/</span>
</code><code id="L668"><span class="ln">668</span>  remove: <b>function</b> () {
</code><code id="L669"><span class="ln">669</span>    <b>return</b> <b>this</b>.each(<b>function</b> () {
</code><code id="L670"><span class="ln">670</span>      <b>if</b> (<b>this</b>.parentNode) {
</code><code id="L671"><span class="ln">671</span>        <b>this</b>.parentNode.removeChild(<b>this</b>);
</code><code id="L672"><span class="ln">672</span>      }
</code><code id="L673"><span class="ln">673</span>    });
</code><code id="L674"><span class="ln">674</span>  },
</code><code id="L675"><span class="ln">675</span>
</code><code id="L676"><span class="ln">676</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L677"><span class="ln">677</span><span class="c">  <span class="s"> * </span>$(…).show
</span></code><code id="L678"><span class="ln">678</span><span class="c">   [ method ]
</span></code><code id="L679"><span class="ln">679</span><span class="c">  <span class="s"> * </span>Display all matched elements.
</span></code><code id="L680"><span class="ln">680</span><span class="c">  <span class="s"> = </span>(object) Original matched collection.
</span></code><code id="L681"><span class="ln">681</span><span class="c">   > Usage
</span></code><code id="L682"><span class="ln">682</span><span class="c">  <span class="s"> | </span>&lt;p style=<i>"display: none;"</i>>Lorem&lt;/p>
</span></code><code id="L683"><span class="ln">683</span><span class="c">  <span class="s"> * </span>Show it
</span></code><code id="L684"><span class="ln">684</span><span class="c">  <span class="s"> | </span>$(<i>'p'</i>).show();
</span></code><code id="L685"><span class="ln">685</span><span class="c">  <span class="s"> * </span>Now it's visible
</span></code><code id="L686"><span class="ln">686</span><span class="c">  <span class="s"> | </span>&lt;p style=<i>"display: block;"</i>>Lorem&lt;/p>
</span></code><code id="L687"><span class="ln">687</span><span class="c">  \*/</span>
</code><code id="L688"><span class="ln">688</span>  show: <b>function</b> () {
</code><code id="L689"><span class="ln">689</span>    <b>return</b> <b>this</b>.css(<i>'display'</i>, <i>'block'</i>);
</code><code id="L690"><span class="ln">690</span>  },
</code><code id="L691"><span class="ln">691</span>
</code><code id="L692"><span class="ln">692</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L693"><span class="ln">693</span><span class="c">  <span class="s"> * </span>$(…).hide
</span></code><code id="L694"><span class="ln">694</span><span class="c">   [ method ]
</span></code><code id="L695"><span class="ln">695</span><span class="c">  <span class="s"> * </span>Hide all matched elements.
</span></code><code id="L696"><span class="ln">696</span><span class="c">  <span class="s"> = </span>(object) Original matched collection.
</span></code><code id="L697"><span class="ln">697</span><span class="c">   > Usage
</span></code><code id="L698"><span class="ln">698</span><span class="c">  <span class="s"> | </span>&lt;p>Lorem&lt;/p>
</span></code><code id="L699"><span class="ln">699</span><span class="c">  <span class="s"> * </span>Hide it
</span></code><code id="L700"><span class="ln">700</span><span class="c">  <span class="s"> | </span>$(<i>'p'</i>).hide();
</span></code><code id="L701"><span class="ln">701</span><span class="c">  <span class="s"> * </span>Now it's hidden
</span></code><code id="L702"><span class="ln">702</span><span class="c">  <span class="s"> | </span>&lt;p style=<i>"display: none;"</i>>Lorem&lt;/p>
</span></code><code id="L703"><span class="ln">703</span><span class="c">  \*/</span>
</code><code id="L704"><span class="ln">704</span>  hide: <b>function</b> () {
</code><code id="L705"><span class="ln">705</span>    <b>return</b> <b>this</b>.css(<i>'display'</i>, <i>'none'</i>);
</code><code id="L706"><span class="ln">706</span>  },
</code><code id="L707"><span class="ln">707</span>
</code><code id="L708"><span class="ln">708</span>  <span class="c">// TODO: extend to accept objects and functions to set values</span>
</code><code id="L709"><span class="ln">709</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L710"><span class="ln">710</span><span class="c">  <span class="s"> * </span>$(…).attr
</span></code><code id="L711"><span class="ln">711</span><span class="c">   [ method ]
</span></code><code id="L712"><span class="ln">712</span><span class="c">  <span class="s"> * </span>Get an attribute value from one element or set attributes to all matched elements.
</span></code><code id="L713"><span class="ln">713</span><span class="c">   > Parameters
</span></code><code id="L714"><span class="ln">714</span><span class="c">  <span class="s"> - </span>name (string) Name of the attribute.
</span></code><code id="L715"><span class="ln">715</span><span class="c">  <span class="s"> - </span>value (string) #optional Value <b>for</b> the attribute.
</span></code><code id="L716"><span class="ln">716</span><span class="c">  <span class="s"> = </span>(string) Attribute value, only <b>if</b> name was passed.
</span></code><code id="L717"><span class="ln">717</span><span class="c">  <span class="s"> = </span>(object) Original matched collection when setting a value.
</span></code><code id="L718"><span class="ln">718</span><span class="c">   > Usage
</span></code><code id="L719"><span class="ln">719</span><span class="c">  <span class="s"> | </span>&lt;a href=<i>"http:<span class="c">//kimbojs.com"</i>>Go to Kimbojs.com&lt;/a></span>
</span></code><code id="L720"><span class="ln">720</span><span class="c">  <span class="s"> * </span>Get href attribute
</span></code><code id="L721"><span class="ln">721</span><span class="c">  <span class="s"> | </span>$(<i>'a'</i>).attr(<i>'href'</i>); <span class="c">// http://kimbojs.com</span>
</span></code><code id="L722"><span class="ln">722</span><span class="c">  <span class="s"> * </span>Set a <b>new</b> attribute
</span></code><code id="L723"><span class="ln">723</span><span class="c">  <span class="s"> | </span>$(<i>'a'</i>).attr(<i>'title'</i>, <i>'Go to Kimbojs.com'</i>);
</span></code><code id="L724"><span class="ln">724</span><span class="c">  <span class="s"> * </span>Now element has a title attribute
</span></code><code id="L725"><span class="ln">725</span><span class="c">  <span class="s"> | </span>&lt;a href=<i>"http:<span class="c">//kimbojs.com"</i> title=<i>"Go to Kimbojs.com"</i>>Go to Kimbojs.com&lt;/a></span>
</span></code><code id="L726"><span class="ln">726</span><span class="c">  \*/</span>
</code><code id="L727"><span class="ln">727</span>  attr: <b>function</b> (name, value) {
</code><code id="L728"><span class="ln">728</span>    <span class="c">// no elements <b>in</b> the collection</span>
</code><code id="L729"><span class="ln">729</span>    <b>if</b> (!<b>this</b>.length) {
</code><code id="L730"><span class="ln">730</span>      <b>return</b> <b>this</b>;
</code><code id="L731"><span class="ln">731</span>    }
</code><code id="L732"><span class="ln">732</span>
</code><code id="L733"><span class="ln">733</span>    <b>if</b> (Kimbo.isString(name)<span class="s"> &amp;&amp; </span>value<span class="s"> === </span><b>undefined</b>) {
</code><code id="L734"><span class="ln">734</span>      <b>return</b> <b>this</b>[<span class="d">0</span>].getAttribute(name);
</code><code id="L735"><span class="ln">735</span>    } <b>else</b> {
</code><code id="L736"><span class="ln">736</span>      <b>return</b> <b>this</b>.each(<b>function</b> () {
</code><code id="L737"><span class="ln">737</span>        <b>this</b>.setAttribute(name, value);
</code><code id="L738"><span class="ln">738</span>      });
</code><code id="L739"><span class="ln">739</span>    }
</code><code id="L740"><span class="ln">740</span>  },
</code><code id="L741"><span class="ln">741</span>
</code><code id="L742"><span class="ln">742</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L743"><span class="ln">743</span><span class="c">  <span class="s"> * </span>$(…).removeAttr
</span></code><code id="L744"><span class="ln">744</span><span class="c">   [ method ]
</span></code><code id="L745"><span class="ln">745</span><span class="c">  <span class="s"> * </span>Removes an attribute from all matched elements.
</span></code><code id="L746"><span class="ln">746</span><span class="c">   > Parameters
</span></code><code id="L747"><span class="ln">747</span><span class="c">  <span class="s"> - </span>name (string) Name of the attribute to remove.
</span></code><code id="L748"><span class="ln">748</span><span class="c">  <span class="s"> = </span>(object) Original matched collection.
</span></code><code id="L749"><span class="ln">749</span><span class="c">   > Usage
</span></code><code id="L750"><span class="ln">750</span><span class="c">  <span class="s"> | </span>&lt;a href=<i>"http:<span class="c">//kimbojs.com"</i> title=<i>"Go to Kimbojs.com"</i>>Go to Kimbojs.com&lt;/a></span>
</span></code><code id="L751"><span class="ln">751</span><span class="c">  <span class="s"> * </span>Remove the title attribute
</span></code><code id="L752"><span class="ln">752</span><span class="c">  <span class="s"> | </span>$(<i>'a'</i>).removeAttr(<i>'title'</i>);
</span></code><code id="L753"><span class="ln">753</span><span class="c">  <span class="s"> * </span>Now the element has no title
</span></code><code id="L754"><span class="ln">754</span><span class="c">  <span class="s"> | </span>&lt;a href=<i>"http:<span class="c">//kimbojs.com"</i>>Go to Kimbojs.com&lt;/a></span>
</span></code><code id="L755"><span class="ln">755</span><span class="c">  \*/</span>
</code><code id="L756"><span class="ln">756</span>  removeAttr: <b>function</b> (name) {
</code><code id="L757"><span class="ln">757</span>    <b>return</b> <b>this</b>.each(<b>function</b> () {
</code><code id="L758"><span class="ln">758</span>      <b>this</b>.removeAttribute(name);
</code><code id="L759"><span class="ln">759</span>    });
</code><code id="L760"><span class="ln">760</span>  },
</code><code id="L761"><span class="ln">761</span>
</code><code id="L762"><span class="ln">762</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L763"><span class="ln">763</span><span class="c">  <span class="s"> * </span>$(…).data
</span></code><code id="L764"><span class="ln">764</span><span class="c">   [ method ]
</span></code><code id="L765"><span class="ln">765</span><span class="c">  <span class="s"> * </span>Store or retrieve elements dataset.
</span></code><code id="L766"><span class="ln">766</span><span class="c">   > Parameters
</span></code><code id="L767"><span class="ln">767</span><span class="c">  <span class="s"> - </span>name (string) Name of the data attribute to to set.
</span></code><code id="L768"><span class="ln">768</span><span class="c">  <span class="s"> - </span>value (string) #optional Value to store <b>in</b> dataset.
</span></code><code id="L769"><span class="ln">769</span><span class="c">  <span class="s"> = </span>(object) Original matched collection.
</span></code><code id="L770"><span class="ln">770</span><span class="c">   > Usage
</span></code><code id="L771"><span class="ln">771</span><span class="c">  <span class="s"> | </span>&lt;div id=<i>"panel"</i>>&lt;/div>
</span></code><code id="L772"><span class="ln">772</span><span class="c">  <span class="s"> * </span>Set some data to the panel:
</span></code><code id="L773"><span class="ln">773</span><span class="c">  <span class="s"> | </span>$(<i>'#panel'</i>).data(<i>'isOpen'</i>, <b>true</b>);
</span></code><code id="L774"><span class="ln">774</span><span class="c">  <span class="s"> * </span>No a data-* attribute was added
</span></code><code id="L775"><span class="ln">775</span><span class="c">  <span class="s"> | </span>&lt;div id=<i>"panel"</i> data-isOpen=<i>"<b>true</b>"</i>>&lt;/div>
</span></code><code id="L776"><span class="ln">776</span><span class="c">  <span class="s"> * </span>We can retrieve the data
</span></code><code id="L777"><span class="ln">777</span><span class="c">  <span class="s"> | </span>$(<i>'#panel'</i>).data(<i>'isOpen'</i>); <span class="c">// <i>'<b>true</b>'</i></span>
</span></code><code id="L778"><span class="ln">778</span><span class="c">  \*/</span>
</code><code id="L779"><span class="ln">779</span>  data: <b>function</b> (name, value) {
</code><code id="L780"><span class="ln">780</span>    <b>if</b> (!<b>this</b>.length<span class="s"> || </span>!Kimbo.isString(name)) {
</code><code id="L781"><span class="ln">781</span>      <b>return</b> <b>this</b>;
</code><code id="L782"><span class="ln">782</span>    }
</code><code id="L783"><span class="ln">783</span>
</code><code id="L784"><span class="ln">784</span>    name<span class="s"> = </span>Kimbo.camelCase(name);
</code><code id="L785"><span class="ln">785</span>
</code><code id="L786"><span class="ln">786</span>    <b>if</b> (value<span class="s"> === </span><b>undefined</b>) {
</code><code id="L787"><span class="ln">787</span>      <b>return</b> _data.get(<b>this</b>[<span class="d">0</span>], name);
</code><code id="L788"><span class="ln">788</span>    } <b>else</b> {
</code><code id="L789"><span class="ln">789</span>      <b>return</b> <b>this</b>.each(<b>function</b> () {
</code><code id="L790"><span class="ln">790</span>        _data.set(<b>this</b>, name, value);
</code><code id="L791"><span class="ln">791</span>      });
</code><code id="L792"><span class="ln">792</span>    }
</code><code id="L793"><span class="ln">793</span>  },
</code><code id="L794"><span class="ln">794</span>
</code><code id="L795"><span class="ln">795</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L796"><span class="ln">796</span><span class="c">  <span class="s"> * </span>$(…).removeData
</span></code><code id="L797"><span class="ln">797</span><span class="c">   [ method ]
</span></code><code id="L798"><span class="ln">798</span><span class="c">  <span class="s"> * </span>Remove data from the element dataset.
</span></code><code id="L799"><span class="ln">799</span><span class="c">   > Parameters
</span></code><code id="L800"><span class="ln">800</span><span class="c">  <span class="s"> - </span>name (string) Name of the data attribute to to remove.
</span></code><code id="L801"><span class="ln">801</span><span class="c">  <span class="s"> = </span>(object) Original matched collection.
</span></code><code id="L802"><span class="ln">802</span><span class="c">   > Usage
</span></code><code id="L803"><span class="ln">803</span><span class="c">  <span class="s"> | </span>&lt;div id=<i>"panel"</i> data-isOpen=<i>"<b>true</b>"</i>>&lt;/div>
</span></code><code id="L804"><span class="ln">804</span><span class="c">  <span class="s"> * </span>Remove data associated to the panel div:
</span></code><code id="L805"><span class="ln">805</span><span class="c">  <span class="s"> | </span>$(<i>'#panel'</i>).removeData(<i>'isOpen'</i>);
</span></code><code id="L806"><span class="ln">806</span><span class="c">  <span class="s"> * </span>Data attribute and value was removed:
</span></code><code id="L807"><span class="ln">807</span><span class="c">  <span class="s"> | </span>&lt;div id=<i>"panel"</i>>&lt;/div>
</span></code><code id="L808"><span class="ln">808</span><span class="c">  <span class="s"> * </span>data-isOpen is <b>undefined</b>
</span></code><code id="L809"><span class="ln">809</span><span class="c">  <span class="s"> | </span>$(<i>'#panel'</i>).data(<i>'isOpen'</i>); <span class="c">// <b>undefined</b></span>
</span></code><code id="L810"><span class="ln">810</span><span class="c">  \*/</span>
</code><code id="L811"><span class="ln">811</span>  removeData: <b>function</b> (name) {
</code><code id="L812"><span class="ln">812</span>    <b>if</b> (!<b>this</b>.length<span class="s"> || </span>!Kimbo.isString(name)) {
</code><code id="L813"><span class="ln">813</span>      <b>return</b> <b>this</b>;
</code><code id="L814"><span class="ln">814</span>    }
</code><code id="L815"><span class="ln">815</span>
</code><code id="L816"><span class="ln">816</span>    name<span class="s"> = </span>Kimbo.camelCase(name);
</code><code id="L817"><span class="ln">817</span>
</code><code id="L818"><span class="ln">818</span>    <b>return</b> <b>this</b>.each(<b>function</b> () {
</code><code id="L819"><span class="ln">819</span>      _data.remove(<b>this</b>, name);
</code><code id="L820"><span class="ln">820</span>    });
</code><code id="L821"><span class="ln">821</span>  },
</code><code id="L822"><span class="ln">822</span>
</code><code id="L823"><span class="ln">823</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L824"><span class="ln">824</span><span class="c">  <span class="s"> * </span>$(…).css
</span></code><code id="L825"><span class="ln">825</span><span class="c">   [ method ]
</span></code><code id="L826"><span class="ln">826</span><span class="c">  <span class="s"> * </span>Get the css value of a property from one element or set a css property to all matched elements.
</span></code><code id="L827"><span class="ln">827</span><span class="c">   > Parameters
</span></code><code id="L828"><span class="ln">828</span><span class="c">  <span class="s"> - </span>property (string|object) Name of the css property.
</span></code><code id="L829"><span class="ln">829</span><span class="c">  <span class="s"> - </span>value (string|number) #optional Value <b>for</b> the property.
</span></code><code id="L830"><span class="ln">830</span><span class="c">  <span class="s"> = </span>(object) Original matched collection.
</span></code><code id="L831"><span class="ln">831</span><span class="c">   > Usage
</span></code><code id="L832"><span class="ln">832</span><span class="c">  <span class="s"> | </span>&lt;p>Hello dude!&lt;/p>
</span></code><code id="L833"><span class="ln">833</span><span class="c">  <span class="s"> * </span>Modify some styles
</span></code><code id="L834"><span class="ln">834</span><span class="c">  <span class="s"> | </span>$(<i>'p'</i>).css(<i>'color'</i>, <i>'red'</i>); <span class="c">// now the text is red</span>
</span></code><code id="L835"><span class="ln">835</span><span class="c">  <span class="s"> * </span>The HTML will look like <b>this</b>:
</span></code><code id="L836"><span class="ln">836</span><span class="c">  <span class="s"> | </span>&lt;p style=<i>"color: red;"</i>>Hello dude!&lt;/p>
</span></code><code id="L837"><span class="ln">837</span><span class="c">  <span class="s"> * </span>You can also pass an object <b>for</b> setting multiple properties at the same time
</span></code><code id="L838"><span class="ln">838</span><span class="c">  <span class="s"> | </span>$(<i>'p'</i>).css({
</span></code><code id="L839"><span class="ln">839</span><span class="c">  <span class="s"> | </span>  color: <i>'red'</i>,
</span></code><code id="L840"><span class="ln">840</span><span class="c">  <span class="s"> | </span>  <i>'font-size'</i>: <i>'30px'</i>,
</span></code><code id="L841"><span class="ln">841</span><span class="c">  <span class="s"> | </span>  backgroundColor: <i>'blue'</i>
</span></code><code id="L842"><span class="ln">842</span><span class="c">  <span class="s"> | </span>});
</span></code><code id="L843"><span class="ln">843</span><span class="c">  <span class="s"> * </span>Properties can be dash-separated (add quotes) or camelCase.
</span></code><code id="L844"><span class="ln">844</span><span class="c">  <span class="s"> | </span>&lt;p style=<i>"color: red; font-size: 30px; background-color: blue"</i>>Hello dude!&lt;/p>
</span></code><code id="L845"><span class="ln">845</span><span class="c">  \*/</span>
</code><code id="L846"><span class="ln">846</span>  css: <b>function</b> (property, value) {
</code><code id="L847"><span class="ln">847</span>    <b>var</b> properties,
</code><code id="L848"><span class="ln">848</span>        that<span class="s"> = </span><b>this</b>;
</code><code id="L849"><span class="ln">849</span>
</code><code id="L850"><span class="ln">850</span>    <b>if</b> (Kimbo.isString(property)) {
</code><code id="L851"><span class="ln">851</span>      <span class="c">// no value to set, <b>return</b> current</span>
</code><code id="L852"><span class="ln">852</span>      <b>if</b> (value<span class="s"> === </span><b>undefined</b>) {
</code><code id="L853"><span class="ln">853</span>        <b>return</b> <b>this</b>.length > <span class="d">0</span> ? _getComputedStyle(<b>this</b>[<span class="d">0</span>], property) : <b>undefined</b>;
</code><code id="L854"><span class="ln">854</span>      } <b>else</b> {
</code><code id="L855"><span class="ln">855</span>        <span class="c">// set props to aux object</span>
</code><code id="L856"><span class="ln">856</span>        properties<span class="s"> = </span>{};
</code><code id="L857"><span class="ln">857</span>        properties[property]<span class="s"> = </span>value;
</code><code id="L858"><span class="ln">858</span>      }
</code><code id="L859"><span class="ln">859</span>    }
</code><code id="L860"><span class="ln">860</span>
</code><code id="L861"><span class="ln">861</span>    <span class="c">// set properties</span>
</code><code id="L862"><span class="ln">862</span>    <b>if</b> (properties<span class="s"> || </span>Kimbo.isObject(property)) {
</code><code id="L863"><span class="ln">863</span>      properties<span class="s"> = </span>properties<span class="s"> || </span>property;
</code><code id="L864"><span class="ln">864</span>      Kimbo.forEach(properties, <b>function</b> (name, value) {
</code><code id="L865"><span class="ln">865</span>        <span class="c">// <b>if</b> it<i>'s a number add '</i>px' except <b>for</b> some properties</span>
</code><code id="L866"><span class="ln">866</span>        <b>if</b> (Kimbo.isNumeric(value)<span class="s"> &amp;&amp; </span>!cssNumber[Kimbo.camelCase(property)]) {
</code><code id="L867"><span class="ln">867</span>          value += <i>'px'</i>;
</code><code id="L868"><span class="ln">868</span>        }
</code><code id="L869"><span class="ln">869</span>
</code><code id="L870"><span class="ln">870</span>        that.each(<b>function</b> () {
</code><code id="L871"><span class="ln">871</span>          <b>this</b>.style[name]<span class="s"> = </span>value;
</code><code id="L872"><span class="ln">872</span>        });
</code><code id="L873"><span class="ln">873</span>      });
</code><code id="L874"><span class="ln">874</span>    }
</code><code id="L875"><span class="ln">875</span>
</code><code id="L876"><span class="ln">876</span>    <span class="c">// <b>return</b> collection</span>
</code><code id="L877"><span class="ln">877</span>    <b>return</b> <b>this</b>;
</code><code id="L878"><span class="ln">878</span>  },
</code><code id="L879"><span class="ln">879</span>
</code><code id="L880"><span class="ln">880</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L881"><span class="ln">881</span><span class="c">  <span class="s"> * </span>$(…).toggleClass
</span></code><code id="L882"><span class="ln">882</span><span class="c">   [ method ]
</span></code><code id="L883"><span class="ln">883</span><span class="c">  <span class="s"> * </span>Removes a <b>class</b> to all matched elements.
</span></code><code id="L884"><span class="ln">884</span><span class="c">   > Parameters
</span></code><code id="L885"><span class="ln">885</span><span class="c">  <span class="s"> - </span>name (string) Name of the <b>class</b> to toggle.
</span></code><code id="L886"><span class="ln">886</span><span class="c">  <span class="s"> - </span>state (<b>boolean</b>) #optional If state is <b>true</b> the <b>class</b> will be added, <b>if</b> <b>false</b>, removed.
</span></code><code id="L887"><span class="ln">887</span><span class="c">  <span class="s"> = </span>(object) Original matched collection.
</span></code><code id="L888"><span class="ln">888</span><span class="c">   > Usage
</span></code><code id="L889"><span class="ln">889</span><span class="c">  <span class="s"> | </span>&lt;p <b>class</b>=<i>"foo"</i>>Lorem ipsum.&lt;/p>
</span></code><code id="L890"><span class="ln">890</span><span class="c">  <span class="s"> | </span>&lt;script>
</span></code><code id="L891"><span class="ln">891</span><span class="c">  <span class="s"> | </span>$(<i>'p'</i>).toggleClass(<i>'foo'</i>);
</span></code><code id="L892"><span class="ln">892</span><span class="c">  <span class="s"> | </span>&lt;/script>
</span></code><code id="L893"><span class="ln">893</span><span class="c">  <span class="s"> * </span>The `p` element has the <b>class</b> foo soo it will be removed
</span></code><code id="L894"><span class="ln">894</span><span class="c">  <span class="s"> | </span>&lt;p>Lorem ipsum.&lt;/p>
</span></code><code id="L895"><span class="ln">895</span><span class="c">  \*/</span>
</code><code id="L896"><span class="ln">896</span>  toggleClass: <b>function</b> (name, state) {
</code><code id="L897"><span class="ln">897</span>    <b>var</b> classNames;
</code><code id="L898"><span class="ln">898</span>
</code><code id="L899"><span class="ln">899</span>    <b>if</b> (<b>this</b>.length<span class="s"> &amp;&amp; </span>name<span class="s"> &amp;&amp; </span>Kimbo.isString(name)) {
</code><code id="L900"><span class="ln">900</span>      classNames<span class="s"> = </span>name.split(r_space);
</code><code id="L901"><span class="ln">901</span>      <b>this</b>.each(<b>function</b> (elem) {
</code><code id="L902"><span class="ln">902</span>        Kimbo.forEach(classNames, <b>function</b> (name) {
</code><code id="L903"><span class="ln">903</span>          <span class="c">// use custom toggle (anyway it uses classList.add/remove)</span>
</code><code id="L904"><span class="ln">904</span>          state<span class="s"> = </span>Kimbo.isBoolean(state) ? state : !_hasClass(elem, name);
</code><code id="L905"><span class="ln">905</span>          Kimbo(elem)[state ? <i>'addClass'</i> : <i>'removeClass'</i>](name);
</code><code id="L906"><span class="ln">906</span>        });
</code><code id="L907"><span class="ln">907</span>      });
</code><code id="L908"><span class="ln">908</span>    }
</code><code id="L909"><span class="ln">909</span>
</code><code id="L910"><span class="ln">910</span>    <b>return</b> <b>this</b>;
</code><code id="L911"><span class="ln">911</span>  },
</code><code id="L912"><span class="ln">912</span>
</code><code id="L913"><span class="ln">913</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L914"><span class="ln">914</span><span class="c">  <span class="s"> * </span>$(…).hasClass
</span></code><code id="L915"><span class="ln">915</span><span class="c">   [ method ]
</span></code><code id="L916"><span class="ln">916</span><span class="c">  <span class="s"> * </span>Determine whether any matched elements has the given <b>class</b>.
</span></code><code id="L917"><span class="ln">917</span><span class="c">   > Parameters
</span></code><code id="L918"><span class="ln">918</span><span class="c">  <span class="s"> - </span>name (string) Name of the <b>class</b> to search <b>for</b>.
</span></code><code id="L919"><span class="ln">919</span><span class="c">  <span class="s"> = </span>(object) Original matched collection.
</span></code><code id="L920"><span class="ln">920</span><span class="c">   > Usage
</span></code><code id="L921"><span class="ln">921</span><span class="c">  <span class="s"> | </span>&lt;p <b>class</b>=<i>"asd foo qwe"</i>>Lorem ipsum.&lt;/p>
</span></code><code id="L922"><span class="ln">922</span><span class="c">  <span class="s"> * </span>Check <b>if</b> the element has the <b>class</b> <i>'foo'</i>
</span></code><code id="L923"><span class="ln">923</span><span class="c">  <span class="s"> | </span>$(<i>'p'</i>).hasClass(<i>'foo'</i>); <span class="c">// <b>true</b></span>
</span></code><code id="L924"><span class="ln">924</span><span class="c">  <span class="s"> * </span>You could also check <b>if</b> it has multiple classes
</span></code><code id="L925"><span class="ln">925</span><span class="c">  <span class="s"> | </span>$(<i>'p'</i>).hasClass(<i>'qwe asd'</i>); <span class="c">// <b>true</b></span>
</span></code><code id="L926"><span class="ln">926</span><span class="c">  \*/</span>
</code><code id="L927"><span class="ln">927</span>  hasClass: <b>function</b> (name) {
</code><code id="L928"><span class="ln">928</span>    <b>var</b> has<span class="s"> = </span><b>false</b>,
</code><code id="L929"><span class="ln">929</span>    classNames;
</code><code id="L930"><span class="ln">930</span>
</code><code id="L931"><span class="ln">931</span>    <b>if</b> (<b>this</b>.length<span class="s"> &amp;&amp; </span>name<span class="s"> &amp;&amp; </span>Kimbo.isString(name)) {
</code><code id="L932"><span class="ln">932</span>      classNames<span class="s"> = </span>name.trim().split(r_space);
</code><code id="L933"><span class="ln">933</span>      <b>this</b>.each(<b>function</b> (elem) {
</code><code id="L934"><span class="ln">934</span>        <span class="c">// classList.contains only accepts one <b>class</b> parameter</span>
</code><code id="L935"><span class="ln">935</span>        Kimbo.forEach(classNames, <b>function</b> (name) {
</code><code id="L936"><span class="ln">936</span>          has<span class="s"> = </span>_hasClass(elem, name);
</code><code id="L937"><span class="ln">937</span>          <span class="c">// <b>if</b> one doesn't exists <b>break</b> the loop and <b>return</b> <b>false</b></span>
</code><code id="L938"><span class="ln">938</span>          <b>if</b> (!has) {
</code><code id="L939"><span class="ln">939</span>            <b>return</b> <b>false</b>;
</code><code id="L940"><span class="ln">940</span>          }
</code><code id="L941"><span class="ln">941</span>        });
</code><code id="L942"><span class="ln">942</span>      });
</code><code id="L943"><span class="ln">943</span>    }
</code><code id="L944"><span class="ln">944</span>
</code><code id="L945"><span class="ln">945</span>    <b>return</b> has;
</code><code id="L946"><span class="ln">946</span>  },
</code><code id="L947"><span class="ln">947</span>
</code><code id="L948"><span class="ln">948</span>  clone: <b>function</b> () {
</code><code id="L949"><span class="ln">949</span>    <b>var</b> res<span class="s"> = </span>[];
</code><code id="L950"><span class="ln">950</span>    <b>this</b>.each(<b>function</b> () {
</code><code id="L951"><span class="ln">951</span>      res.push(<b>this</b>.cloneNode(<b>true</b>));
</code><code id="L952"><span class="ln">952</span>    });
</code><code id="L953"><span class="ln">953</span>    <b>return</b> Kimbo(res);
</code><code id="L954"><span class="ln">954</span>  }
</code><code id="L955"><span class="ln">955</span>});
</code><code id="L956"><span class="ln">956</span>
</code><code id="L957"><span class="ln">957</span><span class="c">// generate get/set .width() and .height() methods</span>
</code><code id="L958"><span class="ln">958</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L959"><span class="ln">959</span><span class="c"><span class="s"> * </span>$(…).width
</span></code><code id="L960"><span class="ln">960</span><span class="c"> [ method ]
</span></code><code id="L961"><span class="ln">961</span><span class="c"><span class="s"> * </span>Get the current width of the first element or set the width of all matched elements.
</span></code><code id="L962"><span class="ln">962</span><span class="c"> > Parameters
</span></code><code id="L963"><span class="ln">963</span><span class="c"><span class="s"> - </span>value (number|string) #optional An integer indicating the width of the element or a string width a unit of measure.
</span></code><code id="L964"><span class="ln">964</span><span class="c"><span class="s"> = </span>(number) the actual width of the element <b>if</b> no parameter passed.
</span></code><code id="L965"><span class="ln">965</span><span class="c"><span class="s"> = </span>(object) Kimbo object.
</span></code><code id="L966"><span class="ln">966</span><span class="c"> > Usage
</span></code><code id="L967"><span class="ln">967</span><span class="c"><span class="s"> | </span>&lt;style>
</span></code><code id="L968"><span class="ln">968</span><span class="c"><span class="s"> | </span>  div { width: 100px; }
</span></code><code id="L969"><span class="ln">969</span><span class="c"><span class="s"> | </span>&lt;/style>
</span></code><code id="L970"><span class="ln">970</span><span class="c"><span class="s"> | </span>&lt;div>Actual width is 100px&lt;/div>
</span></code><code id="L971"><span class="ln">971</span><span class="c"><span class="s"> * </span>Get the width:
</span></code><code id="L972"><span class="ln">972</span><span class="c"><span class="s"> | </span>$(<i>'div'</i>).width(); <span class="c">// <span class="d">100</span></span>
</span></code><code id="L973"><span class="ln">973</span><span class="c"><span class="s"> * </span>Change the width:
</span></code><code id="L974"><span class="ln">974</span><span class="c"><span class="s"> | </span>$(<i>'div'</i>).width(<span class="d">200</span>); <span class="c">// now its width is <span class="d">200</span></span>
</span></code><code id="L975"><span class="ln">975</span><span class="c"><span class="s"> * </span>Or passing a specific unit:
</span></code><code id="L976"><span class="ln">976</span><span class="c"><span class="s"> | </span>$(<i>'div'</i>).width(<i>'<span class="d">50</span>%'</i>); <span class="c">// now its width is <span class="d">50</span>%</span>
</span></code><code id="L977"><span class="ln">977</span><span class="c">\*/</span>
</code><code id="L978"><span class="ln">978</span>
</code><code id="L979"><span class="ln">979</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L980"><span class="ln">980</span><span class="c"><span class="s"> * </span>$(…).height
</span></code><code id="L981"><span class="ln">981</span><span class="c"> [ method ]
</span></code><code id="L982"><span class="ln">982</span><span class="c"><span class="s"> * </span>Get the current height of the first element or set the height of all matched elements.
</span></code><code id="L983"><span class="ln">983</span><span class="c"> > Parameters
</span></code><code id="L984"><span class="ln">984</span><span class="c"><span class="s"> - </span>value (number|string) #optional An integer indicating the height of the element or a string height a unit of measure.
</span></code><code id="L985"><span class="ln">985</span><span class="c"><span class="s"> = </span>(number) the actual height of the element <b>if</b> no parameter passed.
</span></code><code id="L986"><span class="ln">986</span><span class="c"><span class="s"> = </span>(object) Kimbo object.
</span></code><code id="L987"><span class="ln">987</span><span class="c"> > Usage
</span></code><code id="L988"><span class="ln">988</span><span class="c"><span class="s"> | </span>&lt;style>
</span></code><code id="L989"><span class="ln">989</span><span class="c"><span class="s"> | </span>  div { height: 100px; }
</span></code><code id="L990"><span class="ln">990</span><span class="c"><span class="s"> | </span>&lt;/style>
</span></code><code id="L991"><span class="ln">991</span><span class="c"><span class="s"> | </span>&lt;div>Actual height is 100px&lt;/div>
</span></code><code id="L992"><span class="ln">992</span><span class="c"><span class="s"> * </span>Get the height:
</span></code><code id="L993"><span class="ln">993</span><span class="c"><span class="s"> | </span>$(<i>'div'</i>).height(); <span class="c">// <span class="d">100</span></span>
</span></code><code id="L994"><span class="ln">994</span><span class="c"><span class="s"> * </span>Change the height:
</span></code><code id="L995"><span class="ln">995</span><span class="c"><span class="s"> | </span>$(<i>'div'</i>).height(<span class="d">200</span>); <span class="c">// now its height is <span class="d">200</span></span>
</span></code><code id="L996"><span class="ln">996</span><span class="c"><span class="s"> * </span>Or passing a specific unit:
</span></code><code id="L997"><span class="ln">997</span><span class="c"><span class="s"> | </span>$(<i>'div'</i>).height(<i>'<span class="d">50</span>%'</i>); <span class="c">// now its height is <span class="d">50</span>%</span>
</span></code><code id="L998"><span class="ln">998</span><span class="c">\*/</span>
</code><code id="L999"><span class="ln">999</span>Kimbo.forEach([<i>'width'</i>, <i>'height'</i>], <b>function</b> (dimension) {
</code><code id="L1000"><span class="ln">1000</span>  Kimbo.fn[dimension]<span class="s"> = </span><b>function</b> (value) {
</code><code id="L1001"><span class="ln">1001</span>    <b>if</b> (!value) {
</code><code id="L1002"><span class="ln">1002</span>      <b>return</b> parseInt(<b>this</b>.css(dimension), <span class="d">10</span>);
</code><code id="L1003"><span class="ln">1003</span>    }
</code><code id="L1004"><span class="ln">1004</span>    <b>return</b> <b>this</b>.css(dimension, value);
</code><code id="L1005"><span class="ln">1005</span>  };
</code><code id="L1006"><span class="ln">1006</span>});
</code><code id="L1007"><span class="ln">1007</span>
</code><code id="L1008"><span class="ln">1008</span>
</code><code id="L1009"><span class="ln">1009</span>
</code><code id="L1010"><span class="ln">1010</span><b>var</b> isUnique<span class="s"> = </span>{
</code><code id="L1011"><span class="ln">1011</span>  children: <b>true</b>,
</code><code id="L1012"><span class="ln">1012</span>  contents: <b>true</b>,
</code><code id="L1013"><span class="ln">1013</span>  next: <b>true</b>,
</code><code id="L1014"><span class="ln">1014</span>  prev: <b>true</b>
</code><code id="L1015"><span class="ln">1015</span>};
</code><code id="L1016"><span class="ln">1016</span>
</code><code id="L1017"><span class="ln">1017</span><span class="c">// wrap <b>native</b> to use correct method and extend behaviour</span>
</code><code id="L1018"><span class="ln">1018</span><b>var</b> _matchesSelector<span class="s"> = </span>(<b>function</b> () {
</code><code id="L1019"><span class="ln">1019</span>  <b>var</b> elem<span class="s"> = </span>document.createElement(<i>'div'</i>),
</code><code id="L1020"><span class="ln">1020</span>    matchesSelector<span class="s"> = </span>elem.webkitMatchesSelector<span class="s"> || </span>elem.mozMatchesSelector<span class="s"> || </span>elem.oMatchesSelector<span class="s"> || </span>elem.matchesSelector;
</code><code id="L1021"><span class="ln">1021</span>
</code><code id="L1022"><span class="ln">1022</span>  <b>return</b> <b>function</b> (elem, selector) {
</code><code id="L1023"><span class="ln">1023</span>    <b>if</b> (!elem<span class="s"> || </span>elem.nodeType !== <span class="d">1</span><span class="s"> || </span>!Kimbo.isString(selector)) {
</code><code id="L1024"><span class="ln">1024</span>      <b>return</b> <b>false</b>;
</code><code id="L1025"><span class="ln">1025</span>    }
</code><code id="L1026"><span class="ln">1026</span>    <b>return</b> matchesSelector.call(elem, selector);
</code><code id="L1027"><span class="ln">1027</span>  };
</code><code id="L1028"><span class="ln">1028</span>}());
</code><code id="L1029"><span class="ln">1029</span>
</code><code id="L1030"><span class="ln">1030</span><b>function</b> _unique(array) {
</code><code id="L1031"><span class="ln">1031</span>  <b>return</b> array.filter(<b>function</b> (item, index) {
</code><code id="L1032"><span class="ln">1032</span>    <b>return</b> array.indexOf(item)<span class="s"> === </span>index;
</code><code id="L1033"><span class="ln">1033</span>  });
</code><code id="L1034"><span class="ln">1034</span>}
</code><code id="L1035"><span class="ln">1035</span>
</code><code id="L1036"><span class="ln">1036</span><b>function</b> _sibling(node, elem) {
</code><code id="L1037"><span class="ln">1037</span>  <b>var</b> result<span class="s"> = </span>[];
</code><code id="L1038"><span class="ln">1038</span>  <b>for</b> (; node; node<span class="s"> = </span>node.nextSibling) {
</code><code id="L1039"><span class="ln">1039</span>    <b>if</b> (node.nodeType<span class="s"> === </span><span class="d">1</span><span class="s"> &amp;&amp; </span>node !== elem ) {
</code><code id="L1040"><span class="ln">1040</span>      result.push(node);
</code><code id="L1041"><span class="ln">1041</span>    }
</code><code id="L1042"><span class="ln">1042</span>  }
</code><code id="L1043"><span class="ln">1043</span>  <b>return</b> result;
</code><code id="L1044"><span class="ln">1044</span>}
</code><code id="L1045"><span class="ln">1045</span>
</code><code id="L1046"><span class="ln">1046</span><b>function</b> _singleSibling(node, prop) {
</code><code id="L1047"><span class="ln">1047</span>  <b>do</b> {
</code><code id="L1048"><span class="ln">1048</span>    node<span class="s"> = </span>node[prop];
</code><code id="L1049"><span class="ln">1049</span>  } <b>while</b> (node<span class="s"> &amp;&amp; </span>node.nodeType !== <span class="d">1</span>);
</code><code id="L1050"><span class="ln">1050</span>
</code><code id="L1051"><span class="ln">1051</span>  <b>return</b> node;
</code><code id="L1052"><span class="ln">1052</span>}
</code><code id="L1053"><span class="ln">1053</span>
</code><code id="L1054"><span class="ln">1054</span>Kimbo.fn.extend({
</code><code id="L1055"><span class="ln">1055</span>
</code><code id="L1056"><span class="ln">1056</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1057"><span class="ln">1057</span><span class="c">  <span class="s"> * </span>$(…).filter
</span></code><code id="L1058"><span class="ln">1058</span><span class="c">   [ method ]
</span></code><code id="L1059"><span class="ln">1059</span><span class="c">  <span class="s"> * </span>Filter element collection by the passed argument.
</span></code><code id="L1060"><span class="ln">1060</span><span class="c">   > Parameters
</span></code><code id="L1061"><span class="ln">1061</span><span class="c">  <span class="s"> - </span>selector (string|object|<b>function</b>) The argument by which the collection will be filtered.
</span></code><code id="L1062"><span class="ln">1062</span><span class="c">  <span class="s"> = </span>(object) Filtered elements collection.
</span></code><code id="L1063"><span class="ln">1063</span><span class="c">   > Usage
</span></code><code id="L1064"><span class="ln">1064</span><span class="c">  <span class="s"> | </span>&lt;ul>
</span></code><code id="L1065"><span class="ln">1065</span><span class="c">  <span class="s"> | </span>  &lt;li>One&lt;/li>
</span></code><code id="L1066"><span class="ln">1066</span><span class="c">  <span class="s"> | </span>  &lt;li>Two&lt;/li>
</span></code><code id="L1067"><span class="ln">1067</span><span class="c">  <span class="s"> | </span>  &lt;li>Three&lt;/li>
</span></code><code id="L1068"><span class="ln">1068</span><span class="c">  <span class="s"> | </span>  &lt;li>Four&lt;/li>
</span></code><code id="L1069"><span class="ln">1069</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1070"><span class="ln">1070</span><span class="c">  <span class="s"> * </span>Get even items.
</span></code><code id="L1071"><span class="ln">1071</span><span class="c">  <span class="s"> | </span>$(<i>'li'</i>).filter(<i>':nth-child(even)'</i>).addClass(<i>'even'</i>);
</span></code><code id="L1072"><span class="ln">1072</span><span class="c">  <span class="s"> * </span>Only even items were affected.
</span></code><code id="L1073"><span class="ln">1073</span><span class="c">  <span class="s"> | </span>&lt;ul>
</span></code><code id="L1074"><span class="ln">1074</span><span class="c">  <span class="s"> | </span>  &lt;li>One&lt;/li>
</span></code><code id="L1075"><span class="ln">1075</span><span class="c">  <span class="s"> | </span>  &lt;li <b>class</b>=<i>"even"</i>>Two&lt;/li>
</span></code><code id="L1076"><span class="ln">1076</span><span class="c">  <span class="s"> | </span>  &lt;li>Three&lt;/li>
</span></code><code id="L1077"><span class="ln">1077</span><span class="c">  <span class="s"> | </span>  &lt;li <b>class</b>=<i>"even"</i>>Four&lt;/li>
</span></code><code id="L1078"><span class="ln">1078</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1079"><span class="ln">1079</span><span class="c">   > Using a <b>function</b>(index, element)
</span></code><code id="L1080"><span class="ln">1080</span><span class="c">  <span class="s"> * </span>You can also filter the collection using a <b>function</b>, receiving the current index and element <b>in</b> the collection.
</span></code><code id="L1081"><span class="ln">1081</span><span class="c">  <span class="s"> | </span>$(<i>'li'</i>).filter(<b>function</b> (index, element) {
</span></code><code id="L1082"><span class="ln">1082</span><span class="c">  <span class="s"> | </span>  <b>return</b> index<span class="s"> % </span><span class="d">3</span><span class="s"> == </span><span class="d">2</span>;
</span></code><code id="L1083"><span class="ln">1083</span><span class="c">  <span class="s"> | </span>}).addClass(<i>'red'</i>);
</span></code><code id="L1084"><span class="ln">1084</span><span class="c">  <span class="s"> * </span>This will add a <i>'red'</i> <b>class</b> to the third, sixth, ninth elements and so on...
</span></code><code id="L1085"><span class="ln">1085</span><span class="c">   > Filter by DOM or Kimbo object
</span></code><code id="L1086"><span class="ln">1086</span><span class="c">  <span class="s"> * </span>You can also filter by a DOM or Kimbo object.
</span></code><code id="L1087"><span class="ln">1087</span><span class="c">  <span class="s"> | </span>$(<i>'li'</i>).filter(document.getElementById(<i>'id'</i>));
</span></code><code id="L1088"><span class="ln">1088</span><span class="c">  <span class="s"> | </span><span class="c">// or a Kimbo object</span>
</span></code><code id="L1089"><span class="ln">1089</span><span class="c">  <span class="s"> | </span>$(<i>'li'</i>).filter($(<i>'#id'</i>));
</span></code><code id="L1090"><span class="ln">1090</span><span class="c">  \*/</span>
</code><code id="L1091"><span class="ln">1091</span>  filter: <b>function</b> (selector) {
</code><code id="L1092"><span class="ln">1092</span>    <b>var</b> result, ret;
</code><code id="L1093"><span class="ln">1093</span>
</code><code id="L1094"><span class="ln">1094</span>    <span class="c">// filter collection</span>
</code><code id="L1095"><span class="ln">1095</span>    result<span class="s"> = </span>_filter.call(<b>this</b>, <b>function</b> (elem, i) {
</code><code id="L1096"><span class="ln">1096</span>      <b>if</b> (Kimbo.isFunction(selector)) {
</code><code id="L1097"><span class="ln">1097</span>        ret<span class="s"> = </span>!!selector.call(elem, i, elem);
</code><code id="L1098"><span class="ln">1098</span>      } <b>else</b> <b>if</b> (Kimbo.isString(selector)) {
</code><code id="L1099"><span class="ln">1099</span>        ret<span class="s"> = </span>_matchesSelector(elem, selector);
</code><code id="L1100"><span class="ln">1100</span>      } <b>else</b> <b>if</b> (selector.nodeType) {
</code><code id="L1101"><span class="ln">1101</span>        ret<span class="s"> = </span>elem<span class="s"> === </span>selector;
</code><code id="L1102"><span class="ln">1102</span>      } <b>else</b> <b>if</b> (Kimbo.isKimbo(selector)) {
</code><code id="L1103"><span class="ln">1103</span>        ret<span class="s"> = </span>elem<span class="s"> === </span>selector[<span class="d">0</span>];
</code><code id="L1104"><span class="ln">1104</span>      }
</code><code id="L1105"><span class="ln">1105</span>      <b>return</b> ret;
</code><code id="L1106"><span class="ln">1106</span>    });
</code><code id="L1107"><span class="ln">1107</span>
</code><code id="L1108"><span class="ln">1108</span>    <b>return</b> Kimbo(result);
</code><code id="L1109"><span class="ln">1109</span>  },
</code><code id="L1110"><span class="ln">1110</span>
</code><code id="L1111"><span class="ln">1111</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1112"><span class="ln">1112</span><span class="c">  <span class="s"> * </span>$(…).eq
</span></code><code id="L1113"><span class="ln">1113</span><span class="c">   [ method ]
</span></code><code id="L1114"><span class="ln">1114</span><span class="c">  <span class="s"> * </span>Reduce the matched elements collection to the one at the specified index.
</span></code><code id="L1115"><span class="ln">1115</span><span class="c">   > Parameters
</span></code><code id="L1116"><span class="ln">1116</span><span class="c">  <span class="s"> - </span>index (number) An integer indicating the position of the element. Use a negative number to go backwards <b>in</b> the collection.
</span></code><code id="L1117"><span class="ln">1117</span><span class="c">  <span class="s"> = </span>(object) Kimbo object at specified index.
</span></code><code id="L1118"><span class="ln">1118</span><span class="c">   > Usage
</span></code><code id="L1119"><span class="ln">1119</span><span class="c">  <span class="s"> | </span>&lt;ul>
</span></code><code id="L1120"><span class="ln">1120</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">1</span>&lt;/li>
</span></code><code id="L1121"><span class="ln">1121</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">2</span>&lt;/li>
</span></code><code id="L1122"><span class="ln">1122</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">3</span>&lt;/li>
</span></code><code id="L1123"><span class="ln">1123</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">4</span>&lt;/li>
</span></code><code id="L1124"><span class="ln">1124</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1125"><span class="ln">1125</span><span class="c">  <span class="s"> * </span>Get 3rd element, index always start at <span class="d">0</span>, so to get the 3rd we need to pass the number <span class="d">2</span>.
</span></code><code id="L1126"><span class="ln">1126</span><span class="c">  <span class="s"> | </span>$(<i>'li'</i>).eq(<span class="d">2</span>); <span class="c">// Item <span class="d">3</span></span>
</span></code><code id="L1127"><span class="ln">1127</span><span class="c">  \*/</span>
</code><code id="L1128"><span class="ln">1128</span>  eq: <b>function</b> (i) {
</code><code id="L1129"><span class="ln">1129</span>    <b>return</b> i<span class="s"> === </span>-<span class="d">1</span> ? <b>this</b>.slice(i) : <b>this</b>.slice(i, i<span class="s"> + </span><span class="d">1</span>);
</code><code id="L1130"><span class="ln">1130</span>  },
</code><code id="L1131"><span class="ln">1131</span>
</code><code id="L1132"><span class="ln">1132</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1133"><span class="ln">1133</span><span class="c">  <span class="s"> * </span>$(…).first
</span></code><code id="L1134"><span class="ln">1134</span><span class="c">   [ method ]
</span></code><code id="L1135"><span class="ln">1135</span><span class="c">  <span class="s"> * </span>Reduce the matched elements collection to the first <b>in</b> the set.
</span></code><code id="L1136"><span class="ln">1136</span><span class="c">  <span class="s"> = </span>(object) First Kimbo object of the collection
</span></code><code id="L1137"><span class="ln">1137</span><span class="c">   > Usage
</span></code><code id="L1138"><span class="ln">1138</span><span class="c">  <span class="s"> | </span>&lt;ul>
</span></code><code id="L1139"><span class="ln">1139</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">1</span>&lt;/li>
</span></code><code id="L1140"><span class="ln">1140</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">2</span>&lt;/li>
</span></code><code id="L1141"><span class="ln">1141</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">3</span>&lt;/li>
</span></code><code id="L1142"><span class="ln">1142</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1143"><span class="ln">1143</span><span class="c">  <span class="s"> * </span>Get only the first element
</span></code><code id="L1144"><span class="ln">1144</span><span class="c">  <span class="s"> | </span>$(<i>'li'</i>).first(); <span class="c">// Item <span class="d">1</span></span>
</span></code><code id="L1145"><span class="ln">1145</span><span class="c">  \*/</span>
</code><code id="L1146"><span class="ln">1146</span>  first: <b>function</b> () {
</code><code id="L1147"><span class="ln">1147</span>    <b>return</b> <b>this</b>.eq(<span class="d">0</span>);
</code><code id="L1148"><span class="ln">1148</span>  },
</code><code id="L1149"><span class="ln">1149</span>
</code><code id="L1150"><span class="ln">1150</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1151"><span class="ln">1151</span><span class="c">  <span class="s"> * </span>$(…).last
</span></code><code id="L1152"><span class="ln">1152</span><span class="c">   [ method ]
</span></code><code id="L1153"><span class="ln">1153</span><span class="c">  <span class="s"> * </span>Reduce the matched elements collection to the last <b>in</b> the set.
</span></code><code id="L1154"><span class="ln">1154</span><span class="c">  <span class="s"> = </span>(object) Last Kimbo object of the collection
</span></code><code id="L1155"><span class="ln">1155</span><span class="c">   > Usage
</span></code><code id="L1156"><span class="ln">1156</span><span class="c">  <span class="s"> | </span>&lt;ul>
</span></code><code id="L1157"><span class="ln">1157</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">1</span>&lt;/li>
</span></code><code id="L1158"><span class="ln">1158</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">2</span>&lt;/li>
</span></code><code id="L1159"><span class="ln">1159</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">3</span>&lt;/li>
</span></code><code id="L1160"><span class="ln">1160</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1161"><span class="ln">1161</span><span class="c">  <span class="s"> * </span>Get only the last element
</span></code><code id="L1162"><span class="ln">1162</span><span class="c">  <span class="s"> | </span>$(<i>'li'</i>).last(); <span class="c">// Item <span class="d">3</span></span>
</span></code><code id="L1163"><span class="ln">1163</span><span class="c">  \*/</span>
</code><code id="L1164"><span class="ln">1164</span>  last: <b>function</b> () {
</code><code id="L1165"><span class="ln">1165</span>    <b>return</b> <b>this</b>.eq(-<span class="d">1</span>);
</code><code id="L1166"><span class="ln">1166</span>  },
</code><code id="L1167"><span class="ln">1167</span>
</code><code id="L1168"><span class="ln">1168</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1169"><span class="ln">1169</span><span class="c">  <span class="s"> * </span>$(…).slice
</span></code><code id="L1170"><span class="ln">1170</span><span class="c">   [ method ]
</span></code><code id="L1171"><span class="ln">1171</span><span class="c">  <span class="s"> * </span>Reduce the matched elements collection to a subset specified by a range of indices
</span></code><code id="L1172"><span class="ln">1172</span><span class="c">   > Parameters
</span></code><code id="L1173"><span class="ln">1173</span><span class="c">  <span class="s"> - </span>start (number) An integer indicating the position at which the elements begin to be selected. Use a negative number to go backwards <b>in</b> the collection.
</span></code><code id="L1174"><span class="ln">1174</span><span class="c">  <span class="s"> - </span>end (number) #optional An integer indicating the position at which the elements stop being selected. Use a negative number to start at the end of the collection. If ommited, the range continues to the end.
</span></code><code id="L1175"><span class="ln">1175</span><span class="c">  <span class="s"> = </span>(object) Reduced Kimbo object collection <b>in</b> the range specified
</span></code><code id="L1176"><span class="ln">1176</span><span class="c">   > Usage
</span></code><code id="L1177"><span class="ln">1177</span><span class="c">  <span class="s"> | </span>&lt;ul>
</span></code><code id="L1178"><span class="ln">1178</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">1</span>&lt;/li>
</span></code><code id="L1179"><span class="ln">1179</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">2</span>&lt;/li>
</span></code><code id="L1180"><span class="ln">1180</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">3</span>&lt;/li>
</span></code><code id="L1181"><span class="ln">1181</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">4</span>&lt;/li>
</span></code><code id="L1182"><span class="ln">1182</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">5</span>&lt;/li>
</span></code><code id="L1183"><span class="ln">1183</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1184"><span class="ln">1184</span><span class="c">  <span class="s"> * </span>This will add the <b>class</b> selected to Item <span class="d">3</span>, <span class="d">4</span> and <span class="d">5</span>, as the index starts at <span class="d">0</span>
</span></code><code id="L1185"><span class="ln">1185</span><span class="c">  <span class="s"> | </span>$(<i>'li'</i>).slice(<span class="d">2</span>).addClass(<i>'selected'</i>);
</span></code><code id="L1186"><span class="ln">1186</span><span class="c">  <span class="s"> * </span>This will select only Items <span class="d">3</span> and <span class="d">4</span>
</span></code><code id="L1187"><span class="ln">1187</span><span class="c">  <span class="s"> | </span>$(<i>'li'</i>).slice(<span class="d">2</span>, <span class="d">4</span>).addClass(<i>'selected'</i>);
</span></code><code id="L1188"><span class="ln">1188</span><span class="c">   > Negative index
</span></code><code id="L1189"><span class="ln">1189</span><span class="c">  <span class="s"> * </span>Here only Item <span class="d">4</span> will be selected since is the only between -<span class="d">2</span> (Item <span class="d">3</span>) and -<span class="d">1</span> (Item <span class="d">5</span>)
</span></code><code id="L1190"><span class="ln">1190</span><span class="c">  <span class="s"> | </span>$(<i>'li'</i>).slice(-<span class="d">2</span>, -<span class="d">1</span>).addClass(<i>'selected'</i>);
</span></code><code id="L1191"><span class="ln">1191</span><span class="c">  \*/</span>
</code><code id="L1192"><span class="ln">1192</span>  slice: <b>function</b> () {
</code><code id="L1193"><span class="ln">1193</span>    <b>return</b> Kimbo(_slice.apply(<b>this</b>, arguments));
</code><code id="L1194"><span class="ln">1194</span>  },
</code><code id="L1195"><span class="ln">1195</span>
</code><code id="L1196"><span class="ln">1196</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1197"><span class="ln">1197</span><span class="c">  <span class="s"> * </span>$(…).each
</span></code><code id="L1198"><span class="ln">1198</span><span class="c">   [ method ]
</span></code><code id="L1199"><span class="ln">1199</span><span class="c">  <span class="s"> * </span>Iterate over a Kimbo objct, executing a <b>function</b> <b>for</b> each element.
</span></code><code id="L1200"><span class="ln">1200</span><span class="c">   > Parameters
</span></code><code id="L1201"><span class="ln">1201</span><span class="c">  <span class="s"> - </span>callback (<b>function</b>) A <b>function</b> to call <b>for</b> each element <b>in</b> the collection.
</span></code><code id="L1202"><span class="ln">1202</span><span class="c">  <span class="s"> = </span>(object) Kimbo object
</span></code><code id="L1203"><span class="ln">1203</span><span class="c">   > Usage
</span></code><code id="L1204"><span class="ln">1204</span><span class="c">  <span class="s"> * </span>Here we have an unordered list:
</span></code><code id="L1205"><span class="ln">1205</span><span class="c">  <span class="s"> | </span>&lt;ul>
</span></code><code id="L1206"><span class="ln">1206</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">1</span>&lt;/li>
</span></code><code id="L1207"><span class="ln">1207</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">2</span>&lt;/li>
</span></code><code id="L1208"><span class="ln">1208</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">3</span>&lt;/li>
</span></code><code id="L1209"><span class="ln">1209</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1210"><span class="ln">1210</span><span class="c">  <span class="s"> * </span>You can iterate over all the list items and execute a <b>function</b>
</span></code><code id="L1211"><span class="ln">1211</span><span class="c">  <span class="s"> | </span>$(<i>'li'</i>).each(<b>function</b> (el, index, collection) {
</span></code><code id="L1212"><span class="ln">1212</span><span class="c">  <span class="s"> | </span>  console.log(<i>'index of '</i><span class="s"> + </span>$(<b>this</b>).text()<span class="s"> + </span><i>' is: '</i><span class="s"> + </span>index);
</span></code><code id="L1213"><span class="ln">1213</span><span class="c">  <span class="s"> | </span>});
</span></code><code id="L1214"><span class="ln">1214</span><span class="c">  <span class="s"> * </span>This will log the following message
</span></code><code id="L1215"><span class="ln">1215</span><span class="c">   *
</span></code><code id="L1216"><span class="ln">1216</span><span class="c">  <span class="s"> * </span>index of Item <span class="d">1</span> is: <span class="d">0</span>
</span></code><code id="L1217"><span class="ln">1217</span><span class="c">   *
</span></code><code id="L1218"><span class="ln">1218</span><span class="c">  <span class="s"> * </span>index of Item <span class="d">2</span> is: <span class="d">1</span>
</span></code><code id="L1219"><span class="ln">1219</span><span class="c">   *
</span></code><code id="L1220"><span class="ln">1220</span><span class="c">  <span class="s"> * </span>index of Item <span class="d">3</span> is: <span class="d">2</span>
</span></code><code id="L1221"><span class="ln">1221</span><span class="c">  \*/</span>
</code><code id="L1222"><span class="ln">1222</span>  each: <b>function</b> (callback) {
</code><code id="L1223"><span class="ln">1223</span>    <b>return</b> Kimbo.forEach(<b>this</b>, callback);
</code><code id="L1224"><span class="ln">1224</span>  },
</code><code id="L1225"><span class="ln">1225</span>
</code><code id="L1226"><span class="ln">1226</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1227"><span class="ln">1227</span><span class="c">  <span class="s"> * </span>$(…).map
</span></code><code id="L1228"><span class="ln">1228</span><span class="c">   [ method ]
</span></code><code id="L1229"><span class="ln">1229</span><span class="c">  <span class="s"> * </span>Execute a <b>function</b> <b>for</b> each element <b>in</b> the collection, producing a <b>new</b> Kimbo set <b>with</b> the returned values
</span></code><code id="L1230"><span class="ln">1230</span><span class="c">   > Parameters
</span></code><code id="L1231"><span class="ln">1231</span><span class="c">  <span class="s"> - </span>callback (<b>function</b>) A <b>function</b> to call <b>for</b> each element <b>in</b> the collection.
</span></code><code id="L1232"><span class="ln">1232</span><span class="c">  <span class="s"> = </span>(object) Kimbo object
</span></code><code id="L1233"><span class="ln">1233</span><span class="c">   > Usage
</span></code><code id="L1234"><span class="ln">1234</span><span class="c">  <span class="s"> * </span>Here we have an unordered list:
</span></code><code id="L1235"><span class="ln">1235</span><span class="c">  <span class="s"> | </span>&lt;ul>
</span></code><code id="L1236"><span class="ln">1236</span><span class="c">  <span class="s"> | </span>  &lt;li id=<i>"item1"</i>>Item <span class="d">1</span>&lt;/li>
</span></code><code id="L1237"><span class="ln">1237</span><span class="c">  <span class="s"> | </span>  &lt;li id=<i>"item2"</i>>Item <span class="d">2</span>&lt;/li>
</span></code><code id="L1238"><span class="ln">1238</span><span class="c">  <span class="s"> | </span>  &lt;li id=<i>"item3"</i>>Item <span class="d">3</span>&lt;/li>
</span></code><code id="L1239"><span class="ln">1239</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1240"><span class="ln">1240</span><span class="c">  <span class="s"> * </span>You can call a <b>function</b> <b>for</b> each element to create a <b>new</b> Kimbo object
</span></code><code id="L1241"><span class="ln">1241</span><span class="c">  <span class="s"> | </span>$(<i>'li'</i>).map(<b>function</b> (el, index) {
</span></code><code id="L1242"><span class="ln">1242</span><span class="c">  <span class="s"> | </span>  <b>return</b> <b>this</b>.id;
</span></code><code id="L1243"><span class="ln">1243</span><span class="c">  <span class="s"> | </span>}).get().join();
</span></code><code id="L1244"><span class="ln">1244</span><span class="c">  <span class="s"> * </span>This will produce a list of the item ids.
</span></code><code id="L1245"><span class="ln">1245</span><span class="c">  <span class="s"> | </span><i>"item1,item2,item3"</i>
</span></code><code id="L1246"><span class="ln">1246</span><span class="c">  \*/</span>
</code><code id="L1247"><span class="ln">1247</span>  map: <b>function</b> (callback) {
</code><code id="L1248"><span class="ln">1248</span>    <b>return</b> Kimbo(Kimbo.map(<b>this</b>, <b>function</b> (elem, i) {
</code><code id="L1249"><span class="ln">1249</span>      <b>return</b> callback.call(elem, elem, i);
</code><code id="L1250"><span class="ln">1250</span>    }));
</code><code id="L1251"><span class="ln">1251</span>  },
</code><code id="L1252"><span class="ln">1252</span>
</code><code id="L1253"><span class="ln">1253</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1254"><span class="ln">1254</span><span class="c">  <span class="s"> * </span>$(…).find
</span></code><code id="L1255"><span class="ln">1255</span><span class="c">   [ method ]
</span></code><code id="L1256"><span class="ln">1256</span><span class="c">  <span class="s"> * </span>Find descendant elements <b>for</b> each element <b>in</b> the current collection.
</span></code><code id="L1257"><span class="ln">1257</span><span class="c">   > Parameters
</span></code><code id="L1258"><span class="ln">1258</span><span class="c">  <span class="s"> - </span>selector (string) A string selector to match elements.
</span></code><code id="L1259"><span class="ln">1259</span><span class="c">  <span class="s"> = </span>(object) Kimbo object
</span></code><code id="L1260"><span class="ln">1260</span><span class="c">   > Usage
</span></code><code id="L1261"><span class="ln">1261</span><span class="c">  <span class="s"> * </span>Here we have some HTML
</span></code><code id="L1262"><span class="ln">1262</span><span class="c">  <span class="s"> | </span>&lt;div id=<i>"container"</i>>
</span></code><code id="L1263"><span class="ln">1263</span><span class="c">  <span class="s"> | </span>  &lt;p>Demo&lt;/p>
</span></code><code id="L1264"><span class="ln">1264</span><span class="c">  <span class="s"> | </span>  &lt;div <b>class</b>=<i>"article"</i>>
</span></code><code id="L1265"><span class="ln">1265</span><span class="c">  <span class="s"> | </span>    &lt;p>This is an article&lt;/p>
</span></code><code id="L1266"><span class="ln">1266</span><span class="c">  <span class="s"> | </span>    &lt;p><b>with</b> some paragraphs&lt;/p>
</span></code><code id="L1267"><span class="ln">1267</span><span class="c">  <span class="s"> | </span>  &lt;/div>
</span></code><code id="L1268"><span class="ln">1268</span><span class="c">  <span class="s"> | </span>&lt;/div>
</span></code><code id="L1269"><span class="ln">1269</span><span class="c">  <span class="s"> * </span>You can find all paragraph elements inside the article:
</span></code><code id="L1270"><span class="ln">1270</span><span class="c">  <span class="s"> | </span>$(<i>'.article'</i>).find(<i>'p'</i>);
</span></code><code id="L1271"><span class="ln">1271</span><span class="c">  \*/</span>
</code><code id="L1272"><span class="ln">1272</span>  find: <b>function</b> (selector) {
</code><code id="L1273"><span class="ln">1273</span>    <b>var</b> i, l, length, n, r, result, elems;
</code><code id="L1274"><span class="ln">1274</span>
</code><code id="L1275"><span class="ln">1275</span>    <span class="c">// make <b>new</b> empty kimbo collection</span>
</code><code id="L1276"><span class="ln">1276</span>    result<span class="s"> = </span>Kimbo();
</code><code id="L1277"><span class="ln">1277</span>
</code><code id="L1278"><span class="ln">1278</span>    <span class="c">// could use Kimbo.forEach, but <b>this</b> is a bit faster..</span>
</code><code id="L1279"><span class="ln">1279</span>    <b>for</b> (i<span class="s"> = </span><span class="d">0</span>, l<span class="s"> = </span><b>this</b>.length; i &lt; l; i++) {
</code><code id="L1280"><span class="ln">1280</span>      length<span class="s"> = </span>result.length;
</code><code id="L1281"><span class="ln">1281</span>      <span class="c">// get elements</span>
</code><code id="L1282"><span class="ln">1282</span>      elems<span class="s"> = </span>_query(<b>this</b>[i], selector);
</code><code id="L1283"><span class="ln">1283</span>      <span class="c">// push them to current kimbo collection</span>
</code><code id="L1284"><span class="ln">1284</span>      _push.apply(result, elems);
</code><code id="L1285"><span class="ln">1285</span>
</code><code id="L1286"><span class="ln">1286</span>      <b>if</b> (i > <span class="d">0</span>) {
</code><code id="L1287"><span class="ln">1287</span>        <span class="c">// make results unique</span>
</code><code id="L1288"><span class="ln">1288</span>        <b>for</b> (n<span class="s"> = </span>length; n &lt; result.length; n++) {
</code><code id="L1289"><span class="ln">1289</span>          <b>for</b> (r<span class="s"> = </span><span class="d">0</span>; r &lt; length; r++) {
</code><code id="L1290"><span class="ln">1290</span>            <b>if</b> (result[r]<span class="s"> === </span>result[n]) {
</code><code id="L1291"><span class="ln">1291</span>              result.splice(n--, <span class="d">1</span>);
</code><code id="L1292"><span class="ln">1292</span>              <b>break</b>;
</code><code id="L1293"><span class="ln">1293</span>            }
</code><code id="L1294"><span class="ln">1294</span>          }
</code><code id="L1295"><span class="ln">1295</span>        }
</code><code id="L1296"><span class="ln">1296</span>      }
</code><code id="L1297"><span class="ln">1297</span>    }
</code><code id="L1298"><span class="ln">1298</span>
</code><code id="L1299"><span class="ln">1299</span>    <b>return</b> result;
</code><code id="L1300"><span class="ln">1300</span>  },
</code><code id="L1301"><span class="ln">1301</span>
</code><code id="L1302"><span class="ln">1302</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1303"><span class="ln">1303</span><span class="c">  <span class="s"> * </span>$(…).closest
</span></code><code id="L1304"><span class="ln">1304</span><span class="c">   [ method ]
</span></code><code id="L1305"><span class="ln">1305</span><span class="c">  <span class="s"> * </span>Get a Kimbo collection that matches the closest selector
</span></code><code id="L1306"><span class="ln">1306</span><span class="c">   > Parameters
</span></code><code id="L1307"><span class="ln">1307</span><span class="c">  <span class="s"> - </span>selector (string) A string selector to match elements.
</span></code><code id="L1308"><span class="ln">1308</span><span class="c">  <span class="s"> - </span>context (string) #optional A DOM element within which matching elements may be found.
</span></code><code id="L1309"><span class="ln">1309</span><span class="c">  <span class="s"> = </span>(object) Kimbo object
</span></code><code id="L1310"><span class="ln">1310</span><span class="c">   > Usage
</span></code><code id="L1311"><span class="ln">1311</span><span class="c">  <span class="s"> * </span>Here we have a nested unordered lists:
</span></code><code id="L1312"><span class="ln">1312</span><span class="c">  <span class="s"> | </span>&lt;ul>
</span></code><code id="L1313"><span class="ln">1313</span><span class="c">  <span class="s"> | </span>  &lt;li>
</span></code><code id="L1314"><span class="ln">1314</span><span class="c">  <span class="s"> | </span>    Item <span class="d">1</span>
</span></code><code id="L1315"><span class="ln">1315</span><span class="c">  <span class="s"> | </span>    &lt;ul <b>class</b>=<i>"ul-level-<span class="d">2</span>"</i>>
</span></code><code id="L1316"><span class="ln">1316</span><span class="c">  <span class="s"> | </span>      &lt;li <b>class</b>=<i>"item-<span class="d">1</span>-<span class="d">1</span>"</i>>Item <span class="d">1.1</span>&lt;/li>
</span></code><code id="L1317"><span class="ln">1317</span><span class="c">  <span class="s"> | </span>      &lt;li <b>class</b>=<i>"item-<span class="d">1</span>-<span class="d">2</span>"</i>>Item <span class="d">1.2</span>&lt;/li>
</span></code><code id="L1318"><span class="ln">1318</span><span class="c">  <span class="s"> | </span>    &lt;/ul>
</span></code><code id="L1319"><span class="ln">1319</span><span class="c">  <span class="s"> | </span>  &lt;/li>
</span></code><code id="L1320"><span class="ln">1320</span><span class="c">  <span class="s"> | </span>  &lt;li>Item <span class="d">2</span>&lt;/li>
</span></code><code id="L1321"><span class="ln">1321</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1322"><span class="ln">1322</span><span class="c">  <span class="s"> * </span>You can find the containing ul of the items <b>in</b> the nested ul:
</span></code><code id="L1323"><span class="ln">1323</span><span class="c">  <span class="s"> | </span>$(<i>'.item-<span class="d">1</span>-<span class="d">1</span>'</i>).closest(<i>'ul'</i>);
</span></code><code id="L1324"><span class="ln">1324</span><span class="c">  <span class="s"> * </span>This will <b>return</b> `ul.level-<span class="d">2</span>` element
</span></code><code id="L1325"><span class="ln">1325</span><span class="c">  \*/</span>
</code><code id="L1326"><span class="ln">1326</span>  closest: <b>function</b> (selector, context) {
</code><code id="L1327"><span class="ln">1327</span>    <b>var</b> result<span class="s"> = </span>[];
</code><code id="L1328"><span class="ln">1328</span>
</code><code id="L1329"><span class="ln">1329</span>    <span class="c">// a normal <b>for</b> loop would be faster</span>
</code><code id="L1330"><span class="ln">1330</span>    Kimbo.forEach(<b>this</b>, <b>function</b> (node) {
</code><code id="L1331"><span class="ln">1331</span>
</code><code id="L1332"><span class="ln">1332</span>      <span class="c">// check selector match and grab the element</span>
</code><code id="L1333"><span class="ln">1333</span>      <b>while</b> (node<span class="s"> &amp;&amp; </span>!_matchesSelector(node, selector)) {
</code><code id="L1334"><span class="ln">1334</span>        node<span class="s"> = </span>(node !== context<span class="s"> &amp;&amp; </span>node !== document<span class="s"> &amp;&amp; </span>node.parentNode);
</code><code id="L1335"><span class="ln">1335</span>      }
</code><code id="L1336"><span class="ln">1336</span>
</code><code id="L1337"><span class="ln">1337</span>      <b>if</b> (node) {
</code><code id="L1338"><span class="ln">1338</span>        result.push(node);
</code><code id="L1339"><span class="ln">1339</span>      }
</code><code id="L1340"><span class="ln">1340</span>    });
</code><code id="L1341"><span class="ln">1341</span>
</code><code id="L1342"><span class="ln">1342</span>    <span class="c">// only unique results</span>
</code><code id="L1343"><span class="ln">1343</span>    result<span class="s"> = </span>result.length > <span class="d">1</span> ? _unique(result) : result;
</code><code id="L1344"><span class="ln">1344</span>
</code><code id="L1345"><span class="ln">1345</span>    <b>return</b> Kimbo(result);
</code><code id="L1346"><span class="ln">1346</span>  },
</code><code id="L1347"><span class="ln">1347</span>
</code><code id="L1348"><span class="ln">1348</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1349"><span class="ln">1349</span><span class="c">  <span class="s"> * </span>$(…).contains
</span></code><code id="L1350"><span class="ln">1350</span><span class="c">   [ method ]
</span></code><code id="L1351"><span class="ln">1351</span><span class="c">  <span class="s"> * </span>Determine whether an element is contained by the current matched element.
</span></code><code id="L1352"><span class="ln">1352</span><span class="c">   > Parameters
</span></code><code id="L1353"><span class="ln">1353</span><span class="c">  <span class="s"> - </span>element (string|object) Selector of the element or the actual DOM or Kimbo object.
</span></code><code id="L1354"><span class="ln">1354</span><span class="c">  <span class="s"> = </span>(<b>boolean</b>) <b>true</b> <b>if</b> it is contained, <b>false</b> <b>if</b> not.
</span></code><code id="L1355"><span class="ln">1355</span><span class="c">   > Usage
</span></code><code id="L1356"><span class="ln">1356</span><span class="c">  <span class="s"> | </span>&lt;div id=<i>"container"</i>>
</span></code><code id="L1357"><span class="ln">1357</span><span class="c">  <span class="s"> | </span>  &lt;p id=<i>"inside"</i>>Inside paragraph&lt;/p>
</span></code><code id="L1358"><span class="ln">1358</span><span class="c">  <span class="s"> | </span>&lt;/div>
</span></code><code id="L1359"><span class="ln">1359</span><span class="c">  <span class="s"> | </span>&lt;p id=<i>"outside"</i>>Outside paragraph&lt;/p>
</span></code><code id="L1360"><span class="ln">1360</span><span class="c">  <span class="s"> * </span>The paragraph <b>with</b> id <i>"inside"</i> is actually contained by <i>"#container"</i>
</span></code><code id="L1361"><span class="ln">1361</span><span class="c">  <span class="s"> | </span>$(<i>'#container'</i>).contains(<i>'#inside'</i>); <span class="c">// <b>true</b></span>
</span></code><code id="L1362"><span class="ln">1362</span><span class="c">  <span class="s"> * </span>The paragraph ourside is not contained
</span></code><code id="L1363"><span class="ln">1363</span><span class="c">  <span class="s"> | </span><b>var</b> outside_p<span class="s"> = </span>$(<i>'#outside'</i>);
</span></code><code id="L1364"><span class="ln">1364</span><span class="c">  <span class="s"> | </span>$(<i>'#container'</i>).contains(outside_p); <span class="c">// <b>false</b></span>
</span></code><code id="L1365"><span class="ln">1365</span><span class="c">  \*/</span>
</code><code id="L1366"><span class="ln">1366</span>  contains: <b>function</b> (element) {
</code><code id="L1367"><span class="ln">1367</span>    element<span class="s"> = </span>Kimbo.isKimbo(element) ? element[<span class="d">0</span>] : (Kimbo.isString(element) ? <b>this</b>.find(element)[<span class="d">0</span>] : element);
</code><code id="L1368"><span class="ln">1368</span>    <b>return</b> _contains(<b>this</b>[<span class="d">0</span>], element);
</code><code id="L1369"><span class="ln">1369</span>  },
</code><code id="L1370"><span class="ln">1370</span>
</code><code id="L1371"><span class="ln">1371</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1372"><span class="ln">1372</span><span class="c">  <span class="s"> * </span>$(…).add
</span></code><code id="L1373"><span class="ln">1373</span><span class="c">   [ method ]
</span></code><code id="L1374"><span class="ln">1374</span><span class="c">  <span class="s"> * </span>Add elements to the current Kimbo collection.
</span></code><code id="L1375"><span class="ln">1375</span><span class="c">   > Parameters
</span></code><code id="L1376"><span class="ln">1376</span><span class="c">  <span class="s"> - </span>selector (string|object) Selector of the element or the actual DOM or Kimbo object.
</span></code><code id="L1377"><span class="ln">1377</span><span class="c">  <span class="s"> - </span>context (string|object) #optional Selector of the context element or the actual DOM or Kimbo object.
</span></code><code id="L1378"><span class="ln">1378</span><span class="c">  <span class="s"> = </span>(object) The merged Kimbo collection.
</span></code><code id="L1379"><span class="ln">1379</span><span class="c">   > Usage
</span></code><code id="L1380"><span class="ln">1380</span><span class="c">  <span class="s"> | </span>&lt;ul id=<i>"menu1"</i>>
</span></code><code id="L1381"><span class="ln">1381</span><span class="c">  <span class="s"> | </span>  &lt;li>Apple&lt;/li>
</span></code><code id="L1382"><span class="ln">1382</span><span class="c">  <span class="s"> | </span>  &lt;li>Orange&lt;/li>
</span></code><code id="L1383"><span class="ln">1383</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1384"><span class="ln">1384</span><span class="c">   |
</span></code><code id="L1385"><span class="ln">1385</span><span class="c">  <span class="s"> | </span>&lt;ul id=<i>"menu2"</i>>
</span></code><code id="L1386"><span class="ln">1386</span><span class="c">  <span class="s"> | </span>  &lt;li>Lemon&lt;/li>
</span></code><code id="L1387"><span class="ln">1387</span><span class="c">  <span class="s"> | </span>  &lt;li>Banana&lt;/li>
</span></code><code id="L1388"><span class="ln">1388</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1389"><span class="ln">1389</span><span class="c">  <span class="s"> * </span>Get the items from the #menu1 and add the ones from #menu2, all the following ways will produce the same collection
</span></code><code id="L1390"><span class="ln">1390</span><span class="c">  <span class="s"> | </span>$(<i>'#menu1 li'</i>).add(<i>'#menu2 li'</i>);
</span></code><code id="L1391"><span class="ln">1391</span><span class="c">  <span class="s"> * </span>or
</span></code><code id="L1392"><span class="ln">1392</span><span class="c">  <span class="s"> | </span>$(<i>'#menu1 li'</i>).add(<i>'li'</i>, <i>'#menu2'</i>);
</span></code><code id="L1393"><span class="ln">1393</span><span class="c">  <span class="s"> * </span>or
</span></code><code id="L1394"><span class="ln">1394</span><span class="c">  <span class="s"> | </span>$(<i>'#menu1 li'</i>).add($(<i>'#menu2 li'</i>));
</span></code><code id="L1395"><span class="ln">1395</span><span class="c">  \*/</span>
</code><code id="L1396"><span class="ln">1396</span>  add: <b>function</b> (selector, context) {
</code><code id="L1397"><span class="ln">1397</span>    <b>var</b> set<span class="s"> = </span>Kimbo.isString(selector) ? Kimbo(selector, context) : Kimbo.makeArray(selector<span class="s"> &amp;&amp; </span>selector.nodeType ? [selector] : selector),
</code><code id="L1398"><span class="ln">1398</span>      all<span class="s"> = </span>Kimbo.merge(<b>this</b>, set);
</code><code id="L1399"><span class="ln">1399</span>
</code><code id="L1400"><span class="ln">1400</span>    <b>return</b> Kimbo(all);
</code><code id="L1401"><span class="ln">1401</span>  },
</code><code id="L1402"><span class="ln">1402</span>
</code><code id="L1403"><span class="ln">1403</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1404"><span class="ln">1404</span><span class="c">  <span class="s"> * </span>$(…).is
</span></code><code id="L1405"><span class="ln">1405</span><span class="c">   [ method ]
</span></code><code id="L1406"><span class="ln">1406</span><span class="c">  <span class="s"> * </span>Check the current elements collection against a selector, object or <b>function</b>.
</span></code><code id="L1407"><span class="ln">1407</span><span class="c">  <span class="s"> - </span>selector (string|object|<b>function</b>) The argument by which the collection will be matched against.
</span></code><code id="L1408"><span class="ln">1408</span><span class="c">  <span class="s"> = </span>(<b>boolean</b>)
</span></code><code id="L1409"><span class="ln">1409</span><span class="c">   > Usage
</span></code><code id="L1410"><span class="ln">1410</span><span class="c">  <span class="s"> | </span>&lt;ul>
</span></code><code id="L1411"><span class="ln">1411</span><span class="c">  <span class="s"> | </span>  &lt;li>Click the &lt;em>Apple&lt;/em>&lt;/li>
</span></code><code id="L1412"><span class="ln">1412</span><span class="c">  <span class="s"> | </span>  &lt;li>&lt;span>Click the Orange&lt;/span>&lt;/li>
</span></code><code id="L1413"><span class="ln">1413</span><span class="c">  <span class="s"> | </span>  &lt;li>Or the Banana&lt;/li>
</span></code><code id="L1414"><span class="ln">1414</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1415"><span class="ln">1415</span><span class="c">  <span class="s"> * </span>Test <b>if</b> the current clicked element is an `&lt;li>` element.
</span></code><code id="L1416"><span class="ln">1416</span><span class="c">  <span class="s"> | </span>$(<i>'ul'</i>).click(<b>function</b> (event) {
</span></code><code id="L1417"><span class="ln">1417</span><span class="c">  <span class="s"> | </span>  <b>var</b> $target<span class="s"> = </span>$(event.target);
</span></code><code id="L1418"><span class="ln">1418</span><span class="c">  <span class="s"> | </span>  <b>if</b> ($target.is(<i>'li'</i>)) {
</span></code><code id="L1419"><span class="ln">1419</span><span class="c">  <span class="s"> | </span>    $target.css(<i>'background-color'</i>, <i>'red'</i>);
</span></code><code id="L1420"><span class="ln">1420</span><span class="c">  <span class="s"> | </span>  }
</span></code><code id="L1421"><span class="ln">1421</span><span class="c">  <span class="s"> | </span>});
</span></code><code id="L1422"><span class="ln">1422</span><span class="c">  \*/</span>
</code><code id="L1423"><span class="ln">1423</span>  is: <b>function</b> (selector) {
</code><code id="L1424"><span class="ln">1424</span>    <b>return</b> <b>this</b>.length > <span class="d">0</span><span class="s"> &amp;&amp; </span><b>this</b>.filter(selector).length > <span class="d">0</span>;
</code><code id="L1425"><span class="ln">1425</span>  }
</code><code id="L1426"><span class="ln">1426</span>});
</code><code id="L1427"><span class="ln">1427</span>
</code><code id="L1428"><span class="ln">1428</span>Kimbo.forEach({
</code><code id="L1429"><span class="ln">1429</span>
</code><code id="L1430"><span class="ln">1430</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1431"><span class="ln">1431</span><span class="c">  <span class="s"> * </span>$(…).parent
</span></code><code id="L1432"><span class="ln">1432</span><span class="c">   [ method ]
</span></code><code id="L1433"><span class="ln">1433</span><span class="c">  <span class="s"> * </span>Get the parent of each element matched <b>in</b> the current collection.
</span></code><code id="L1434"><span class="ln">1434</span><span class="c">  <span class="s"> * </span>If a selector is specified, it will <b>return</b> the parent element only <b>if</b> it matches that selector.
</span></code><code id="L1435"><span class="ln">1435</span><span class="c">  <span class="s"> - </span>selector (string) #optional A string containing a selector expression to match elements against
</span></code><code id="L1436"><span class="ln">1436</span><span class="c">  <span class="s"> = </span>(object) Kimbo object
</span></code><code id="L1437"><span class="ln">1437</span><span class="c">   > Usage
</span></code><code id="L1438"><span class="ln">1438</span><span class="c">  <span class="s"> * </span>Suppose a page <b>with</b> <b>this</b> HTML:
</span></code><code id="L1439"><span class="ln">1439</span><span class="c">  <span class="s"> | </span>&lt;ul>
</span></code><code id="L1440"><span class="ln">1440</span><span class="c">  <span class="s"> | </span>  &lt;li <b>class</b>=<i>"item-a"</i>>Item <span class="d">1</span>&lt;/li>
</span></code><code id="L1441"><span class="ln">1441</span><span class="c">  <span class="s"> | </span>  &lt;li <b>class</b>=<i>"item-b"</i>>Item <span class="d">2</span>&lt;/li>
</span></code><code id="L1442"><span class="ln">1442</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1443"><span class="ln">1443</span><span class="c">  <span class="s"> * </span>Get the parent element of `.item-a`
</span></code><code id="L1444"><span class="ln">1444</span><span class="c">  <span class="s"> | </span>$(<i>'.item-a'</i>).parent(); <span class="c">// ul</span>
</span></code><code id="L1445"><span class="ln">1445</span><span class="c">  \*/</span>
</code><code id="L1446"><span class="ln">1446</span>  parent: <b>function</b> (elem) {
</code><code id="L1447"><span class="ln">1447</span>    <b>var</b> parent<span class="s"> = </span>elem.parentNode;
</code><code id="L1448"><span class="ln">1448</span>    <b>return</b> parent<span class="s"> &amp;&amp; </span>parent.nodeType !== <span class="d">11</span> ? parent : <b>null</b>;
</code><code id="L1449"><span class="ln">1449</span>  },
</code><code id="L1450"><span class="ln">1450</span>
</code><code id="L1451"><span class="ln">1451</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1452"><span class="ln">1452</span><span class="c">  <span class="s"> * </span>$(…).next
</span></code><code id="L1453"><span class="ln">1453</span><span class="c">   [ method ]
</span></code><code id="L1454"><span class="ln">1454</span><span class="c">  <span class="s"> * </span>Get the immedeately following sibling of each element <b>in</b> the current collection.
</span></code><code id="L1455"><span class="ln">1455</span><span class="c">  <span class="s"> * </span>If a selector is specified, it will <b>return</b> the element only <b>if</b> it matches that selector.
</span></code><code id="L1456"><span class="ln">1456</span><span class="c">  <span class="s"> - </span>selector (string) #optional A string containing a selector expression to match elements against
</span></code><code id="L1457"><span class="ln">1457</span><span class="c">  <span class="s"> = </span>(object) Kimbo object
</span></code><code id="L1458"><span class="ln">1458</span><span class="c">   > Usage
</span></code><code id="L1459"><span class="ln">1459</span><span class="c">  <span class="s"> * </span>Suppose a page <b>with</b> <b>this</b> HTML:
</span></code><code id="L1460"><span class="ln">1460</span><span class="c">  <span class="s"> | </span>&lt;ul>
</span></code><code id="L1461"><span class="ln">1461</span><span class="c">  <span class="s"> | </span>  &lt;li <b>class</b>=<i>"item-a"</i>>Item <span class="d">1</span>&lt;/li>
</span></code><code id="L1462"><span class="ln">1462</span><span class="c">  <span class="s"> | </span>  &lt;li <b>class</b>=<i>"item-b"</i>>Item <span class="d">2</span>&lt;/li>
</span></code><code id="L1463"><span class="ln">1463</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1464"><span class="ln">1464</span><span class="c">  <span class="s"> * </span>Get the parent element of `.item-a`
</span></code><code id="L1465"><span class="ln">1465</span><span class="c">  <span class="s"> | </span>$(<i>'.item-a'</i>).next(); <span class="c">// .item-b</span>
</span></code><code id="L1466"><span class="ln">1466</span><span class="c">  \*/</span>
</code><code id="L1467"><span class="ln">1467</span>  next: <b>function</b> (elem) {
</code><code id="L1468"><span class="ln">1468</span>    <b>return</b> _singleSibling(elem, <i>'nextSibling'</i>);
</code><code id="L1469"><span class="ln">1469</span>  },
</code><code id="L1470"><span class="ln">1470</span>
</code><code id="L1471"><span class="ln">1471</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1472"><span class="ln">1472</span><span class="c">  <span class="s"> * </span>$(…).prev
</span></code><code id="L1473"><span class="ln">1473</span><span class="c">   [ method ]
</span></code><code id="L1474"><span class="ln">1474</span><span class="c">  <span class="s"> * </span>Get the immedeately previous sibling of each element <b>in</b> the current collection.
</span></code><code id="L1475"><span class="ln">1475</span><span class="c">  <span class="s"> * </span>If a selector is specified, it will <b>return</b> the element only <b>if</b> it matches that selector.
</span></code><code id="L1476"><span class="ln">1476</span><span class="c">  <span class="s"> - </span>selector (string) #optional A string containing a selector expression to match elements against
</span></code><code id="L1477"><span class="ln">1477</span><span class="c">  <span class="s"> = </span>(object) Kimbo object
</span></code><code id="L1478"><span class="ln">1478</span><span class="c">   > Usage
</span></code><code id="L1479"><span class="ln">1479</span><span class="c">  <span class="s"> * </span>Suppose a page <b>with</b> <b>this</b> HTML:
</span></code><code id="L1480"><span class="ln">1480</span><span class="c">  <span class="s"> | </span>&lt;ul>
</span></code><code id="L1481"><span class="ln">1481</span><span class="c">  <span class="s"> | </span>  &lt;li <b>class</b>=<i>"item-a"</i>>Item <span class="d">1</span>&lt;/li>
</span></code><code id="L1482"><span class="ln">1482</span><span class="c">  <span class="s"> | </span>  &lt;li <b>class</b>=<i>"item-b"</i>>Item <span class="d">2</span>&lt;/li>
</span></code><code id="L1483"><span class="ln">1483</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1484"><span class="ln">1484</span><span class="c">  <span class="s"> * </span>Get the parent element of `.item-a`
</span></code><code id="L1485"><span class="ln">1485</span><span class="c">  <span class="s"> | </span>$(<i>'.item-b'</i>).prev(); <span class="c">// .item-a</span>
</span></code><code id="L1486"><span class="ln">1486</span><span class="c">  \*/</span>
</code><code id="L1487"><span class="ln">1487</span>  prev: <b>function</b> (elem) {
</code><code id="L1488"><span class="ln">1488</span>    <b>return</b> _singleSibling(elem, <i>'previousSibling'</i>);
</code><code id="L1489"><span class="ln">1489</span>  },
</code><code id="L1490"><span class="ln">1490</span>
</code><code id="L1491"><span class="ln">1491</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1492"><span class="ln">1492</span><span class="c">  <span class="s"> * </span>$(…).sibling
</span></code><code id="L1493"><span class="ln">1493</span><span class="c">   [ method ]
</span></code><code id="L1494"><span class="ln">1494</span><span class="c">  <span class="s"> * </span>Get the immedeately previous sibling of each element <b>in</b> the current collection.
</span></code><code id="L1495"><span class="ln">1495</span><span class="c">  <span class="s"> * </span>If a selector is specified, it will <b>return</b> the element only <b>if</b> it matches that selector.
</span></code><code id="L1496"><span class="ln">1496</span><span class="c">  <span class="s"> - </span>selector (string) #optional A string containing a selector expression to match elements against
</span></code><code id="L1497"><span class="ln">1497</span><span class="c">  <span class="s"> = </span>(object) Kimbo object
</span></code><code id="L1498"><span class="ln">1498</span><span class="c">   > Usage
</span></code><code id="L1499"><span class="ln">1499</span><span class="c">  <span class="s"> * </span>Suppose a page <b>with</b> <b>this</b> HTML:
</span></code><code id="L1500"><span class="ln">1500</span><span class="c">  <span class="s"> | </span>&lt;ul>
</span></code><code id="L1501"><span class="ln">1501</span><span class="c">  <span class="s"> | </span>  &lt;li <b>class</b>=<i>"item-a"</i>>Item <span class="d">1</span>&lt;/li>
</span></code><code id="L1502"><span class="ln">1502</span><span class="c">  <span class="s"> | </span>  &lt;li <b>class</b>=<i>"item-b"</i>>Item <span class="d">2</span>&lt;/li>
</span></code><code id="L1503"><span class="ln">1503</span><span class="c">  <span class="s"> | </span>&lt;/ul>
</span></code><code id="L1504"><span class="ln">1504</span><span class="c">  <span class="s"> * </span>Get the parent element of `.item-a`
</span></code><code id="L1505"><span class="ln">1505</span><span class="c">  <span class="s"> | </span>$(<i>'.item-b'</i>).prev(); <span class="c">// .item-a</span>
</span></code><code id="L1506"><span class="ln">1506</span><span class="c">  \*/</span>
</code><code id="L1507"><span class="ln">1507</span>  siblings: <b>function</b> (elem) {
</code><code id="L1508"><span class="ln">1508</span>    <b>return</b> _sibling((elem.parentNode<span class="s"> || </span>{}).firstChild, elem);
</code><code id="L1509"><span class="ln">1509</span>  },
</code><code id="L1510"><span class="ln">1510</span>
</code><code id="L1511"><span class="ln">1511</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1512"><span class="ln">1512</span><span class="c">  <span class="s"> * </span>$(…).children
</span></code><code id="L1513"><span class="ln">1513</span><span class="c">   [ method ]
</span></code><code id="L1514"><span class="ln">1514</span><span class="c">  <span class="s"> * </span>Get the children of all matched elements, optionally filtered by a selector.
</span></code><code id="L1515"><span class="ln">1515</span><span class="c">  <span class="s"> - </span>selector (string) #optional A string selector to match elements against.
</span></code><code id="L1516"><span class="ln">1516</span><span class="c">  <span class="s"> = </span>(object) Kimbo object
</span></code><code id="L1517"><span class="ln">1517</span><span class="c">   > Usage
</span></code><code id="L1518"><span class="ln">1518</span><span class="c">  <span class="s"> * </span>Suppose a page <b>with</b> the following HTML:
</span></code><code id="L1519"><span class="ln">1519</span><span class="c">  <span class="s"> | </span>&lt;div <b>class</b>=<i>"demo"</i>>
</span></code><code id="L1520"><span class="ln">1520</span><span class="c">  <span class="s"> | </span>  &lt;p>This&lt;/p>
</span></code><code id="L1521"><span class="ln">1521</span><span class="c">  <span class="s"> | </span>  &lt;p>is&lt;/p>
</span></code><code id="L1522"><span class="ln">1522</span><span class="c">  <span class="s"> | </span>  &lt;p>a&lt;/p>
</span></code><code id="L1523"><span class="ln">1523</span><span class="c">  <span class="s"> | </span>  &lt;p>demo.&lt;/p>
</span></code><code id="L1524"><span class="ln">1524</span><span class="c">  <span class="s"> | </span>&lt;/div>
</span></code><code id="L1525"><span class="ln">1525</span><span class="c">  <span class="s"> * </span>Get all children of `.demo`:
</span></code><code id="L1526"><span class="ln">1526</span><span class="c">  <span class="s"> | </span>$(<i>'.demo'</i>).children(); <span class="c">// al &lt;p> tags inside .demo div</span>
</span></code><code id="L1527"><span class="ln">1527</span><span class="c">  <span class="s"> * </span>Another example passing an specific selector:
</span></code><code id="L1528"><span class="ln">1528</span><span class="c">  <span class="s"> | </span>&lt;form>
</span></code><code id="L1529"><span class="ln">1529</span><span class="c">  <span class="s"> | </span>  &lt;input type=<i>"text"</i> name=<i>"name"</i> />
</span></code><code id="L1530"><span class="ln">1530</span><span class="c">  <span class="s"> | </span>  &lt;input type=<i>"text"</i> name=<i>"last"</i> />
</span></code><code id="L1531"><span class="ln">1531</span><span class="c">  <span class="s"> | </span>  &lt;input type=<i>"submit"</i> value=<i>"Send"</i> />
</span></code><code id="L1532"><span class="ln">1532</span><span class="c">  <span class="s"> | </span>&lt;/form>
</span></code><code id="L1533"><span class="ln">1533</span><span class="c">  <span class="s"> * </span>Get only the children that are text type elements:
</span></code><code id="L1534"><span class="ln">1534</span><span class="c">  <span class="s"> | </span>$(<i>'form'</i>).children(<i>'input[type="text"]'</i>); <span class="c">// only name and last inputs</span>
</span></code><code id="L1535"><span class="ln">1535</span><span class="c">  \*/</span>
</code><code id="L1536"><span class="ln">1536</span>  children: <b>function</b> (elem) {
</code><code id="L1537"><span class="ln">1537</span>    <b>return</b> _sibling(elem.firstChild);
</code><code id="L1538"><span class="ln">1538</span>  },
</code><code id="L1539"><span class="ln">1539</span>
</code><code id="L1540"><span class="ln">1540</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1541"><span class="ln">1541</span><span class="c">  <span class="s"> * </span>$(…).contents
</span></code><code id="L1542"><span class="ln">1542</span><span class="c">   [ method ]
</span></code><code id="L1543"><span class="ln">1543</span><span class="c">  <span class="s"> * </span>Get the HTML content of an iframe
</span></code><code id="L1544"><span class="ln">1544</span><span class="c">  <span class="s"> = </span>(object) Kimbo object
</span></code><code id="L1545"><span class="ln">1545</span><span class="c">   > Usage
</span></code><code id="L1546"><span class="ln">1546</span><span class="c">  <span class="s"> * </span>Suppose an iframe loading an external page:
</span></code><code id="L1547"><span class="ln">1547</span><span class="c">  <span class="s"> | </span>&lt;iframe src=<i>"http:<span class="c">//api.kimbojs.com"</i>>&lt;/iframe></span>
</span></code><code id="L1548"><span class="ln">1548</span><span class="c">  <span class="s"> * </span>Find the body element of the contents of that iframe:
</span></code><code id="L1549"><span class="ln">1549</span><span class="c">  <span class="s"> | </span>$(<i>'iframe'</i>).contents().find(<i>'body'</i>);
</span></code><code id="L1550"><span class="ln">1550</span><span class="c">  \*/</span>
</code><code id="L1551"><span class="ln">1551</span>  contents: <b>function</b> (elem) {
</code><code id="L1552"><span class="ln">1552</span>    <b>return</b> elem.nodeName.toLowerCase()<span class="s"> === </span><i>'iframe'</i> ? elem.contentDocument<span class="s"> || </span>elem.contentWindow[document] : Kimbo.makeArray(elem.childNodes);
</code><code id="L1553"><span class="ln">1553</span>  }
</code><code id="L1554"><span class="ln">1554</span>}, <b>function</b> (name, fn) {
</code><code id="L1555"><span class="ln">1555</span>  Kimbo.fn[name]<span class="s"> = </span><b>function</b> (selector) {
</code><code id="L1556"><span class="ln">1556</span>    <b>var</b> ret<span class="s"> = </span>Kimbo.map(<b>this</b>, fn);
</code><code id="L1557"><span class="ln">1557</span>
</code><code id="L1558"><span class="ln">1558</span>    <span class="c">// clean collection</span>
</code><code id="L1559"><span class="ln">1559</span>    ret<span class="s"> = </span><b>this</b>.length > <span class="d">1</span><span class="s"> &amp;&amp; </span>!isUnique[name] ? _unique(ret) : ret;
</code><code id="L1560"><span class="ln">1560</span>
</code><code id="L1561"><span class="ln">1561</span>    <b>if</b> (Kimbo.isString(selector)) {
</code><code id="L1562"><span class="ln">1562</span>      ret<span class="s"> = </span>Kimbo(ret).filter(selector);
</code><code id="L1563"><span class="ln">1563</span>    }
</code><code id="L1564"><span class="ln">1564</span>
</code><code id="L1565"><span class="ln">1565</span>    <b>return</b> Kimbo(ret);
</code><code id="L1566"><span class="ln">1566</span>  };
</code><code id="L1567"><span class="ln">1567</span>});
</code><code id="L1568"><span class="ln">1568</span>
</code><code id="L1569"><span class="ln">1569</span>
</code><code id="L1570"><span class="ln">1570</span><b>var</b> objectTypes<span class="s"> = </span>{},
</code><code id="L1571"><span class="ln">1571</span>  mobile_os<span class="s"> = </span>{
</code><code id="L1572"><span class="ln">1572</span>    Android: /(Android)\s+([\d.]+)/,
</code><code id="L1573"><span class="ln">1573</span>    Blackberry: /(BlackBerry|BB10|Playbook).*Version\/([\d.]+)/,
</code><code id="L1574"><span class="ln">1574</span>    FirefoxOS: /(Mozilla).*Mobile[^\/]*\/([\d\.]*)/,
</code><code id="L1575"><span class="ln">1575</span>    ipad: /(iPad).*OS\s([\d_]+)/,
</code><code id="L1576"><span class="ln">1576</span>    iphone: /(iPhone\sOS)\s([\d_]+)/,
</code><code id="L1577"><span class="ln">1577</span>    webOS: /(web|hpw)OS[\s\/]([\d.]+)/
</code><code id="L1578"><span class="ln">1578</span>  },
</code><code id="L1579"><span class="ln">1579</span>  isMobile<span class="s"> = </span><b>null</b>;
</code><code id="L1580"><span class="ln">1580</span>
</code><code id="L1581"><span class="ln">1581</span><span class="c">// map object types</span>
</code><code id="L1582"><span class="ln">1582</span>Kimbo.forEach([<i>'Array'</i>, <i>'Boolean'</i>, <i>'Date'</i>, <i>'Function'</i>, <i>'Number'</i>, <i>'Object'</i>, <i>'RegExp'</i>, <i>'String'</i>], <b>function</b> (type) {
</code><code id="L1583"><span class="ln">1583</span>  objectTypes[<i>'[object '</i><span class="s"> + </span>type<span class="s"> + </span><i>']'</i>]<span class="s"> = </span>type.toLowerCase();
</code><code id="L1584"><span class="ln">1584</span>});
</code><code id="L1585"><span class="ln">1585</span>
</code><code id="L1586"><span class="ln">1586</span>Kimbo.extend({
</code><code id="L1587"><span class="ln">1587</span>
</code><code id="L1588"><span class="ln">1588</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1589"><span class="ln">1589</span><span class="c">  <span class="s"> * </span>$.typeOf
</span></code><code id="L1590"><span class="ln">1590</span><span class="c">   [ method ]
</span></code><code id="L1591"><span class="ln">1591</span><span class="c">  <span class="s"> * </span>Determine the internal JavaScript [[Class]] of an object.
</span></code><code id="L1592"><span class="ln">1592</span><span class="c">   > Parameters
</span></code><code id="L1593"><span class="ln">1593</span><span class="c">  <span class="s"> - </span>obj (object) Object to get its [[Class]] type.
</span></code><code id="L1594"><span class="ln">1594</span><span class="c">  <span class="s"> = </span>(string) Type of the object.
</span></code><code id="L1595"><span class="ln">1595</span><span class="c">   > Usage
</span></code><code id="L1596"><span class="ln">1596</span><span class="c">  <span class="s"> | </span>$.typeOf(<i>'i am a string'</i>); <span class="c">// <i>'string'</i></span>
</span></code><code id="L1597"><span class="ln">1597</span><span class="c">  <span class="s"> | </span>$.typeOf(/(\.regexp?)/); <span class="c">// <i>'regexp'</i></span>
</span></code><code id="L1598"><span class="ln">1598</span><span class="c">  <span class="s"> | </span>$.typeOf(<b>null</b>); <span class="c">// <i>'<b>null</b>'</i></span>
</span></code><code id="L1599"><span class="ln">1599</span><span class="c">  <span class="s"> | </span>$.typeOf(<b>undefined</b>); <span class="c">// <i>'<b>undefined</b>'</i></span>
</span></code><code id="L1600"><span class="ln">1600</span><span class="c">  <span class="s"> | </span>$.typeOf(window.notDefined); <span class="c">// <i>'<b>undefined</b>'</i></span>
</span></code><code id="L1601"><span class="ln">1601</span><span class="c">  <span class="s"> | </span>$.typeOf(<b>function</b> () {}); <span class="c">// <i>'<b>function</b>'</i></span>
</span></code><code id="L1602"><span class="ln">1602</span><span class="c">  <span class="s"> | </span>$.typeOf({key: <i>'value'</i>}); <span class="c">// <i>'object'</i></span>
</span></code><code id="L1603"><span class="ln">1603</span><span class="c">  <span class="s"> | </span>$.typeOf(<b>true</b>); <span class="c">// <i>'<b>boolean</b>'</i></span>
</span></code><code id="L1604"><span class="ln">1604</span><span class="c">  <span class="s"> | </span>$.typeOf([]); <span class="c">// <i>'array'</i></span>
</span></code><code id="L1605"><span class="ln">1605</span><span class="c">  <span class="s"> | </span>$.typeOf(<b>new</b> Date()); <span class="c">// <i>'date'</i></span>
</span></code><code id="L1606"><span class="ln">1606</span><span class="c">  <span class="s"> | </span>$.typeOf(<span class="d">3</span>); <span class="c">// <i>'number'</i></span>
</span></code><code id="L1607"><span class="ln">1607</span><span class="c">  \*/</span>
</code><code id="L1608"><span class="ln">1608</span>  typeOf: <b>function</b> (obj) {
</code><code id="L1609"><span class="ln">1609</span>    <b>return</b> obj<span class="s"> === </span><b>null</b><span class="s"> || </span>obj<span class="s"> === </span><b>undefined</b> ? String(obj) : objectTypes[Object.prototype.toString.call(obj)]<span class="s"> || </span><i>'object'</i>;
</code><code id="L1610"><span class="ln">1610</span>  },
</code><code id="L1611"><span class="ln">1611</span>
</code><code id="L1612"><span class="ln">1612</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1613"><span class="ln">1613</span><span class="c">  <span class="s"> * </span>$.isArray
</span></code><code id="L1614"><span class="ln">1614</span><span class="c">   [ method ]
</span></code><code id="L1615"><span class="ln">1615</span><span class="c">  <span class="s"> * </span>Determine <b>if</b> the parameter passed is an array object.
</span></code><code id="L1616"><span class="ln">1616</span><span class="c">   > Parameters
</span></code><code id="L1617"><span class="ln">1617</span><span class="c">  <span class="s"> - </span>obj (object) Object to test <b>if</b> its an array.
</span></code><code id="L1618"><span class="ln">1618</span><span class="c">  <span class="s"> = </span>(<b>boolean</b>) According wether or not it is an array object.
</span></code><code id="L1619"><span class="ln">1619</span><span class="c">   > Usage
</span></code><code id="L1620"><span class="ln">1620</span><span class="c">  <span class="s"> | </span>$.isArray([]); <span class="c">// <b>true</b></span>
</span></code><code id="L1621"><span class="ln">1621</span><span class="c">  <span class="s"> | </span>$.isArray({}); <span class="c">// <b>false</b></span>
</span></code><code id="L1622"><span class="ln">1622</span><span class="c">  <span class="s"> | </span>$.isArray(<i>'test'</i>); <span class="c">// <b>false</b></span>
</span></code><code id="L1623"><span class="ln">1623</span><span class="c">  \*/</span>
</code><code id="L1624"><span class="ln">1624</span>  isArray: Array.isArray,
</code><code id="L1625"><span class="ln">1625</span>
</code><code id="L1626"><span class="ln">1626</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1627"><span class="ln">1627</span><span class="c">  <span class="s"> * </span>$.isNumeric
</span></code><code id="L1628"><span class="ln">1628</span><span class="c">   [ method ]
</span></code><code id="L1629"><span class="ln">1629</span><span class="c">  <span class="s"> * </span>Determine <b>if</b> the parameter passed is an number.
</span></code><code id="L1630"><span class="ln">1630</span><span class="c">   > Parameters
</span></code><code id="L1631"><span class="ln">1631</span><span class="c">  <span class="s"> - </span>obj (object) Object to test <b>if</b> its a number.
</span></code><code id="L1632"><span class="ln">1632</span><span class="c">  <span class="s"> = </span>(<b>boolean</b>) According wether or not it is a number.
</span></code><code id="L1633"><span class="ln">1633</span><span class="c">   > Usage
</span></code><code id="L1634"><span class="ln">1634</span><span class="c">  <span class="s"> | </span>$.isNumeric(<span class="d">3</span>); <span class="c">// <b>true</b></span>
</span></code><code id="L1635"><span class="ln">1635</span><span class="c">  <span class="s"> | </span>$.isNumeric(<i>'<span class="d">3</span>'</i>); <span class="c">// <b>false</b></span>
</span></code><code id="L1636"><span class="ln">1636</span><span class="c">  \*/</span>
</code><code id="L1637"><span class="ln">1637</span>  isNumeric: <b>function</b> (obj) {
</code><code id="L1638"><span class="ln">1638</span>    <b>return</b> !isNaN(parseFloat(obj))<span class="s"> &amp;&amp; </span>isFinite(obj);
</code><code id="L1639"><span class="ln">1639</span>  },
</code><code id="L1640"><span class="ln">1640</span>
</code><code id="L1641"><span class="ln">1641</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1642"><span class="ln">1642</span><span class="c">  <span class="s"> * </span>$.isWindow
</span></code><code id="L1643"><span class="ln">1643</span><span class="c">   [ method ]
</span></code><code id="L1644"><span class="ln">1644</span><span class="c">  <span class="s"> * </span>Determine <b>if</b> the parameter passed is the window object.
</span></code><code id="L1645"><span class="ln">1645</span><span class="c">   > Parameters
</span></code><code id="L1646"><span class="ln">1646</span><span class="c">  <span class="s"> - </span>obj (object) Object to test <b>if</b> its the window object.
</span></code><code id="L1647"><span class="ln">1647</span><span class="c">  <span class="s"> = </span>(<b>boolean</b>) According wether or not it is the window object.
</span></code><code id="L1648"><span class="ln">1648</span><span class="c">   > Usage
</span></code><code id="L1649"><span class="ln">1649</span><span class="c">  <span class="s"> | </span>$.isWindow(window); <span class="c">// <b>true</b></span>
</span></code><code id="L1650"><span class="ln">1650</span><span class="c">  <span class="s"> | </span>$.isWindow({ window: window }); <span class="c">// <b>false</b></span>
</span></code><code id="L1651"><span class="ln">1651</span><span class="c">  \*/</span>
</code><code id="L1652"><span class="ln">1652</span>  isWindow: <b>function</b> (obj) {
</code><code id="L1653"><span class="ln">1653</span>    <b>return</b> obj<span class="s"> &amp;&amp; </span>obj<span class="s"> === </span>obj.window;
</code><code id="L1654"><span class="ln">1654</span>  },
</code><code id="L1655"><span class="ln">1655</span>
</code><code id="L1656"><span class="ln">1656</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1657"><span class="ln">1657</span><span class="c">  <span class="s"> * </span>$.isKimbo
</span></code><code id="L1658"><span class="ln">1658</span><span class="c">   [ method ]
</span></code><code id="L1659"><span class="ln">1659</span><span class="c">  <span class="s"> * </span>Determine <b>if</b> the parameter passed is a Kimbo object.
</span></code><code id="L1660"><span class="ln">1660</span><span class="c">   > Parameters
</span></code><code id="L1661"><span class="ln">1661</span><span class="c">  <span class="s"> - </span>obj (object) Object to test <b>if</b> its a Kimbo object.
</span></code><code id="L1662"><span class="ln">1662</span><span class="c">  <span class="s"> = </span>(<b>boolean</b>) According wether or not it is a Kimbo object.
</span></code><code id="L1663"><span class="ln">1663</span><span class="c">   > Usage
</span></code><code id="L1664"><span class="ln">1664</span><span class="c">  <span class="s"> | </span>$.isKimbo(Kimbo(<i>'p'</i>)); <span class="c">// <b>true</b></span>
</span></code><code id="L1665"><span class="ln">1665</span><span class="c">  <span class="s"> | </span>$.isKimbo(jQuery(<i>'p'</i>)); <span class="c">// <b>false</b></span>
</span></code><code id="L1666"><span class="ln">1666</span><span class="c">  \*/</span>
</code><code id="L1667"><span class="ln">1667</span>  isKimbo: <b>function</b> (obj) {
</code><code id="L1668"><span class="ln">1668</span>    <b>return</b> obj <b>instanceof</b> Kimbo;
</code><code id="L1669"><span class="ln">1669</span>  },
</code><code id="L1670"><span class="ln">1670</span>
</code><code id="L1671"><span class="ln">1671</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1672"><span class="ln">1672</span><span class="c">  <span class="s"> * </span>$.isEmptyObject
</span></code><code id="L1673"><span class="ln">1673</span><span class="c">   [ method ]
</span></code><code id="L1674"><span class="ln">1674</span><span class="c">  <span class="s"> * </span>Determine <b>if</b> the parameter passed is an empty object.
</span></code><code id="L1675"><span class="ln">1675</span><span class="c">   > Parameters
</span></code><code id="L1676"><span class="ln">1676</span><span class="c">  <span class="s"> - </span>obj (object) Object to test <b>if</b> its an empty object.
</span></code><code id="L1677"><span class="ln">1677</span><span class="c">  <span class="s"> = </span>(<b>boolean</b>) According wether or not it is an empty object.
</span></code><code id="L1678"><span class="ln">1678</span><span class="c">   > Usage
</span></code><code id="L1679"><span class="ln">1679</span><span class="c">  <span class="s"> | </span>$.isEmptyObject({}); <span class="c">// <b>true</b></span>
</span></code><code id="L1680"><span class="ln">1680</span><span class="c">  <span class="s"> | </span>$.isEmptyObject([]); <span class="c">// <b>true</b></span>
</span></code><code id="L1681"><span class="ln">1681</span><span class="c">  <span class="s"> | </span>$.isEmptyObject([<span class="d">1</span>, <span class="d">2</span>]); <span class="c">// <b>false</b></span>
</span></code><code id="L1682"><span class="ln">1682</span><span class="c">  \*/</span>
</code><code id="L1683"><span class="ln">1683</span>  isEmptyObject: <b>function</b> (obj) {
</code><code id="L1684"><span class="ln">1684</span>    <b>var</b> key;
</code><code id="L1685"><span class="ln">1685</span>    <b>for</b> (key <b>in</b> obj) {
</code><code id="L1686"><span class="ln">1686</span>      <b>if</b> (obj.hasOwnProperty(key)) {
</code><code id="L1687"><span class="ln">1687</span>        <b>return</b> <b>false</b>;
</code><code id="L1688"><span class="ln">1688</span>      }
</code><code id="L1689"><span class="ln">1689</span>    }
</code><code id="L1690"><span class="ln">1690</span>    <b>return</b> <b>true</b>;
</code><code id="L1691"><span class="ln">1691</span>  },
</code><code id="L1692"><span class="ln">1692</span>
</code><code id="L1693"><span class="ln">1693</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1694"><span class="ln">1694</span><span class="c">  <span class="s"> * </span>$.isMobile
</span></code><code id="L1695"><span class="ln">1695</span><span class="c">   [ method ]
</span></code><code id="L1696"><span class="ln">1696</span><span class="c">  <span class="s"> * </span>Determine <b>if</b> the current platform is a mobile device, (otherwise is a desktop browser).
</span></code><code id="L1697"><span class="ln">1697</span><span class="c">   > Parameters
</span></code><code id="L1698"><span class="ln">1698</span><span class="c">  <span class="s"> = </span>(<b>boolean</b>) According wether or not is a mobile device.
</span></code><code id="L1699"><span class="ln">1699</span><span class="c">   > Usage
</span></code><code id="L1700"><span class="ln">1700</span><span class="c">  <span class="s"> | </span>$.isMobile(); <span class="c">// <b>false</b></span>
</span></code><code id="L1701"><span class="ln">1701</span><span class="c">  \*/</span>
</code><code id="L1702"><span class="ln">1702</span>  isMobile: <b>function</b> () {
</code><code id="L1703"><span class="ln">1703</span>    <b>if</b> (isMobile<span class="s"> === </span><b>null</b>) {
</code><code id="L1704"><span class="ln">1704</span>      isMobile<span class="s"> = </span><b>false</b>;
</code><code id="L1705"><span class="ln">1705</span>      Kimbo.forEach(mobile_os, <b>function</b> (name, regex) {
</code><code id="L1706"><span class="ln">1706</span>        <b>if</b> (regex.test(navigator.userAgent)) {
</code><code id="L1707"><span class="ln">1707</span>          <span class="c">// set to <b>true</b> and <b>break</b> the loop</span>
</code><code id="L1708"><span class="ln">1708</span>          <b>return</b> !(isMobile<span class="s"> = </span><b>true</b>);
</code><code id="L1709"><span class="ln">1709</span>        }
</code><code id="L1710"><span class="ln">1710</span>      });
</code><code id="L1711"><span class="ln">1711</span>    }
</code><code id="L1712"><span class="ln">1712</span>    <b>return</b> isMobile;
</code><code id="L1713"><span class="ln">1713</span>  },
</code><code id="L1714"><span class="ln">1714</span>
</code><code id="L1715"><span class="ln">1715</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1716"><span class="ln">1716</span><span class="c">  <span class="s"> * </span>$.parseJSON
</span></code><code id="L1717"><span class="ln">1717</span><span class="c">   [ method ]
</span></code><code id="L1718"><span class="ln">1718</span><span class="c">  <span class="s"> * </span>Parses a well-formed JSON string and returns the resulting JavaScript object.
</span></code><code id="L1719"><span class="ln">1719</span><span class="c">   > Parameters
</span></code><code id="L1720"><span class="ln">1720</span><span class="c">  <span class="s"> - </span>data (string) The JSON string to parse.
</span></code><code id="L1721"><span class="ln">1721</span><span class="c">  <span class="s"> = </span>(object) A JavaScript object.
</span></code><code id="L1722"><span class="ln">1722</span><span class="c">   > Usage
</span></code><code id="L1723"><span class="ln">1723</span><span class="c">  <span class="s"> | </span><b>var</b> obj<span class="s"> = </span>$.parseJSON(<i>'{"name":"Denis"}'</i>);
</span></code><code id="L1724"><span class="ln">1724</span><span class="c">  <span class="s"> | </span>console.log(obj.name<span class="s"> === </span><i>'Denis'</i>); <span class="c">// <b>true</b></span>
</span></code><code id="L1725"><span class="ln">1725</span><span class="c">  \*/</span>
</code><code id="L1726"><span class="ln">1726</span>  parseJSON: <b>function</b> (data) {
</code><code id="L1727"><span class="ln">1727</span>    <span class="c">// use <b>native</b> JSON parser</span>
</code><code id="L1728"><span class="ln">1728</span>    <b>if</b> (data<span class="s"> &amp;&amp; </span>Kimbo.isString(data)) {
</code><code id="L1729"><span class="ln">1729</span>      <b>return</b> window.JSON.parse(data);
</code><code id="L1730"><span class="ln">1730</span>    }
</code><code id="L1731"><span class="ln">1731</span>  },
</code><code id="L1732"><span class="ln">1732</span>
</code><code id="L1733"><span class="ln">1733</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1734"><span class="ln">1734</span><span class="c">  <span class="s"> * </span>$.parseXML
</span></code><code id="L1735"><span class="ln">1735</span><span class="c">   [ method ]
</span></code><code id="L1736"><span class="ln">1736</span><span class="c">  <span class="s"> * </span>Parses a string into an XML document.
</span></code><code id="L1737"><span class="ln">1737</span><span class="c">   > Parameters
</span></code><code id="L1738"><span class="ln">1738</span><span class="c">  <span class="s"> - </span>data (string) The JSON string to parse.
</span></code><code id="L1739"><span class="ln">1739</span><span class="c">  <span class="s"> = </span>(object) A JavaScript object.
</span></code><code id="L1740"><span class="ln">1740</span><span class="c">   > Usage
</span></code><code id="L1741"><span class="ln">1741</span><span class="c">  <span class="s"> | </span><b>var</b> xml<span class="s"> = </span><i>"&lt;rss version='<span class="d">2.0</span>'>&lt;channel>&lt;title>RSS Title&lt;/title>&lt;/channel>&lt;/rss>"</i>
</span></code><code id="L1742"><span class="ln">1742</span><span class="c">  <span class="s"> | </span><b>var</b> xmlDoc<span class="s"> = </span>$.parseXML(xml);
</span></code><code id="L1743"><span class="ln">1743</span><span class="c">  <span class="s"> | </span>$(xmlDoc).find(<i>'title'</i>); <span class="c">// <i>'RSS Title'</i></span>
</span></code><code id="L1744"><span class="ln">1744</span><span class="c">  \*/</span>
</code><code id="L1745"><span class="ln">1745</span>  parseXML: <b>function</b> (data) {
</code><code id="L1746"><span class="ln">1746</span>    <span class="c">// use <b>native</b> XML (DOM) parser</span>
</code><code id="L1747"><span class="ln">1747</span>    <b>var</b> domparser, xml;
</code><code id="L1748"><span class="ln">1748</span>
</code><code id="L1749"><span class="ln">1749</span>    <b>if</b> (data<span class="s"> &amp;&amp; </span>Kimbo.isString(data)) {
</code><code id="L1750"><span class="ln">1750</span>      domparser<span class="s"> = </span><b>new</b> window.DOMParser();
</code><code id="L1751"><span class="ln">1751</span>      xml<span class="s"> = </span>domparser.parseFromString(data, <i>'text/xml'</i>);
</code><code id="L1752"><span class="ln">1752</span>
</code><code id="L1753"><span class="ln">1753</span>      <b>if</b> (xml.getElementsByTagName(<i>'parsererror'</i>).length) {
</code><code id="L1754"><span class="ln">1754</span>        <b>throw</b> <b>new</b> Error(<i>'Invalid XML: '</i><span class="s"> + </span>data);
</code><code id="L1755"><span class="ln">1755</span>      }
</code><code id="L1756"><span class="ln">1756</span>
</code><code id="L1757"><span class="ln">1757</span>      <b>return</b> xml;
</code><code id="L1758"><span class="ln">1758</span>    }
</code><code id="L1759"><span class="ln">1759</span>  },
</code><code id="L1760"><span class="ln">1760</span>
</code><code id="L1761"><span class="ln">1761</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1762"><span class="ln">1762</span><span class="c">  <span class="s"> * </span>$.map
</span></code><code id="L1763"><span class="ln">1763</span><span class="c">   [ method ]
</span></code><code id="L1764"><span class="ln">1764</span><span class="c">  <span class="s"> * </span>Translate all items <b>in</b> an array or object to <b>new</b> array of items.
</span></code><code id="L1765"><span class="ln">1765</span><span class="c">   > Parameters
</span></code><code id="L1766"><span class="ln">1766</span><span class="c">  <span class="s"> - </span>obj (array|object) The Array or Object to translate.
</span></code><code id="L1767"><span class="ln">1767</span><span class="c">  <span class="s"> = </span>(array) A <b>new</b> array.
</span></code><code id="L1768"><span class="ln">1768</span><span class="c">   > Usage
</span></code><code id="L1769"><span class="ln">1769</span><span class="c">  <span class="s"> | </span><b>var</b> arr<span class="s"> = </span>[<i>'a'</i>, <i>'b'</i>, <i>'c'</i>];
</span></code><code id="L1770"><span class="ln">1770</span><span class="c">  <span class="s"> | </span>arr<span class="s"> = </span>$.map(arr, <b>function</b> (element, index) {
</span></code><code id="L1771"><span class="ln">1771</span><span class="c">  <span class="s"> | </span>  <b>return</b> element.toUpperCase()<span class="s"> + </span>index;
</span></code><code id="L1772"><span class="ln">1772</span><span class="c">  <span class="s"> | </span>});
</span></code><code id="L1773"><span class="ln">1773</span><span class="c">  <span class="s"> | </span>console.log(arr); <span class="c">// [<i>'A0'</i>, <i>'B1'</i>, <i>'C2'</i>]</span>
</span></code><code id="L1774"><span class="ln">1774</span><span class="c">  <span class="s"> * </span>Or wit an object
</span></code><code id="L1775"><span class="ln">1775</span><span class="c">  <span class="s"> | </span><b>var</b> obj<span class="s"> = </span>{a: <i>'a'</i>, b: <i>'b'</i>, c: <i>'c'</i>};
</span></code><code id="L1776"><span class="ln">1776</span><span class="c">  <span class="s"> | </span>obj<span class="s"> = </span>$.map(arr, <b>function</b> (key, value) {
</span></code><code id="L1777"><span class="ln">1777</span><span class="c">  <span class="s"> | </span>  <b>return</b> key<span class="s"> + </span><i>': '</i><span class="s"> + </span>value.toUpperCase();
</span></code><code id="L1778"><span class="ln">1778</span><span class="c">  <span class="s"> | </span>});
</span></code><code id="L1779"><span class="ln">1779</span><span class="c">  <span class="s"> | </span>console.log(obj); <span class="c">// [<i>'a: A'</i>, <i>'b: B'</i>, <i>'c: C'</i>]</span>
</span></code><code id="L1780"><span class="ln">1780</span><span class="c">  \*/</span>
</code><code id="L1781"><span class="ln">1781</span>  map: <b>function</b> (obj, callback) {
</code><code id="L1782"><span class="ln">1782</span>    <b>var</b> values<span class="s"> = </span>[], value;
</code><code id="L1783"><span class="ln">1783</span>
</code><code id="L1784"><span class="ln">1784</span>    <b>if</b> (obj) {
</code><code id="L1785"><span class="ln">1785</span>      Kimbo.forEach(obj, <b>function</b> (key, val) {
</code><code id="L1786"><span class="ln">1786</span>        value<span class="s"> = </span>callback(key, val);
</code><code id="L1787"><span class="ln">1787</span>
</code><code id="L1788"><span class="ln">1788</span>        <b>if</b> (value !== <b>null</b><span class="s"> &amp;&amp; </span>value !== <b>undefined</b>) {
</code><code id="L1789"><span class="ln">1789</span>          values.push(value);
</code><code id="L1790"><span class="ln">1790</span>        }
</code><code id="L1791"><span class="ln">1791</span>      });
</code><code id="L1792"><span class="ln">1792</span>    }
</code><code id="L1793"><span class="ln">1793</span>
</code><code id="L1794"><span class="ln">1794</span>    <span class="c">// flatten any nested arrays</span>
</code><code id="L1795"><span class="ln">1795</span>    <b>return</b> values.concat.apply([], values);
</code><code id="L1796"><span class="ln">1796</span>  },
</code><code id="L1797"><span class="ln">1797</span>
</code><code id="L1798"><span class="ln">1798</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1799"><span class="ln">1799</span><span class="c">  <span class="s"> * </span>$.makeArray
</span></code><code id="L1800"><span class="ln">1800</span><span class="c">   [ method ]
</span></code><code id="L1801"><span class="ln">1801</span><span class="c">  <span class="s"> * </span>Create an Array from the given object
</span></code><code id="L1802"><span class="ln">1802</span><span class="c">   > Parameters
</span></code><code id="L1803"><span class="ln">1803</span><span class="c">  <span class="s"> - </span>obj (array|object) The Array or Object to make an array from.
</span></code><code id="L1804"><span class="ln">1804</span><span class="c">  <span class="s"> = </span>(array) A <b>new</b> array.
</span></code><code id="L1805"><span class="ln">1805</span><span class="c">   > Usage
</span></code><code id="L1806"><span class="ln">1806</span><span class="c">  <span class="s"> | </span><b>var</b> lis<span class="s"> = </span>$(<i>'li'</i>); <span class="c">// Kimbo object</span>
</span></code><code id="L1807"><span class="ln">1807</span><span class="c">  <span class="s"> | </span><b>var</b> arr<span class="s"> = </span>$.makeArray(lis);
</span></code><code id="L1808"><span class="ln">1808</span><span class="c">   |
</span></code><code id="L1809"><span class="ln">1809</span><span class="c">  <span class="s"> | </span>console.log($.isArray(lis)); <span class="c">// <b>false</b></span>
</span></code><code id="L1810"><span class="ln">1810</span><span class="c">  <span class="s"> | </span>console.log($.isArray(arr)); <span class="c">// <b>true</b></span>
</span></code><code id="L1811"><span class="ln">1811</span><span class="c">  \*/</span>
</code><code id="L1812"><span class="ln">1812</span>  makeArray: <b>function</b> (obj, results) {
</code><code id="L1813"><span class="ln">1813</span>    results<span class="s"> = </span>results<span class="s"> || </span>[];
</code><code id="L1814"><span class="ln">1814</span>
</code><code id="L1815"><span class="ln">1815</span>    <b>if</b> (obj) {
</code><code id="L1816"><span class="ln">1816</span>      <b>if</b> (Kimbo.isArray(obj)<span class="s"> || </span>Kimbo.isKimbo(obj)<span class="s"> || </span>obj <b>instanceof</b> NodeList) {
</code><code id="L1817"><span class="ln">1817</span>        results<span class="s"> = </span>Kimbo.merge(results, obj);
</code><code id="L1818"><span class="ln">1818</span>      } <b>else</b> {
</code><code id="L1819"><span class="ln">1819</span>        _push.call(results, obj);
</code><code id="L1820"><span class="ln">1820</span>      }
</code><code id="L1821"><span class="ln">1821</span>    }
</code><code id="L1822"><span class="ln">1822</span>
</code><code id="L1823"><span class="ln">1823</span>    <b>return</b> results;
</code><code id="L1824"><span class="ln">1824</span>  },
</code><code id="L1825"><span class="ln">1825</span>
</code><code id="L1826"><span class="ln">1826</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1827"><span class="ln">1827</span><span class="c">  <span class="s"> * </span>$.makeArray
</span></code><code id="L1828"><span class="ln">1828</span><span class="c">   [ method ]
</span></code><code id="L1829"><span class="ln">1829</span><span class="c">  <span class="s"> * </span>Merge the contents of two arrays into the first array passed.
</span></code><code id="L1830"><span class="ln">1830</span><span class="c">   > Parameters
</span></code><code id="L1831"><span class="ln">1831</span><span class="c">  <span class="s"> - </span>first (array) The first array to merge the contents of the second.
</span></code><code id="L1832"><span class="ln">1832</span><span class="c">  <span class="s"> - </span>second (array|string) The second array to merge into the first.
</span></code><code id="L1833"><span class="ln">1833</span><span class="c">  <span class="s"> = </span>(array) The first array merged <b>with</b> the second.
</span></code><code id="L1834"><span class="ln">1834</span><span class="c">   > Usage
</span></code><code id="L1835"><span class="ln">1835</span><span class="c">  <span class="s"> | </span>$.merge([<i>'a'</i>, <i>'b'</i>], [<i>'c'</i>, <i>'d'</i>]);
</span></code><code id="L1836"><span class="ln">1836</span><span class="c">  <span class="s"> * </span>Result:
</span></code><code id="L1837"><span class="ln">1837</span><span class="c">  <span class="s"> | </span>[<i>'a'</i>, <i>'b'</i>, <i>'c'</i>, <i>'d'</i>]
</span></code><code id="L1838"><span class="ln">1838</span><span class="c">  \*/</span>
</code><code id="L1839"><span class="ln">1839</span>  merge: <b>function</b> (first, second) {
</code><code id="L1840"><span class="ln">1840</span>
</code><code id="L1841"><span class="ln">1841</span>    <span class="c">// concat is very fast, use it <b>if</b> we can</span>
</code><code id="L1842"><span class="ln">1842</span>    <b>if</b> (Kimbo.isArray(first)) {
</code><code id="L1843"><span class="ln">1843</span>      first<span class="s"> = </span>first.concat(second);
</code><code id="L1844"><span class="ln">1844</span>
</code><code id="L1845"><span class="ln">1845</span>    <span class="c">// Kimbo object, just loop merge</span>
</code><code id="L1846"><span class="ln">1846</span>    } <b>else</b> {
</code><code id="L1847"><span class="ln">1847</span>      _push.apply(first, second);
</code><code id="L1848"><span class="ln">1848</span>    }
</code><code id="L1849"><span class="ln">1849</span>
</code><code id="L1850"><span class="ln">1850</span>    <b>return</b> first;
</code><code id="L1851"><span class="ln">1851</span>  },
</code><code id="L1852"><span class="ln">1852</span>
</code><code id="L1853"><span class="ln">1853</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L1854"><span class="ln">1854</span><span class="c">  <span class="s"> * </span>$.camelCase
</span></code><code id="L1855"><span class="ln">1855</span><span class="c">   [ method ]
</span></code><code id="L1856"><span class="ln">1856</span><span class="c">  <span class="s"> * </span>Camelize any dashed separated string
</span></code><code id="L1857"><span class="ln">1857</span><span class="c">   > Parameters
</span></code><code id="L1858"><span class="ln">1858</span><span class="c">  <span class="s"> - </span>str (string) A dashed separated string value to transform into camelCase.
</span></code><code id="L1859"><span class="ln">1859</span><span class="c">  <span class="s"> = </span>(string) camelCase string
</span></code><code id="L1860"><span class="ln">1860</span><span class="c">   > Usage
</span></code><code id="L1861"><span class="ln">1861</span><span class="c">  <span class="s"> | </span>$.camelCase(<i>'background-color'</i>);
</span></code><code id="L1862"><span class="ln">1862</span><span class="c">  <span class="s"> * </span>Result:
</span></code><code id="L1863"><span class="ln">1863</span><span class="c">  <span class="s"> | </span><i>'backgroundColor'</i>
</span></code><code id="L1864"><span class="ln">1864</span><span class="c">  \*/</span>
</code><code id="L1865"><span class="ln">1865</span>  camelCase: <b>function</b> (str) {
</code><code id="L1866"><span class="ln">1866</span>    <b>return</b> str.replace(/-+(.)?/g, <b>function</b> (wholeMatch, character) {
</code><code id="L1867"><span class="ln">1867</span>      <b>return</b> character.toUpperCase();
</code><code id="L1868"><span class="ln">1868</span>    });
</code><code id="L1869"><span class="ln">1869</span>  },
</code><code id="L1870"><span class="ln">1870</span>
</code><code id="L1871"><span class="ln">1871</span>  <span class="c">// unique reference <b>for</b> the current instance of Kimbo</span>
</code><code id="L1872"><span class="ln">1872</span>  ref: <i>'kimbo'</i><span class="s"> + </span>(<i>'<span class="d">1</span>'</i><span class="s"> + </span>Math.random()).replace(/\D/g, <i>''</i>)
</code><code id="L1873"><span class="ln">1873</span>});
</code><code id="L1874"><span class="ln">1874</span>
</code><code id="L1875"><span class="ln">1875</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L1876"><span class="ln">1876</span><span class="c"><span class="s"> * </span>$.isFunction
</span></code><code id="L1877"><span class="ln">1877</span><span class="c"> [ method ]
</span></code><code id="L1878"><span class="ln">1878</span><span class="c"><span class="s"> * </span>Determine <b>if</b> the parameter passed is a Javascript <b>function</b> object.
</span></code><code id="L1879"><span class="ln">1879</span><span class="c"> > Parameters
</span></code><code id="L1880"><span class="ln">1880</span><span class="c"><span class="s"> - </span>obj (object) Object to test <b>if</b> its a <b>function</b>.
</span></code><code id="L1881"><span class="ln">1881</span><span class="c"><span class="s"> = </span>(<b>boolean</b>) According wether or not it is a <b>function</b>.
</span></code><code id="L1882"><span class="ln">1882</span><span class="c"> > Usage
</span></code><code id="L1883"><span class="ln">1883</span><span class="c"><span class="s"> | </span><b>var</b> myFunction<span class="s"> = </span><b>function</b> () {};
</span></code><code id="L1884"><span class="ln">1884</span><span class="c"><span class="s"> | </span>$.isFunction(myFunction); <span class="c">// <b>true</b></span>
</span></code><code id="L1885"><span class="ln">1885</span><span class="c"><span class="s"> | </span><b>var</b> something<span class="s"> = </span>[<i>'lala'</i>, <i>'jojo'</i>];
</span></code><code id="L1886"><span class="ln">1886</span><span class="c"><span class="s"> | </span>$.isFunction(something); <span class="c">// <b>false</b></span>
</span></code><code id="L1887"><span class="ln">1887</span><span class="c">\*/</span>
</code><code id="L1888"><span class="ln">1888</span>
</code><code id="L1889"><span class="ln">1889</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L1890"><span class="ln">1890</span><span class="c"><span class="s"> * </span>$.isObject
</span></code><code id="L1891"><span class="ln">1891</span><span class="c"> [ method ]
</span></code><code id="L1892"><span class="ln">1892</span><span class="c"><span class="s"> * </span>Determine <b>if</b> the parameter passed is a Javascript plain object.
</span></code><code id="L1893"><span class="ln">1893</span><span class="c"> > Parameters
</span></code><code id="L1894"><span class="ln">1894</span><span class="c"><span class="s"> - </span>obj (object) Object to test <b>if</b> its a plain object.
</span></code><code id="L1895"><span class="ln">1895</span><span class="c"><span class="s"> = </span>(<b>boolean</b>) According wether or not it is a plain object.
</span></code><code id="L1896"><span class="ln">1896</span><span class="c"> > Usage
</span></code><code id="L1897"><span class="ln">1897</span><span class="c"><span class="s"> | </span>$.isObject({}); <span class="c">// <b>true</b></span>
</span></code><code id="L1898"><span class="ln">1898</span><span class="c"><span class="s"> | </span>$.isObject([]); <span class="c">// <b>false</b></span>
</span></code><code id="L1899"><span class="ln">1899</span><span class="c"><span class="s"> | </span>$.isObject(<i>'test'</i>); <span class="c">// <b>false</b></span>
</span></code><code id="L1900"><span class="ln">1900</span><span class="c">\*/</span>
</code><code id="L1901"><span class="ln">1901</span>
</code><code id="L1902"><span class="ln">1902</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L1903"><span class="ln">1903</span><span class="c"><span class="s"> * </span>$.isString
</span></code><code id="L1904"><span class="ln">1904</span><span class="c"> [ method ]
</span></code><code id="L1905"><span class="ln">1905</span><span class="c"><span class="s"> * </span>Determine <b>if</b> the parameter passed is a string.
</span></code><code id="L1906"><span class="ln">1906</span><span class="c"> > Parameters
</span></code><code id="L1907"><span class="ln">1907</span><span class="c"><span class="s"> - </span>obj (object) Object to test <b>if</b> its a string.
</span></code><code id="L1908"><span class="ln">1908</span><span class="c"><span class="s"> = </span>(<b>boolean</b>) According wether or not it is a string.
</span></code><code id="L1909"><span class="ln">1909</span><span class="c"> > Usage
</span></code><code id="L1910"><span class="ln">1910</span><span class="c"><span class="s"> | </span>$.isString(<i>'test'</i>); <span class="c">// <b>true</b></span>
</span></code><code id="L1911"><span class="ln">1911</span><span class="c"><span class="s"> | </span>$.isString({ name: <i>'asd'</i> }); <span class="c">// <b>false</b></span>
</span></code><code id="L1912"><span class="ln">1912</span><span class="c">\*/</span>
</code><code id="L1913"><span class="ln">1913</span>
</code><code id="L1914"><span class="ln">1914</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L1915"><span class="ln">1915</span><span class="c"><span class="s"> * </span>$.isBoolean
</span></code><code id="L1916"><span class="ln">1916</span><span class="c"> [ method ]
</span></code><code id="L1917"><span class="ln">1917</span><span class="c"><span class="s"> * </span>Determine <b>if</b> the parameter passed is <b>boolean</b>.
</span></code><code id="L1918"><span class="ln">1918</span><span class="c"> > Parameters
</span></code><code id="L1919"><span class="ln">1919</span><span class="c"><span class="s"> - </span>obj (object) Object to test <b>if</b> its <b>boolean</b>..
</span></code><code id="L1920"><span class="ln">1920</span><span class="c"><span class="s"> = </span>(<b>boolean</b>) According wether or not it is <b>boolean</b>.
</span></code><code id="L1921"><span class="ln">1921</span><span class="c"> > Usage
</span></code><code id="L1922"><span class="ln">1922</span><span class="c"><span class="s"> | </span>$.isBoolean(<b>false</b>); <span class="c">// <b>true</b></span>
</span></code><code id="L1923"><span class="ln">1923</span><span class="c"><span class="s"> | </span>$.isBoolean(<span class="d">3</span>); <span class="c">// <b>false</b></span>
</span></code><code id="L1924"><span class="ln">1924</span><span class="c">\*/</span>
</code><code id="L1925"><span class="ln">1925</span>Kimbo.forEach([<i>'Function'</i>, <i>'Object'</i>, <i>'String'</i>, <i>'Boolean'</i>], <b>function</b> (method) {
</code><code id="L1926"><span class="ln">1926</span>  <b>var</b> m<span class="s"> = </span>method.toLowerCase();
</code><code id="L1927"><span class="ln">1927</span>  Kimbo[<i>'is'</i><span class="s"> + </span>method]<span class="s"> = </span><b>function</b> (obj) {
</code><code id="L1928"><span class="ln">1928</span>    <b>return</b> Kimbo.typeOf(obj)<span class="s"> === </span>m;
</code><code id="L1929"><span class="ln">1929</span>  };
</code><code id="L1930"><span class="ln">1930</span>});
</code><code id="L1931"><span class="ln">1931</span>
</code><code id="L1932"><span class="ln">1932</span><span class="c">// save reference to document</span>
</code><code id="L1933"><span class="ln">1933</span>rootContext<span class="s"> = </span>Kimbo(document);
</code><code id="L1934"><span class="ln">1934</span>
</code><code id="L1935"><span class="ln">1935</span>
</code><code id="L1936"><span class="ln">1936</span><b>var</b> _guid<span class="s"> = </span><span class="d">1</span>,
</code><code id="L1937"><span class="ln">1937</span>  handlersHash<span class="s"> = </span>{},
</code><code id="L1938"><span class="ln">1938</span>  r_key_event<span class="s"> = </span>/^key/,
</code><code id="L1939"><span class="ln">1939</span>  r_mouse_event<span class="s"> = </span>/^(?:mouse|menu)|click/,
</code><code id="L1940"><span class="ln">1940</span>  defaultEventProps<span class="s"> = </span>[<i>'altKey'</i>, <i>'bubbles'</i>, <i>'cancelable'</i>, <i>'ctrlKey'</i>, <i>'currentTarget'</i>, <i>'defaultPrevented'</i>, <i>'eventPhase'</i>, <i>'metaKey'</i>, <i>'relatedTarget'</i>, <i>'shiftKey'</i>, <i>'target'</i>, <i>'timeStamp'</i>, <i>'type'</i>, <i>'view'</i>, <i>'which'</i>],
</code><code id="L1941"><span class="ln">1941</span>  keyEventProps<span class="s"> = </span>[<i>'<b>char</b>'</i>, <i>'charCode'</i>, <i>'key'</i>, <i>'keyCode'</i>],
</code><code id="L1942"><span class="ln">1942</span>  mouseEventProps<span class="s"> = </span>[<i>'button'</i>, <i>'buttons'</i>, <i>'clientX'</i>, <i>'clientY'</i>, <i>'fromElement'</i>, <i>'offsetX'</i>, <i>'offsetY'</i>, <i>'screenX'</i>, <i>'screenY'</i>, <i>'toElement'</i>],
</code><code id="L1943"><span class="ln">1943</span>  fixEventProps<span class="s"> = </span>{},
</code><code id="L1944"><span class="ln">1944</span>  specialEvents<span class="s"> = </span>{},
</code><code id="L1945"><span class="ln">1945</span>  <span class="c">// gestures fallback <b>for</b> not mobile environment</span>
</code><code id="L1946"><span class="ln">1946</span>  gestures_fallback<span class="s"> = </span>Kimbo.isMobile() ? {} : {
</code><code id="L1947"><span class="ln">1947</span>    touchstart: <i>'mousedown'</i>,
</code><code id="L1948"><span class="ln">1948</span>    touchmove: <i>'mousemove'</i>,
</code><code id="L1949"><span class="ln">1949</span>    touchend: <i>'mouseup'</i>,
</code><code id="L1950"><span class="ln">1950</span>    touch: <i>'click'</i>,
</code><code id="L1951"><span class="ln">1951</span>    doubletap: <i>'dblclick'</i>,
</code><code id="L1952"><span class="ln">1952</span>    orientationchange: <i>'resize'</i>
</code><code id="L1953"><span class="ln">1953</span>  };
</code><code id="L1954"><span class="ln">1954</span>
</code><code id="L1955"><span class="ln">1955</span><b>function</b> _fix(event) {
</code><code id="L1956"><span class="ln">1956</span>  <span class="c">// already fixed</span>
</code><code id="L1957"><span class="ln">1957</span>  <b>if</b> (event[Kimbo.ref]) {
</code><code id="L1958"><span class="ln">1958</span>    <b>return</b> event;
</code><code id="L1959"><span class="ln">1959</span>  }
</code><code id="L1960"><span class="ln">1960</span>
</code><code id="L1961"><span class="ln">1961</span>  <span class="c">// get event properties</span>
</code><code id="L1962"><span class="ln">1962</span>  <b>var</b> originalEvent<span class="s"> = </span>event,
</code><code id="L1963"><span class="ln">1963</span>    eventProps<span class="s"> = </span>fixEventProps[event.type]<span class="s"> || </span>[],
</code><code id="L1964"><span class="ln">1964</span>    props<span class="s"> = </span>defaultEventProps.concat(eventProps);
</code><code id="L1965"><span class="ln">1965</span>
</code><code id="L1966"><span class="ln">1966</span>  <span class="c">// create a <b>new</b> event writable custom event object</span>
</code><code id="L1967"><span class="ln">1967</span>  event<span class="s"> = </span><b>new</b> Kimbo.Event(originalEvent);
</code><code id="L1968"><span class="ln">1968</span>
</code><code id="L1969"><span class="ln">1969</span>  <span class="c">// set event props to Kimbo.Event object</span>
</code><code id="L1970"><span class="ln">1970</span>  Kimbo.forEach(props, <b>function</b> (prop) {
</code><code id="L1971"><span class="ln">1971</span>    event[prop]<span class="s"> = </span>originalEvent[prop];
</code><code id="L1972"><span class="ln">1972</span>  });
</code><code id="L1973"><span class="ln">1973</span>
</code><code id="L1974"><span class="ln">1974</span>  <b>return</b> event;
</code><code id="L1975"><span class="ln">1975</span>}
</code><code id="L1976"><span class="ln">1976</span>
</code><code id="L1977"><span class="ln">1977</span><span class="c">// <b>return</b> element id</span>
</code><code id="L1978"><span class="ln">1978</span><b>function</b> _getElementId(element) {
</code><code id="L1979"><span class="ln">1979</span>  <b>return</b> element._guid<span class="s"> || </span>(element._guid<span class="s"> = </span>_guid++);
</code><code id="L1980"><span class="ln">1980</span>}
</code><code id="L1981"><span class="ln">1981</span>
</code><code id="L1982"><span class="ln">1982</span><span class="c">// get element handlers <b>for</b> the specified type</span>
</code><code id="L1983"><span class="ln">1983</span><b>function</b> _getHandlers(element_id, type) {
</code><code id="L1984"><span class="ln">1984</span>  <b>var</b> events<span class="s"> = </span>((handlersHash[element_id]<span class="s"> || </span>{}).events<span class="s"> || </span>{});
</code><code id="L1985"><span class="ln">1985</span>  <b>return</b> (type ? events[type] : events)<span class="s"> || </span>[];
</code><code id="L1986"><span class="ln">1986</span>}
</code><code id="L1987"><span class="ln">1987</span>
</code><code id="L1988"><span class="ln">1988</span><span class="c">// quick is() to check <b>if</b> event target matches when events are delegated</span>
</code><code id="L1989"><span class="ln">1989</span><b>function</b> _is(target, selector, element) {
</code><code id="L1990"><span class="ln">1990</span>  <b>return</b> (target.nodeName.toLowerCase()<span class="s"> === </span>selector<span class="s"> || </span>Kimbo(target).closest(selector, element)[<span class="d">0</span>]);
</code><code id="L1991"><span class="ln">1991</span>}
</code><code id="L1992"><span class="ln">1992</span>
</code><code id="L1993"><span class="ln">1993</span><b>function</b> _returnFalse() {
</code><code id="L1994"><span class="ln">1994</span>  <b>return</b> <b>false</b>;
</code><code id="L1995"><span class="ln">1995</span>}
</code><code id="L1996"><span class="ln">1996</span>
</code><code id="L1997"><span class="ln">1997</span><b>function</b> _returnTrue() {
</code><code id="L1998"><span class="ln">1998</span>  <b>return</b> <b>true</b>;
</code><code id="L1999"><span class="ln">1999</span>}
</code><code id="L2000"><span class="ln">2000</span>
</code><code id="L2001"><span class="ln">2001</span><span class="c">// helper <b>for</b> creating Event prototype methods</span>
</code><code id="L2002"><span class="ln">2002</span><b>function</b> _eventMethod(event, method, boolMethod) {
</code><code id="L2003"><span class="ln">2003</span>  event[boolMethod]<span class="s"> = </span>_returnTrue;
</code><code id="L2004"><span class="ln">2004</span>  <span class="c">// originalEvent is not present when trigger is called</span>
</code><code id="L2005"><span class="ln">2005</span>  <b>if</b> (event.isTrigger) {
</code><code id="L2006"><span class="ln">2006</span>    <b>return</b>;
</code><code id="L2007"><span class="ln">2007</span>  }
</code><code id="L2008"><span class="ln">2008</span>  <span class="c">// call <b>native</b> method</span>
</code><code id="L2009"><span class="ln">2009</span>  event.originalEvent[method]();
</code><code id="L2010"><span class="ln">2010</span>}
</code><code id="L2011"><span class="ln">2011</span>
</code><code id="L2012"><span class="ln">2012</span>Kimbo.Event<span class="s"> = </span><b>function</b> (event) {
</code><code id="L2013"><span class="ln">2013</span>  <span class="c">// is event object</span>
</code><code id="L2014"><span class="ln">2014</span>  <b>if</b> (event<span class="s"> &amp;&amp; </span>event.type) {
</code><code id="L2015"><span class="ln">2015</span>    <b>this</b>.originalEvent<span class="s"> = </span>event;
</code><code id="L2016"><span class="ln">2016</span>    <b>this</b>.type<span class="s"> = </span>event.type;
</code><code id="L2017"><span class="ln">2017</span>
</code><code id="L2018"><span class="ln">2018</span>    <span class="c">// the event may have been prevented</span>
</code><code id="L2019"><span class="ln">2019</span>    <span class="c">// check dom level <span class="d">3</span> <b>new</b> attribute and set proper value</span>
</code><code id="L2020"><span class="ln">2020</span>    <b>if</b> (event.defaultPrevented) {
</code><code id="L2021"><span class="ln">2021</span>      <b>this</b>.isDefaultPrevented<span class="s"> = </span>_returnTrue;
</code><code id="L2022"><span class="ln">2022</span>    } <b>else</b> {
</code><code id="L2023"><span class="ln">2023</span>      <b>this</b>.isDefaultPrevented<span class="s"> = </span>_returnFalse;
</code><code id="L2024"><span class="ln">2024</span>    }
</code><code id="L2025"><span class="ln">2025</span>
</code><code id="L2026"><span class="ln">2026</span>  <span class="c">// is event type</span>
</code><code id="L2027"><span class="ln">2027</span>  } <b>else</b> {
</code><code id="L2028"><span class="ln">2028</span>    <b>this</b>.type<span class="s"> = </span>event;
</code><code id="L2029"><span class="ln">2029</span>  }
</code><code id="L2030"><span class="ln">2030</span>
</code><code id="L2031"><span class="ln">2031</span>  <span class="c">// create a timestamp <b>if</b> doesn't have one</span>
</code><code id="L2032"><span class="ln">2032</span>  <b>this</b>.timeStamp<span class="s"> = </span>(event<span class="s"> &amp;&amp; </span>event.timeStamp)<span class="s"> || </span>Date.now();
</code><code id="L2033"><span class="ln">2033</span>
</code><code id="L2034"><span class="ln">2034</span>  <span class="c">// made by kimbo, yeah</span>
</code><code id="L2035"><span class="ln">2035</span>  <b>this</b>[Kimbo.ref]<span class="s"> = </span><b>true</b>;
</code><code id="L2036"><span class="ln">2036</span>};
</code><code id="L2037"><span class="ln">2037</span>
</code><code id="L2038"><span class="ln">2038</span><span class="c">// DOM-Level-<span class="d">3</span>-Events compliant</span>
</code><code id="L2039"><span class="ln">2039</span>Kimbo.Event.prototype<span class="s"> = </span>{
</code><code id="L2040"><span class="ln">2040</span>  preventDefault: <b>function</b> () {
</code><code id="L2041"><span class="ln">2041</span>    _eventMethod(<b>this</b>, <i>'preventDefault'</i>, <i>'isDefaultPrevented'</i>);
</code><code id="L2042"><span class="ln">2042</span>  },
</code><code id="L2043"><span class="ln">2043</span>
</code><code id="L2044"><span class="ln">2044</span>  stopPropagation: <b>function</b> () {
</code><code id="L2045"><span class="ln">2045</span>    _eventMethod(<b>this</b>, <i>'stopPropagation'</i>, <i>'isPropagationStopped'</i>);
</code><code id="L2046"><span class="ln">2046</span>  },
</code><code id="L2047"><span class="ln">2047</span>
</code><code id="L2048"><span class="ln">2048</span>  stopImmediatePropagation: <b>function</b> () {
</code><code id="L2049"><span class="ln">2049</span>    _eventMethod(<b>this</b>, <i>'stopImmediatePropagation'</i>, <i>'isImmediatePropagationStopped'</i>);
</code><code id="L2050"><span class="ln">2050</span>  },
</code><code id="L2051"><span class="ln">2051</span>
</code><code id="L2052"><span class="ln">2052</span>  isDefaultPrevented: _returnFalse,
</code><code id="L2053"><span class="ln">2053</span>  isPropagationStopped: _returnFalse,
</code><code id="L2054"><span class="ln">2054</span>  isImmediatePropagationStopped: _returnFalse
</code><code id="L2055"><span class="ln">2055</span>};
</code><code id="L2056"><span class="ln">2056</span>
</code><code id="L2057"><span class="ln">2057</span><span class="c">// register events to dom elements</span>
</code><code id="L2058"><span class="ln">2058</span><b>function</b> _addEvent(element, type, callback, data, selector) {
</code><code id="L2059"><span class="ln">2059</span>  <span class="c">// TODO: element should use Kimbo.ref and the handler the _guid</span>
</code><code id="L2060"><span class="ln">2060</span>  <b>var</b> element_id<span class="s"> = </span>_getElementId(element),
</code><code id="L2061"><span class="ln">2061</span>    elementhandlersHash<span class="s"> = </span>handlersHash[element_id],
</code><code id="L2062"><span class="ln">2062</span>    origType<span class="s"> = </span>type,
</code><code id="L2063"><span class="ln">2063</span>    events, handlers, handleObj, handler;
</code><code id="L2064"><span class="ln">2064</span>
</code><code id="L2065"><span class="ln">2065</span>  <span class="c">// could be a special type like mouseenter/mouseleave</span>
</code><code id="L2066"><span class="ln">2066</span>  type<span class="s"> = </span>specialEvents[type] ? specialEvents[type].origType : type;
</code><code id="L2067"><span class="ln">2067</span>
</code><code id="L2068"><span class="ln">2068</span>  <span class="c">// create hash <b>for</b> <b>this</b> element <b>if</b> first init</span>
</code><code id="L2069"><span class="ln">2069</span>  <b>if</b> (!elementhandlersHash) {
</code><code id="L2070"><span class="ln">2070</span>    handlersHash[element_id]<span class="s"> = </span>elementhandlersHash<span class="s"> = </span>{};
</code><code id="L2071"><span class="ln">2071</span>  }
</code><code id="L2072"><span class="ln">2072</span>
</code><code id="L2073"><span class="ln">2073</span>  <span class="c">// create events object <b>if</b> first init</span>
</code><code id="L2074"><span class="ln">2074</span>  events<span class="s"> = </span>elementhandlersHash.events;
</code><code id="L2075"><span class="ln">2075</span>  <b>if</b> (!events) {
</code><code id="L2076"><span class="ln">2076</span>    elementhandlersHash.events<span class="s"> = </span>events<span class="s"> = </span>{};
</code><code id="L2077"><span class="ln">2077</span>  }
</code><code id="L2078"><span class="ln">2078</span>
</code><code id="L2079"><span class="ln">2079</span>  <span class="c">// create the handler <b>for</b> <b>this</b> element <b>if</b> first init</span>
</code><code id="L2080"><span class="ln">2080</span>  handler<span class="s"> = </span>elementhandlersHash.handler;
</code><code id="L2081"><span class="ln">2081</span>  <b>if</b> (!handler) {
</code><code id="L2082"><span class="ln">2082</span>    elementhandlersHash.handler<span class="s"> = </span>handler<span class="s"> = </span><b>function</b> () {
</code><code id="L2083"><span class="ln">2083</span>      <b>return</b> _dispatchEvent.apply(element, arguments);
</code><code id="L2084"><span class="ln">2084</span>    };
</code><code id="L2085"><span class="ln">2085</span>  }
</code><code id="L2086"><span class="ln">2086</span>
</code><code id="L2087"><span class="ln">2087</span>  <span class="c">// create handler object</span>
</code><code id="L2088"><span class="ln">2088</span>  handleObj<span class="s"> = </span>{
</code><code id="L2089"><span class="ln">2089</span>    type: type,
</code><code id="L2090"><span class="ln">2090</span>    origType: origType,
</code><code id="L2091"><span class="ln">2091</span>    data: data,
</code><code id="L2092"><span class="ln">2092</span>    callback: callback,
</code><code id="L2093"><span class="ln">2093</span>    selector: selector
</code><code id="L2094"><span class="ln">2094</span>  };
</code><code id="L2095"><span class="ln">2095</span>
</code><code id="L2096"><span class="ln">2096</span>  <span class="c">// only add an event listener one time</span>
</code><code id="L2097"><span class="ln">2097</span>  <span class="c">// <b>for</b> each type of event</span>
</code><code id="L2098"><span class="ln">2098</span>  handlers<span class="s"> = </span>events[type];
</code><code id="L2099"><span class="ln">2099</span>  <b>if</b> (!handlers) {
</code><code id="L2100"><span class="ln">2100</span>    <span class="c">// array of events <b>for</b> the current type</span>
</code><code id="L2101"><span class="ln">2101</span>    handlers<span class="s"> = </span>events[type]<span class="s"> = </span>[];
</code><code id="L2102"><span class="ln">2102</span>    handlers.delegateCount<span class="s"> = </span><span class="d">0</span>;
</code><code id="L2103"><span class="ln">2103</span>    <span class="c">// add event</span>
</code><code id="L2104"><span class="ln">2104</span>    <b>if</b> (element.addEventListener) {
</code><code id="L2105"><span class="ln">2105</span>      element.addEventListener(type, handler, <b>false</b>);
</code><code id="L2106"><span class="ln">2106</span>    }
</code><code id="L2107"><span class="ln">2107</span>  }
</code><code id="L2108"><span class="ln">2108</span>
</code><code id="L2109"><span class="ln">2109</span>  <span class="c">// add to handlers hash, delegates first</span>
</code><code id="L2110"><span class="ln">2110</span>  <b>if</b> (selector) {
</code><code id="L2111"><span class="ln">2111</span>    handlers.delegateCount++;
</code><code id="L2112"><span class="ln">2112</span>    handlers.unshift(handleObj);
</code><code id="L2113"><span class="ln">2113</span>  } <b>else</b> {
</code><code id="L2114"><span class="ln">2114</span>    handlers.push(handleObj);
</code><code id="L2115"><span class="ln">2115</span>  }
</code><code id="L2116"><span class="ln">2116</span>}
</code><code id="L2117"><span class="ln">2117</span>
</code><code id="L2118"><span class="ln">2118</span><span class="c">// unregister events from dom elements</span>
</code><code id="L2119"><span class="ln">2119</span><b>function</b> _removeEvent(element, type, callback, selector) {
</code><code id="L2120"><span class="ln">2120</span>  <b>var</b> element_id<span class="s"> = </span>_getElementId(element),
</code><code id="L2121"><span class="ln">2121</span>    handleObj, handlers, name, i;
</code><code id="L2122"><span class="ln">2122</span>
</code><code id="L2123"><span class="ln">2123</span>  <span class="c">// noly <b>if</b> <b>this</b> element ever had an event attached</span>
</code><code id="L2124"><span class="ln">2124</span>  <b>if</b> (element_id) {
</code><code id="L2125"><span class="ln">2125</span>    handlers<span class="s"> = </span>_getHandlers(element_id, type);
</code><code id="L2126"><span class="ln">2126</span>
</code><code id="L2127"><span class="ln">2127</span>    <span class="c">// <b>return</b> <b>if</b> no handlers <b>for</b> the current event type</span>
</code><code id="L2128"><span class="ln">2128</span>    <b>if</b> (type<span class="s"> &amp;&amp; </span>!handlers.length) {
</code><code id="L2129"><span class="ln">2129</span>      <b>return</b>;
</code><code id="L2130"><span class="ln">2130</span>    }
</code><code id="L2131"><span class="ln">2131</span>
</code><code id="L2132"><span class="ln">2132</span>    <span class="c">// remove all handlers <b>if</b> no type provided</span>
</code><code id="L2133"><span class="ln">2133</span>    <b>if</b> (!type) {
</code><code id="L2134"><span class="ln">2134</span>      <b>for</b> (name <b>in</b> handlers) {
</code><code id="L2135"><span class="ln">2135</span>        <b>if</b> (handlers.hasOwnProperty(name)) {
</code><code id="L2136"><span class="ln">2136</span>          <b>return</b> _removeEvent(element, name, callback, selector);
</code><code id="L2137"><span class="ln">2137</span>        }
</code><code id="L2138"><span class="ln">2138</span>      }
</code><code id="L2139"><span class="ln">2139</span>    }
</code><code id="L2140"><span class="ln">2140</span>
</code><code id="L2141"><span class="ln">2141</span>    <span class="c">// remove handlers that match</span>
</code><code id="L2142"><span class="ln">2142</span>    <b>for</b> (i<span class="s"> = </span><span class="d">0</span>; i &lt; handlers.length; i++) {
</code><code id="L2143"><span class="ln">2143</span>      handleObj<span class="s"> = </span>handlers[i];
</code><code id="L2144"><span class="ln">2144</span>      <b>if</b> ((!callback<span class="s"> || </span>callback<span class="s"> === </span>handleObj.callback)<span class="s"> &amp;&amp; </span>(!selector<span class="s"> || </span>selector<span class="s"> === </span>handleObj.selector)) {
</code><code id="L2145"><span class="ln">2145</span>        <span class="c">// remove current handler from stack</span>
</code><code id="L2146"><span class="ln">2146</span>        handlers.splice(i--, <span class="d">1</span>);
</code><code id="L2147"><span class="ln">2147</span>        <span class="c">// decrement delegate count</span>
</code><code id="L2148"><span class="ln">2148</span>        <b>if</b> (handleObj.selector) {
</code><code id="L2149"><span class="ln">2149</span>          handlers.delegateCount--;
</code><code id="L2150"><span class="ln">2150</span>        }
</code><code id="L2151"><span class="ln">2151</span>      }
</code><code id="L2152"><span class="ln">2152</span>    }
</code><code id="L2153"><span class="ln">2153</span>
</code><code id="L2154"><span class="ln">2154</span>    <span class="c">// <b>if</b> no more events <b>for</b> the current type <b>delete</b> its hash</span>
</code><code id="L2155"><span class="ln">2155</span>    <b>if</b> (!handlers.length) {
</code><code id="L2156"><span class="ln">2156</span>      <span class="c">// remove event handler</span>
</code><code id="L2157"><span class="ln">2157</span>      element.removeEventListener(type, handlersHash[element_id].handler, <b>false</b>);
</code><code id="L2158"><span class="ln">2158</span>      <b>delete</b> handlersHash[element_id].events[type];
</code><code id="L2159"><span class="ln">2159</span>    }
</code><code id="L2160"><span class="ln">2160</span>
</code><code id="L2161"><span class="ln">2161</span>    <span class="c">// remove kimbo reference <b>if</b> element have no more events</span>
</code><code id="L2162"><span class="ln">2162</span>    <b>if</b> (Kimbo.isEmptyObject(handlersHash[element_id].events)) {
</code><code id="L2163"><span class="ln">2163</span>      <b>delete</b> handlersHash[element_id];
</code><code id="L2164"><span class="ln">2164</span>      <b>delete</b> element._guid;
</code><code id="L2165"><span class="ln">2165</span>    }
</code><code id="L2166"><span class="ln">2166</span>  }
</code><code id="L2167"><span class="ln">2167</span>}
</code><code id="L2168"><span class="ln">2168</span>
</code><code id="L2169"><span class="ln">2169</span><span class="c">// triggers a provided event type</span>
</code><code id="L2170"><span class="ln">2170</span><b>function</b> _triggerEvent(element, type, data) {
</code><code id="L2171"><span class="ln">2171</span>  <span class="c">// don't <b>do</b> events <b>if</b> element is text or comment node</span>
</code><code id="L2172"><span class="ln">2172</span>  <span class="c">// or <b>if</b> there is no event type at all or type is not a string</span>
</code><code id="L2173"><span class="ln">2173</span>  <b>if</b> ((element<span class="s"> &amp;&amp; </span>(element.nodeType<span class="s"> === </span><span class="d">3</span><span class="s"> || </span>element.nodeType<span class="s"> === </span><span class="d">8</span>))<span class="s"> || </span>!type<span class="s"> || </span>!Kimbo.isString(type)) {
</code><code id="L2174"><span class="ln">2174</span>    <b>return</b> <b>this</b>;
</code><code id="L2175"><span class="ln">2175</span>  }
</code><code id="L2176"><span class="ln">2176</span>
</code><code id="L2177"><span class="ln">2177</span>  <b>var</b> currentElement, lastElement, eventTree, element_id, event;
</code><code id="L2178"><span class="ln">2178</span>
</code><code id="L2179"><span class="ln">2179</span>  <span class="c">// <b>try</b> triggering <b>native</b> focus and blur events</span>
</code><code id="L2180"><span class="ln">2180</span>  <b>if</b> (type<span class="s"> === </span><i>'focus'</i><span class="s"> || </span>type<span class="s"> === </span><i>'blur'</i>) {
</code><code id="L2181"><span class="ln">2181</span>    <b>try</b> {
</code><code id="L2182"><span class="ln">2182</span>      <b>return</b> element[type]();
</code><code id="L2183"><span class="ln">2183</span>    } <b>catch</b> (e) {}
</code><code id="L2184"><span class="ln">2184</span>  }
</code><code id="L2185"><span class="ln">2185</span>
</code><code id="L2186"><span class="ln">2186</span>  <span class="c">// create a <b>new</b> writable custom event object</span>
</code><code id="L2187"><span class="ln">2187</span>  event<span class="s"> = </span><b>new</b> Kimbo.Event(type);
</code><code id="L2188"><span class="ln">2188</span>
</code><code id="L2189"><span class="ln">2189</span>  <span class="c">// triggered programatically</span>
</code><code id="L2190"><span class="ln">2190</span>  event.isTrigger<span class="s"> = </span><b>true</b>;
</code><code id="L2191"><span class="ln">2191</span>
</code><code id="L2192"><span class="ln">2192</span>  <span class="c">// set the target</span>
</code><code id="L2193"><span class="ln">2193</span>  <b>if</b> (!event.target) {
</code><code id="L2194"><span class="ln">2194</span>    event.target<span class="s"> = </span>element;
</code><code id="L2195"><span class="ln">2195</span>  }
</code><code id="L2196"><span class="ln">2196</span>
</code><code id="L2197"><span class="ln">2197</span>  <span class="c">// include data <b>if</b> any</span>
</code><code id="L2198"><span class="ln">2198</span>  data<span class="s"> = </span>data ? Kimbo.makeArray(data) : [];
</code><code id="L2199"><span class="ln">2199</span>  <span class="c">// event goes first</span>
</code><code id="L2200"><span class="ln">2200</span>  data.unshift(event);
</code><code id="L2201"><span class="ln">2201</span>
</code><code id="L2202"><span class="ln">2202</span>  <span class="c">// generate a stack of [element, event] to be triggered</span>
</code><code id="L2203"><span class="ln">2203</span>  eventTree<span class="s"> = </span>[[element, type]];
</code><code id="L2204"><span class="ln">2204</span>  <b>if</b> (!Kimbo.isWindow(element)) {
</code><code id="L2205"><span class="ln">2205</span>    <span class="c">// get all parent elements to bubble event later</span>
</code><code id="L2206"><span class="ln">2206</span>    <b>for</b> (currentElement<span class="s"> = </span>element.parentNode; currentElement; currentElement<span class="s"> = </span>currentElement.parentNode) {
</code><code id="L2207"><span class="ln">2207</span>      eventTree.push([currentElement, type]);
</code><code id="L2208"><span class="ln">2208</span>      lastElement<span class="s"> = </span>currentElement;
</code><code id="L2209"><span class="ln">2209</span>    }
</code><code id="L2210"><span class="ln">2210</span>
</code><code id="L2211"><span class="ln">2211</span>    <span class="c">// only add window object <b>if</b> we got to document (e.g., not plain obj or detached DOM)</span>
</code><code id="L2212"><span class="ln">2212</span>    <b>if</b> (lastElement<span class="s"> &amp;&amp; </span>lastElement<span class="s"> === </span>element.ownerDocument) {
</code><code id="L2213"><span class="ln">2213</span>      eventTree.push([window, type]);
</code><code id="L2214"><span class="ln">2214</span>    }
</code><code id="L2215"><span class="ln">2215</span>  }
</code><code id="L2216"><span class="ln">2216</span>
</code><code id="L2217"><span class="ln">2217</span>  <span class="c">// fire handlers up to the document (or the last element)</span>
</code><code id="L2218"><span class="ln">2218</span>  Kimbo.forEach(eventTree, <b>function</b> (branch) {
</code><code id="L2219"><span class="ln">2219</span>    <span class="c">// element</span>
</code><code id="L2220"><span class="ln">2220</span>    currentElement<span class="s"> = </span>branch[<span class="d">0</span>];
</code><code id="L2221"><span class="ln">2221</span>    <span class="c">// type</span>
</code><code id="L2222"><span class="ln">2222</span>    event.type<span class="s"> = </span>branch[<span class="d">1</span>];
</code><code id="L2223"><span class="ln">2223</span>
</code><code id="L2224"><span class="ln">2224</span>    <span class="c">// get element id</span>
</code><code id="L2225"><span class="ln">2225</span>    element_id<span class="s"> = </span>_getElementId(currentElement);
</code><code id="L2226"><span class="ln">2226</span>
</code><code id="L2227"><span class="ln">2227</span>    <span class="c">// <b>if</b> the current element has events of the specified type, dispatch them</span>
</code><code id="L2228"><span class="ln">2228</span>    <b>if</b> (element_id<span class="s"> &amp;&amp; </span>_getHandlers(element_id, type)) {
</code><code id="L2229"><span class="ln">2229</span>      handlersHash[element_id].handler.apply(currentElement, data);
</code><code id="L2230"><span class="ln">2230</span>    }
</code><code id="L2231"><span class="ln">2231</span>  });
</code><code id="L2232"><span class="ln">2232</span>}
</code><code id="L2233"><span class="ln">2233</span>
</code><code id="L2234"><span class="ln">2234</span><span class="c">// own defined dispatchEvent()</span>
</code><code id="L2235"><span class="ln">2235</span><b>function</b> _dispatchEvent(event) {
</code><code id="L2236"><span class="ln">2236</span>  <span class="c">// use own event object</span>
</code><code id="L2237"><span class="ln">2237</span>  event<span class="s"> = </span>_fix(event);
</code><code id="L2238"><span class="ln">2238</span>
</code><code id="L2239"><span class="ln">2239</span>  <b>var</b> element_id<span class="s"> = </span>_getElementId(<b>this</b>),
</code><code id="L2240"><span class="ln">2240</span>    handlers<span class="s"> = </span>_getHandlers(element_id, event.type),
</code><code id="L2241"><span class="ln">2241</span>    delegateCount<span class="s"> = </span>handlers.delegateCount,
</code><code id="L2242"><span class="ln">2242</span>    args<span class="s"> = </span>_slice.call(arguments, <span class="d">0</span>),
</code><code id="L2243"><span class="ln">2243</span>    handlerQueue<span class="s"> = </span>[],
</code><code id="L2244"><span class="ln">2244</span>    currentElement, ret, selMatch, matches, handleObj, selector, i;
</code><code id="L2245"><span class="ln">2245</span>
</code><code id="L2246"><span class="ln">2246</span>  <span class="c">// set the <b>native</b> event to be the fixed event</span>
</code><code id="L2247"><span class="ln">2247</span>  args[<span class="d">0</span>]<span class="s"> = </span>event;
</code><code id="L2248"><span class="ln">2248</span>
</code><code id="L2249"><span class="ln">2249</span>  <span class="c">// save the delegate target element</span>
</code><code id="L2250"><span class="ln">2250</span>  event.delegateTarget<span class="s"> = </span><b>this</b>;
</code><code id="L2251"><span class="ln">2251</span>
</code><code id="L2252"><span class="ln">2252</span>  <span class="c">// get delegated handlers <b>if</b> any</span>
</code><code id="L2253"><span class="ln">2253</span>  <b>if</b> (delegateCount) {
</code><code id="L2254"><span class="ln">2254</span>
</code><code id="L2255"><span class="ln">2255</span>    <span class="c">// go up to the dom finding the elements that matches the current selector from delegated event</span>
</code><code id="L2256"><span class="ln">2256</span>    <b>for</b> (currentElement<span class="s"> = </span>event.target; currentElement !== <b>this</b>; currentElement<span class="s"> = </span>currentElement.parentNode<span class="s"> || </span><b>this</b>) {
</code><code id="L2257"><span class="ln">2257</span>
</code><code id="L2258"><span class="ln">2258</span>      <span class="c">// don't <b>do</b> events on disabled elements</span>
</code><code id="L2259"><span class="ln">2259</span>      <b>if</b> (currentElement.disabled !== <b>true</b><span class="s"> || </span>event.type !== <i>'click'</i>) {
</code><code id="L2260"><span class="ln">2260</span>        selMatch<span class="s"> = </span>{};
</code><code id="L2261"><span class="ln">2261</span>        matches<span class="s"> = </span>[];
</code><code id="L2262"><span class="ln">2262</span>        <span class="c">// loop throgh delegated events</span>
</code><code id="L2263"><span class="ln">2263</span>        <b>for</b> (i<span class="s"> = </span><span class="d">0</span>; i &lt; delegateCount; i++) {
</code><code id="L2264"><span class="ln">2264</span>          <span class="c">// get its handler</span>
</code><code id="L2265"><span class="ln">2265</span>          handleObj<span class="s"> = </span>handlers[i];
</code><code id="L2266"><span class="ln">2266</span>          <span class="c">// get its selector</span>
</code><code id="L2267"><span class="ln">2267</span>          selector<span class="s"> = </span>handleObj.selector;
</code><code id="L2268"><span class="ln">2268</span>
</code><code id="L2269"><span class="ln">2269</span>          <b>if</b> (!selMatch[selector]) {
</code><code id="L2270"><span class="ln">2270</span>            selMatch[selector]<span class="s"> = </span>_is(currentElement, selector, <b>this</b>);
</code><code id="L2271"><span class="ln">2271</span>          }
</code><code id="L2272"><span class="ln">2272</span>
</code><code id="L2273"><span class="ln">2273</span>          <b>if</b> (selMatch[selector]) {
</code><code id="L2274"><span class="ln">2274</span>            matches.push(handleObj);
</code><code id="L2275"><span class="ln">2275</span>          }
</code><code id="L2276"><span class="ln">2276</span>        }
</code><code id="L2277"><span class="ln">2277</span>
</code><code id="L2278"><span class="ln">2278</span>        <b>if</b> (matches.length) {
</code><code id="L2279"><span class="ln">2279</span>          handlerQueue.push({ elem: currentElement, matches: matches });
</code><code id="L2280"><span class="ln">2280</span>        }
</code><code id="L2281"><span class="ln">2281</span>      }
</code><code id="L2282"><span class="ln">2282</span>    }
</code><code id="L2283"><span class="ln">2283</span>  }
</code><code id="L2284"><span class="ln">2284</span>
</code><code id="L2285"><span class="ln">2285</span>  <span class="c">// add the remaining not delegated handlers</span>
</code><code id="L2286"><span class="ln">2286</span>  <b>if</b> (handlers.length > delegateCount) {
</code><code id="L2287"><span class="ln">2287</span>    handlerQueue.push({ elem: <b>this</b>, matches: handlers.slice(delegateCount) });
</code><code id="L2288"><span class="ln">2288</span>  }
</code><code id="L2289"><span class="ln">2289</span>
</code><code id="L2290"><span class="ln">2290</span>  <span class="c">// fire callbacks queue</span>
</code><code id="L2291"><span class="ln">2291</span>  Kimbo.forEach(handlerQueue, <b>function</b> (handler) {
</code><code id="L2292"><span class="ln">2292</span>    <span class="c">// only fire handler <b>if</b> event wasnt stopped</span>
</code><code id="L2293"><span class="ln">2293</span>    <b>if</b> (!event.isPropagationStopped()) {
</code><code id="L2294"><span class="ln">2294</span>      event.currentTarget<span class="s"> = </span>handler.elem;
</code><code id="L2295"><span class="ln">2295</span>
</code><code id="L2296"><span class="ln">2296</span>      Kimbo.forEach(handler.matches, <b>function</b> (handleObj) {
</code><code id="L2297"><span class="ln">2297</span>        <span class="c">// only fire bubble <b>if</b> not stopped</span>
</code><code id="L2298"><span class="ln">2298</span>        <b>if</b> (!event.isImmediatePropagationStopped()) {
</code><code id="L2299"><span class="ln">2299</span>          event.data<span class="s"> = </span>handleObj.data;
</code><code id="L2300"><span class="ln">2300</span>          event.handleObj<span class="s"> = </span>handleObj;
</code><code id="L2301"><span class="ln">2301</span>
</code><code id="L2302"><span class="ln">2302</span>          <span class="c">// call original callback, check <b>if</b> its an special event first</span>
</code><code id="L2303"><span class="ln">2303</span>          ret<span class="s"> = </span>((specialEvents[handleObj.origType]<span class="s"> || </span>{}).handle<span class="s"> || </span>handleObj.callback).apply(handler.elem, args);
</code><code id="L2304"><span class="ln">2304</span>
</code><code id="L2305"><span class="ln">2305</span>          <span class="c">// <b>if</b> callback returns <b>false</b>, stop the event</span>
</code><code id="L2306"><span class="ln">2306</span>          <b>if</b> (ret<span class="s"> === </span><b>false</b>) {
</code><code id="L2307"><span class="ln">2307</span>            event.preventDefault();
</code><code id="L2308"><span class="ln">2308</span>            event.stopPropagation();
</code><code id="L2309"><span class="ln">2309</span>          }
</code><code id="L2310"><span class="ln">2310</span>        }
</code><code id="L2311"><span class="ln">2311</span>      });
</code><code id="L2312"><span class="ln">2312</span>    }
</code><code id="L2313"><span class="ln">2313</span>  });
</code><code id="L2314"><span class="ln">2314</span>}
</code><code id="L2315"><span class="ln">2315</span>
</code><code id="L2316"><span class="ln">2316</span>Kimbo.fn.extend({
</code><code id="L2317"><span class="ln">2317</span>
</code><code id="L2318"><span class="ln">2318</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L2319"><span class="ln">2319</span><span class="c">  <span class="s"> * </span>$(…).on
</span></code><code id="L2320"><span class="ln">2320</span><span class="c">   [ method ]
</span></code><code id="L2321"><span class="ln">2321</span><span class="c">  <span class="s"> * </span>Add an event handler to the selected elements.
</span></code><code id="L2322"><span class="ln">2322</span><span class="c">   > Parameters
</span></code><code id="L2323"><span class="ln">2323</span><span class="c">  <span class="s"> - </span>type (string) A string name <b>for</b> the event to register.
</span></code><code id="L2324"><span class="ln">2324</span><span class="c">  <span class="s"> - </span>selector (string) #optional Delegate an event providing a string selector.
</span></code><code id="L2325"><span class="ln">2325</span><span class="c">  <span class="s"> - </span>data (any) #optional Data to be passed to the handler <b>in</b> `event.data` when an event is triggered.
</span></code><code id="L2326"><span class="ln">2326</span><span class="c">  <span class="s"> - </span>callback (<b>function</b>) A callback <b>function</b> to execute when the event is triggered.
</span></code><code id="L2327"><span class="ln">2327</span><span class="c">   > Usage
</span></code><code id="L2328"><span class="ln">2328</span><span class="c">  <span class="s"> * </span>Suppose a button element:
</span></code><code id="L2329"><span class="ln">2329</span><span class="c">  <span class="s"> | </span>&lt;button id=<i>'btn'</i>>click me&lt;/button>
</span></code><code id="L2330"><span class="ln">2330</span><span class="c">  <span class="s"> * </span>Register a click event handler
</span></code><code id="L2331"><span class="ln">2331</span><span class="c">  <span class="s"> | </span>$(<i>'#btn'</i>).on(<i>'click'</i>, <b>function</b> (event) {
</span></code><code id="L2332"><span class="ln">2332</span><span class="c">  <span class="s"> | </span>  console.log(<i>'clicked!'</i>, event);
</span></code><code id="L2333"><span class="ln">2333</span><span class="c">  <span class="s"> | </span>});
</span></code><code id="L2334"><span class="ln">2334</span><span class="c">  <span class="s"> * </span>There are shorthands <b>for</b> all events <b>for</b> example:
</span></code><code id="L2335"><span class="ln">2335</span><span class="c">  <span class="s"> | </span>$(<i>'#btn'</i>).click(<b>function</b> (event) {
</span></code><code id="L2336"><span class="ln">2336</span><span class="c">  <span class="s"> | </span>  console.log(<i>'clicked!'</i>, event);
</span></code><code id="L2337"><span class="ln">2337</span><span class="c">  <span class="s"> | </span>});
</span></code><code id="L2338"><span class="ln">2338</span><span class="c">  <span class="s"> * </span>Passing some data when registering the handler:
</span></code><code id="L2339"><span class="ln">2339</span><span class="c">  <span class="s"> | </span>$(<i>'#btn'</i>).on(<i>'click'</i>, { name: <i>'denis'</i> }, <b>function</b> (event) {
</span></code><code id="L2340"><span class="ln">2340</span><span class="c">  <span class="s"> | </span>  <span class="c">// data passed is inside event.data</span>
</span></code><code id="L2341"><span class="ln">2341</span><span class="c">  <span class="s"> | </span>  console.log(<i>'name:'</i>, event.data.name);
</span></code><code id="L2342"><span class="ln">2342</span><span class="c">  <span class="s"> | </span>});
</span></code><code id="L2343"><span class="ln">2343</span><span class="c">  <span class="s"> * </span>Here is a list <b>for</b> all the shorthand methods available:
</span></code><code id="L2344"><span class="ln">2344</span><span class="c">  <span class="s"> | </span><i>'blur'</i>, <i>'change'</i>, <i>'click'</i>, <i>'contextmenu'</i>, <i>'dblclick'</i>, <i>'error'</i>,
</span></code><code id="L2345"><span class="ln">2345</span><span class="c">  <span class="s"> | </span><i>'focus'</i>, <i>'keydown'</i>, <i>'keypress'</i>, <i>'keyup'</i>, <i>'load'</i>, <i>'mousedown'</i>, <i>'mouseenter'</i>, <i>'mouseleave'</i>,
</span></code><code id="L2346"><span class="ln">2346</span><span class="c">  <span class="s"> | </span><i>'mousemove'</i>, <i>'mouseout'</i>, <i>'mouseup'</i>, <i>'mouseover'</i>, <i>'resize'</i>, <i>'scroll'</i>, <i>'select'</i>, <i>'submit'</i>, <i>'unload'</i>
</span></code><code id="L2347"><span class="ln">2347</span><span class="c">  \*/</span>
</code><code id="L2348"><span class="ln">2348</span>  on: <b>function</b> (type, selector, data, callback) {
</code><code id="L2349"><span class="ln">2349</span>    <span class="c">// prepare the arguments</span>
</code><code id="L2350"><span class="ln">2350</span>
</code><code id="L2351"><span class="ln">2351</span>    <span class="c">// (type, callback)</span>
</code><code id="L2352"><span class="ln">2352</span>    <b>if</b> (!data<span class="s"> &amp;&amp; </span>!callback) {
</code><code id="L2353"><span class="ln">2353</span>      callback<span class="s"> = </span>selector;
</code><code id="L2354"><span class="ln">2354</span>      data<span class="s"> = </span>selector<span class="s"> = </span><b>undefined</b>;
</code><code id="L2355"><span class="ln">2355</span>    } <b>else</b> <b>if</b> (!callback) {
</code><code id="L2356"><span class="ln">2356</span>      <span class="c">// (type, selector, callback)</span>
</code><code id="L2357"><span class="ln">2357</span>      <b>if</b> (Kimbo.isString(selector)) {
</code><code id="L2358"><span class="ln">2358</span>        callback<span class="s"> = </span>data;
</code><code id="L2359"><span class="ln">2359</span>        data<span class="s"> = </span><b>undefined</b>;
</code><code id="L2360"><span class="ln">2360</span>      <span class="c">// (type, data, callback)</span>
</code><code id="L2361"><span class="ln">2361</span>      } <b>else</b> {
</code><code id="L2362"><span class="ln">2362</span>        callback<span class="s"> = </span>data;
</code><code id="L2363"><span class="ln">2363</span>        data<span class="s"> = </span>selector;
</code><code id="L2364"><span class="ln">2364</span>        selector<span class="s"> = </span><b>undefined</b>;
</code><code id="L2365"><span class="ln">2365</span>      }
</code><code id="L2366"><span class="ln">2366</span>    }
</code><code id="L2367"><span class="ln">2367</span>
</code><code id="L2368"><span class="ln">2368</span>    <span class="c">// don't add events <b>if</b> no callback</span>
</code><code id="L2369"><span class="ln">2369</span>    <b>if</b> (!callback) {
</code><code id="L2370"><span class="ln">2370</span>      <b>return</b> <b>this</b>;
</code><code id="L2371"><span class="ln">2371</span>    }
</code><code id="L2372"><span class="ln">2372</span>
</code><code id="L2373"><span class="ln">2373</span>    type<span class="s"> = </span>gestures_fallback[type]<span class="s"> || </span>type;
</code><code id="L2374"><span class="ln">2374</span>
</code><code id="L2375"><span class="ln">2375</span>    <span class="c">// add the event</span>
</code><code id="L2376"><span class="ln">2376</span>    <b>return</b> <b>this</b>.each(<b>function</b> () {
</code><code id="L2377"><span class="ln">2377</span>      _addEvent(<b>this</b>, type, callback, data, selector);
</code><code id="L2378"><span class="ln">2378</span>    });
</code><code id="L2379"><span class="ln">2379</span>  },
</code><code id="L2380"><span class="ln">2380</span>
</code><code id="L2381"><span class="ln">2381</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L2382"><span class="ln">2382</span><span class="c">  <span class="s"> * </span>$(…).off
</span></code><code id="L2383"><span class="ln">2383</span><span class="c">   [ method ]
</span></code><code id="L2384"><span class="ln">2384</span><span class="c">  <span class="s"> * </span>Remove an event handler to the selected elements <b>for</b> the specified type, or all of them <b>if</b> no type defined.
</span></code><code id="L2385"><span class="ln">2385</span><span class="c">   > Parameters
</span></code><code id="L2386"><span class="ln">2386</span><span class="c">  <span class="s"> - </span>type (string) #optional A string name <b>for</b> the event to remove, or All <b>if</b> none specified.
</span></code><code id="L2387"><span class="ln">2387</span><span class="c">  <span class="s"> - </span>selector (string) #optional A string selector to undelegate an event from that element.
</span></code><code id="L2388"><span class="ln">2388</span><span class="c">  <span class="s"> - </span>callback (<b>function</b>) #optional A specific callback <b>function</b> <b>if</b> there are multiple registered under the same event type
</span></code><code id="L2389"><span class="ln">2389</span><span class="c">   > Usage
</span></code><code id="L2390"><span class="ln">2390</span><span class="c">  <span class="s"> * </span>Suppose a button element:
</span></code><code id="L2391"><span class="ln">2391</span><span class="c">  <span class="s"> | </span>&lt;button id=<i>'btn'</i>>click me&lt;/button>
</span></code><code id="L2392"><span class="ln">2392</span><span class="c">  <span class="s"> * </span>Register a click event handler
</span></code><code id="L2393"><span class="ln">2393</span><span class="c">  <span class="s"> | </span>$(<i>'#btn'</i>).on(<i>'click'</i>, <b>function</b> (event) {
</span></code><code id="L2394"><span class="ln">2394</span><span class="c">  <span class="s"> | </span>  console.log(<i>'clicked!'</i>, event);
</span></code><code id="L2395"><span class="ln">2395</span><span class="c">  <span class="s"> | </span>});
</span></code><code id="L2396"><span class="ln">2396</span><span class="c">  <span class="s"> * </span>Remove the handler
</span></code><code id="L2397"><span class="ln">2397</span><span class="c">  <span class="s"> | </span>$(<i>'#btn'</i>).off(<i>'click'</i>);
</span></code><code id="L2398"><span class="ln">2398</span><span class="c">  <span class="s"> * </span>Also you could specify the handler <b>for</b> example:
</span></code><code id="L2399"><span class="ln">2399</span><span class="c">  <span class="s"> | </span><b>var</b> firstFunction<span class="s"> = </span><b>function</b> () { console.log(<i>'first fn'</i>); };
</span></code><code id="L2400"><span class="ln">2400</span><span class="c">  <span class="s"> | </span><b>var</b> secondFunction<span class="s"> = </span><b>function</b> () { console.log(<i>'second fn'</i>); };
</span></code><code id="L2401"><span class="ln">2401</span><span class="c">  <span class="s"> | </span><b>var</b> btn<span class="s"> = </span>$(<i>'#btn'</i>);
</span></code><code id="L2402"><span class="ln">2402</span><span class="c">  <span class="s"> | </span>btn.click(firstFunction);
</span></code><code id="L2403"><span class="ln">2403</span><span class="c">  <span class="s"> | </span>btn.click(secondFunction);
</span></code><code id="L2404"><span class="ln">2404</span><span class="c">  <span class="s"> * </span>If you want to remove the click event only <b>for</b> the second <b>function</b>, <b>do</b> <b>this</b>:
</span></code><code id="L2405"><span class="ln">2405</span><span class="c">  <span class="s"> | </span>btn.off(<i>'click'</i>, secondFunction);
</span></code><code id="L2406"><span class="ln">2406</span><span class="c">  <span class="s"> * </span>Or <b>if</b> you want to remove All handlers (click and any other attached):
</span></code><code id="L2407"><span class="ln">2407</span><span class="c">  <span class="s"> | </span>btn.off();
</span></code><code id="L2408"><span class="ln">2408</span><span class="c">  \*/</span>
</code><code id="L2409"><span class="ln">2409</span>  off: <b>function</b> (type, selector, callback) {
</code><code id="L2410"><span class="ln">2410</span>    <span class="c">// prepare the arguments</span>
</code><code id="L2411"><span class="ln">2411</span>
</code><code id="L2412"><span class="ln">2412</span>    <span class="c">// (type, callback)</span>
</code><code id="L2413"><span class="ln">2413</span>    <b>if</b> (Kimbo.isFunction(selector)) {
</code><code id="L2414"><span class="ln">2414</span>      callback<span class="s"> = </span>selector;
</code><code id="L2415"><span class="ln">2415</span>      selector<span class="s"> = </span><b>undefined</b>;
</code><code id="L2416"><span class="ln">2416</span>    }
</code><code id="L2417"><span class="ln">2417</span>
</code><code id="L2418"><span class="ln">2418</span>    <span class="c">// remove the event</span>
</code><code id="L2419"><span class="ln">2419</span>    <b>return</b> <b>this</b>.each(<b>function</b> () {
</code><code id="L2420"><span class="ln">2420</span>      _removeEvent(<b>this</b>, type, callback, selector);
</code><code id="L2421"><span class="ln">2421</span>    });
</code><code id="L2422"><span class="ln">2422</span>  },
</code><code id="L2423"><span class="ln">2423</span>
</code><code id="L2424"><span class="ln">2424</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L2425"><span class="ln">2425</span><span class="c">  <span class="s"> * </span>$(…).trigger
</span></code><code id="L2426"><span class="ln">2426</span><span class="c">   [ method ]
</span></code><code id="L2427"><span class="ln">2427</span><span class="c">  <span class="s"> * </span>Execute all handlers attached to the matched elements <b>for</b> the fiven event type.
</span></code><code id="L2428"><span class="ln">2428</span><span class="c">   > Parameters
</span></code><code id="L2429"><span class="ln">2429</span><span class="c">  <span class="s"> - </span>type (string) #optional A string name <b>for</b> the event to remove, or All <b>if</b> none specified.
</span></code><code id="L2430"><span class="ln">2430</span><span class="c">  <span class="s"> - </span>data (any) #optional Additional parameters to be passed to the handler <b>in</b> `event.data` when an event is triggered.
</span></code><code id="L2431"><span class="ln">2431</span><span class="c">   > Usage
</span></code><code id="L2432"><span class="ln">2432</span><span class="c">  <span class="s"> * </span>Suppose a button element:
</span></code><code id="L2433"><span class="ln">2433</span><span class="c">  <span class="s"> | </span>&lt;button id=<i>'btn'</i>>click me&lt;/button>
</span></code><code id="L2434"><span class="ln">2434</span><span class="c">  <span class="s"> * </span>Register a click event handler
</span></code><code id="L2435"><span class="ln">2435</span><span class="c">  <span class="s"> | </span>$(<i>'#btn'</i>).on(<i>'click'</i>, <b>function</b> (event, data) {
</span></code><code id="L2436"><span class="ln">2436</span><span class="c">  <span class="s"> | </span>  console.log(<i>'name'</i>, data.name);
</span></code><code id="L2437"><span class="ln">2437</span><span class="c">  <span class="s"> | </span>});
</span></code><code id="L2438"><span class="ln">2438</span><span class="c">  <span class="s"> * </span>Trigger the event programatically passing some data:
</span></code><code id="L2439"><span class="ln">2439</span><span class="c">  <span class="s"> | </span>$(<i>'#btn'</i>).trigger(<i>'click'</i>, { name: <i>'denis'</i> });
</span></code><code id="L2440"><span class="ln">2440</span><span class="c">  <span class="s"> | </span><span class="c">// <i>'name denis'</i></span>
</span></code><code id="L2441"><span class="ln">2441</span><span class="c">  <span class="s"> * </span>Allow the handler to recieve multiple data:
</span></code><code id="L2442"><span class="ln">2442</span><span class="c">  <span class="s"> | </span>$(<i>'#btn'</i>).on(<i>'click'</i>, <b>function</b> (event, name, last) {
</span></code><code id="L2443"><span class="ln">2443</span><span class="c">  <span class="s"> | </span>  console.log(<i>'name'</i>, name);
</span></code><code id="L2444"><span class="ln">2444</span><span class="c">  <span class="s"> | </span>  console.log(<i>'last'</i>, last);
</span></code><code id="L2445"><span class="ln">2445</span><span class="c">  <span class="s"> | </span>});
</span></code><code id="L2446"><span class="ln">2446</span><span class="c">  <span class="s"> | </span>$(<i>'#btn'</i>).trigger(<i>'click'</i>, [<i>'denis'</i>, <i>'ciccale'</i>]);
</span></code><code id="L2447"><span class="ln">2447</span><span class="c">  <span class="s"> | </span><span class="c">// name denis</span>
</span></code><code id="L2448"><span class="ln">2448</span><span class="c">  <span class="s"> | </span><span class="c">// last ciccale</span>
</span></code><code id="L2449"><span class="ln">2449</span><span class="c">  \*/</span>
</code><code id="L2450"><span class="ln">2450</span>  trigger: <b>function</b> (type, data) {
</code><code id="L2451"><span class="ln">2451</span>    <b>return</b> <b>this</b>.each(<b>function</b> () {
</code><code id="L2452"><span class="ln">2452</span>      _triggerEvent(<b>this</b>, type, data);
</code><code id="L2453"><span class="ln">2453</span>    });
</code><code id="L2454"><span class="ln">2454</span>  },
</code><code id="L2455"><span class="ln">2455</span>
</code><code id="L2456"><span class="ln">2456</span><span class="c">  <span class="c">/*\</span>
</span></code><code id="L2457"><span class="ln">2457</span><span class="c">  <span class="s"> * </span>$(…).hover
</span></code><code id="L2458"><span class="ln">2458</span><span class="c">   [ method ]
</span></code><code id="L2459"><span class="ln">2459</span><span class="c">  <span class="s"> * </span>A shortcut method to register moseenter and/or mouseleave event handlers to the matched elements.
</span></code><code id="L2460"><span class="ln">2460</span><span class="c">   > Parameters
</span></code><code id="L2461"><span class="ln">2461</span><span class="c">  <span class="s"> - </span>fnOver (<b>function</b>) A <b>function</b> to execute when the cursor enters the element.
</span></code><code id="L2462"><span class="ln">2462</span><span class="c">  <span class="s"> - </span>fnOut (<b>function</b>) #optional A <b>function</b> to execute when the cursor leaves the element.
</span></code><code id="L2463"><span class="ln">2463</span><span class="c">   > Usage
</span></code><code id="L2464"><span class="ln">2464</span><span class="c">  <span class="s"> * </span>Suppose a div element:
</span></code><code id="L2465"><span class="ln">2465</span><span class="c">  <span class="s"> | </span>&lt;div id=<i>'box'</i>>&lt;/div>
</span></code><code id="L2466"><span class="ln">2466</span><span class="c">  <span class="s"> * </span>Register hover event
</span></code><code id="L2467"><span class="ln">2467</span><span class="c">  <span class="s"> | </span><b>var</b> fnOver<span class="s"> = </span><b>function</b> () { console.log(<i>'enter'</i>); };
</span></code><code id="L2468"><span class="ln">2468</span><span class="c">  <span class="s"> | </span><b>var</b> fnOut<span class="s"> = </span><b>function</b> () { console.log(<i>'leave'</i>); };
</span></code><code id="L2469"><span class="ln">2469</span><span class="c">   |
</span></code><code id="L2470"><span class="ln">2470</span><span class="c">  <span class="s"> | </span>$(<i>'.box'</i>).hover(fnOver, fnOut);
</span></code><code id="L2471"><span class="ln">2471</span><span class="c">  <span class="s"> * </span>When the cursor enters the `.box` element the console will log:
</span></code><code id="L2472"><span class="ln">2472</span><span class="c">  <span class="s"> | </span><i>'enter'</i>
</span></code><code id="L2473"><span class="ln">2473</span><span class="c">  <span class="s"> * </span>When the cursor leaves the `.box` element the console will log:
</span></code><code id="L2474"><span class="ln">2474</span><span class="c">  <span class="s"> | </span><i>'leave'</i>
</span></code><code id="L2475"><span class="ln">2475</span><span class="c">  \*/</span>
</code><code id="L2476"><span class="ln">2476</span>  hover: <b>function</b> (fnOver, fnOut) {
</code><code id="L2477"><span class="ln">2477</span>    <b>return</b> <b>this</b>.mouseenter(fnOver).mouseleave(fnOut<span class="s"> || </span>fnOver);
</code><code id="L2478"><span class="ln">2478</span>  }
</code><code id="L2479"><span class="ln">2479</span>});
</code><code id="L2480"><span class="ln">2480</span>
</code><code id="L2481"><span class="ln">2481</span><span class="c">// shortcut methods <b>for</b> each event type</span>
</code><code id="L2482"><span class="ln">2482</span>Kimbo.forEach([<i>'blur'</i>, <i>'change'</i>, <i>'click'</i>, <i>'contextmenu'</i>, <i>'dblclick'</i>, <i>'error'</i>,
</code><code id="L2483"><span class="ln">2483</span>  <i>'focus'</i>, <i>'keydown'</i>, <i>'keypress'</i>, <i>'keyup'</i>, <i>'load'</i>, <i>'mousedown'</i>, <i>'mouseenter'</i>, <i>'mouseleave'</i>, <i>'mousemove'</i>,
</code><code id="L2484"><span class="ln">2484</span>  <i>'mouseout'</i>, <i>'mouseup'</i>, <i>'mouseover'</i>, <i>'resize'</i>, <i>'scroll'</i>, <i>'select'</i>, <i>'submit'</i>, <i>'unload'</i>], <b>function</b> (type) {
</code><code id="L2485"><span class="ln">2485</span>  Kimbo.fn[type]<span class="s"> = </span><b>function</b> (data, callback) {
</code><code id="L2486"><span class="ln">2486</span>    <span class="c">// prepare arguments</span>
</code><code id="L2487"><span class="ln">2487</span>    <b>if</b> (!callback) {
</code><code id="L2488"><span class="ln">2488</span>      callback<span class="s"> = </span>data;
</code><code id="L2489"><span class="ln">2489</span>      data<span class="s"> = </span><b>null</b>;
</code><code id="L2490"><span class="ln">2490</span>    }
</code><code id="L2491"><span class="ln">2491</span>
</code><code id="L2492"><span class="ln">2492</span>    <span class="c">// add the event or trigger it <b>if</b> no args passed</span>
</code><code id="L2493"><span class="ln">2493</span>    <b>return</b> arguments.length > <span class="d">0</span> ? <b>this</b>.on(type, <b>null</b>, data, callback) : <b>this</b>.trigger(type);
</code><code id="L2494"><span class="ln">2494</span>  };
</code><code id="L2495"><span class="ln">2495</span>
</code><code id="L2496"><span class="ln">2496</span>  <span class="c">// set event props <b>for</b> the specific type</span>
</code><code id="L2497"><span class="ln">2497</span>  fixEventProps[type]<span class="s"> = </span>r_key_event.test(type) ? keyEventProps : r_mouse_event.test(type) ? mouseEventProps : <b>null</b>;
</code><code id="L2498"><span class="ln">2498</span>});
</code><code id="L2499"><span class="ln">2499</span>
</code><code id="L2500"><span class="ln">2500</span><span class="c">// fix mouseover and mouseout events</span>
</code><code id="L2501"><span class="ln">2501</span><span class="c">// to use mouseenter mouseleave</span>
</code><code id="L2502"><span class="ln">2502</span>Kimbo.forEach({
</code><code id="L2503"><span class="ln">2503</span>  mouseenter: <i>'mouseover'</i>,
</code><code id="L2504"><span class="ln">2504</span>  mouseleave: <i>'mouseout'</i>
</code><code id="L2505"><span class="ln">2505</span>}, <b>function</b> (orig, fix) {
</code><code id="L2506"><span class="ln">2506</span>  specialEvents[orig]<span class="s"> = </span>{
</code><code id="L2507"><span class="ln">2507</span>    origType: fix,
</code><code id="L2508"><span class="ln">2508</span>
</code><code id="L2509"><span class="ln">2509</span>    handle: <b>function</b> (event) {
</code><code id="L2510"><span class="ln">2510</span>      <b>var</b> target<span class="s"> = </span><b>this</b>,
</code><code id="L2511"><span class="ln">2511</span>        related<span class="s"> = </span>event.relatedTarget,
</code><code id="L2512"><span class="ln">2512</span>        handleObj<span class="s"> = </span>event.handleObj,
</code><code id="L2513"><span class="ln">2513</span>        ret;
</code><code id="L2514"><span class="ln">2514</span>
</code><code id="L2515"><span class="ln">2515</span>      <span class="c">// <b>for</b> mouse(enter/leave) call the handler <b>if</b> <i>'related'</i> is outside the target</span>
</code><code id="L2516"><span class="ln">2516</span>      <span class="c">// no <i>'related'</i> <b>if</b> the mouse left/entered the browser window</span>
</code><code id="L2517"><span class="ln">2517</span>      <b>if</b> (!related<span class="s"> || </span>(related !== target<span class="s"> &amp;&amp; </span>!_contains(target, related))) {
</code><code id="L2518"><span class="ln">2518</span>        event.type<span class="s"> = </span>handleObj.origType;
</code><code id="L2519"><span class="ln">2519</span>        ret<span class="s"> = </span>handleObj.callback.apply(<b>this</b>, arguments);
</code><code id="L2520"><span class="ln">2520</span>        event.type<span class="s"> = </span>fix;
</code><code id="L2521"><span class="ln">2521</span>      }
</code><code id="L2522"><span class="ln">2522</span>
</code><code id="L2523"><span class="ln">2523</span>      <b>return</b> ret;
</code><code id="L2524"><span class="ln">2524</span>    }
</code><code id="L2525"><span class="ln">2525</span>  };
</code><code id="L2526"><span class="ln">2526</span>});
</code><code id="L2527"><span class="ln">2527</span>
</code><code id="L2528"><span class="ln">2528</span>
</code><code id="L2529"><span class="ln">2529</span>
</code><code id="L2530"><span class="ln">2530</span><b>var</b> mime_types<span class="s"> = </span>{
</code><code id="L2531"><span class="ln">2531</span>    xml: <i>'application/xml, text/xml'</i>,
</code><code id="L2532"><span class="ln">2532</span>    html: <i>'text/html'</i>,
</code><code id="L2533"><span class="ln">2533</span>    text: <i>'text/plain'</i>,
</code><code id="L2534"><span class="ln">2534</span>    json: <i>'application/json'</i>,
</code><code id="L2535"><span class="ln">2535</span>    script: <i>'text/javascript, application/javascript, application/ecmascript'</i>
</code><code id="L2536"><span class="ln">2536</span>  },
</code><code id="L2537"><span class="ln">2537</span>  r_jsonp<span class="s"> = </span>/(\=)\?(&amp;|$)|\?\?/i,
</code><code id="L2538"><span class="ln">2538</span>  dataParse<span class="s"> = </span>{
</code><code id="L2539"><span class="ln">2539</span>    json: Kimbo.parseJSON,
</code><code id="L2540"><span class="ln">2540</span>    xml: Kimbo.parseXML
</code><code id="L2541"><span class="ln">2541</span>  },
</code><code id="L2542"><span class="ln">2542</span>  xhrCallbacks<span class="s"> = </span>{};
</code><code id="L2543"><span class="ln">2543</span>
</code><code id="L2544"><span class="ln">2544</span>
</code><code id="L2545"><span class="ln">2545</span><span class="c">// success and error callbacks</span>
</code><code id="L2546"><span class="ln">2546</span>Kimbo.forEach([<i>'success'</i>, <i>'error'</i>], <b>function</b> (type) {
</code><code id="L2547"><span class="ln">2547</span>  xhrCallbacks[type]<span class="s"> = </span><b>function</b> (res, msg, xhr, settings) {
</code><code id="L2548"><span class="ln">2548</span>    settings<span class="s"> = </span>settings<span class="s"> || </span>xhr;
</code><code id="L2549"><span class="ln">2549</span>    <b>if</b> (Kimbo.isFunction(settings[type])) {
</code><code id="L2550"><span class="ln">2550</span>      settings[type].apply(settings.context, arguments);
</code><code id="L2551"><span class="ln">2551</span>    }
</code><code id="L2552"><span class="ln">2552</span>  };
</code><code id="L2553"><span class="ln">2553</span>});
</code><code id="L2554"><span class="ln">2554</span>
</code><code id="L2555"><span class="ln">2555</span><b>function</b> _getResponse(response, type) {
</code><code id="L2556"><span class="ln">2556</span>  <b>return</b> (dataParse[type] ? dataParse[type](response) : response);
</code><code id="L2557"><span class="ln">2557</span>}
</code><code id="L2558"><span class="ln">2558</span>
</code><code id="L2559"><span class="ln">2559</span><b>function</b> _handleResponse(xhr, settings) {
</code><code id="L2560"><span class="ln">2560</span>  <b>var</b> response, contentType;
</code><code id="L2561"><span class="ln">2561</span>
</code><code id="L2562"><span class="ln">2562</span>  <span class="c">// set dataType <b>if</b> missing</span>
</code><code id="L2563"><span class="ln">2563</span>  <b>if</b> (!settings.dataType) {
</code><code id="L2564"><span class="ln">2564</span>    contentType<span class="s"> = </span>xhr.getResponseHeader(<i>'Content-Type'</i>);
</code><code id="L2565"><span class="ln">2565</span>
</code><code id="L2566"><span class="ln">2566</span>    Kimbo.forEach(mime_types, <b>function</b> (name, type) {
</code><code id="L2567"><span class="ln">2567</span>      <b>if</b> (type.match(contentType)) {
</code><code id="L2568"><span class="ln">2568</span>        settings.dataType<span class="s"> = </span>name;
</code><code id="L2569"><span class="ln">2569</span>        <b>return</b> <b>false</b>;
</code><code id="L2570"><span class="ln">2570</span>      }
</code><code id="L2571"><span class="ln">2571</span>    });
</code><code id="L2572"><span class="ln">2572</span>
</code><code id="L2573"><span class="ln">2573</span>    <span class="c">// fix settings headers</span>
</code><code id="L2574"><span class="ln">2574</span>    _setHeaders(settings);
</code><code id="L2575"><span class="ln">2575</span>  }
</code><code id="L2576"><span class="ln">2576</span>
</code><code id="L2577"><span class="ln">2577</span>  <span class="c">// handle response</span>
</code><code id="L2578"><span class="ln">2578</span>  <b>try</b> {
</code><code id="L2579"><span class="ln">2579</span>    response<span class="s"> = </span>_getResponse(xhr.responseText, settings.dataType);
</code><code id="L2580"><span class="ln">2580</span>  } <b>catch</b> (e) {
</code><code id="L2581"><span class="ln">2581</span>    response<span class="s"> = </span><b>false</b>;
</code><code id="L2582"><span class="ln">2582</span>    xhrCallbacks.error(<i>'parseerror'</i>, e, xhr, settings);
</code><code id="L2583"><span class="ln">2583</span>  }
</code><code id="L2584"><span class="ln">2584</span>
</code><code id="L2585"><span class="ln">2585</span>  <b>return</b> response;
</code><code id="L2586"><span class="ln">2586</span>}
</code><code id="L2587"><span class="ln">2587</span>
</code><code id="L2588"><span class="ln">2588</span><b>function</b> _setHeaders(settings) {
</code><code id="L2589"><span class="ln">2589</span>  <span class="c">// must have <b>this</b> headers</span>
</code><code id="L2590"><span class="ln">2590</span>  <b>if</b> (!settings.crossDomain<span class="s"> &amp;&amp; </span>!settings.headers[<i>'X-Requested-With'</i>]) {
</code><code id="L2591"><span class="ln">2591</span>    settings.headers[<i>'X-Requested-With'</i>]<span class="s"> = </span><i>'XMLHttpRequest'</i>;
</code><code id="L2592"><span class="ln">2592</span>  }
</code><code id="L2593"><span class="ln">2593</span>
</code><code id="L2594"><span class="ln">2594</span>  <b>if</b> (settings.contentType) {
</code><code id="L2595"><span class="ln">2595</span>    settings.headers[<i>'Content-Type'</i>]<span class="s"> = </span>settings.contentType;
</code><code id="L2596"><span class="ln">2596</span>  }
</code><code id="L2597"><span class="ln">2597</span>
</code><code id="L2598"><span class="ln">2598</span>  settings.headers.Accept<span class="s"> = </span>mime_types[settings.dataType]<span class="s"> || </span><i>'*<span class="c">/*'</i>;</span>
</code><code id="L2599"><span class="ln">2599</span>}
</code><code id="L2600"><span class="ln">2600</span>
</code><code id="L2601"><span class="ln">2601</span><b>function</b> _timeout(xhr, settings) {
</code><code id="L2602"><span class="ln">2602</span>  xhr.onreadystatechange<span class="s"> = </span><b>null</b>;
</code><code id="L2603"><span class="ln">2603</span>  xhr.abort();
</code><code id="L2604"><span class="ln">2604</span>  xhrCallbacks.error(<i>'error'</i>, <i>'timeout'</i>, xhr, settings);
</code><code id="L2605"><span class="ln">2605</span>}
</code><code id="L2606"><span class="ln">2606</span>
</code><code id="L2607"><span class="ln">2607</span><b>function</b> _createAbortTimeout(xhr, settings) {
</code><code id="L2608"><span class="ln">2608</span>  <b>return</b> window.setTimeout(<b>function</b> () {
</code><code id="L2609"><span class="ln">2609</span>    _timeout(xhr, settings);
</code><code id="L2610"><span class="ln">2610</span>  }, settings.timeout);
</code><code id="L2611"><span class="ln">2611</span>}
</code><code id="L2612"><span class="ln">2612</span>
</code><code id="L2613"><span class="ln">2613</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L2614"><span class="ln">2614</span><span class="c"><span class="s"> * </span>$.ajaxSettings
</span></code><code id="L2615"><span class="ln">2615</span><span class="c"> [ property ]
</span></code><code id="L2616"><span class="ln">2616</span><span class="c"><span class="s"> * </span>Default ajax settings object.
</span></code><code id="L2617"><span class="ln">2617</span><span class="c"> > Usage
</span></code><code id="L2618"><span class="ln">2618</span><span class="c"><span class="s"> * </span>If you want to change the global and <b>default</b> ajax settings, change <b>this</b> object properties:
</span></code><code id="L2619"><span class="ln">2619</span><span class="c"><span class="s"> | </span>$.ajaxSettings.error<span class="s"> = </span><b>function</b> () {
</span></code><code id="L2620"><span class="ln">2620</span><span class="c"><span class="s"> | </span>  <span class="c">// handle any failed ajax request <b>in</b> your app</span>
</span></code><code id="L2621"><span class="ln">2621</span><span class="c"><span class="s"> | </span>};
</span></code><code id="L2622"><span class="ln">2622</span><span class="c"><span class="s"> | </span>$.ajaxSettings.timeout<span class="s"> = </span><span class="d">1000</span>; <span class="c">// <span class="d">1</span> second</span>
</span></code><code id="L2623"><span class="ln">2623</span><span class="c">\*/</span>
</code><code id="L2624"><span class="ln">2624</span>Kimbo.ajaxSettings<span class="s"> = </span>{
</code><code id="L2625"><span class="ln">2625</span>  type: <i>'GET'</i>,
</code><code id="L2626"><span class="ln">2626</span>  async: <b>true</b>,
</code><code id="L2627"><span class="ln">2627</span>  success: {},
</code><code id="L2628"><span class="ln">2628</span>  error: {},
</code><code id="L2629"><span class="ln">2629</span>  context: <b>null</b>,
</code><code id="L2630"><span class="ln">2630</span>  headers: {},
</code><code id="L2631"><span class="ln">2631</span>  data: <b>null</b>,
</code><code id="L2632"><span class="ln">2632</span>  xhr: <b>function</b> () {
</code><code id="L2633"><span class="ln">2633</span>    <b>return</b> <b>new</b> window.XMLHttpRequest();
</code><code id="L2634"><span class="ln">2634</span>  },
</code><code id="L2635"><span class="ln">2635</span>  crossDomain: <b>false</b>,
</code><code id="L2636"><span class="ln">2636</span>  timeout: <span class="d">0</span>,
</code><code id="L2637"><span class="ln">2637</span>  contentType: <i>'application/x-www-form-urlencoded; charset=UTF-<span class="d">8</span>'</i>
</code><code id="L2638"><span class="ln">2638</span>};
</code><code id="L2639"><span class="ln">2639</span>
</code><code id="L2640"><span class="ln">2640</span>
</code><code id="L2641"><span class="ln">2641</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L2642"><span class="ln">2642</span><span class="c"><span class="s"> * </span>$.ajax
</span></code><code id="L2643"><span class="ln">2643</span><span class="c"> [ method ]
</span></code><code id="L2644"><span class="ln">2644</span><span class="c"><span class="s"> * </span>Perform an asynchronous HTTP (Ajax) request.
</span></code><code id="L2645"><span class="ln">2645</span><span class="c"> > Parameters
</span></code><code id="L2646"><span class="ln">2646</span><span class="c"><span class="s"> - </span>options (object) #optional An object <b>with</b> options
</span></code><code id="L2647"><span class="ln">2647</span><span class="c"> o {
</span></code><code id="L2648"><span class="ln">2648</span><span class="c"> o   url (string) Url to make the request.
</span></code><code id="L2649"><span class="ln">2649</span><span class="c"> o   type (string) #optional Type of request. Could be `<i>'GET'</i>` or `<i>'POST'</i>`. Default value is `<i>'GET'</i>`.
</span></code><code id="L2650"><span class="ln">2650</span><span class="c"> o   async (<b>boolean</b>) #optional Default value is `<b>true</b>` <b>if</b> you want synchronous requests set option to `<b>false</b>`.
</span></code><code id="L2651"><span class="ln">2651</span><span class="c"> o   success (<b>function</b>) #optional A <b>function</b> that will be called <b>if</b> the request succeeds. Recieving (response, responseMessage, xhr, settings).
</span></code><code id="L2652"><span class="ln">2652</span><span class="c"> o   error (<b>function</b>) #optional A <b>function</b> that will be called <b>if</b> the request fails. Recieving (response, responseMessage, xhr, settings).
</span></code><code id="L2653"><span class="ln">2653</span><span class="c"> o   context (object) #optional The context <b>in</b> which all ajax request are made. By <b>default</b> the context are the settings object. Could be any DOM element.
</span></code><code id="L2654"><span class="ln">2654</span><span class="c"> o   headers (object) #optional An object <b>with</b> additional header key/value pairs to send along <b>with</b> the request.
</span></code><code id="L2655"><span class="ln">2655</span><span class="c"> o   data (string|object) #optional Additional data to send <b>with</b> the request, <b>if</b> it is an object is converted to a query string.
</span></code><code id="L2656"><span class="ln">2656</span><span class="c"> o   xhr (<b>function</b>) #optional A <b>function</b> that returns a `<b>new</b> XMLHttpRequest()` object by <b>default</b>.
</span></code><code id="L2657"><span class="ln">2657</span><span class="c"> o   crossDomain (<b>boolean</b>) #optional Indicate wether you want to force crossDomain requests. `<b>false</b>` by defualt.
</span></code><code id="L2658"><span class="ln">2658</span><span class="c"> o   timeout (number) #optional Set a <b>default</b> timeout <b>in</b> milliseconds <b>for</b> the request.
</span></code><code id="L2659"><span class="ln">2659</span><span class="c"> o   contentType (string) #optional The <b>default</b> and finest contentType <b>for</b> most cases is `<i>'application/x-www-form-urlencoded; charset=UTF-<span class="d">8</span>'</i>`.
</span></code><code id="L2660"><span class="ln">2660</span><span class="c"> o }
</span></code><code id="L2661"><span class="ln">2661</span><span class="c"><span class="s"> = </span>(object) The <b>native</b> xhr object.
</span></code><code id="L2662"><span class="ln">2662</span><span class="c"> > Usage
</span></code><code id="L2663"><span class="ln">2663</span><span class="c"><span class="s"> * </span>Get a username passing an id to the /users url
</span></code><code id="L2664"><span class="ln">2664</span><span class="c"><span class="s"> | </span>$.ajax({
</span></code><code id="L2665"><span class="ln">2665</span><span class="c"><span class="s"> | </span>  url <i>'/users'</i>,
</span></code><code id="L2666"><span class="ln">2666</span><span class="c"><span class="s"> | </span>  data: {
</span></code><code id="L2667"><span class="ln">2667</span><span class="c"><span class="s"> | </span>    id: <span class="d">3</span>
</span></code><code id="L2668"><span class="ln">2668</span><span class="c"><span class="s"> | </span>  },
</span></code><code id="L2669"><span class="ln">2669</span><span class="c"><span class="s"> | </span>  success: <b>function</b> (response, responseMessage, xhr, settings) {
</span></code><code id="L2670"><span class="ln">2670</span><span class="c"><span class="s"> | </span>    <span class="c">// success...</span>
</span></code><code id="L2671"><span class="ln">2671</span><span class="c"><span class="s"> | </span>  },
</span></code><code id="L2672"><span class="ln">2672</span><span class="c"><span class="s"> | </span>  error: <b>function</b> (response, responseMessage, xhr, settings) {
</span></code><code id="L2673"><span class="ln">2673</span><span class="c"><span class="s"> | </span>    <span class="c">// error...</span>
</span></code><code id="L2674"><span class="ln">2674</span><span class="c"><span class="s"> | </span>  }
</span></code><code id="L2675"><span class="ln">2675</span><span class="c"><span class="s"> | </span>});
</span></code><code id="L2676"><span class="ln">2676</span><span class="c">\*/</span>
</code><code id="L2677"><span class="ln">2677</span>Kimbo.ajax<span class="s"> = </span><b>function</b> (options) {
</code><code id="L2678"><span class="ln">2678</span>  <b>var</b> settings<span class="s"> = </span>Kimbo.extend({}, Kimbo.ajaxSettings, options),
</code><code id="L2679"><span class="ln">2679</span>    xhr,
</code><code id="L2680"><span class="ln">2680</span>    abortTimeout,
</code><code id="L2681"><span class="ln">2681</span>    callback;
</code><code id="L2682"><span class="ln">2682</span>
</code><code id="L2683"><span class="ln">2683</span>  <span class="c">// add data to url</span>
</code><code id="L2684"><span class="ln">2684</span>  <b>if</b> (settings.data) {
</code><code id="L2685"><span class="ln">2685</span>    settings.url += (/\?/.test(settings.url) ? <i>'&amp;'</i> : <i>'?'</i>)<span class="s"> + </span>Kimbo.param(settings.data);
</code><code id="L2686"><span class="ln">2686</span>    <b>delete</b> settings.data;
</code><code id="L2687"><span class="ln">2687</span>  }
</code><code id="L2688"><span class="ln">2688</span>
</code><code id="L2689"><span class="ln">2689</span>  <span class="c">// set <b>default</b> context</span>
</code><code id="L2690"><span class="ln">2690</span>  <b>if</b> (!settings.context) {
</code><code id="L2691"><span class="ln">2691</span>    settings.context<span class="s"> = </span>settings;
</code><code id="L2692"><span class="ln">2692</span>  }
</code><code id="L2693"><span class="ln">2693</span>
</code><code id="L2694"><span class="ln">2694</span>  <span class="c">// check <b>if</b> its jsonp</span>
</code><code id="L2695"><span class="ln">2695</span>  <b>if</b> (r_jsonp.test(settings.url)) {
</code><code id="L2696"><span class="ln">2696</span>    <b>return</b> _getJSONP(settings);
</code><code id="L2697"><span class="ln">2697</span>  }
</code><code id="L2698"><span class="ln">2698</span>
</code><code id="L2699"><span class="ln">2699</span>  <span class="c">// create <b>new</b> instance</span>
</code><code id="L2700"><span class="ln">2700</span>  xhr<span class="s"> = </span>settings.xhr();
</code><code id="L2701"><span class="ln">2701</span>
</code><code id="L2702"><span class="ln">2702</span>  <span class="c">// user specified timeout</span>
</code><code id="L2703"><span class="ln">2703</span>  <b>if</b> (settings.timeout > <span class="d">0</span>) {
</code><code id="L2704"><span class="ln">2704</span>    abortTimeout<span class="s"> = </span>_createAbortTimeout(xhr, settings);
</code><code id="L2705"><span class="ln">2705</span>  }
</code><code id="L2706"><span class="ln">2706</span>
</code><code id="L2707"><span class="ln">2707</span>  <span class="c">// on complete callback</span>
</code><code id="L2708"><span class="ln">2708</span>  callback<span class="s"> = </span><b>function</b> () {
</code><code id="L2709"><span class="ln">2709</span>    <b>var</b> response, status;
</code><code id="L2710"><span class="ln">2710</span>
</code><code id="L2711"><span class="ln">2711</span>    <span class="c">// request complete</span>
</code><code id="L2712"><span class="ln">2712</span>    <b>if</b> (xhr.readyState<span class="s"> === </span><span class="d">4</span>) {
</code><code id="L2713"><span class="ln">2713</span>      status<span class="s"> = </span>xhr.status;
</code><code id="L2714"><span class="ln">2714</span>
</code><code id="L2715"><span class="ln">2715</span>      <span class="c">// clear timeout</span>
</code><code id="L2716"><span class="ln">2716</span>      window.clearTimeout(abortTimeout);
</code><code id="L2717"><span class="ln">2717</span>
</code><code id="L2718"><span class="ln">2718</span>      <span class="c">// scuccess</span>
</code><code id="L2719"><span class="ln">2719</span>      <b>if</b> ((status >= <span class="d">200</span><span class="s"> &amp;&amp; </span>status &lt; <span class="d">300</span>)<span class="s"> || </span>status<span class="s"> === </span><span class="d">304</span>) {
</code><code id="L2720"><span class="ln">2720</span>        <b>if</b> (settings.async) {
</code><code id="L2721"><span class="ln">2721</span>          response<span class="s"> = </span>_handleResponse(xhr, settings);
</code><code id="L2722"><span class="ln">2722</span>          <b>if</b> (response !== <b>false</b>) {
</code><code id="L2723"><span class="ln">2723</span>            xhrCallbacks.success(response, xhr, settings);
</code><code id="L2724"><span class="ln">2724</span>          }
</code><code id="L2725"><span class="ln">2725</span>        }
</code><code id="L2726"><span class="ln">2726</span>
</code><code id="L2727"><span class="ln">2727</span>      <span class="c">// fail</span>
</code><code id="L2728"><span class="ln">2728</span>      } <b>else</b> {
</code><code id="L2729"><span class="ln">2729</span>        xhrCallbacks.error(<i>'error'</i>, xhr.statusText, xhr, settings);
</code><code id="L2730"><span class="ln">2730</span>      }
</code><code id="L2731"><span class="ln">2731</span>    }
</code><code id="L2732"><span class="ln">2732</span>  };
</code><code id="L2733"><span class="ln">2733</span>
</code><code id="L2734"><span class="ln">2734</span>  <span class="c">// listen <b>for</b> response</span>
</code><code id="L2735"><span class="ln">2735</span>  xhr.onreadystatechange<span class="s"> = </span>callback;
</code><code id="L2736"><span class="ln">2736</span>
</code><code id="L2737"><span class="ln">2737</span>  <span class="c">// init request</span>
</code><code id="L2738"><span class="ln">2738</span>  xhr.open(settings.type, settings.url, settings.async);
</code><code id="L2739"><span class="ln">2739</span>
</code><code id="L2740"><span class="ln">2740</span>  <span class="c">// set settings headers</span>
</code><code id="L2741"><span class="ln">2741</span>  _setHeaders(settings);
</code><code id="L2742"><span class="ln">2742</span>
</code><code id="L2743"><span class="ln">2743</span>  <span class="c">// set xhr headers</span>
</code><code id="L2744"><span class="ln">2744</span>  Kimbo.forEach(settings.headers, <b>function</b> (header, value) {
</code><code id="L2745"><span class="ln">2745</span>    xhr.setRequestHeader(header, value);
</code><code id="L2746"><span class="ln">2746</span>  });
</code><code id="L2747"><span class="ln">2747</span>
</code><code id="L2748"><span class="ln">2748</span>  <span class="c">// <b>try</b> to send request</span>
</code><code id="L2749"><span class="ln">2749</span>  xhr.send(settings.data);
</code><code id="L2750"><span class="ln">2750</span>
</code><code id="L2751"><span class="ln">2751</span>  <b>return</b> (settings.async) ? xhr : callback();
</code><code id="L2752"><span class="ln">2752</span>};
</code><code id="L2753"><span class="ln">2753</span>
</code><code id="L2754"><span class="ln">2754</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L2755"><span class="ln">2755</span><span class="c"><span class="s"> * </span>$.get
</span></code><code id="L2756"><span class="ln">2756</span><span class="c"> [ method ]
</span></code><code id="L2757"><span class="ln">2757</span><span class="c"><span class="s"> * </span>Load data from the server using HTTP GET request.
</span></code><code id="L2758"><span class="ln">2758</span><span class="c"> > Parameters
</span></code><code id="L2759"><span class="ln">2759</span><span class="c"><span class="s"> - </span>url (string) A string containing the URL to which the request is sent.
</span></code><code id="L2760"><span class="ln">2760</span><span class="c"><span class="s"> - </span>data (string|object) #optional An option string or object <b>with</b> data params to send to the server.
</span></code><code id="L2761"><span class="ln">2761</span><span class="c"><span class="s"> - </span>callback (<b>function</b>) A callback <b>function</b> to execute <b>if</b> the request succeeds.
</span></code><code id="L2762"><span class="ln">2762</span><span class="c"><span class="s"> - </span>type (string) #optional String <b>with</b> the type of the data to send (intelligent guess by <b>default</b>).
</span></code><code id="L2763"><span class="ln">2763</span><span class="c"> > Usage
</span></code><code id="L2764"><span class="ln">2764</span><span class="c"><span class="s"> | </span>$.get(<i>'url/users.php'</i>, { id: <i>'<span class="d">123</span>'</i> }, <b>function</b> (data) {
</span></code><code id="L2765"><span class="ln">2765</span><span class="c"><span class="s"> | </span>  <span class="c">// success</span>
</span></code><code id="L2766"><span class="ln">2766</span><span class="c"><span class="s"> | </span>  console.log(<i>'response:'</i>, data);
</span></code><code id="L2767"><span class="ln">2767</span><span class="c"><span class="s"> | </span>});
</span></code><code id="L2768"><span class="ln">2768</span><span class="c"><span class="s"> * </span>This method is a shorthand <b>for</b> the $.ajax
</span></code><code id="L2769"><span class="ln">2769</span><span class="c"><span class="s"> | </span>$.ajax({
</span></code><code id="L2770"><span class="ln">2770</span><span class="c"><span class="s"> | </span>  url: url,
</span></code><code id="L2771"><span class="ln">2771</span><span class="c"><span class="s"> | </span>  data: data,
</span></code><code id="L2772"><span class="ln">2772</span><span class="c"><span class="s"> | </span>  success: success,
</span></code><code id="L2773"><span class="ln">2773</span><span class="c"><span class="s"> | </span>  dataType: dataType
</span></code><code id="L2774"><span class="ln">2774</span><span class="c"><span class="s"> | </span>});
</span></code><code id="L2775"><span class="ln">2775</span><span class="c">\*/</span>
</code><code id="L2776"><span class="ln">2776</span>
</code><code id="L2777"><span class="ln">2777</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L2778"><span class="ln">2778</span><span class="c"><span class="s"> * </span>$.post
</span></code><code id="L2779"><span class="ln">2779</span><span class="c"> [ method ]
</span></code><code id="L2780"><span class="ln">2780</span><span class="c"><span class="s"> * </span>Load data from the server using HTTP POST request.
</span></code><code id="L2781"><span class="ln">2781</span><span class="c"> > Parameters
</span></code><code id="L2782"><span class="ln">2782</span><span class="c"><span class="s"> - </span>url (string) A string containing the URL to which the request is sent.
</span></code><code id="L2783"><span class="ln">2783</span><span class="c"><span class="s"> - </span>data (string|object) #optional An option string or object <b>with</b> data params to send to the server.
</span></code><code id="L2784"><span class="ln">2784</span><span class="c"><span class="s"> - </span>callback (<b>function</b>) A callback <b>function</b> to execute <b>if</b> the request succeeds.
</span></code><code id="L2785"><span class="ln">2785</span><span class="c"><span class="s"> - </span>type (string) #optional String <b>with</b> the type of the data to send (intelligent guess by <b>default</b>).
</span></code><code id="L2786"><span class="ln">2786</span><span class="c"> > Usage
</span></code><code id="L2787"><span class="ln">2787</span><span class="c"><span class="s"> | </span>$.post(<i>'url/users.php'</i>, { user: <i>'denis'</i>, pass: <i>'<span class="d">123</span>'</i> }, <b>function</b> (data) {
</span></code><code id="L2788"><span class="ln">2788</span><span class="c"><span class="s"> | </span>  <span class="c">// success</span>
</span></code><code id="L2789"><span class="ln">2789</span><span class="c"><span class="s"> | </span>  console.log(<i>'response:'</i>, data);
</span></code><code id="L2790"><span class="ln">2790</span><span class="c"><span class="s"> | </span>});
</span></code><code id="L2791"><span class="ln">2791</span><span class="c"><span class="s"> * </span>This method is a shorthand <b>for</b> the $.ajax
</span></code><code id="L2792"><span class="ln">2792</span><span class="c"><span class="s"> | </span>$.ajax({
</span></code><code id="L2793"><span class="ln">2793</span><span class="c"><span class="s"> | </span>  type: <i>'POST'</i>,
</span></code><code id="L2794"><span class="ln">2794</span><span class="c"><span class="s"> | </span>  url: url,
</span></code><code id="L2795"><span class="ln">2795</span><span class="c"><span class="s"> | </span>  data: data,
</span></code><code id="L2796"><span class="ln">2796</span><span class="c"><span class="s"> | </span>  success: success,
</span></code><code id="L2797"><span class="ln">2797</span><span class="c"><span class="s"> | </span>  dataType: dataType
</span></code><code id="L2798"><span class="ln">2798</span><span class="c"><span class="s"> | </span>});
</span></code><code id="L2799"><span class="ln">2799</span><span class="c">\*/</span>
</code><code id="L2800"><span class="ln">2800</span>Kimbo.forEach([<i>'get'</i>, <i>'post'</i>], <b>function</b> (method) {
</code><code id="L2801"><span class="ln">2801</span>  Kimbo[method]<span class="s"> = </span><b>function</b> (url, data, callback, type) {
</code><code id="L2802"><span class="ln">2802</span>    <span class="c">// prepare arguments</span>
</code><code id="L2803"><span class="ln">2803</span>    <b>if</b> (Kimbo.isFunction(data)) {
</code><code id="L2804"><span class="ln">2804</span>      type<span class="s"> = </span>type<span class="s"> || </span>callback;
</code><code id="L2805"><span class="ln">2805</span>      callback<span class="s"> = </span>data;
</code><code id="L2806"><span class="ln">2806</span>      data<span class="s"> = </span><b>null</b>;
</code><code id="L2807"><span class="ln">2807</span>    }
</code><code id="L2808"><span class="ln">2808</span>
</code><code id="L2809"><span class="ln">2809</span>    <span class="c">// call ajax</span>
</code><code id="L2810"><span class="ln">2810</span>    <b>return</b> Kimbo.ajax({
</code><code id="L2811"><span class="ln">2811</span>      type: method.toUpperCase(),
</code><code id="L2812"><span class="ln">2812</span>      url: url,
</code><code id="L2813"><span class="ln">2813</span>      data: data,
</code><code id="L2814"><span class="ln">2814</span>      success: callback,
</code><code id="L2815"><span class="ln">2815</span>      dataType: type
</code><code id="L2816"><span class="ln">2816</span>    });
</code><code id="L2817"><span class="ln">2817</span>  };
</code><code id="L2818"><span class="ln">2818</span>});
</code><code id="L2819"><span class="ln">2819</span>
</code><code id="L2820"><span class="ln">2820</span>Kimbo.extend({
</code><code id="L2821"><span class="ln">2821</span><span class="c"> <span class="c">/*\</span>
</span></code><code id="L2822"><span class="ln">2822</span><span class="c"> <span class="s"> * </span>$.getScript
</span></code><code id="L2823"><span class="ln">2823</span><span class="c">  [ method ]
</span></code><code id="L2824"><span class="ln">2824</span><span class="c"> <span class="s"> * </span>Load a JavaScript file from the server using a GET HTTP request, then execute it.
</span></code><code id="L2825"><span class="ln">2825</span><span class="c">  > Parameters
</span></code><code id="L2826"><span class="ln">2826</span><span class="c"> <span class="s"> - </span>url (string) A string containing the URL to which the request is sent.
</span></code><code id="L2827"><span class="ln">2827</span><span class="c"> <span class="s"> - </span>callback (<b>function</b>) A callback <b>function</b> to execute <b>if</b> the request succeeds.
</span></code><code id="L2828"><span class="ln">2828</span><span class="c">  > Usage
</span></code><code id="L2829"><span class="ln">2829</span><span class="c"> <span class="s"> | </span>$.post(<i>'url/script.js'</i>, <b>function</b> (data) {
</span></code><code id="L2830"><span class="ln">2830</span><span class="c"> <span class="s"> | </span>  <span class="c">// success</span>
</span></code><code id="L2831"><span class="ln">2831</span><span class="c"> <span class="s"> | </span>  console.log(<i>'response:'</i>, data);
</span></code><code id="L2832"><span class="ln">2832</span><span class="c"> <span class="s"> | </span>});
</span></code><code id="L2833"><span class="ln">2833</span><span class="c"> <span class="s"> * </span>This method is a shorthand <b>for</b> the $.ajax
</span></code><code id="L2834"><span class="ln">2834</span><span class="c"> <span class="s"> | </span>$.ajax({
</span></code><code id="L2835"><span class="ln">2835</span><span class="c"> <span class="s"> | </span>  url: url,
</span></code><code id="L2836"><span class="ln">2836</span><span class="c"> <span class="s"> | </span>  dataType: <i>'script'</i>,
</span></code><code id="L2837"><span class="ln">2837</span><span class="c"> <span class="s"> | </span>  success: success
</span></code><code id="L2838"><span class="ln">2838</span><span class="c"> <span class="s"> | </span>});
</span></code><code id="L2839"><span class="ln">2839</span><span class="c"> \*/</span>
</code><code id="L2840"><span class="ln">2840</span>  getScript: <b>function</b> (url, callback) {
</code><code id="L2841"><span class="ln">2841</span>    <b>return</b> Kimbo.get(url, callback, <i>'script'</i>);
</code><code id="L2842"><span class="ln">2842</span>  },
</code><code id="L2843"><span class="ln">2843</span>
</code><code id="L2844"><span class="ln">2844</span><span class="c"> <span class="c">/*\</span>
</span></code><code id="L2845"><span class="ln">2845</span><span class="c"> <span class="s"> * </span>$.getJSON
</span></code><code id="L2846"><span class="ln">2846</span><span class="c">  [ method ]
</span></code><code id="L2847"><span class="ln">2847</span><span class="c"> <span class="s"> * </span>Load data from the server using HTTP POST request.
</span></code><code id="L2848"><span class="ln">2848</span><span class="c">  > Parameters
</span></code><code id="L2849"><span class="ln">2849</span><span class="c"> <span class="s"> - </span>url (string) A string containing the URL to which the request is sent.
</span></code><code id="L2850"><span class="ln">2850</span><span class="c"> <span class="s"> - </span>data (string|object) #optional An option string or object <b>with</b> data params to send to the server.
</span></code><code id="L2851"><span class="ln">2851</span><span class="c"> <span class="s"> - </span>callback (<b>function</b>) A callback <b>function</b> to execute <b>if</b> the request succeeds.
</span></code><code id="L2852"><span class="ln">2852</span><span class="c"> <span class="s"> - </span>type (string) #optional String <b>with</b> the type of the data to send (intelligent guess by <b>default</b>).
</span></code><code id="L2853"><span class="ln">2853</span><span class="c">  > Usage
</span></code><code id="L2854"><span class="ln">2854</span><span class="c"> <span class="s"> | </span>$.post(<i>'url/test.json'</i>, { id: <i>'<span class="d">2</span>'</i> }, <b>function</b> (data) {
</span></code><code id="L2855"><span class="ln">2855</span><span class="c"> <span class="s"> | </span>  <span class="c">// success</span>
</span></code><code id="L2856"><span class="ln">2856</span><span class="c"> <span class="s"> | </span>  console.log(<i>'response:'</i>, data);
</span></code><code id="L2857"><span class="ln">2857</span><span class="c"> <span class="s"> | </span>});
</span></code><code id="L2858"><span class="ln">2858</span><span class="c"> <span class="s"> * </span>This method is a shorthand <b>for</b> the $.ajax
</span></code><code id="L2859"><span class="ln">2859</span><span class="c"> <span class="s"> | </span>$.ajax({
</span></code><code id="L2860"><span class="ln">2860</span><span class="c"> <span class="s"> | </span>  url: url,
</span></code><code id="L2861"><span class="ln">2861</span><span class="c"> <span class="s"> | </span>  dataType: <i>'json'</i>,
</span></code><code id="L2862"><span class="ln">2862</span><span class="c"> <span class="s"> | </span>  success: success
</span></code><code id="L2863"><span class="ln">2863</span><span class="c"> <span class="s"> | </span>});
</span></code><code id="L2864"><span class="ln">2864</span><span class="c"> <span class="s"> * </span>To get json data <b>with</b> jsonp:
</span></code><code id="L2865"><span class="ln">2865</span><span class="c"> <span class="s"> | </span>$.getJSON(<i>'http:<span class="c">//search.twitter.com/search.json?callback=?'</i>, <i>'q=#javascript'</i>, <b>function</b> (data) {</span>
</span></code><code id="L2866"><span class="ln">2866</span><span class="c"> <span class="s"> | </span>  console.log(data);
</span></code><code id="L2867"><span class="ln">2867</span><span class="c"> <span class="s"> | </span>});
</span></code><code id="L2868"><span class="ln">2868</span><span class="c"> \*/</span>
</code><code id="L2869"><span class="ln">2869</span>  getJSON: <b>function</b> (url, data, callback) {
</code><code id="L2870"><span class="ln">2870</span>    <b>return</b> Kimbo.get(url, data, callback, <i>'json'</i>);
</code><code id="L2871"><span class="ln">2871</span>  }
</code><code id="L2872"><span class="ln">2872</span>});
</code><code id="L2873"><span class="ln">2873</span>
</code><code id="L2874"><span class="ln">2874</span><span class="c">// getJSONP internal use</span>
</code><code id="L2875"><span class="ln">2875</span><b>function</b> _getJSONP(settings) {
</code><code id="L2876"><span class="ln">2876</span>  <b>var</b> jsonpCallback<span class="s"> = </span>Kimbo.ref<span class="s"> + </span><i>'_'</i><span class="s"> + </span>Date.now(),
</code><code id="L2877"><span class="ln">2877</span>    script<span class="s"> = </span>document.createElement(<i>'script'</i>),
</code><code id="L2878"><span class="ln">2878</span>    head<span class="s"> = </span>document.head,
</code><code id="L2879"><span class="ln">2879</span>    abortTimeout,
</code><code id="L2880"><span class="ln">2880</span>    xhr<span class="s"> = </span>{
</code><code id="L2881"><span class="ln">2881</span>      abort: <b>function</b> () {
</code><code id="L2882"><span class="ln">2882</span>        window.clearTimeout(abortTimeout);
</code><code id="L2883"><span class="ln">2883</span>        head.removeChild(script);
</code><code id="L2884"><span class="ln">2884</span>        <b>delete</b> window[jsonpCallback];
</code><code id="L2885"><span class="ln">2885</span>      }
</code><code id="L2886"><span class="ln">2886</span>    };
</code><code id="L2887"><span class="ln">2887</span>
</code><code id="L2888"><span class="ln">2888</span>  <span class="c">// user specified timeout</span>
</code><code id="L2889"><span class="ln">2889</span>  <b>if</b> (settings.timeout > <span class="d">0</span>) {
</code><code id="L2890"><span class="ln">2890</span>    abortTimeout<span class="s"> = </span>_createAbortTimeout(xhr, settings);
</code><code id="L2891"><span class="ln">2891</span>  }
</code><code id="L2892"><span class="ln">2892</span>
</code><code id="L2893"><span class="ln">2893</span>  <span class="c">// set url</span>
</code><code id="L2894"><span class="ln">2894</span>  script.src<span class="s"> = </span>settings.url.replace(r_jsonp, <i>'$<span class="d">1</span>'</i><span class="s"> + </span>jsonpCallback<span class="s"> + </span><i>'$<span class="d">2</span>'</i>);
</code><code id="L2895"><span class="ln">2895</span>
</code><code id="L2896"><span class="ln">2896</span>  <span class="c">// JSONP callback</span>
</code><code id="L2897"><span class="ln">2897</span>  window[jsonpCallback]<span class="s"> = </span><b>function</b> (response) {
</code><code id="L2898"><span class="ln">2898</span>    <span class="c">// remove script</span>
</code><code id="L2899"><span class="ln">2899</span>    xhr.abort();
</code><code id="L2900"><span class="ln">2900</span>
</code><code id="L2901"><span class="ln">2901</span>    <span class="c">// fake xhr</span>
</code><code id="L2902"><span class="ln">2902</span>    Kimbo.extend(xhr, {
</code><code id="L2903"><span class="ln">2903</span>      statusText: <i>'OK'</i>,
</code><code id="L2904"><span class="ln">2904</span>      status: <span class="d">200</span>,
</code><code id="L2905"><span class="ln">2905</span>      response: response,
</code><code id="L2906"><span class="ln">2906</span>      headers: settings.headers
</code><code id="L2907"><span class="ln">2907</span>    });
</code><code id="L2908"><span class="ln">2908</span>
</code><code id="L2909"><span class="ln">2909</span>    <span class="c">// success</span>
</code><code id="L2910"><span class="ln">2910</span>    xhrCallbacks.success(response, xhr, settings);
</code><code id="L2911"><span class="ln">2911</span>  };
</code><code id="L2912"><span class="ln">2912</span>
</code><code id="L2913"><span class="ln">2913</span>  <span class="c">// set settings headers</span>
</code><code id="L2914"><span class="ln">2914</span>  _setHeaders(settings);
</code><code id="L2915"><span class="ln">2915</span>
</code><code id="L2916"><span class="ln">2916</span>  <span class="c">// apend script to head to make the request</span>
</code><code id="L2917"><span class="ln">2917</span>  head.appendChild(script);
</code><code id="L2918"><span class="ln">2918</span>
</code><code id="L2919"><span class="ln">2919</span>  <span class="c">// <b>return</b> fake xhr object to abort manually</span>
</code><code id="L2920"><span class="ln">2920</span>  <b>return</b> xhr;
</code><code id="L2921"><span class="ln">2921</span>}
</code><code id="L2922"><span class="ln">2922</span>
</code><code id="L2923"><span class="ln">2923</span><span class="c"><span class="c">/*\</span>
</span></code><code id="L2924"><span class="ln">2924</span><span class="c"><span class="s"> * </span>$.param
</span></code><code id="L2925"><span class="ln">2925</span><span class="c"> [ method ]
</span></code><code id="L2926"><span class="ln">2926</span><span class="c"><span class="s"> * </span>Create a serialized representation of an array or object, suitable <b>for</b> use <b>in</b> a URL query string or Ajax request.
</span></code><code id="L2927"><span class="ln">2927</span><span class="c"> > Parameters
</span></code><code id="L2928"><span class="ln">2928</span><span class="c"><span class="s"> - </span>data (string|object) A string or object to serialize.
</span></code><code id="L2929"><span class="ln">2929</span><span class="c"> > Usage
</span></code><code id="L2930"><span class="ln">2930</span><span class="c"><span class="s"> | </span><b>var</b> obj<span class="s"> = </span>{ name: <i>'Denis'</i>, last: <i>'Ciccale'</i> };
</span></code><code id="L2931"><span class="ln">2931</span><span class="c"><span class="s"> | </span><b>var</b> serialized<span class="s"> = </span>$.param(obj); <span class="c">// <i>'name=Denis&amp;last=Ciccale'</i></span>
</span></code><code id="L2932"><span class="ln">2932</span><span class="c">\*/</span>
</code><code id="L2933"><span class="ln">2933</span>Kimbo.param<span class="s"> = </span><b>function</b> (data) {
</code><code id="L2934"><span class="ln">2934</span>  <b>var</b> params<span class="s"> = </span><i>''</i>;
</code><code id="L2935"><span class="ln">2935</span>
</code><code id="L2936"><span class="ln">2936</span>  <b>if</b> (Kimbo.isObject(data)) {
</code><code id="L2937"><span class="ln">2937</span>    Kimbo.forEach(data, <b>function</b> (name, value) {
</code><code id="L2938"><span class="ln">2938</span>      params += name<span class="s"> + </span><i>'='</i><span class="s"> + </span>value<span class="s"> + </span><i>'&amp;'</i>;
</code><code id="L2939"><span class="ln">2939</span>    });
</code><code id="L2940"><span class="ln">2940</span>  } <b>else</b> {
</code><code id="L2941"><span class="ln">2941</span>    params<span class="s"> = </span>data;
</code><code id="L2942"><span class="ln">2942</span>  }
</code><code id="L2943"><span class="ln">2943</span>
</code><code id="L2944"><span class="ln">2944</span>  <b>return</b> window.encodeURIComponent(params).replace(/%<span class="d">20</span>/g, <i>'+'</i>).replace(/%\d[D6F]/g, window.unescape).replace(/^\?|&amp;$/g, <i>''</i>);
</code><code id="L2945"><span class="ln">2945</span>};
</code><code id="L2946"><span class="ln">2946</span>
</code><code id="L2947"><span class="ln">2947</span>
</code><code id="L2948"><span class="ln">2948</span><span class="c">// expose Kimbo to global object</span>
</code><code id="L2949"><span class="ln">2949</span>window.Kimbo<span class="s"> = </span>window.$<span class="s"> = </span>Kimbo;
</code><code id="L2950"><span class="ln">2950</span>
</code><code id="L2951"><span class="ln">2951</span><span class="c">// expose Kimbo as an AMD module</span>
</code><code id="L2952"><span class="ln">2952</span><b>if</b> (<b>typeof</b> window.define<span class="s"> === </span><i>'<b>function</b>'</i><span class="s"> &amp;&amp; </span>window.define.amd) {
</code><code id="L2953"><span class="ln">2953</span>  window.define(<i>'kimbo'</i>, [], <b>function</b> () {
</code><code id="L2954"><span class="ln">2954</span>    <b>return</b> window.Kimbo;
</code><code id="L2955"><span class="ln">2955</span>  });
</code><code id="L2956"><span class="ln">2956</span>}
</code><code id="L2957"><span class="ln">2957</span>
</code><code id="L2958"><span class="ln">2958</span>}(<b>this</b>));
</code><code id="L2959"><span class="ln">2959</span>
</code></body>