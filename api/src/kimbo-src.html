<!doctype html>

<!-- Generated with comment.js -->

<meta charset="utf-8">
<title>kimbo.js</title>
<meta name="viewport" content="width=device-width">
<link rel="stylesheet" href="../css/docs.min.css">

<body id="cjs-src">
  <pre><code id="L0"><a href="#L0" class="ln">0</a><span class="com"><span class="com">/*!</span>
</span></code><code id="L1"><a href="#L1" class="ln">1</a><span class="com"><span class="op"> * </span>kimbo v1<span class="lit">.0</span><span class="lit">.4</span><span class="op"> - </span><span class="lit">2013</span>-<span class="lit">12</span>-<span class="lit">11</span>
</span></code><code id="L2"><a href="#L2" class="ln">2</a><span class="com"><span class="op"> * </span>http:<span class="com">//kimbojs.com</span>
</span></code><code id="L3"><a href="#L3" class="ln">3</a><span class="com"><span class="op"> * </span>Copyright (c) <span class="lit">2013</span> Denis Ciccale (@tdecs)
</span></code><code id="L4"><a href="#L4" class="ln">4</a><span class="com"><span class="op"> * </span>Released under the MIT license
</span></code><code id="L5"><a href="#L5" class="ln">5</a><span class="com"><span class="op"> * </span>https:<span class="com">//github.com/dciccale/kimbo.js/blob/master/LICENSE.txt</span>
</span></code><code id="L6"><a href="#L6" class="ln">6</a><span class="com"> */</span>
</code><code id="L7"><a href="#L7" class="ln">7</a>(<span class=kwd>function</span> (window, document) {
</code><code id="L8"><a href="#L8" class="ln">8</a>
</code><code id="L9"><a href="#L9" class="ln">9</a>  <span class="str">'use strict'</span>;
</code><code id="L10"><a href="#L10" class="ln">10</a>
</code><code id="L11"><a href="#L11" class="ln">11</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L12"><a href="#L12" class="ln">12</a><span class="com">  <span class="op"> * </span>$
</span></code><code id="L13"><a href="#L13" class="ln">13</a><span class="com">   [ object ]
</span></code><code id="L14"><a href="#L14" class="ln">14</a><span class="com">  <span class="op"> * </span>Global namespace <span class=kwd>for</span> using Kimbo functions
</span></code><code id="L15"><a href="#L15" class="ln">15</a><span class="com">  \*/</span>
</code><code id="L16"><a href="#L16" class="ln">16</a>
</code><code id="L17"><a href="#L17" class="ln">17</a>  <span class="com">// Kimbo modules</span>
</code><code id="L18"><a href="#L18" class="ln">18</a>  <span class=kwd>var</span> modules<span class="op"> = </span>{};
</code><code id="L19"><a href="#L19" class="ln">19</a>
</code><code id="L20"><a href="#L20" class="ln">20</a>  <span class="com">// Common helpers</span>
</code><code id="L21"><a href="#L21" class="ln">21</a>  <span class=kwd>var</span> _<span class="op"> = </span>{
</code><code id="L22"><a href="#L22" class="ln">22</a>
</code><code id="L23"><a href="#L23" class="ln">23</a>    <span class="com">// Array methods</span>
</code><code id="L24"><a href="#L24" class="ln">24</a>    push: Array.prototype.push,
</code><code id="L25"><a href="#L25" class="ln">25</a>    slice: Array.prototype.slice,
</code><code id="L26"><a href="#L26" class="ln">26</a>
</code><code id="L27"><a href="#L27" class="ln">27</a>    <span class="com">// Reference to the current document</span>
</code><code id="L28"><a href="#L28" class="ln">28</a>    document: document,
</code><code id="L29"><a href="#L29" class="ln">29</a>    rootContext: document,
</code><code id="L30"><a href="#L30" class="ln">30</a>
</code><code id="L31"><a href="#L31" class="ln">31</a>    <span class="com">// Creates and returns a <span class=kwd>new</span> Kimbo object</span>
</code><code id="L32"><a href="#L32" class="ln">32</a>    kimbo: <span class=kwd>function</span> (element) {
</code><code id="L33"><a href="#L33" class="ln">33</a>      <span class=kwd>return</span> <span class=kwd>new</span> Kimbo(element);
</code><code id="L34"><a href="#L34" class="ln">34</a>    }
</code><code id="L35"><a href="#L35" class="ln">35</a>  };
</code><code id="L36"><a href="#L36" class="ln">36</a>
</code><code id="L37"><a href="#L37" class="ln">37</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L38"><a href="#L38" class="ln">38</a><span class="com">  <span class="op"> * </span>$(…)
</span></code><code id="L39"><a href="#L39" class="ln">39</a><span class="com">  <span class="op"> * </span>Kimbo object collection.
</span></code><code id="L40"><a href="#L40" class="ln">40</a><span class="com">  <span class="op"> * </span>All methods called from a Kimbo collection affects all elements <span class=kwd>in</span> it.
</span></code><code id="L41"><a href="#L41" class="ln">41</a><span class="com">  \*/</span>
</code><code id="L42"><a href="#L42" class="ln">42</a>  <span class=kwd>var</span> Kimbo<span class="op"> = </span><span class=kwd>function</span> (selector, context) {
</code><code id="L43"><a href="#L43" class="ln">43</a>    <span class=kwd>var</span> match;
</code><code id="L44"><a href="#L44" class="ln">44</a>
</code><code id="L45"><a href="#L45" class="ln">45</a>    <span class="com">// Auto create a <span class=kwd>new</span> instance of Kimbo <span class=kwd>if</span> needed</span>
</code><code id="L46"><a href="#L46" class="ln">46</a>    <span class=kwd>if</span> (!(<span class=kwd>this</span> <span class=kwd>instanceof</span> Kimbo)) {
</code><code id="L47"><a href="#L47" class="ln">47</a>      <span class=kwd>return</span> <span class=kwd>new</span> Kimbo(selector, context);
</code><code id="L48"><a href="#L48" class="ln">48</a>    }
</code><code id="L49"><a href="#L49" class="ln">49</a>
</code><code id="L50"><a href="#L50" class="ln">50</a>    <span class="com">// No selector, <span class=kwd>return</span> empty Kimbo object</span>
</code><code id="L51"><a href="#L51" class="ln">51</a>    <span class=kwd>if</span> (!selector) {
</code><code id="L52"><a href="#L52" class="ln">52</a>      <span class=kwd>return</span> <span class=kwd>this</span>;
</code><code id="L53"><a href="#L53" class="ln">53</a>    }
</code><code id="L54"><a href="#L54" class="ln">54</a>
</code><code id="L55"><a href="#L55" class="ln">55</a>    <span class="com">// Asume a css selector, query the dom</span>
</code><code id="L56"><a href="#L56" class="ln">56</a>    <span class=kwd>if</span> (<span class=kwd>typeof</span> selector<span class="op"> === </span><span class="str">'string'</span>) {
</code><code id="L57"><a href="#L57" class="ln">57</a>
</code><code id="L58"><a href="#L58" class="ln">58</a>      <span class="com">// Handle faster $(<span class="str">'#id'</span>);</span>
</code><code id="L59"><a href="#L59" class="ln">59</a>      match<span class="op"> = </span>/^#([\w\-]+)$/.exec(selector);
</code><code id="L60"><a href="#L60" class="ln">60</a>      <span class=kwd>if</span> (match<span class="op"> &amp;&amp; </span>match[<span class="lit">1</span>]) {
</code><code id="L61"><a href="#L61" class="ln">61</a>        match<span class="op"> = </span>document.getElementById(match[<span class="lit">1</span>]);
</code><code id="L62"><a href="#L62" class="ln">62</a>
</code><code id="L63"><a href="#L63" class="ln">63</a>        <span class=kwd>if</span> (match) {
</code><code id="L64"><a href="#L64" class="ln">64</a>          <span class=kwd>this</span>[<span class="lit">0</span>]<span class="op"> = </span>match;
</code><code id="L65"><a href="#L65" class="ln">65</a>          <span class=kwd>this</span>.length<span class="op"> = </span><span class="lit">1</span>;
</code><code id="L66"><a href="#L66" class="ln">66</a>        }
</code><code id="L67"><a href="#L67" class="ln">67</a>
</code><code id="L68"><a href="#L68" class="ln">68</a>        <span class=kwd>return</span> <span class=kwd>this</span>;
</code><code id="L69"><a href="#L69" class="ln">69</a>      }
</code><code id="L70"><a href="#L70" class="ln">70</a>
</code><code id="L71"><a href="#L71" class="ln">71</a>      <span class="com">// All other selectors</span>
</code><code id="L72"><a href="#L72" class="ln">72</a>      context<span class="op"> = </span>context ? _.kimbo(context) : _.rootContext;
</code><code id="L73"><a href="#L73" class="ln">73</a>
</code><code id="L74"><a href="#L74" class="ln">74</a>      <span class=kwd>return</span> context.find(selector);
</code><code id="L75"><a href="#L75" class="ln">75</a>    }
</code><code id="L76"><a href="#L76" class="ln">76</a>
</code><code id="L77"><a href="#L77" class="ln">77</a>    <span class="com">// Already a dom element</span>
</code><code id="L78"><a href="#L78" class="ln">78</a>    <span class=kwd>if</span> (selector.nodeType) {
</code><code id="L79"><a href="#L79" class="ln">79</a>      <span class=kwd>this</span>[<span class="lit">0</span>]<span class="op"> = </span>selector;
</code><code id="L80"><a href="#L80" class="ln">80</a>      <span class=kwd>this</span>.length<span class="op"> = </span><span class="lit">1</span>;
</code><code id="L81"><a href="#L81" class="ln">81</a>      <span class=kwd>return</span> <span class=kwd>this</span>;
</code><code id="L82"><a href="#L82" class="ln">82</a>    }
</code><code id="L83"><a href="#L83" class="ln">83</a>
</code><code id="L84"><a href="#L84" class="ln">84</a>    <span class="com">// Is a <span class=kwd>function</span>, call it when DOM is ready</span>
</code><code id="L85"><a href="#L85" class="ln">85</a>    <span class=kwd>if</span> (Kimbo.isFunction(selector)) {
</code><code id="L86"><a href="#L86" class="ln">86</a>      <span class=kwd>return</span> _.rootContext.ready(selector);
</code><code id="L87"><a href="#L87" class="ln">87</a>    }
</code><code id="L88"><a href="#L88" class="ln">88</a>
</code><code id="L89"><a href="#L89" class="ln">89</a>    <span class="com">// Handle kimbo object, plain objects or other objects</span>
</code><code id="L90"><a href="#L90" class="ln">90</a>    <span class=kwd>return</span> Kimbo.makeArray(selector, <span class=kwd>this</span>);
</code><code id="L91"><a href="#L91" class="ln">91</a>  };
</code><code id="L92"><a href="#L92" class="ln">92</a>
</code><code id="L93"><a href="#L93" class="ln">93</a>  Kimbo.require<span class="op"> = </span><span class=kwd>function</span> (module) {
</code><code id="L94"><a href="#L94" class="ln">94</a>    <span class=kwd>return</span> modules[module];
</code><code id="L95"><a href="#L95" class="ln">95</a>  };
</code><code id="L96"><a href="#L96" class="ln">96</a>
</code><code id="L97"><a href="#L97" class="ln">97</a>  Kimbo.define<span class="op"> = </span><span class=kwd>function</span> (module, fn) {
</code><code id="L98"><a href="#L98" class="ln">98</a>    modules[module]<span class="op"> = </span>fn(_);
</code><code id="L99"><a href="#L99" class="ln">99</a>  };
</code><code id="L100"><a href="#L100" class="ln">100</a>
</code><code id="L101"><a href="#L101" class="ln">101</a><span class="com">  /*
</span></code><code id="L102"><a href="#L102" class="ln">102</a><span class="com">  <span class="op"> * </span>Kimbo prototype aliased as fn
</span></code><code id="L103"><a href="#L103" class="ln">103</a><span class="com">   */</span>
</code><code id="L104"><a href="#L104" class="ln">104</a>  Kimbo.prototype<span class="op"> = </span>Kimbo.fn<span class="op"> = </span>{
</code><code id="L105"><a href="#L105" class="ln">105</a>
</code><code id="L106"><a href="#L106" class="ln">106</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L107"><a href="#L107" class="ln">107</a><span class="com">    <span class="op"> * </span>$(…).length
</span></code><code id="L108"><a href="#L108" class="ln">108</a><span class="com">     [ property ]
</span></code><code id="L109"><a href="#L109" class="ln">109</a><span class="com">    <span class="op"> * </span>The length of the current Kimbo collection.
</span></code><code id="L110"><a href="#L110" class="ln">110</a><span class="com">    <span class="op"> = </span>(number) Integer representing the lenght of the current collection.
</span></code><code id="L111"><a href="#L111" class="ln">111</a><span class="com">     > Usage
</span></code><code id="L112"><a href="#L112" class="ln">112</a><span class="com">    <span class="op"> * </span>Having these paragraphs:
</span></code><code id="L113"><a href="#L113" class="ln">113</a><span class="com">    <span class="op"> | </span>&lt;p>one&lt;/p>
</span></code><code id="L114"><a href="#L114" class="ln">114</a><span class="com">    <span class="op"> | </span>&lt;p>two&lt;/p>
</span></code><code id="L115"><a href="#L115" class="ln">115</a><span class="com">    <span class="op"> | </span>&lt;p>three&lt;/p>
</span></code><code id="L116"><a href="#L116" class="ln">116</a><span class="com">    <span class="op"> * </span>Grab them and check <span class=kwd>for</span> the length property:
</span></code><code id="L117"><a href="#L117" class="ln">117</a><span class="com">    <span class="op"> | </span>$(<span class="str">'p'</span>).length; <span class="com">// <span class="lit">3</span></span>
</span></code><code id="L118"><a href="#L118" class="ln">118</a><span class="com">    \*/</span>
</code><code id="L119"><a href="#L119" class="ln">119</a>    length: <span class="lit">0</span>,
</code><code id="L120"><a href="#L120" class="ln">120</a>
</code><code id="L121"><a href="#L121" class="ln">121</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L122"><a href="#L122" class="ln">122</a><span class="com">    <span class="op"> * </span>$(…).ready
</span></code><code id="L123"><a href="#L123" class="ln">123</a><span class="com">     [ method ]
</span></code><code id="L124"><a href="#L124" class="ln">124</a><span class="com">    <span class="op"> * </span>Execute a callback after de DOM is completely loaded
</span></code><code id="L125"><a href="#L125" class="ln">125</a><span class="com">     > Parameters
</span></code><code id="L126"><a href="#L126" class="ln">126</a><span class="com">    <span class="op"> - </span>callback (<span class=kwd>function</span>) A <span class=kwd>function</span> to call after de DOM is ready
</span></code><code id="L127"><a href="#L127" class="ln">127</a><span class="com">    <span class="op"> = </span>(object) The original element
</span></code><code id="L128"><a href="#L128" class="ln">128</a><span class="com">     > Usage
</span></code><code id="L129"><a href="#L129" class="ln">129</a><span class="com">    <span class="op"> | </span>$(document).ready(<span class=kwd>function</span> () {
</span></code><code id="L130"><a href="#L130" class="ln">130</a><span class="com">    <span class="op"> | </span>  console.log(<span class="str">'the DOM is loaded!'</span>);
</span></code><code id="L131"><a href="#L131" class="ln">131</a><span class="com">    <span class="op"> | </span>});
</span></code><code id="L132"><a href="#L132" class="ln">132</a><span class="com">    <span class="op"> * </span>Or using the shortcut (recommended)
</span></code><code id="L133"><a href="#L133" class="ln">133</a><span class="com">    <span class="op"> | </span>$(<span class=kwd>function</span> () {
</span></code><code id="L134"><a href="#L134" class="ln">134</a><span class="com">    <span class="op"> | </span>  console.log('the DOM is loaded!);
</span></code><code id="L135"><a href="#L135" class="ln">135</a><span class="com">    <span class="op"> | </span>});
</span></code><code id="L136"><a href="#L136" class="ln">136</a><span class="com">    \*/</span>
</code><code id="L137"><a href="#L137" class="ln">137</a>    ready: <span class=kwd>function</span> (callback) {
</code><code id="L138"><a href="#L138" class="ln">138</a>      <span class=kwd>var</span> completed;
</code><code id="L139"><a href="#L139" class="ln">139</a>
</code><code id="L140"><a href="#L140" class="ln">140</a>      <span class="com">// First check <span class=kwd>if</span> already loaded, interactive or complete state so the t is enough</span>
</code><code id="L141"><a href="#L141" class="ln">141</a>      <span class=kwd>if</span> (/t/.test(document.readyState)) {
</code><code id="L142"><a href="#L142" class="ln">142</a>
</code><code id="L143"><a href="#L143" class="ln">143</a>        <span class="com">// Execute the callback</span>
</code><code id="L144"><a href="#L144" class="ln">144</a>        callback.call(document);
</code><code id="L145"><a href="#L145" class="ln">145</a>
</code><code id="L146"><a href="#L146" class="ln">146</a>      <span class="com">// If not listen <span class=kwd>for</span> when it loads</span>
</code><code id="L147"><a href="#L147" class="ln">147</a>      } <span class=kwd>else</span> {
</code><code id="L148"><a href="#L148" class="ln">148</a>        completed<span class="op"> = </span><span class=kwd>function</span> () {
</code><code id="L149"><a href="#L149" class="ln">149</a>
</code><code id="L150"><a href="#L150" class="ln">150</a>          <span class="com">// When completed remove the listener</span>
</code><code id="L151"><a href="#L151" class="ln">151</a>          document.removeEventListener(<span class="str">'DOMContentLoaded'</span>, completed, <span class=kwd>false</span>);
</code><code id="L152"><a href="#L152" class="ln">152</a>
</code><code id="L153"><a href="#L153" class="ln">153</a>          <span class="com">// Execute the callback</span>
</code><code id="L154"><a href="#L154" class="ln">154</a>          callback.call(document);
</code><code id="L155"><a href="#L155" class="ln">155</a>        };
</code><code id="L156"><a href="#L156" class="ln">156</a>
</code><code id="L157"><a href="#L157" class="ln">157</a>        <span class="com">// Register the event</span>
</code><code id="L158"><a href="#L158" class="ln">158</a>        document.addEventListener(<span class="str">'DOMContentLoaded'</span>, completed, <span class=kwd>false</span>);
</code><code id="L159"><a href="#L159" class="ln">159</a>      }
</code><code id="L160"><a href="#L160" class="ln">160</a>
</code><code id="L161"><a href="#L161" class="ln">161</a>      <span class="com">// Return the Kimbo wrapped document</span>
</code><code id="L162"><a href="#L162" class="ln">162</a>      <span class=kwd>return</span> _.rootContext;
</code><code id="L163"><a href="#L163" class="ln">163</a>    },
</code><code id="L164"><a href="#L164" class="ln">164</a>
</code><code id="L165"><a href="#L165" class="ln">165</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L166"><a href="#L166" class="ln">166</a><span class="com">    <span class="op"> * </span>$(…).get
</span></code><code id="L167"><a href="#L167" class="ln">167</a><span class="com">     [ method ]
</span></code><code id="L168"><a href="#L168" class="ln">168</a><span class="com">    <span class="op"> * </span>Retrieve <span class=kwd>native</span> DOM elements from the current collection
</span></code><code id="L169"><a href="#L169" class="ln">169</a><span class="com">     > Parameters
</span></code><code id="L170"><a href="#L170" class="ln">170</a><span class="com">    <span class="op"> - </span>index (number) #optional A zero-based integer indicating which element to retrieve, supports going backwards <span class=kwd>with</span> negative index.
</span></code><code id="L171"><a href="#L171" class="ln">171</a><span class="com">    <span class="op"> = </span>(array|object) An array of the <span class=kwd>native</span> DOM elements or the specified element by index matched by Kimbo.
</span></code><code id="L172"><a href="#L172" class="ln">172</a><span class="com">     > Usage
</span></code><code id="L173"><a href="#L173" class="ln">173</a><span class="com">    <span class="op"> | </span>&lt;ul>
</span></code><code id="L174"><a href="#L174" class="ln">174</a><span class="com">    <span class="op"> | </span>  &lt;li id=<span class="str">"foo"</span>>&lt;/li>
</span></code><code id="L175"><a href="#L175" class="ln">175</a><span class="com">    <span class="op"> | </span>  &lt;li id=<span class="str">"bar"</span>>&lt;/li>
</span></code><code id="L176"><a href="#L176" class="ln">176</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L177"><a href="#L177" class="ln">177</a><span class="com">    <span class="op"> * </span>Get standard array of elements
</span></code><code id="L178"><a href="#L178" class="ln">178</a><span class="com">    <span class="op"> | </span>$(<span class="str">'li'</span>).get(); <span class="com">// [&lt;li id=<span class="str">"foo"</span>>, &lt;li id=<span class="str">"bar"</span>>]</span>
</span></code><code id="L179"><a href="#L179" class="ln">179</a><span class="com">    <span class="op"> * </span>Get the first element
</span></code><code id="L180"><a href="#L180" class="ln">180</a><span class="com">    <span class="op"> | </span>$(<span class="str">'li'</span>).get(<span class="lit">0</span>); <span class="com">// &lt;li id=<span class="str">"foo"</span>></span>
</span></code><code id="L181"><a href="#L181" class="ln">181</a><span class="com">    <span class="op"> * </span>Get the last element
</span></code><code id="L182"><a href="#L182" class="ln">182</a><span class="com">    <span class="op"> | </span>$(<span class="str">'li'</span>).get(-<span class="lit">1</span>); <span class="com">// &lt;li id=<span class="str">"bar"</span>></span>
</span></code><code id="L183"><a href="#L183" class="ln">183</a><span class="com">    \*/</span>
</code><code id="L184"><a href="#L184" class="ln">184</a>    get: <span class=kwd>function</span> (index) {
</code><code id="L185"><a href="#L185" class="ln">185</a>      <span class=kwd>if</span> (!<span class=kwd>this</span>.length) {
</code><code id="L186"><a href="#L186" class="ln">186</a>        <span class=kwd>return</span>;
</code><code id="L187"><a href="#L187" class="ln">187</a>      }
</code><code id="L188"><a href="#L188" class="ln">188</a>
</code><code id="L189"><a href="#L189" class="ln">189</a>      <span class="com">// If no index specified <span class=kwd>return</span> a <span class=kwd>new</span> set</span>
</code><code id="L190"><a href="#L190" class="ln">190</a>      <span class="com">// Else <span class=kwd>return</span> the element <span class=kwd>in</span> the specified positive index or backwards <span class=kwd>if</span> negative</span>
</code><code id="L191"><a href="#L191" class="ln">191</a>      <span class=kwd>return</span> (!arguments.length) ? _.slice.call(<span class=kwd>this</span>) :
</code><code id="L192"><a href="#L192" class="ln">192</a>        (index &lt; <span class="lit">0</span> ? <span class=kwd>this</span>[<span class=kwd>this</span>.length<span class="op"> + </span>index] : <span class=kwd>this</span>[index]);
</code><code id="L193"><a href="#L193" class="ln">193</a>    },
</code><code id="L194"><a href="#L194" class="ln">194</a>
</code><code id="L195"><a href="#L195" class="ln">195</a>    <span class="com">// Needed to have an array-like object</span>
</code><code id="L196"><a href="#L196" class="ln">196</a>    splice: Array.prototype.splice
</code><code id="L197"><a href="#L197" class="ln">197</a>  };
</code><code id="L198"><a href="#L198" class="ln">198</a>
</code><code id="L199"><a href="#L199" class="ln">199</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L200"><a href="#L200" class="ln">200</a><span class="com">  <span class="op"> * </span>$.forEach
</span></code><code id="L201"><a href="#L201" class="ln">201</a><span class="com">   [ method ]
</span></code><code id="L202"><a href="#L202" class="ln">202</a><span class="com">  <span class="op"> * </span>Iterator <span class=kwd>function</span> that can be used to seamlessly iterate over both objects and arrays.
</span></code><code id="L203"><a href="#L203" class="ln">203</a><span class="com">   > Parameters
</span></code><code id="L204"><a href="#L204" class="ln">204</a><span class="com">  <span class="op"> - </span>obj (object) Object or array to iterate
</span></code><code id="L205"><a href="#L205" class="ln">205</a><span class="com">  <span class="op"> - </span>callback (<span class=kwd>function</span>) Function that will be executed on each iteration
</span></code><code id="L206"><a href="#L206" class="ln">206</a><span class="com">  <span class="op"> = </span>(object) The original array or object
</span></code><code id="L207"><a href="#L207" class="ln">207</a><span class="com">   > Usage
</span></code><code id="L208"><a href="#L208" class="ln">208</a><span class="com">  <span class="op"> | </span><span class="com">// Iterating array</span>
</span></code><code id="L209"><a href="#L209" class="ln">209</a><span class="com">  <span class="op"> | </span>$.forEach([<span class="str">'a'</span>, <span class="str">'b'</span>, <span class="str">'c'</span>], <span class=kwd>function</span> (index, value) {
</span></code><code id="L210"><a href="#L210" class="ln">210</a><span class="com">  <span class="op"> | </span>  alert(index<span class="op"> + </span><span class="str">': '</span><span class="op"> + </span>value);
</span></code><code id="L211"><a href="#L211" class="ln">211</a><span class="com">  <span class="op"> | </span>});
</span></code><code id="L212"><a href="#L212" class="ln">212</a><span class="com">   |
</span></code><code id="L213"><a href="#L213" class="ln">213</a><span class="com">  <span class="op"> | </span><span class="com">// Iterating object</span>
</span></code><code id="L214"><a href="#L214" class="ln">214</a><span class="com">  <span class="op"> | </span>$.forEach({name: <span class="str">'Denis'</span>, surname: <span class="str">'Ciccale'</span>}, <span class=kwd>function</span> (key, value) {
</span></code><code id="L215"><a href="#L215" class="ln">215</a><span class="com">  <span class="op"> | </span>  alert(key<span class="op"> + </span><span class="str">': '</span><span class="op"> + </span>value);
</span></code><code id="L216"><a href="#L216" class="ln">216</a><span class="com">  <span class="op"> | </span>});
</span></code><code id="L217"><a href="#L217" class="ln">217</a><span class="com">  \*/</span>
</code><code id="L218"><a href="#L218" class="ln">218</a>  Kimbo.forEach<span class="op"> = </span><span class=kwd>function</span> (obj, callback) {
</code><code id="L219"><a href="#L219" class="ln">219</a>    <span class=kwd>var</span> l<span class="op"> = </span>obj.length;
</code><code id="L220"><a href="#L220" class="ln">220</a>    <span class=kwd>var</span> isObj<span class="op"> = </span>l<span class="op"> === </span><span class=kwd>undefined</span><span class="op"> || </span><span class=kwd>typeof</span> obj<span class="op"> === </span><span class="str">'<span class=kwd>function</span>'</span>;
</code><code id="L221"><a href="#L221" class="ln">221</a>    <span class=kwd>var</span> i;
</code><code id="L222"><a href="#L222" class="ln">222</a>
</code><code id="L223"><a href="#L223" class="ln">223</a>    <span class=kwd>if</span> (isObj) {
</code><code id="L224"><a href="#L224" class="ln">224</a>      <span class=kwd>for</span> (i <span class=kwd>in</span> obj) {
</code><code id="L225"><a href="#L225" class="ln">225</a>        <span class=kwd>if</span> (obj.hasOwnProperty(i)<span class="op"> &amp;&amp; </span>callback.call(obj[i], i, obj[i], obj)<span class="op"> === </span><span class=kwd>false</span>) {
</code><code id="L226"><a href="#L226" class="ln">226</a>          <span class=kwd>break</span>;
</code><code id="L227"><a href="#L227" class="ln">227</a>        }
</code><code id="L228"><a href="#L228" class="ln">228</a>      }
</code><code id="L229"><a href="#L229" class="ln">229</a>    } <span class=kwd>else</span> {
</code><code id="L230"><a href="#L230" class="ln">230</a>      <span class=kwd>for</span> (i<span class="op"> = </span><span class="lit">0</span>; i &lt; l; i++) {
</code><code id="L231"><a href="#L231" class="ln">231</a>        <span class=kwd>if</span> (callback.call(obj[i], obj[i], i, obj)<span class="op"> === </span><span class=kwd>false</span>) {
</code><code id="L232"><a href="#L232" class="ln">232</a>          <span class=kwd>break</span>;
</code><code id="L233"><a href="#L233" class="ln">233</a>        }
</code><code id="L234"><a href="#L234" class="ln">234</a>      }
</code><code id="L235"><a href="#L235" class="ln">235</a>    }
</code><code id="L236"><a href="#L236" class="ln">236</a>
</code><code id="L237"><a href="#L237" class="ln">237</a>    <span class="com">// Return original obj</span>
</code><code id="L238"><a href="#L238" class="ln">238</a>    <span class=kwd>return</span> obj;
</code><code id="L239"><a href="#L239" class="ln">239</a>  };
</code><code id="L240"><a href="#L240" class="ln">240</a>
</code><code id="L241"><a href="#L241" class="ln">241</a>
</code><code id="L242"><a href="#L242" class="ln">242</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L243"><a href="#L243" class="ln">243</a><span class="com">  <span class="op"> * </span>$.extend
</span></code><code id="L244"><a href="#L244" class="ln">244</a><span class="com">   [ method ]
</span></code><code id="L245"><a href="#L245" class="ln">245</a><span class="com">  <span class="op"> * </span>Merge the contents of two or more objects together into the first object.
</span></code><code id="L246"><a href="#L246" class="ln">246</a><span class="com">   > Parameters
</span></code><code id="L247"><a href="#L247" class="ln">247</a><span class="com">  <span class="op"> - </span>target (object|<span class=kwd>boolean</span>) Object that will receive the merged properties <span class=kwd>if</span> objects are passed, or target will extend Kimbo object. If target is `<span class=kwd>true</span>` the passed objects will be recursively merged.
</span></code><code id="L248"><a href="#L248" class="ln">248</a><span class="com">  <span class="op"> - </span>objectN (object) #optional One or more objects <span class=kwd>with</span> additional properties.
</span></code><code id="L249"><a href="#L249" class="ln">249</a><span class="com">  <span class="op"> = </span>(object) The extended target or a <span class=kwd>new</span> copy <span class=kwd>if</span> target is an empty object.
</span></code><code id="L250"><a href="#L250" class="ln">250</a><span class="com">   > Usage
</span></code><code id="L251"><a href="#L251" class="ln">251</a><span class="com">  <span class="op"> * </span>When passing two or more objects, all properties will be merged into the target object.
</span></code><code id="L252"><a href="#L252" class="ln">252</a><span class="com">  <span class="op"> | </span><span class=kwd>var</span> obj1<span class="op"> = </span>{ msg: <span class="str">'hi'</span>, info: { from: <span class="str">'Denis'</span> }};
</span></code><code id="L253"><a href="#L253" class="ln">253</a><span class="com">  <span class="op"> | </span><span class=kwd>var</span> obj2<span class="op"> = </span>{ msg: <span class="str">'Hi!'</span>, info: { time: <span class="str">'<span class="lit">22</span>:00PM'</span> }};
</span></code><code id="L254"><a href="#L254" class="ln">254</a><span class="com">   |
</span></code><code id="L255"><a href="#L255" class="ln">255</a><span class="com">  <span class="op"> | </span><span class="com">// Merge obj1 into obj2</span>
</span></code><code id="L256"><a href="#L256" class="ln">256</a><span class="com">  <span class="op"> | </span>$.extend(obj1, obj2);
</span></code><code id="L257"><a href="#L257" class="ln">257</a><span class="com">   |
</span></code><code id="L258"><a href="#L258" class="ln">258</a><span class="com">  <span class="op"> | </span><span class="com">// Now obj1 is equal to:</span>
</span></code><code id="L259"><a href="#L259" class="ln">259</a><span class="com">  <span class="op"> | </span>{ msg: <span class="str">'Hi!'</span>, info: { time: <span class="str">'<span class="lit">22</span>:00PM'</span> }}
</span></code><code id="L260"><a href="#L260" class="ln">260</a><span class="com">  <span class="op"> * </span>If an empty target object is passed, none of the other objects will be directly modified
</span></code><code id="L261"><a href="#L261" class="ln">261</a><span class="com">  <span class="op"> | </span><span class="com">// Pass an empty target</span>
</span></code><code id="L262"><a href="#L262" class="ln">262</a><span class="com">  <span class="op"> | </span><span class=kwd>var</span> obj3<span class="op"> = </span>$.extend({}, obj1, obj);
</span></code><code id="L263"><a href="#L263" class="ln">263</a><span class="com">  <span class="op"> * </span>To <span class=kwd>do</span> a recursive merge, pass <span class=kwd>true</span> as first argument, then the objects to merge
</span></code><code id="L264"><a href="#L264" class="ln">264</a><span class="com">  <span class="op"> | </span>$.extend(<span class=kwd>true</span>, obj1, obj2);
</span></code><code id="L265"><a href="#L265" class="ln">265</a><span class="com">  <span class="op"> | </span><span class="com">// Obj1 will be:</span>
</span></code><code id="L266"><a href="#L266" class="ln">266</a><span class="com">  <span class="op"> | </span>{ msg: <span class="str">'Hi!'</span>, info: { from: <span class="str">'Denis'</span>, time: <span class="str">'<span class="lit">22</span>:00PM'</span> }}
</span></code><code id="L267"><a href="#L267" class="ln">267</a><span class="com">  \*/</span>
</code><code id="L268"><a href="#L268" class="ln">268</a>  Kimbo.extend<span class="op"> = </span>Kimbo.fn.extend<span class="op"> = </span><span class=kwd>function</span> () {
</code><code id="L269"><a href="#L269" class="ln">269</a>    <span class=kwd>var</span> objs<span class="op"> = </span>arguments;
</code><code id="L270"><a href="#L270" class="ln">270</a>    <span class=kwd>var</span> target<span class="op"> = </span>objs[<span class="lit">0</span>]<span class="op"> || </span>{};
</code><code id="L271"><a href="#L271" class="ln">271</a>    <span class=kwd>var</span> deep<span class="op"> = </span>(target<span class="op"> === </span><span class=kwd>true</span>);
</code><code id="L272"><a href="#L272" class="ln">272</a>    <span class=kwd>var</span> cut<span class="op"> = </span><span class="lit">1</span>;
</code><code id="L273"><a href="#L273" class="ln">273</a>
</code><code id="L274"><a href="#L274" class="ln">274</a>    <span class="com">// Check <span class=kwd>for</span> deep copy</span>
</code><code id="L275"><a href="#L275" class="ln">275</a>    <span class=kwd>if</span> (deep) {
</code><code id="L276"><a href="#L276" class="ln">276</a>      target<span class="op"> = </span>objs[<span class="lit">1</span>]<span class="op"> || </span>{};
</code><code id="L277"><a href="#L277" class="ln">277</a>      cut<span class="op"> = </span><span class="lit">2</span>;
</code><code id="L278"><a href="#L278" class="ln">278</a>
</code><code id="L279"><a href="#L279" class="ln">279</a>    <span class="com">// Extend Kimbo itself <span class=kwd>if</span> only one argument is passed</span>
</code><code id="L280"><a href="#L280" class="ln">280</a>    } <span class=kwd>else</span> <span class=kwd>if</span> (objs.length<span class="op"> === </span><span class="lit">1</span>) {
</code><code id="L281"><a href="#L281" class="ln">281</a>      target<span class="op"> = </span><span class=kwd>this</span>;
</code><code id="L282"><a href="#L282" class="ln">282</a>      cut<span class="op"> = </span><span class="lit">0</span>;
</code><code id="L283"><a href="#L283" class="ln">283</a>    }
</code><code id="L284"><a href="#L284" class="ln">284</a>
</code><code id="L285"><a href="#L285" class="ln">285</a>    <span class="com">// Make an array from the arguments removing the target and/or the deep <span class=kwd>boolean</span></span>
</code><code id="L286"><a href="#L286" class="ln">286</a>    objs<span class="op"> = </span>_.slice.call(objs, cut);
</code><code id="L287"><a href="#L287" class="ln">287</a>
</code><code id="L288"><a href="#L288" class="ln">288</a>    <span class="com">// Loop through the objects</span>
</code><code id="L289"><a href="#L289" class="ln">289</a>    Kimbo.forEach(objs, <span class=kwd>function</span> (source) {
</code><code id="L290"><a href="#L290" class="ln">290</a>
</code><code id="L291"><a href="#L291" class="ln">291</a>      <span class="com">// Populate target from source</span>
</code><code id="L292"><a href="#L292" class="ln">292</a>      Kimbo.forEach(source, <span class=kwd>function</span> (key, value) {
</code><code id="L293"><a href="#L293" class="ln">293</a>        <span class=kwd>var</span> src;
</code><code id="L294"><a href="#L294" class="ln">294</a>
</code><code id="L295"><a href="#L295" class="ln">295</a>        <span class=kwd>if</span> (deep<span class="op"> &amp;&amp; </span>(Kimbo.isObject(value)<span class="op"> || </span>Kimbo.isArray(value))) {
</code><code id="L296"><a href="#L296" class="ln">296</a>          src<span class="op"> = </span>target[key];
</code><code id="L297"><a href="#L297" class="ln">297</a>          target[key]<span class="op"> = </span>Kimbo.extend(deep, src, value);
</code><code id="L298"><a href="#L298" class="ln">298</a>
</code><code id="L299"><a href="#L299" class="ln">299</a>        } <span class=kwd>else</span> <span class=kwd>if</span> (value !== <span class=kwd>undefined</span>) {
</code><code id="L300"><a href="#L300" class="ln">300</a>          target[key]<span class="op"> = </span>value;
</code><code id="L301"><a href="#L301" class="ln">301</a>        }
</code><code id="L302"><a href="#L302" class="ln">302</a>      });
</code><code id="L303"><a href="#L303" class="ln">303</a>    });
</code><code id="L304"><a href="#L304" class="ln">304</a>
</code><code id="L305"><a href="#L305" class="ln">305</a>    <span class=kwd>return</span> target;
</code><code id="L306"><a href="#L306" class="ln">306</a>  };
</code><code id="L307"><a href="#L307" class="ln">307</a>
</code><code id="L308"><a href="#L308" class="ln">308</a>  <span class="com">// Unique reference <span class=kwd>for</span> the current instance of Kimbo</span>
</code><code id="L309"><a href="#L309" class="ln">309</a>  Kimbo.ref<span class="op"> = </span><span class="str">'kimbo'</span><span class="op"> + </span>(<span class="str">'<span class="lit">1</span>'</span><span class="op"> + </span>Math.random()).replace(/\D/g, <span class="str">''</span>);
</code><code id="L310"><a href="#L310" class="ln">310</a>
</code><code id="L311"><a href="#L311" class="ln">311</a>  <span class="com">// Expose Kimbo as an AMD module</span>
</code><code id="L312"><a href="#L312" class="ln">312</a>  <span class=kwd>if</span> (<span class=kwd>typeof</span> window.define<span class="op"> === </span><span class="str">'<span class=kwd>function</span>'</span><span class="op"> &amp;&amp; </span>window.define.amd) {
</code><code id="L313"><a href="#L313" class="ln">313</a>    window.define(<span class="str">'kimbo'</span>, [], <span class=kwd>function</span> () {
</code><code id="L314"><a href="#L314" class="ln">314</a>      <span class=kwd>return</span> Kimbo;
</code><code id="L315"><a href="#L315" class="ln">315</a>    });
</code><code id="L316"><a href="#L316" class="ln">316</a>  }
</code><code id="L317"><a href="#L317" class="ln">317</a>
</code><code id="L318"><a href="#L318" class="ln">318</a>  <span class="com">// Expose Kimbo to global object</span>
</code><code id="L319"><a href="#L319" class="ln">319</a>  window.Kimbo<span class="op"> = </span>window.$<span class="op"> = </span>Kimbo;
</code><code id="L320"><a href="#L320" class="ln">320</a>
</code><code id="L321"><a href="#L321" class="ln">321</a>}(window, window.document));
</code><code id="L322"><a href="#L322" class="ln">322</a>
</code><code id="L323"><a href="#L323" class="ln">323</a>
</code><code id="L324"><a href="#L324" class="ln">324</a>Kimbo.define(<span class="str">'query'</span>, <span class=kwd>function</span> (_) {
</code><code id="L325"><a href="#L325" class="ln">325</a>
</code><code id="L326"><a href="#L326" class="ln">326</a>  <span class="str">'use strict'</span>;
</code><code id="L327"><a href="#L327" class="ln">327</a>
</code><code id="L328"><a href="#L328" class="ln">328</a>  <span class="com">// Selector regexes</span>
</code><code id="L329"><a href="#L329" class="ln">329</a>  <span class=kwd>var</span> ID_RE<span class="op"> = </span>/^#([\w\-]+)$/;
</code><code id="L330"><a href="#L330" class="ln">330</a>  <span class=kwd>var</span> CLASS_RE<span class="op"> = </span>/^\.([\w\-]+)$/;
</code><code id="L331"><a href="#L331" class="ln">331</a>  <span class=kwd>var</span> TAG_RE<span class="op"> = </span>/^[\w\-]+$/;
</code><code id="L332"><a href="#L332" class="ln">332</a>  <span class=kwd>var</span> NAME_RE<span class="op"> = </span>/^\[name=[<span class="str">"']?([\w\-]+)["</span>']?\]$/;
</code><code id="L333"><a href="#L333" class="ln">333</a>
</code><code id="L334"><a href="#L334" class="ln">334</a>  <span class="com">// Use querySelectoAll but optimize <span class=kwd>for</span> id, <span class=kwd>class</span>, tagName and name</span>
</code><code id="L335"><a href="#L335" class="ln">335</a>  <span class=kwd>var</span> _find<span class="op"> = </span><span class=kwd>function</span> (element, selector) {
</code><code id="L336"><a href="#L336" class="ln">336</a>    <span class=kwd>var</span> els<span class="op"> = </span>[], sel;
</code><code id="L337"><a href="#L337" class="ln">337</a>
</code><code id="L338"><a href="#L338" class="ln">338</a>    <span class="com">// #id</span>
</code><code id="L339"><a href="#L339" class="ln">339</a>    <span class=kwd>if</span> (element<span class="op"> === </span>_.document<span class="op"> &amp;&amp; </span>(sel<span class="op"> = </span>ID_RE.exec(selector))) {
</code><code id="L340"><a href="#L340" class="ln">340</a>      els<span class="op"> = </span>element.getElementById(sel[<span class="lit">1</span>]);
</code><code id="L341"><a href="#L341" class="ln">341</a>
</code><code id="L342"><a href="#L342" class="ln">342</a>    <span class="com">// .<span class=kwd>class</span></span>
</code><code id="L343"><a href="#L343" class="ln">343</a>    } <span class=kwd>else</span> <span class=kwd>if</span> ((sel<span class="op"> = </span>CLASS_RE.exec(selector))) {
</code><code id="L344"><a href="#L344" class="ln">344</a>      els<span class="op"> = </span>element.getElementsByClassName(sel[<span class="lit">1</span>]);
</code><code id="L345"><a href="#L345" class="ln">345</a>
</code><code id="L346"><a href="#L346" class="ln">346</a>    <span class="com">// tag</span>
</code><code id="L347"><a href="#L347" class="ln">347</a>    } <span class=kwd>else</span> <span class=kwd>if</span> (TAG_RE.test(selector)) {
</code><code id="L348"><a href="#L348" class="ln">348</a>      els<span class="op"> = </span>element.getElementsByTagName(selector);
</code><code id="L349"><a href="#L349" class="ln">349</a>
</code><code id="L350"><a href="#L350" class="ln">350</a>    <span class="com">// [name=val]</span>
</code><code id="L351"><a href="#L351" class="ln">351</a>    } <span class=kwd>else</span> <span class=kwd>if</span> ((sel<span class="op"> = </span>NAME_RE.exec(selector))) {
</code><code id="L352"><a href="#L352" class="ln">352</a>      els<span class="op"> = </span>element.getElementsByName(sel[<span class="lit">1</span>]);
</code><code id="L353"><a href="#L353" class="ln">353</a>
</code><code id="L354"><a href="#L354" class="ln">354</a>    <span class="com">// Other CSS selectors</span>
</code><code id="L355"><a href="#L355" class="ln">355</a>    } <span class=kwd>else</span> {
</code><code id="L356"><a href="#L356" class="ln">356</a>      els<span class="op"> = </span>element.querySelectorAll(selector);
</code><code id="L357"><a href="#L357" class="ln">357</a>    }
</code><code id="L358"><a href="#L358" class="ln">358</a>
</code><code id="L359"><a href="#L359" class="ln">359</a>    <span class="com">// Return NodeList/Node as an array</span>
</code><code id="L360"><a href="#L360" class="ln">360</a>    <span class=kwd>return</span> _.slice.call(els);
</code><code id="L361"><a href="#L361" class="ln">361</a>  };
</code><code id="L362"><a href="#L362" class="ln">362</a>
</code><code id="L363"><a href="#L363" class="ln">363</a>  <span class="com">// DOM Level <span class="lit">4</span> contains improved</span>
</code><code id="L364"><a href="#L364" class="ln">364</a>  <span class=kwd>var</span> _contains<span class="op"> = </span><span class=kwd>function</span> (el1, el2) {
</code><code id="L365"><a href="#L365" class="ln">365</a>    <span class=kwd>return</span> (el1<span class="op"> === </span>window<span class="op"> &amp;&amp; </span>(el2<span class="op"> &amp;&amp; </span>(el2<span class="op"> === </span>window<span class="op"> || </span>el2.nodeType))) ||
</code><code id="L366"><a href="#L366" class="ln">366</a>      ((el1<span class="op"> &amp;&amp; </span>el1.nodeType) &amp;&amp;
</code><code id="L367"><a href="#L367" class="ln">367</a>     (el2<span class="op"> &amp;&amp; </span>el2.nodeType)) ? (el1.contains ? el1.contains(el2) : <span class=kwd>true</span>) : <span class=kwd>false</span>;
</code><code id="L368"><a href="#L368" class="ln">368</a>  };
</code><code id="L369"><a href="#L369" class="ln">369</a>
</code><code id="L370"><a href="#L370" class="ln">370</a>  <span class=kwd>return</span> {
</code><code id="L371"><a href="#L371" class="ln">371</a>    find: _find,
</code><code id="L372"><a href="#L372" class="ln">372</a>    contains: _contains
</code><code id="L373"><a href="#L373" class="ln">373</a>  };
</code><code id="L374"><a href="#L374" class="ln">374</a>});
</code><code id="L375"><a href="#L375" class="ln">375</a>
</code><code id="L376"><a href="#L376" class="ln">376</a>
</code><code id="L377"><a href="#L377" class="ln">377</a>Kimbo.define(<span class="str">'data'</span>, <span class=kwd>function</span> () {
</code><code id="L378"><a href="#L378" class="ln">378</a>
</code><code id="L379"><a href="#L379" class="ln">379</a>  <span class="str">'use strict'</span>;
</code><code id="L380"><a href="#L380" class="ln">380</a>
</code><code id="L381"><a href="#L381" class="ln">381</a>  <span class=kwd>var</span> cache<span class="op"> = </span>{};
</code><code id="L382"><a href="#L382" class="ln">382</a>  <span class=kwd>var</span> dataId<span class="op"> = </span><span class="lit">1</span>;
</code><code id="L383"><a href="#L383" class="ln">383</a>
</code><code id="L384"><a href="#L384" class="ln">384</a>  <span class=kwd>var</span> data<span class="op"> = </span>{
</code><code id="L385"><a href="#L385" class="ln">385</a>    get: <span class=kwd>function</span> (el, key) {
</code><code id="L386"><a href="#L386" class="ln">386</a>      <span class=kwd>var</span> dataCache<span class="op"> = </span>cache[el._dataId];
</code><code id="L387"><a href="#L387" class="ln">387</a>      <span class=kwd>var</span> value;
</code><code id="L388"><a href="#L388" class="ln">388</a>
</code><code id="L389"><a href="#L389" class="ln">389</a>      <span class="com">// Look first <span class=kwd>in</span> cached data</span>
</code><code id="L390"><a href="#L390" class="ln">390</a>      <span class=kwd>if</span> (dataCache) {
</code><code id="L391"><a href="#L391" class="ln">391</a>        value<span class="op"> = </span>dataCache[key];
</code><code id="L392"><a href="#L392" class="ln">392</a>
</code><code id="L393"><a href="#L393" class="ln">393</a>      <span class="com">// If none, <span class=kwd>try</span> dataset</span>
</code><code id="L394"><a href="#L394" class="ln">394</a>      } <span class=kwd>else</span> {
</code><code id="L395"><a href="#L395" class="ln">395</a>        value<span class="op"> = </span>el.dataset[key];
</code><code id="L396"><a href="#L396" class="ln">396</a>
</code><code id="L397"><a href="#L397" class="ln">397</a>        <span class="com">// Cache the value</span>
</code><code id="L398"><a href="#L398" class="ln">398</a>        <span class=kwd>if</span> (value) {
</code><code id="L399"><a href="#L399" class="ln">399</a>          <span class=kwd>this</span>.set(el, key, value);
</code><code id="L400"><a href="#L400" class="ln">400</a>        }
</code><code id="L401"><a href="#L401" class="ln">401</a>      }
</code><code id="L402"><a href="#L402" class="ln">402</a>
</code><code id="L403"><a href="#L403" class="ln">403</a>      <span class=kwd>return</span> value;
</code><code id="L404"><a href="#L404" class="ln">404</a>    },
</code><code id="L405"><a href="#L405" class="ln">405</a>
</code><code id="L406"><a href="#L406" class="ln">406</a>    set: <span class=kwd>function</span> (el, key, value) {
</code><code id="L407"><a href="#L407" class="ln">407</a>      <span class=kwd>var</span> elementId<span class="op"> = </span>el._dataId<span class="op"> || </span>(el._dataId<span class="op"> = </span>dataId++);
</code><code id="L408"><a href="#L408" class="ln">408</a>      <span class=kwd>var</span> dataCache<span class="op"> = </span>cache[elementId];
</code><code id="L409"><a href="#L409" class="ln">409</a>
</code><code id="L410"><a href="#L410" class="ln">410</a>      <span class="com">// Create data cache <span class=kwd>for</span> the current element <span class=kwd>if</span> necessary</span>
</code><code id="L411"><a href="#L411" class="ln">411</a>      <span class=kwd>if</span> (!dataCache) {
</code><code id="L412"><a href="#L412" class="ln">412</a>        dataCache<span class="op"> = </span>cache[elementId]<span class="op"> = </span>{};
</code><code id="L413"><a href="#L413" class="ln">413</a>      }
</code><code id="L414"><a href="#L414" class="ln">414</a>
</code><code id="L415"><a href="#L415" class="ln">415</a>      dataCache[key]<span class="op"> = </span>value;
</code><code id="L416"><a href="#L416" class="ln">416</a>    },
</code><code id="L417"><a href="#L417" class="ln">417</a>
</code><code id="L418"><a href="#L418" class="ln">418</a>    remove: <span class=kwd>function</span> (el, key) {
</code><code id="L419"><a href="#L419" class="ln">419</a>      <span class=kwd>if</span> (key<span class="op"> === </span><span class=kwd>undefined</span>) {
</code><code id="L420"><a href="#L420" class="ln">420</a>        cache[el._dataId]<span class="op"> = </span>{};
</code><code id="L421"><a href="#L421" class="ln">421</a>      } <span class=kwd>else</span> {
</code><code id="L422"><a href="#L422" class="ln">422</a>        <span class=kwd>delete</span> cache[el._dataId][key];
</code><code id="L423"><a href="#L423" class="ln">423</a>      }
</code><code id="L424"><a href="#L424" class="ln">424</a>    }
</code><code id="L425"><a href="#L425" class="ln">425</a>  };
</code><code id="L426"><a href="#L426" class="ln">426</a>
</code><code id="L427"><a href="#L427" class="ln">427</a>  Kimbo.fn.extend({
</code><code id="L428"><a href="#L428" class="ln">428</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L429"><a href="#L429" class="ln">429</a><span class="com">    <span class="op"> * </span>$(…).data
</span></code><code id="L430"><a href="#L430" class="ln">430</a><span class="com">     [ method ]
</span></code><code id="L431"><a href="#L431" class="ln">431</a><span class="com">    <span class="op"> * </span>Store or retrieve elements dataset.
</span></code><code id="L432"><a href="#L432" class="ln">432</a><span class="com">     > Parameters
</span></code><code id="L433"><a href="#L433" class="ln">433</a><span class="com">    <span class="op"> - </span>key (string) Key of the data attribute to to set.
</span></code><code id="L434"><a href="#L434" class="ln">434</a><span class="com">    <span class="op"> - </span>value (string) #optional Value to store <span class=kwd>in</span> dataset.
</span></code><code id="L435"><a href="#L435" class="ln">435</a><span class="com">    <span class="op"> = </span>(object) Original matched collection.
</span></code><code id="L436"><a href="#L436" class="ln">436</a><span class="com">     > Usage
</span></code><code id="L437"><a href="#L437" class="ln">437</a><span class="com">    <span class="op"> | </span>&lt;div id=<span class="str">"panel"</span>>&lt;/div>
</span></code><code id="L438"><a href="#L438" class="ln">438</a><span class="com">    <span class="op"> * </span>Set some data to the panel:
</span></code><code id="L439"><a href="#L439" class="ln">439</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#panel'</span>).data(<span class="str">'isOpen'</span>, <span class=kwd>true</span>);
</span></code><code id="L440"><a href="#L440" class="ln">440</a><span class="com">    <span class="op"> * </span>No a data-* attribute was added
</span></code><code id="L441"><a href="#L441" class="ln">441</a><span class="com">    <span class="op"> | </span>&lt;div id=<span class="str">"panel"</span> data-isOpen=<span class="str">"<span class=kwd>true</span>"</span>>&lt;/div>
</span></code><code id="L442"><a href="#L442" class="ln">442</a><span class="com">    <span class="op"> * </span>We can retrieve the data
</span></code><code id="L443"><a href="#L443" class="ln">443</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#panel'</span>).data(<span class="str">'isOpen'</span>); <span class="com">// <span class="str">'<span class=kwd>true</span>'</span></span>
</span></code><code id="L444"><a href="#L444" class="ln">444</a><span class="com">    \*/</span>
</code><code id="L445"><a href="#L445" class="ln">445</a>    data: <span class=kwd>function</span> (key, value) {
</code><code id="L446"><a href="#L446" class="ln">446</a>      <span class=kwd>if</span> (!<span class=kwd>this</span>.length<span class="op"> || </span>!Kimbo.isString(key)) {
</code><code id="L447"><a href="#L447" class="ln">447</a>        <span class=kwd>return</span> <span class=kwd>this</span>;
</code><code id="L448"><a href="#L448" class="ln">448</a>      }
</code><code id="L449"><a href="#L449" class="ln">449</a>
</code><code id="L450"><a href="#L450" class="ln">450</a>      key<span class="op"> = </span>Kimbo.camelCase(key);
</code><code id="L451"><a href="#L451" class="ln">451</a>
</code><code id="L452"><a href="#L452" class="ln">452</a>      <span class="com">// Get</span>
</code><code id="L453"><a href="#L453" class="ln">453</a>      <span class=kwd>if</span> (value<span class="op"> === </span><span class=kwd>undefined</span>) {
</code><code id="L454"><a href="#L454" class="ln">454</a>        <span class=kwd>return</span> data.get(<span class=kwd>this</span>[<span class="lit">0</span>], key);
</code><code id="L455"><a href="#L455" class="ln">455</a>
</code><code id="L456"><a href="#L456" class="ln">456</a>      <span class="com">// Set</span>
</code><code id="L457"><a href="#L457" class="ln">457</a>      } <span class=kwd>else</span> {
</code><code id="L458"><a href="#L458" class="ln">458</a>        <span class=kwd>return</span> <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L459"><a href="#L459" class="ln">459</a>          data.set(el, key, value);
</code><code id="L460"><a href="#L460" class="ln">460</a>        });
</code><code id="L461"><a href="#L461" class="ln">461</a>      }
</code><code id="L462"><a href="#L462" class="ln">462</a>    },
</code><code id="L463"><a href="#L463" class="ln">463</a>
</code><code id="L464"><a href="#L464" class="ln">464</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L465"><a href="#L465" class="ln">465</a><span class="com">    <span class="op"> * </span>$(…).removeData
</span></code><code id="L466"><a href="#L466" class="ln">466</a><span class="com">     [ method ]
</span></code><code id="L467"><a href="#L467" class="ln">467</a><span class="com">    <span class="op"> * </span>Remove data from the element dataset.
</span></code><code id="L468"><a href="#L468" class="ln">468</a><span class="com">     > Parameters
</span></code><code id="L469"><a href="#L469" class="ln">469</a><span class="com">    <span class="op"> - </span>key (string) Key of the data attribute to to remove.
</span></code><code id="L470"><a href="#L470" class="ln">470</a><span class="com">    <span class="op"> = </span>(object) Original matched collection.
</span></code><code id="L471"><a href="#L471" class="ln">471</a><span class="com">     > Usage
</span></code><code id="L472"><a href="#L472" class="ln">472</a><span class="com">    <span class="op"> | </span>&lt;div id=<span class="str">"panel"</span> data-isOpen=<span class="str">"<span class=kwd>true</span>"</span>>&lt;/div>
</span></code><code id="L473"><a href="#L473" class="ln">473</a><span class="com">    <span class="op"> * </span>Remove data associated to the panel div:
</span></code><code id="L474"><a href="#L474" class="ln">474</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#panel'</span>).removeData(<span class="str">'isOpen'</span>);
</span></code><code id="L475"><a href="#L475" class="ln">475</a><span class="com">    <span class="op"> * </span>Data attribute and value was removed:
</span></code><code id="L476"><a href="#L476" class="ln">476</a><span class="com">    <span class="op"> | </span>&lt;div id=<span class="str">"panel"</span>>&lt;/div>
</span></code><code id="L477"><a href="#L477" class="ln">477</a><span class="com">    <span class="op"> * </span>data-isOpen is <span class=kwd>undefined</span>
</span></code><code id="L478"><a href="#L478" class="ln">478</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#panel'</span>).data(<span class="str">'isOpen'</span>); <span class="com">// Undefined</span>
</span></code><code id="L479"><a href="#L479" class="ln">479</a><span class="com">    \*/</span>
</code><code id="L480"><a href="#L480" class="ln">480</a>    removeData: <span class=kwd>function</span> (key) {
</code><code id="L481"><a href="#L481" class="ln">481</a>      <span class=kwd>if</span> (!<span class=kwd>this</span>.length<span class="op"> || </span>!Kimbo.isString(key)) {
</code><code id="L482"><a href="#L482" class="ln">482</a>        <span class=kwd>return</span> <span class=kwd>this</span>;
</code><code id="L483"><a href="#L483" class="ln">483</a>      }
</code><code id="L484"><a href="#L484" class="ln">484</a>
</code><code id="L485"><a href="#L485" class="ln">485</a>      key<span class="op"> = </span>Kimbo.camelCase(key);
</code><code id="L486"><a href="#L486" class="ln">486</a>
</code><code id="L487"><a href="#L487" class="ln">487</a>      <span class=kwd>return</span> <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L488"><a href="#L488" class="ln">488</a>        data.remove(el, key);
</code><code id="L489"><a href="#L489" class="ln">489</a>      });
</code><code id="L490"><a href="#L490" class="ln">490</a>    }
</code><code id="L491"><a href="#L491" class="ln">491</a>  });
</code><code id="L492"><a href="#L492" class="ln">492</a>
</code><code id="L493"><a href="#L493" class="ln">493</a>  <span class=kwd>return</span> data;
</code><code id="L494"><a href="#L494" class="ln">494</a>});
</code><code id="L495"><a href="#L495" class="ln">495</a>
</code><code id="L496"><a href="#L496" class="ln">496</a>
</code><code id="L497"><a href="#L497" class="ln">497</a>Kimbo.define(<span class="str">'css'</span>, <span class=kwd>function</span> (_) {
</code><code id="L498"><a href="#L498" class="ln">498</a>
</code><code id="L499"><a href="#L499" class="ln">499</a>  <span class="str">'use strict'</span>;
</code><code id="L500"><a href="#L500" class="ln">500</a>
</code><code id="L501"><a href="#L501" class="ln">501</a>  <span class="com">// Properties without <span class="str">'px'</span> at the end</span>
</code><code id="L502"><a href="#L502" class="ln">502</a>  <span class=kwd>var</span> CSS_NO_PX<span class="op"> = </span>{
</code><code id="L503"><a href="#L503" class="ln">503</a>    fontWeight: <span class=kwd>true</span>,
</code><code id="L504"><a href="#L504" class="ln">504</a>    lineHeight: <span class=kwd>true</span>,
</code><code id="L505"><a href="#L505" class="ln">505</a>    opacity: <span class=kwd>true</span>,
</code><code id="L506"><a href="#L506" class="ln">506</a>    zIndex: <span class=kwd>true</span>
</code><code id="L507"><a href="#L507" class="ln">507</a>  };
</code><code id="L508"><a href="#L508" class="ln">508</a>
</code><code id="L509"><a href="#L509" class="ln">509</a>  <span class="com">// Wrap <span class=kwd>native</span> to extend behavoiur</span>
</code><code id="L510"><a href="#L510" class="ln">510</a>  <span class=kwd>var</span> _getComputedStyle<span class="op"> = </span><span class=kwd>function</span> (element, property) {
</code><code id="L511"><a href="#L511" class="ln">511</a>
</code><code id="L512"><a href="#L512" class="ln">512</a>    <span class="com">// Support both camelCase and dashed property names</span>
</code><code id="L513"><a href="#L513" class="ln">513</a>    property<span class="op"> = </span>property.replace(/([A-Z])/g, <span class="str">'-$<span class="lit">1</span>'</span>).toLowerCase();
</code><code id="L514"><a href="#L514" class="ln">514</a>
</code><code id="L515"><a href="#L515" class="ln">515</a>    <span class=kwd>return</span> window.getComputedStyle(element, <span class=kwd>null</span>).getPropertyValue(property);
</code><code id="L516"><a href="#L516" class="ln">516</a>  };
</code><code id="L517"><a href="#L517" class="ln">517</a>
</code><code id="L518"><a href="#L518" class="ln">518</a>  <span class=kwd>var</span> iframe<span class="op"> = </span><span class=kwd>null</span>;
</code><code id="L519"><a href="#L519" class="ln">519</a>
</code><code id="L520"><a href="#L520" class="ln">520</a>  <span class=kwd>var</span> createIframe<span class="op"> = </span><span class=kwd>function</span> () {
</code><code id="L521"><a href="#L521" class="ln">521</a>    iframe<span class="op"> = </span>_.document.createElement(<span class="str">'iframe'</span>);
</code><code id="L522"><a href="#L522" class="ln">522</a>    _.document.documentElement.appendChild(iframe);
</code><code id="L523"><a href="#L523" class="ln">523</a>    <span class=kwd>return</span> iframe;
</code><code id="L524"><a href="#L524" class="ln">524</a>  };
</code><code id="L525"><a href="#L525" class="ln">525</a>
</code><code id="L526"><a href="#L526" class="ln">526</a>  <span class=kwd>var</span> getActualDisplay<span class="op"> = </span><span class=kwd>function</span> (nodeName, doc) {
</code><code id="L527"><a href="#L527" class="ln">527</a>    doc<span class="op"> = </span>doc<span class="op"> || </span>_.document;
</code><code id="L528"><a href="#L528" class="ln">528</a>
</code><code id="L529"><a href="#L529" class="ln">529</a>    <span class=kwd>var</span> elem, display;
</code><code id="L530"><a href="#L530" class="ln">530</a>
</code><code id="L531"><a href="#L531" class="ln">531</a>    <span class="com">// Create and append the node</span>
</code><code id="L532"><a href="#L532" class="ln">532</a>    elem<span class="op"> = </span>doc.createElement(nodeName);
</code><code id="L533"><a href="#L533" class="ln">533</a>    doc.body.appendChild(elem);
</code><code id="L534"><a href="#L534" class="ln">534</a>
</code><code id="L535"><a href="#L535" class="ln">535</a>    <span class="com">// Get display</span>
</code><code id="L536"><a href="#L536" class="ln">536</a>    display<span class="op"> = </span>_getComputedStyle(elem, <span class="str">'display'</span>);
</code><code id="L537"><a href="#L537" class="ln">537</a>
</code><code id="L538"><a href="#L538" class="ln">538</a>    <span class="com">// Remove it from the dom</span>
</code><code id="L539"><a href="#L539" class="ln">539</a>    elem.parentNode.removeChild(elem);
</code><code id="L540"><a href="#L540" class="ln">540</a>
</code><code id="L541"><a href="#L541" class="ln">541</a>    <span class=kwd>return</span> display;
</code><code id="L542"><a href="#L542" class="ln">542</a>  };
</code><code id="L543"><a href="#L543" class="ln">543</a>
</code><code id="L544"><a href="#L544" class="ln">544</a>  <span class=kwd>var</span> elementsDisplay<span class="op"> = </span>{};
</code><code id="L545"><a href="#L545" class="ln">545</a>
</code><code id="L546"><a href="#L546" class="ln">546</a>  Kimbo.fn.extend({
</code><code id="L547"><a href="#L547" class="ln">547</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L548"><a href="#L548" class="ln">548</a><span class="com">    <span class="op"> * </span>$(…).show
</span></code><code id="L549"><a href="#L549" class="ln">549</a><span class="com">     [ method ]
</span></code><code id="L550"><a href="#L550" class="ln">550</a><span class="com">    <span class="op"> * </span>Display all matched elements.
</span></code><code id="L551"><a href="#L551" class="ln">551</a><span class="com">    <span class="op"> = </span>(object) Original matched collection.
</span></code><code id="L552"><a href="#L552" class="ln">552</a><span class="com">     > Usage
</span></code><code id="L553"><a href="#L553" class="ln">553</a><span class="com">    <span class="op"> | </span>&lt;p style=<span class="str">"display: none;"</span>>Lorem&lt;/p>
</span></code><code id="L554"><a href="#L554" class="ln">554</a><span class="com">    <span class="op"> * </span>Show it
</span></code><code id="L555"><a href="#L555" class="ln">555</a><span class="com">    <span class="op"> | </span>$(<span class="str">'p'</span>).show();
</span></code><code id="L556"><a href="#L556" class="ln">556</a><span class="com">    <span class="op"> * </span>Now it's visible
</span></code><code id="L557"><a href="#L557" class="ln">557</a><span class="com">    <span class="op"> | </span>&lt;p style=<span class="str">"display: block;"</span>>Lorem&lt;/p>
</span></code><code id="L558"><a href="#L558" class="ln">558</a><span class="com">    \*/</span>
</code><code id="L559"><a href="#L559" class="ln">559</a>    show: <span class=kwd>function</span> () {
</code><code id="L560"><a href="#L560" class="ln">560</a>      <span class=kwd>return</span> <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L561"><a href="#L561" class="ln">561</a>        <span class=kwd>var</span> nodeName<span class="op"> = </span>el.nodeName;
</code><code id="L562"><a href="#L562" class="ln">562</a>        <span class=kwd>var</span> display<span class="op"> = </span>elementsDisplay[nodeName];
</code><code id="L563"><a href="#L563" class="ln">563</a>        <span class=kwd>var</span> doc;
</code><code id="L564"><a href="#L564" class="ln">564</a>
</code><code id="L565"><a href="#L565" class="ln">565</a>        <span class=kwd>if</span> (!display) {
</code><code id="L566"><a href="#L566" class="ln">566</a>          display<span class="op"> = </span>getActualDisplay(nodeName);
</code><code id="L567"><a href="#L567" class="ln">567</a>
</code><code id="L568"><a href="#L568" class="ln">568</a>          <span class="com">// If still fails <span class=kwd>for</span> some css rule <span class=kwd>try</span> creating the element <span class=kwd>in</span> an isolated iframe</span>
</code><code id="L569"><a href="#L569" class="ln">569</a>          <span class=kwd>if</span> (display<span class="op"> === </span><span class="str">'none'</span><span class="op"> || </span>!display) {
</code><code id="L570"><a href="#L570" class="ln">570</a>
</code><code id="L571"><a href="#L571" class="ln">571</a>            <span class="com">// Use the already-created iframe <span class=kwd>if</span> possible</span>
</code><code id="L572"><a href="#L572" class="ln">572</a>            iframe<span class="op"> = </span>(iframe<span class="op"> || </span>createIframe());
</code><code id="L573"><a href="#L573" class="ln">573</a>
</code><code id="L574"><a href="#L574" class="ln">574</a>            doc<span class="op"> = </span>(iframe.contentWindow<span class="op"> || </span>iframe.contentDocument).document;
</code><code id="L575"><a href="#L575" class="ln">575</a>            doc.write(<span class="str">'&lt;!doctype html>&lt;html>&lt;body>'</span>);
</code><code id="L576"><a href="#L576" class="ln">576</a>            doc.close();
</code><code id="L577"><a href="#L577" class="ln">577</a>            display<span class="op"> = </span>getActualDisplay(nodeName, doc);
</code><code id="L578"><a href="#L578" class="ln">578</a>            iframe.parentNode.removeChild(iframe);
</code><code id="L579"><a href="#L579" class="ln">579</a>          }
</code><code id="L580"><a href="#L580" class="ln">580</a>
</code><code id="L581"><a href="#L581" class="ln">581</a>          <span class="com">// Save the <span class=kwd>default</span> display <span class=kwd>for</span> <span class=kwd>this</span> element</span>
</code><code id="L582"><a href="#L582" class="ln">582</a>          elementsDisplay[nodeName]<span class="op"> = </span>display;
</code><code id="L583"><a href="#L583" class="ln">583</a>        }
</code><code id="L584"><a href="#L584" class="ln">584</a>
</code><code id="L585"><a href="#L585" class="ln">585</a>        el.style.display<span class="op"> = </span>display<span class="op"> || </span><span class="str">'block'</span>;
</code><code id="L586"><a href="#L586" class="ln">586</a>      });
</code><code id="L587"><a href="#L587" class="ln">587</a>    },
</code><code id="L588"><a href="#L588" class="ln">588</a>
</code><code id="L589"><a href="#L589" class="ln">589</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L590"><a href="#L590" class="ln">590</a><span class="com">    <span class="op"> * </span>$(…).hide
</span></code><code id="L591"><a href="#L591" class="ln">591</a><span class="com">     [ method ]
</span></code><code id="L592"><a href="#L592" class="ln">592</a><span class="com">    <span class="op"> * </span>Hide all matched elements.
</span></code><code id="L593"><a href="#L593" class="ln">593</a><span class="com">    <span class="op"> = </span>(object) Original matched collection.
</span></code><code id="L594"><a href="#L594" class="ln">594</a><span class="com">     > Usage
</span></code><code id="L595"><a href="#L595" class="ln">595</a><span class="com">    <span class="op"> | </span>&lt;p>Lorem&lt;/p>
</span></code><code id="L596"><a href="#L596" class="ln">596</a><span class="com">    <span class="op"> * </span>Hide it
</span></code><code id="L597"><a href="#L597" class="ln">597</a><span class="com">    <span class="op"> | </span>$(<span class="str">'p'</span>).hide();
</span></code><code id="L598"><a href="#L598" class="ln">598</a><span class="com">    <span class="op"> * </span>Now it's hidden
</span></code><code id="L599"><a href="#L599" class="ln">599</a><span class="com">    <span class="op"> | </span>&lt;p style=<span class="str">"display: none;"</span>>Lorem&lt;/p>
</span></code><code id="L600"><a href="#L600" class="ln">600</a><span class="com">    \*/</span>
</code><code id="L601"><a href="#L601" class="ln">601</a>    hide: <span class=kwd>function</span> () {
</code><code id="L602"><a href="#L602" class="ln">602</a>      <span class=kwd>return</span> <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L603"><a href="#L603" class="ln">603</a>        <span class=kwd>var</span> nodeName<span class="op"> = </span>el.nodeName;
</code><code id="L604"><a href="#L604" class="ln">604</a>        <span class=kwd>var</span> display<span class="op"> = </span>elementsDisplay[nodeName];
</code><code id="L605"><a href="#L605" class="ln">605</a>
</code><code id="L606"><a href="#L606" class="ln">606</a>        <span class=kwd>if</span> (!display) {
</code><code id="L607"><a href="#L607" class="ln">607</a>          display<span class="op"> = </span>_getComputedStyle(el, <span class="str">'display'</span>);
</code><code id="L608"><a href="#L608" class="ln">608</a>          elementsDisplay[nodeName]<span class="op"> = </span>display;
</code><code id="L609"><a href="#L609" class="ln">609</a>        } <span class=kwd>else</span> {
</code><code id="L610"><a href="#L610" class="ln">610</a>          display<span class="op"> = </span>el.style.display;
</code><code id="L611"><a href="#L611" class="ln">611</a>        }
</code><code id="L612"><a href="#L612" class="ln">612</a>
</code><code id="L613"><a href="#L613" class="ln">613</a>        <span class="com">// Only hide <span class=kwd>if</span> not already hidden</span>
</code><code id="L614"><a href="#L614" class="ln">614</a>        <span class=kwd>if</span> (display !== <span class="str">'none'</span>) {
</code><code id="L615"><a href="#L615" class="ln">615</a>          el.style.display<span class="op"> = </span><span class="str">'none'</span>;
</code><code id="L616"><a href="#L616" class="ln">616</a>        }
</code><code id="L617"><a href="#L617" class="ln">617</a>      });
</code><code id="L618"><a href="#L618" class="ln">618</a>    },
</code><code id="L619"><a href="#L619" class="ln">619</a>
</code><code id="L620"><a href="#L620" class="ln">620</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L621"><a href="#L621" class="ln">621</a><span class="com">    <span class="op"> * </span>$(…).css
</span></code><code id="L622"><a href="#L622" class="ln">622</a><span class="com">     [ method ]
</span></code><code id="L623"><a href="#L623" class="ln">623</a><span class="com">    <span class="op"> * </span>Get the css value of a property from one element or set a css property to all matched elements.
</span></code><code id="L624"><a href="#L624" class="ln">624</a><span class="com">     > Parameters
</span></code><code id="L625"><a href="#L625" class="ln">625</a><span class="com">    <span class="op"> - </span>property (string|object) Name of the css property.
</span></code><code id="L626"><a href="#L626" class="ln">626</a><span class="com">    <span class="op"> - </span>value (string|number) #optional Value <span class=kwd>for</span> the property.
</span></code><code id="L627"><a href="#L627" class="ln">627</a><span class="com">    <span class="op"> = </span>(object) Original matched collection.
</span></code><code id="L628"><a href="#L628" class="ln">628</a><span class="com">     > Usage
</span></code><code id="L629"><a href="#L629" class="ln">629</a><span class="com">    <span class="op"> | </span>&lt;p>Hello dude!&lt;/p>
</span></code><code id="L630"><a href="#L630" class="ln">630</a><span class="com">    <span class="op"> * </span>Modify some styles
</span></code><code id="L631"><a href="#L631" class="ln">631</a><span class="com">    <span class="op"> | </span>$(<span class="str">'p'</span>).css(<span class="str">'color'</span>, <span class="str">'red'</span>); <span class="com">// Now the text is red</span>
</span></code><code id="L632"><a href="#L632" class="ln">632</a><span class="com">    <span class="op"> * </span>The HTML will look like <span class=kwd>this</span>:
</span></code><code id="L633"><a href="#L633" class="ln">633</a><span class="com">    <span class="op"> | </span>&lt;p style=<span class="str">"color: red;"</span>>Hello dude!&lt;/p>
</span></code><code id="L634"><a href="#L634" class="ln">634</a><span class="com">    <span class="op"> * </span>You can also pass an object <span class=kwd>for</span> setting multiple properties at the same time
</span></code><code id="L635"><a href="#L635" class="ln">635</a><span class="com">    <span class="op"> | </span>$(<span class="str">'p'</span>).css({
</span></code><code id="L636"><a href="#L636" class="ln">636</a><span class="com">    <span class="op"> | </span>  color: <span class="str">'red'</span>,
</span></code><code id="L637"><a href="#L637" class="ln">637</a><span class="com">    <span class="op"> | </span>  <span class="str">'font-size'</span>: <span class="str">'30px'</span>,
</span></code><code id="L638"><a href="#L638" class="ln">638</a><span class="com">    <span class="op"> | </span>  backgroundColor: <span class="str">'blue'</span>
</span></code><code id="L639"><a href="#L639" class="ln">639</a><span class="com">    <span class="op"> | </span>});
</span></code><code id="L640"><a href="#L640" class="ln">640</a><span class="com">    <span class="op"> * </span>Properties can be dash-separated (add quotes) or camelCase.
</span></code><code id="L641"><a href="#L641" class="ln">641</a><span class="com">    <span class="op"> | </span>&lt;p style=<span class="str">"color: red; font-size: 30px; background-color: blue"</span>>Hello dude!&lt;/p>
</span></code><code id="L642"><a href="#L642" class="ln">642</a><span class="com">    \*/</span>
</code><code id="L643"><a href="#L643" class="ln">643</a>    css: <span class=kwd>function</span> (property, value) {
</code><code id="L644"><a href="#L644" class="ln">644</a>      <span class=kwd>var</span> that<span class="op"> = </span><span class=kwd>this</span>;
</code><code id="L645"><a href="#L645" class="ln">645</a>      <span class=kwd>var</span> setCss;
</code><code id="L646"><a href="#L646" class="ln">646</a>
</code><code id="L647"><a href="#L647" class="ln">647</a>      <span class=kwd>if</span> (!<span class=kwd>this</span>.length<span class="op"> || </span>(!Kimbo.isString(property)<span class="op"> &amp;&amp; </span>!Kimbo.isObject(property))) {
</code><code id="L648"><a href="#L648" class="ln">648</a>        <span class=kwd>return</span> <span class=kwd>this</span>;
</code><code id="L649"><a href="#L649" class="ln">649</a>      }
</code><code id="L650"><a href="#L650" class="ln">650</a>
</code><code id="L651"><a href="#L651" class="ln">651</a>      setCss<span class="op"> = </span><span class=kwd>function</span> (name, value) {
</code><code id="L652"><a href="#L652" class="ln">652</a>
</code><code id="L653"><a href="#L653" class="ln">653</a>        <span class="com">// If it<span class="str">'s a number add '</span>px' except <span class=kwd>for</span> some properties</span>
</code><code id="L654"><a href="#L654" class="ln">654</a>        <span class=kwd>if</span> (Kimbo.isNumeric(value)<span class="op"> &amp;&amp; </span>!CSS_NO_PX[Kimbo.camelCase(name)]) {
</code><code id="L655"><a href="#L655" class="ln">655</a>          value += <span class="str">'px'</span>;
</code><code id="L656"><a href="#L656" class="ln">656</a>        }
</code><code id="L657"><a href="#L657" class="ln">657</a>
</code><code id="L658"><a href="#L658" class="ln">658</a>        <span class="com">// Apply styles to all elements <span class=kwd>in</span> the set</span>
</code><code id="L659"><a href="#L659" class="ln">659</a>        that.each(<span class=kwd>function</span> (el) {
</code><code id="L660"><a href="#L660" class="ln">660</a>          el.style[name]<span class="op"> = </span>value;
</code><code id="L661"><a href="#L661" class="ln">661</a>        });
</code><code id="L662"><a href="#L662" class="ln">662</a>      };
</code><code id="L663"><a href="#L663" class="ln">663</a>
</code><code id="L664"><a href="#L664" class="ln">664</a>      <span class="com">// Setting one property</span>
</code><code id="L665"><a href="#L665" class="ln">665</a>      <span class=kwd>if</span> (Kimbo.isString(property)) {
</code><code id="L666"><a href="#L666" class="ln">666</a>
</code><code id="L667"><a href="#L667" class="ln">667</a>        <span class="com">// Get</span>
</code><code id="L668"><a href="#L668" class="ln">668</a>        <span class=kwd>if</span> (value<span class="op"> === </span><span class=kwd>undefined</span>) {
</code><code id="L669"><a href="#L669" class="ln">669</a>          <span class=kwd>return</span> _getComputedStyle(<span class=kwd>this</span>[<span class="lit">0</span>], property);
</code><code id="L670"><a href="#L670" class="ln">670</a>
</code><code id="L671"><a href="#L671" class="ln">671</a>        <span class="com">// Set</span>
</code><code id="L672"><a href="#L672" class="ln">672</a>        } <span class=kwd>else</span> {
</code><code id="L673"><a href="#L673" class="ln">673</a>          setCss(property, value);
</code><code id="L674"><a href="#L674" class="ln">674</a>        }
</code><code id="L675"><a href="#L675" class="ln">675</a>
</code><code id="L676"><a href="#L676" class="ln">676</a>      <span class="com">// Multiple properties <span class=kwd>with</span> an object</span>
</code><code id="L677"><a href="#L677" class="ln">677</a>      } <span class=kwd>else</span> <span class=kwd>if</span> (Kimbo.isObject(property)) {
</code><code id="L678"><a href="#L678" class="ln">678</a>        Kimbo.forEach(property, setCss);
</code><code id="L679"><a href="#L679" class="ln">679</a>      }
</code><code id="L680"><a href="#L680" class="ln">680</a>
</code><code id="L681"><a href="#L681" class="ln">681</a>      <span class=kwd>return</span> <span class=kwd>this</span>;
</code><code id="L682"><a href="#L682" class="ln">682</a>    }
</code><code id="L683"><a href="#L683" class="ln">683</a>  });
</code><code id="L684"><a href="#L684" class="ln">684</a>});
</code><code id="L685"><a href="#L685" class="ln">685</a>
</code><code id="L686"><a href="#L686" class="ln">686</a>
</code><code id="L687"><a href="#L687" class="ln">687</a>Kimbo.define(<span class="str">'manipulation'</span>, <span class=kwd>function</span> (_) {
</code><code id="L688"><a href="#L688" class="ln">688</a>
</code><code id="L689"><a href="#L689" class="ln">689</a>  <span class="str">'use strict'</span>;
</code><code id="L690"><a href="#L690" class="ln">690</a>
</code><code id="L691"><a href="#L691" class="ln">691</a>  <span class=kwd>var</span> SPACE_RE<span class="op"> = </span>/\s+/;
</code><code id="L692"><a href="#L692" class="ln">692</a>
</code><code id="L693"><a href="#L693" class="ln">693</a>  <span class="com">// Browser <span class=kwd>native</span> classList</span>
</code><code id="L694"><a href="#L694" class="ln">694</a>  <span class=kwd>var</span> _hasClass<span class="op"> = </span><span class=kwd>function</span> (el, name) {
</code><code id="L695"><a href="#L695" class="ln">695</a>    <span class=kwd>return</span> (el.nodeType<span class="op"> === </span><span class="lit">1</span><span class="op"> &amp;&amp; </span>el.classList.contains(name));
</code><code id="L696"><a href="#L696" class="ln">696</a>  };
</code><code id="L697"><a href="#L697" class="ln">697</a>
</code><code id="L698"><a href="#L698" class="ln">698</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L699"><a href="#L699" class="ln">699</a><span class="com">  <span class="op"> * </span>$(…).text
</span></code><code id="L700"><a href="#L700" class="ln">700</a><span class="com">   [ method ]
</span></code><code id="L701"><a href="#L701" class="ln">701</a><span class="com">  <span class="op"> * </span>Get the text of the first element <span class=kwd>in</span> the set or set the text of all the matched elements.
</span></code><code id="L702"><a href="#L702" class="ln">702</a><span class="com">   > Parameters
</span></code><code id="L703"><a href="#L703" class="ln">703</a><span class="com">  <span class="op"> - </span>value (string) #optional A string of text to set as the text content of all matched elements.
</span></code><code id="L704"><a href="#L704" class="ln">704</a><span class="com">  <span class="op"> = </span>(string) string value of the text content of the element <span class=kwd>if</span> no parameter passed.
</span></code><code id="L705"><a href="#L705" class="ln">705</a><span class="com">  <span class="op"> = </span>(object) current Kimbo object.
</span></code><code id="L706"><a href="#L706" class="ln">706</a><span class="com">   > Usage
</span></code><code id="L707"><a href="#L707" class="ln">707</a><span class="com">  <span class="op"> * </span>Get the text content of an element
</span></code><code id="L708"><a href="#L708" class="ln">708</a><span class="com">  <span class="op"> | </span>&lt;p>Demo text&lt;/p>
</span></code><code id="L709"><a href="#L709" class="ln">709</a><span class="com">  <span class="op"> * </span>without passing any parameter to the <span class=kwd>function</span>:
</span></code><code id="L710"><a href="#L710" class="ln">710</a><span class="com">  <span class="op"> | </span>$(<span class="str">'p'</span>).text(); <span class="com">// <span class="str">'Demo text'</span></span>
</span></code><code id="L711"><a href="#L711" class="ln">711</a><span class="com">  <span class="op"> * </span>To replace the text of the paragraph pass a string parameter to the <span class=kwd>function</span>:
</span></code><code id="L712"><a href="#L712" class="ln">712</a><span class="com">  <span class="op"> | </span>$(<span class="str">'p'</span>).text(<span class="str">'Another text'</span>);
</span></code><code id="L713"><a href="#L713" class="ln">713</a><span class="com">  <span class="op"> * </span>Now the text content was replaced:
</span></code><code id="L714"><a href="#L714" class="ln">714</a><span class="com">  <span class="op"> | </span>&lt;p>Another text&lt;/p>
</span></code><code id="L715"><a href="#L715" class="ln">715</a><span class="com">  \*/</span>
</code><code id="L716"><a href="#L716" class="ln">716</a>
</code><code id="L717"><a href="#L717" class="ln">717</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L718"><a href="#L718" class="ln">718</a><span class="com">  <span class="op"> * </span>$(…).html
</span></code><code id="L719"><a href="#L719" class="ln">719</a><span class="com">   [ method ]
</span></code><code id="L720"><a href="#L720" class="ln">720</a><span class="com">  <span class="op"> * </span>Get the HTML content of the first element <span class=kwd>in</span> the set or set the HTML content of all the matched elements.
</span></code><code id="L721"><a href="#L721" class="ln">721</a><span class="com">   > Parameters
</span></code><code id="L722"><a href="#L722" class="ln">722</a><span class="com">  <span class="op"> - </span>value (string) #optional A string of HTML to set as the HTML content of all matched elements.
</span></code><code id="L723"><a href="#L723" class="ln">723</a><span class="com">  <span class="op"> = </span>(string) a string value of the HTML content of the element <span class=kwd>if</span> no parameter passed.
</span></code><code id="L724"><a href="#L724" class="ln">724</a><span class="com">  <span class="op"> = </span>(object) current Kimbo object.
</span></code><code id="L725"><a href="#L725" class="ln">725</a><span class="com">   > Usage
</span></code><code id="L726"><a href="#L726" class="ln">726</a><span class="com">  <span class="op"> * </span>Get the HTML content of an element
</span></code><code id="L727"><a href="#L727" class="ln">727</a><span class="com">  <span class="op"> | </span>&lt;p>&lt;span>Demo text&lt;span>&lt;/p>
</span></code><code id="L728"><a href="#L728" class="ln">728</a><span class="com">  <span class="op"> * </span>without passing any parameter to the <span class=kwd>function</span>:
</span></code><code id="L729"><a href="#L729" class="ln">729</a><span class="com">  <span class="op"> | </span>$(<span class="str">'p'</span>).html(); <span class="com">// <span class="str">'&lt;span>Demo tetxt&lt;/span>'</span></span>
</span></code><code id="L730"><a href="#L730" class="ln">730</a><span class="com">  <span class="op"> * </span>To replace the HTML content of the paragraph pass a string parameter to the <span class=kwd>function</span>:
</span></code><code id="L731"><a href="#L731" class="ln">731</a><span class="com">  <span class="op"> | </span>$(<span class="str">'p'</span>).html(<span class="str">'&lt;strong>Another content&lt;/strong>'</span>);
</span></code><code id="L732"><a href="#L732" class="ln">732</a><span class="com">  <span class="op"> * </span>Now the text content was replaced:
</span></code><code id="L733"><a href="#L733" class="ln">733</a><span class="com">  <span class="op"> | </span>&lt;p>&lt;strong>Another content&lt;/strong>&lt;/p>
</span></code><code id="L734"><a href="#L734" class="ln">734</a><span class="com">  \*/</span>
</code><code id="L735"><a href="#L735" class="ln">735</a>
</code><code id="L736"><a href="#L736" class="ln">736</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L737"><a href="#L737" class="ln">737</a><span class="com">  <span class="op"> * </span>$(…).val
</span></code><code id="L738"><a href="#L738" class="ln">738</a><span class="com">   [ method ]
</span></code><code id="L739"><a href="#L739" class="ln">739</a><span class="com">  <span class="op"> * </span>Get the current value of the first element <span class=kwd>in</span> the set or set the value of all the matched elements.
</span></code><code id="L740"><a href="#L740" class="ln">740</a><span class="com">   > Parameters
</span></code><code id="L741"><a href="#L741" class="ln">741</a><span class="com">  <span class="op"> - </span>value (string) #optional A string of text to set as the value of all matched elements.
</span></code><code id="L742"><a href="#L742" class="ln">742</a><span class="com">  <span class="op"> = </span>(string) the current value of the first element <span class=kwd>if</span> no parameter passed
</span></code><code id="L743"><a href="#L743" class="ln">743</a><span class="com">  <span class="op"> = </span>(object) current Kimbo object
</span></code><code id="L744"><a href="#L744" class="ln">744</a><span class="com">   > Usage
</span></code><code id="L745"><a href="#L745" class="ln">745</a><span class="com">  <span class="op"> * </span>Get the value of a form element:
</span></code><code id="L746"><a href="#L746" class="ln">746</a><span class="com">  <span class="op"> | </span>&lt;input type=<span class="str">"text"</span> name=<span class="str">"color"</span> value=<span class="str">"red"</span> />
</span></code><code id="L747"><a href="#L747" class="ln">747</a><span class="com">  <span class="op"> * </span>without passing any parameter to the <span class=kwd>function</span>:
</span></code><code id="L748"><a href="#L748" class="ln">748</a><span class="com">  <span class="op"> | </span>$(<span class="str">'input'</span>).val(); <span class="com">// <span class="str">'red'</span></span>
</span></code><code id="L749"><a href="#L749" class="ln">749</a><span class="com">  <span class="op"> * </span>To change the value of the input pass a string parameter to the <span class=kwd>function</span>:
</span></code><code id="L750"><a href="#L750" class="ln">750</a><span class="com">  <span class="op"> | </span>$(<span class="str">'input'</span>).val(<span class="str">'blue'</span>);
</span></code><code id="L751"><a href="#L751" class="ln">751</a><span class="com">  <span class="op"> * </span>Now the value was changed:
</span></code><code id="L752"><a href="#L752" class="ln">752</a><span class="com">  <span class="op"> | </span>$(<span class="str">'input'</span>).val(); <span class="com">// <span class="str">'blue'</span></span>
</span></code><code id="L753"><a href="#L753" class="ln">753</a><span class="com">  \*/</span>
</code><code id="L754"><a href="#L754" class="ln">754</a>  Kimbo.forEach({
</code><code id="L755"><a href="#L755" class="ln">755</a>    text: <span class="str">'textContent'</span>,
</code><code id="L756"><a href="#L756" class="ln">756</a>    html: <span class="str">'innerHTML'</span>,
</code><code id="L757"><a href="#L757" class="ln">757</a>    val: <span class="str">'value'</span>
</code><code id="L758"><a href="#L758" class="ln">758</a>  }, <span class=kwd>function</span> (method, prop) {
</code><code id="L759"><a href="#L759" class="ln">759</a>    Kimbo.fn[method]<span class="op"> = </span><span class=kwd>function</span> (value) {
</code><code id="L760"><a href="#L760" class="ln">760</a>
</code><code id="L761"><a href="#L761" class="ln">761</a>      <span class="com">// No element</span>
</code><code id="L762"><a href="#L762" class="ln">762</a>      <span class=kwd>if</span> (!<span class=kwd>this</span>.length) {
</code><code id="L763"><a href="#L763" class="ln">763</a>        <span class=kwd>return</span> <span class=kwd>undefined</span>;
</code><code id="L764"><a href="#L764" class="ln">764</a>      }
</code><code id="L765"><a href="#L765" class="ln">765</a>
</code><code id="L766"><a href="#L766" class="ln">766</a>      <span class="com">// Get</span>
</code><code id="L767"><a href="#L767" class="ln">767</a>      <span class=kwd>if</span> (value<span class="op"> === </span><span class=kwd>undefined</span>) {
</code><code id="L768"><a href="#L768" class="ln">768</a>        <span class=kwd>return</span> <span class=kwd>this</span>[<span class="lit">0</span>][prop];
</code><code id="L769"><a href="#L769" class="ln">769</a>
</code><code id="L770"><a href="#L770" class="ln">770</a>        <span class="com">// Set</span>
</code><code id="L771"><a href="#L771" class="ln">771</a>      } <span class=kwd>else</span> {
</code><code id="L772"><a href="#L772" class="ln">772</a>        <span class=kwd>return</span> <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L773"><a href="#L773" class="ln">773</a>          el[prop]<span class="op"> = </span>value;
</code><code id="L774"><a href="#L774" class="ln">774</a>        });
</code><code id="L775"><a href="#L775" class="ln">775</a>      }
</code><code id="L776"><a href="#L776" class="ln">776</a>    };
</code><code id="L777"><a href="#L777" class="ln">777</a>  });
</code><code id="L778"><a href="#L778" class="ln">778</a>
</code><code id="L779"><a href="#L779" class="ln">779</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L780"><a href="#L780" class="ln">780</a><span class="com">  <span class="op"> * </span>$(…).addClass
</span></code><code id="L781"><a href="#L781" class="ln">781</a><span class="com">   [ method ]
</span></code><code id="L782"><a href="#L782" class="ln">782</a><span class="com">  <span class="op"> * </span>Adds a <span class=kwd>class</span> to all matched elements.
</span></code><code id="L783"><a href="#L783" class="ln">783</a><span class="com">   > Parameters
</span></code><code id="L784"><a href="#L784" class="ln">784</a><span class="com">  <span class="op"> - </span>name (string) Name of the <span class=kwd>class</span> to add.
</span></code><code id="L785"><a href="#L785" class="ln">785</a><span class="com">  <span class="op"> = </span>(object) Original matched collection.
</span></code><code id="L786"><a href="#L786" class="ln">786</a><span class="com">   > Usage
</span></code><code id="L787"><a href="#L787" class="ln">787</a><span class="com">  <span class="op"> | </span>&lt;p>I want to be green&lt;/p>
</span></code><code id="L788"><a href="#L788" class="ln">788</a><span class="com">  <span class="op"> | </span>&lt;script>
</span></code><code id="L789"><a href="#L789" class="ln">789</a><span class="com">  <span class="op"> | </span>$(<span class="str">'p'</span>).addClass(<span class="str">'green'</span>);
</span></code><code id="L790"><a href="#L790" class="ln">790</a><span class="com">  <span class="op"> | </span>&lt;/script>
</span></code><code id="L791"><a href="#L791" class="ln">791</a><span class="com">  <span class="op"> * </span>Now it's green
</span></code><code id="L792"><a href="#L792" class="ln">792</a><span class="com">  <span class="op"> | </span>&lt;p <span class=kwd>class</span>=<span class="str">"green"</span>>I want to be green&lt;/p>
</span></code><code id="L793"><a href="#L793" class="ln">793</a><span class="com">  <span class="op"> * </span>You can add multiple classes separated by a space
</span></code><code id="L794"><a href="#L794" class="ln">794</a><span class="com">  <span class="op"> | </span>&lt;p>Add classes to me&lt;/p>
</span></code><code id="L795"><a href="#L795" class="ln">795</a><span class="com">  <span class="op"> | </span>&lt;script>
</span></code><code id="L796"><a href="#L796" class="ln">796</a><span class="com">  <span class="op"> | </span>$(<span class="str">'p'</span>).addClass(<span class="str">'green big width100'</span>);
</span></code><code id="L797"><a href="#L797" class="ln">797</a><span class="com">  <span class="op"> | </span>&lt;/script>
</span></code><code id="L798"><a href="#L798" class="ln">798</a><span class="com">  <span class="op"> * </span>All classes added and they won't be repetead <span class=kwd>if</span> you <span class=kwd>try</span> to add an existing one
</span></code><code id="L799"><a href="#L799" class="ln">799</a><span class="com">  <span class="op"> | </span>&lt;p <span class=kwd>class</span>=<span class="str">"green big width100"</span>>Add classes to me&lt;/p>
</span></code><code id="L800"><a href="#L800" class="ln">800</a><span class="com">  \*/</span>
</code><code id="L801"><a href="#L801" class="ln">801</a>
</code><code id="L802"><a href="#L802" class="ln">802</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L803"><a href="#L803" class="ln">803</a><span class="com">  <span class="op"> * </span>$(…).removeClass
</span></code><code id="L804"><a href="#L804" class="ln">804</a><span class="com">   [ method ]
</span></code><code id="L805"><a href="#L805" class="ln">805</a><span class="com">  <span class="op"> * </span>Removes a <span class=kwd>class</span> to all matched elements.
</span></code><code id="L806"><a href="#L806" class="ln">806</a><span class="com">   > Parameters
</span></code><code id="L807"><a href="#L807" class="ln">807</a><span class="com">  <span class="op"> - </span>name (string) Name of the <span class=kwd>class</span> to remove.
</span></code><code id="L808"><a href="#L808" class="ln">808</a><span class="com">  <span class="op"> = </span>(object) Original matched collection.
</span></code><code id="L809"><a href="#L809" class="ln">809</a><span class="com">   > Usage
</span></code><code id="L810"><a href="#L810" class="ln">810</a><span class="com">  <span class="op"> | </span>&lt;p <span class=kwd>class</span>=<span class="str">"big green title <span class=kwd>float</span>-rigth"</span>>Lorem ipsum&lt;/p>
</span></code><code id="L811"><a href="#L811" class="ln">811</a><span class="com">  <span class="op"> * </span>Remove a specific <span class=kwd>class</span> from the paragraph:
</span></code><code id="L812"><a href="#L812" class="ln">812</a><span class="com">  <span class="op"> | </span>$(<span class="str">'p'</span>).removeClass(<span class="str">'green'</span>);
</span></code><code id="L813"><a href="#L813" class="ln">813</a><span class="com">  <span class="op"> * </span>The specified <span class=kwd>class</span> was removed:
</span></code><code id="L814"><a href="#L814" class="ln">814</a><span class="com">  <span class="op"> | </span>&lt;p <span class=kwd>class</span>=<span class="str">"big title <span class=kwd>float</span>-right"</span>>Lorem ipsum&lt;/p>
</span></code><code id="L815"><a href="#L815" class="ln">815</a><span class="com">  <span class="op"> * </span>You can remove multiple classes separating them by a space when calling the <span class=kwd>function</span>:
</span></code><code id="L816"><a href="#L816" class="ln">816</a><span class="com">  <span class="op"> | </span>$(<span class="str">'p'</span>).removeClass(<span class="str">'big title'</span>);
</span></code><code id="L817"><a href="#L817" class="ln">817</a><span class="com">  <span class="op"> * </span>Now only one <span class=kwd>class</span> left:
</span></code><code id="L818"><a href="#L818" class="ln">818</a><span class="com">  <span class="op"> | </span>&lt;p <span class=kwd>class</span>=<span class="str">"<span class=kwd>float</span>-right"</span>>Lorem ipsum&lt;/p>
</span></code><code id="L819"><a href="#L819" class="ln">819</a><span class="com">  <span class="op"> * </span>You can remove all classes just calling .removeClass() without parameters
</span></code><code id="L820"><a href="#L820" class="ln">820</a><span class="com">  <span class="op"> | </span>$(<span class="str">'p'</span>).removeClass();
</span></code><code id="L821"><a href="#L821" class="ln">821</a><span class="com">  <span class="op"> * </span>All classes were removed including the <span class=kwd>class</span> attribute:
</span></code><code id="L822"><a href="#L822" class="ln">822</a><span class="com">  <span class="op"> | </span>&lt;p>Lorem ipsum&lt;/p>
</span></code><code id="L823"><a href="#L823" class="ln">823</a><span class="com">  \*/</span>
</code><code id="L824"><a href="#L824" class="ln">824</a>
</code><code id="L825"><a href="#L825" class="ln">825</a>  <span class="com">// Generate addClass and removeClass methods</span>
</code><code id="L826"><a href="#L826" class="ln">826</a>  <span class="com">// Use <span class=kwd>native</span> classList</span>
</code><code id="L827"><a href="#L827" class="ln">827</a>  <span class="com">// Mdn: https://developer.mozilla.org/en-US/docs/DOM/element.classList</span>
</code><code id="L828"><a href="#L828" class="ln">828</a>  <span class="com">// Spec: http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#dom-classlist</span>
</code><code id="L829"><a href="#L829" class="ln">829</a>  Kimbo.forEach([<span class="str">'add'</span>, <span class="str">'remove'</span>], <span class=kwd>function</span> (method, i) {
</code><code id="L830"><a href="#L830" class="ln">830</a>    <span class=kwd>var</span> isRemove<span class="op"> = </span>i > <span class="lit">0</span>;
</code><code id="L831"><a href="#L831" class="ln">831</a>
</code><code id="L832"><a href="#L832" class="ln">832</a>    Kimbo.fn[method<span class="op"> + </span><span class="str">'Class'</span>]<span class="op"> = </span><span class=kwd>function</span> (name) {
</code><code id="L833"><a href="#L833" class="ln">833</a>      <span class=kwd>var</span> classNames;
</code><code id="L834"><a href="#L834" class="ln">834</a>
</code><code id="L835"><a href="#L835" class="ln">835</a>      <span class=kwd>if</span> (name<span class="op"> &amp;&amp; </span>Kimbo.isString(name)) {
</code><code id="L836"><a href="#L836" class="ln">836</a>        classNames<span class="op"> = </span>name.split(SPACE_RE);
</code><code id="L837"><a href="#L837" class="ln">837</a>        <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L838"><a href="#L838" class="ln">838</a>
</code><code id="L839"><a href="#L839" class="ln">839</a>          <span class="com">// Skip comments, text, etc</span>
</code><code id="L840"><a href="#L840" class="ln">840</a>          <span class=kwd>if</span> (el.nodeType<span class="op"> === </span><span class="lit">1</span>) {
</code><code id="L841"><a href="#L841" class="ln">841</a>
</code><code id="L842"><a href="#L842" class="ln">842</a>            <span class="com">// Iterate through all <span class=kwd>class</span> names passed</span>
</code><code id="L843"><a href="#L843" class="ln">843</a>            Kimbo.forEach(classNames, <span class=kwd>function</span> (className) {
</code><code id="L844"><a href="#L844" class="ln">844</a>              el.classList[method](className);
</code><code id="L845"><a href="#L845" class="ln">845</a>            });
</code><code id="L846"><a href="#L846" class="ln">846</a>          }
</code><code id="L847"><a href="#L847" class="ln">847</a>        });
</code><code id="L848"><a href="#L848" class="ln">848</a>
</code><code id="L849"><a href="#L849" class="ln">849</a>        <span class="com">// Remove all element classes <span class=kwd>if</span> no classname specified</span>
</code><code id="L850"><a href="#L850" class="ln">850</a>      } <span class=kwd>else</span> <span class=kwd>if</span> (!name<span class="op"> &amp;&amp; </span>isRemove) {
</code><code id="L851"><a href="#L851" class="ln">851</a>        <span class=kwd>this</span>.removeAttr(<span class="str">'<span class=kwd>class</span>'</span>);
</code><code id="L852"><a href="#L852" class="ln">852</a>      }
</code><code id="L853"><a href="#L853" class="ln">853</a>
</code><code id="L854"><a href="#L854" class="ln">854</a>      <span class=kwd>return</span> <span class=kwd>this</span>;
</code><code id="L855"><a href="#L855" class="ln">855</a>    };
</code><code id="L856"><a href="#L856" class="ln">856</a>  });
</code><code id="L857"><a href="#L857" class="ln">857</a>
</code><code id="L858"><a href="#L858" class="ln">858</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L859"><a href="#L859" class="ln">859</a><span class="com">  <span class="op"> * </span>$(…).append
</span></code><code id="L860"><a href="#L860" class="ln">860</a><span class="com">   [ method ]
</span></code><code id="L861"><a href="#L861" class="ln">861</a><span class="com">  <span class="op"> * </span>Insert content to the end of all elements matched by Kimbo.
</span></code><code id="L862"><a href="#L862" class="ln">862</a><span class="com">   > Parameters
</span></code><code id="L863"><a href="#L863" class="ln">863</a><span class="com">  <span class="op"> - </span>value (string|object) HTML string, DOM element, or Kimbo object to insert.
</span></code><code id="L864"><a href="#L864" class="ln">864</a><span class="com">  <span class="op"> = </span>(object) Original matched collection.
</span></code><code id="L865"><a href="#L865" class="ln">865</a><span class="com">   > Usage
</span></code><code id="L866"><a href="#L866" class="ln">866</a><span class="com">  <span class="op"> | </span>&lt;div <span class=kwd>class</span>=<span class="str">"container"</span>>
</span></code><code id="L867"><a href="#L867" class="ln">867</a><span class="com">  <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"lorem"</span>>Lorem &lt;/p>
</span></code><code id="L868"><a href="#L868" class="ln">868</a><span class="com">  <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"lorem"</span>>Lorem &lt;/p>
</span></code><code id="L869"><a href="#L869" class="ln">869</a><span class="com">  <span class="op"> | </span>&lt;/div>
</span></code><code id="L870"><a href="#L870" class="ln">870</a><span class="com">  <span class="op"> * </span>Insert content
</span></code><code id="L871"><a href="#L871" class="ln">871</a><span class="com">  <span class="op"> | </span>$(<span class="str">'.lorem'</span>).append(<span class="str">'&lt;em>ipsum&lt;/em>'</span>)
</span></code><code id="L872"><a href="#L872" class="ln">872</a><span class="com">  <span class="op"> * </span>Each element gets the content
</span></code><code id="L873"><a href="#L873" class="ln">873</a><span class="com">  <span class="op"> | </span>&lt;div <span class=kwd>class</span>=<span class="str">"container"</span>>
</span></code><code id="L874"><a href="#L874" class="ln">874</a><span class="com">  <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"lorem"</span>>Lorem &lt;em>ipsum&lt;/em>&lt;/p>
</span></code><code id="L875"><a href="#L875" class="ln">875</a><span class="com">  <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"lorem"</span>>Lorem &lt;em>ipsum&lt;/em>&lt;/p>
</span></code><code id="L876"><a href="#L876" class="ln">876</a><span class="com">  <span class="op"> | </span>&lt;/div>
</span></code><code id="L877"><a href="#L877" class="ln">877</a><span class="com">  <span class="op"> * </span>You can also get an element and insert it elsewhere
</span></code><code id="L878"><a href="#L878" class="ln">878</a><span class="com">  <span class="op"> | </span>$(<span class="str">'.container'</span>).append($(<span class="str">'.ipsum'</span>))
</span></code><code id="L879"><a href="#L879" class="ln">879</a><span class="com">  <span class="op"> * </span>The selected element will be moved, not cloned.
</span></code><code id="L880"><a href="#L880" class="ln">880</a><span class="com">  <span class="op"> | </span>&lt;div <span class=kwd>class</span>=<span class="str">"container"</span>>
</span></code><code id="L881"><a href="#L881" class="ln">881</a><span class="com">  <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"lorem"</span>>Lorem&lt;/p>
</span></code><code id="L882"><a href="#L882" class="ln">882</a><span class="com">  <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"lorem"</span>>Lorem&lt;/p>
</span></code><code id="L883"><a href="#L883" class="ln">883</a><span class="com">  <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"ipsum"</span>>Ipsum&lt;/p>
</span></code><code id="L884"><a href="#L884" class="ln">884</a><span class="com">  <span class="op"> | </span>&lt;/div>
</span></code><code id="L885"><a href="#L885" class="ln">885</a><span class="com">  \*/</span>
</code><code id="L886"><a href="#L886" class="ln">886</a>
</code><code id="L887"><a href="#L887" class="ln">887</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L888"><a href="#L888" class="ln">888</a><span class="com">  <span class="op"> * </span>$(…).prepend
</span></code><code id="L889"><a href="#L889" class="ln">889</a><span class="com">   [ method ]
</span></code><code id="L890"><a href="#L890" class="ln">890</a><span class="com">  <span class="op"> * </span>Insert content to the beginning of all elements matched by Kimbo.
</span></code><code id="L891"><a href="#L891" class="ln">891</a><span class="com">   > Parameters
</span></code><code id="L892"><a href="#L892" class="ln">892</a><span class="com">  <span class="op"> - </span>value (string|object) HTML string, DOM element, or Kimbo object to insert.
</span></code><code id="L893"><a href="#L893" class="ln">893</a><span class="com">  <span class="op"> = </span>(object) Original matched collection.
</span></code><code id="L894"><a href="#L894" class="ln">894</a><span class="com">   > Usage
</span></code><code id="L895"><a href="#L895" class="ln">895</a><span class="com">  <span class="op"> | </span>&lt;div <span class=kwd>class</span>=<span class="str">"container"</span>>
</span></code><code id="L896"><a href="#L896" class="ln">896</a><span class="com">  <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"lorem"</span>> Lorem&lt;/p>
</span></code><code id="L897"><a href="#L897" class="ln">897</a><span class="com">  <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"lorem"</span>> Lorem&lt;/p>
</span></code><code id="L898"><a href="#L898" class="ln">898</a><span class="com">  <span class="op"> | </span>&lt;/div>
</span></code><code id="L899"><a href="#L899" class="ln">899</a><span class="com">  <span class="op"> * </span>Insert content
</span></code><code id="L900"><a href="#L900" class="ln">900</a><span class="com">  <span class="op"> | </span>$(<span class="str">'.lorem'</span>).prepend(<span class="str">'&lt;em>ipsum&lt;/em>'</span>)
</span></code><code id="L901"><a href="#L901" class="ln">901</a><span class="com">  <span class="op"> * </span>Each element gets the content
</span></code><code id="L902"><a href="#L902" class="ln">902</a><span class="com">  <span class="op"> | </span>&lt;div <span class=kwd>class</span>=<span class="str">"container"</span>>
</span></code><code id="L903"><a href="#L903" class="ln">903</a><span class="com">  <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"lorem"</span>>&lt;em>ipsum&lt;/em> Lorem&lt;/p>
</span></code><code id="L904"><a href="#L904" class="ln">904</a><span class="com">  <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"lorem"</span>>&lt;em>ipsum&lt;/em> Lorem&lt;/p>
</span></code><code id="L905"><a href="#L905" class="ln">905</a><span class="com">  <span class="op"> | </span>&lt;/div>
</span></code><code id="L906"><a href="#L906" class="ln">906</a><span class="com">  <span class="op"> * </span>You can also get an element and insert it elsewhere
</span></code><code id="L907"><a href="#L907" class="ln">907</a><span class="com">  <span class="op"> | </span>$(<span class="str">'.container'</span>).prepend($(<span class="str">'.ipsum'</span>))
</span></code><code id="L908"><a href="#L908" class="ln">908</a><span class="com">  <span class="op"> * </span>The selected element will be moved, not cloned.
</span></code><code id="L909"><a href="#L909" class="ln">909</a><span class="com">  <span class="op"> | </span>&lt;div <span class=kwd>class</span>=<span class="str">"container"</span>>
</span></code><code id="L910"><a href="#L910" class="ln">910</a><span class="com">  <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"ipsum"</span>>Ipsum&lt;/p>
</span></code><code id="L911"><a href="#L911" class="ln">911</a><span class="com">  <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"lorem"</span>>Lorem&lt;/p>
</span></code><code id="L912"><a href="#L912" class="ln">912</a><span class="com">  <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"lorem"</span>>Lorem&lt;/p>
</span></code><code id="L913"><a href="#L913" class="ln">913</a><span class="com">  <span class="op"> | </span>&lt;/div>
</span></code><code id="L914"><a href="#L914" class="ln">914</a><span class="com">  \*/</span>
</code><code id="L915"><a href="#L915" class="ln">915</a>
</code><code id="L916"><a href="#L916" class="ln">916</a>  <span class="com">// Generate append and prepend methods</span>
</code><code id="L917"><a href="#L917" class="ln">917</a>  Kimbo.forEach([<span class="str">'append'</span>, <span class="str">'prepend'</span>], <span class=kwd>function</span> (method, i) {
</code><code id="L918"><a href="#L918" class="ln">918</a>    <span class=kwd>var</span> isPrepend<span class="op"> = </span>i > <span class="lit">0</span>;
</code><code id="L919"><a href="#L919" class="ln">919</a>
</code><code id="L920"><a href="#L920" class="ln">920</a>    Kimbo.fn[method]<span class="op"> = </span><span class=kwd>function</span> (value) {
</code><code id="L921"><a href="#L921" class="ln">921</a>      <span class=kwd>var</span> div;
</code><code id="L922"><a href="#L922" class="ln">922</a>
</code><code id="L923"><a href="#L923" class="ln">923</a>      <span class="com">// Exit <span class=kwd>if</span> no value passed</span>
</code><code id="L924"><a href="#L924" class="ln">924</a>      <span class=kwd>if</span> (!<span class=kwd>this</span>.length<span class="op"> || </span>!value) {
</code><code id="L925"><a href="#L925" class="ln">925</a>        <span class=kwd>return</span> <span class=kwd>this</span>;
</code><code id="L926"><a href="#L926" class="ln">926</a>      }
</code><code id="L927"><a href="#L927" class="ln">927</a>
</code><code id="L928"><a href="#L928" class="ln">928</a>      <span class="com">// Handle html string</span>
</code><code id="L929"><a href="#L929" class="ln">929</a>      <span class=kwd>if</span> (Kimbo.isString(value)) {
</code><code id="L930"><a href="#L930" class="ln">930</a>
</code><code id="L931"><a href="#L931" class="ln">931</a>        <span class="com">// Placeholder element</span>
</code><code id="L932"><a href="#L932" class="ln">932</a>        div<span class="op"> = </span>document.createElement(<span class="str">'div'</span>);
</code><code id="L933"><a href="#L933" class="ln">933</a>        div.innerHTML<span class="op"> = </span>value;
</code><code id="L934"><a href="#L934" class="ln">934</a>        value<span class="op"> = </span>div.firstChild;
</code><code id="L935"><a href="#L935" class="ln">935</a>      }
</code><code id="L936"><a href="#L936" class="ln">936</a>
</code><code id="L937"><a href="#L937" class="ln">937</a>      <span class="com">// Already a dom node or kimbo collection, just insert it</span>
</code><code id="L938"><a href="#L938" class="ln">938</a>      <span class=kwd>if</span> (value.nodeType<span class="op"> || </span>(value <span class=kwd>instanceof</span> Kimbo)) {
</code><code id="L939"><a href="#L939" class="ln">939</a>        <span class=kwd>return</span> <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L940"><a href="#L940" class="ln">940</a>
</code><code id="L941"><a href="#L941" class="ln">941</a>          <span class="com">// Be sure we can append/prepend to the element</span>
</code><code id="L942"><a href="#L942" class="ln">942</a>          <span class=kwd>if</span> (el.nodeType<span class="op"> === </span><span class="lit">1</span><span class="op"> || </span>el.nodeType<span class="op"> === </span><span class="lit">11</span>) {
</code><code id="L943"><a href="#L943" class="ln">943</a>            _.kimbo(value).each(<span class=kwd>function</span> (_el) {
</code><code id="L944"><a href="#L944" class="ln">944</a>              el.insertBefore(_el, isPrepend ? el.firstChild : <span class=kwd>null</span>);
</code><code id="L945"><a href="#L945" class="ln">945</a>            });
</code><code id="L946"><a href="#L946" class="ln">946</a>          }
</code><code id="L947"><a href="#L947" class="ln">947</a>        });
</code><code id="L948"><a href="#L948" class="ln">948</a>      }
</code><code id="L949"><a href="#L949" class="ln">949</a>    };
</code><code id="L950"><a href="#L950" class="ln">950</a>  });
</code><code id="L951"><a href="#L951" class="ln">951</a>
</code><code id="L952"><a href="#L952" class="ln">952</a>  Kimbo.fn.extend({
</code><code id="L953"><a href="#L953" class="ln">953</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L954"><a href="#L954" class="ln">954</a><span class="com">    <span class="op"> * </span>$(…).empty
</span></code><code id="L955"><a href="#L955" class="ln">955</a><span class="com">     [ method ]
</span></code><code id="L956"><a href="#L956" class="ln">956</a><span class="com">    <span class="op"> * </span>Remove all child nodes from the DOM of the elements <span class=kwd>in</span> the collection.
</span></code><code id="L957"><a href="#L957" class="ln">957</a><span class="com">    <span class="op"> = </span>(object) Original matched collection.
</span></code><code id="L958"><a href="#L958" class="ln">958</a><span class="com">     > Usage
</span></code><code id="L959"><a href="#L959" class="ln">959</a><span class="com">    <span class="op"> | </span>&lt;div <span class=kwd>class</span>=<span class="str">"container"</span>>
</span></code><code id="L960"><a href="#L960" class="ln">960</a><span class="com">    <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"lorem"</span>>Lorem&lt;/p>
</span></code><code id="L961"><a href="#L961" class="ln">961</a><span class="com">    <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"lorem"</span>>Lorem&lt;/p>
</span></code><code id="L962"><a href="#L962" class="ln">962</a><span class="com">    <span class="op"> | </span>&lt;/div>
</span></code><code id="L963"><a href="#L963" class="ln">963</a><span class="com">    <span class="op"> * </span>Empty .container
</span></code><code id="L964"><a href="#L964" class="ln">964</a><span class="com">    <span class="op"> | </span>$(<span class="str">'.container'</span>).empty();
</span></code><code id="L965"><a href="#L965" class="ln">965</a><span class="com">    <span class="op"> * </span>All elements inside <span class="str">".container"</span> are removed from the DOM
</span></code><code id="L966"><a href="#L966" class="ln">966</a><span class="com">    <span class="op"> | </span>&lt;div <span class=kwd>class</span>=<span class="str">"container"</span>>&lt;/div>
</span></code><code id="L967"><a href="#L967" class="ln">967</a><span class="com">    \*/</span>
</code><code id="L968"><a href="#L968" class="ln">968</a>    empty: <span class=kwd>function</span> () {
</code><code id="L969"><a href="#L969" class="ln">969</a>      <span class=kwd>return</span> <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L970"><a href="#L970" class="ln">970</a>        <span class=kwd>while</span> (el.hasChildNodes()) {
</code><code id="L971"><a href="#L971" class="ln">971</a>          el.removeChild(el.childNodes[<span class="lit">0</span>]);
</code><code id="L972"><a href="#L972" class="ln">972</a>        }
</code><code id="L973"><a href="#L973" class="ln">973</a>      });
</code><code id="L974"><a href="#L974" class="ln">974</a>    },
</code><code id="L975"><a href="#L975" class="ln">975</a>
</code><code id="L976"><a href="#L976" class="ln">976</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L977"><a href="#L977" class="ln">977</a><span class="com">    <span class="op"> * </span>$(…).remove
</span></code><code id="L978"><a href="#L978" class="ln">978</a><span class="com">     [ method ]
</span></code><code id="L979"><a href="#L979" class="ln">979</a><span class="com">    <span class="op"> * </span>Remove all matched elements from the DOM.
</span></code><code id="L980"><a href="#L980" class="ln">980</a><span class="com">    <span class="op"> * </span>Similar to @$(…).empty but .remove() removes the element itself
</span></code><code id="L981"><a href="#L981" class="ln">981</a><span class="com">    <span class="op"> = </span>(object) Original matched collection.
</span></code><code id="L982"><a href="#L982" class="ln">982</a><span class="com">     > Usage
</span></code><code id="L983"><a href="#L983" class="ln">983</a><span class="com">    <span class="op"> | </span>&lt;div <span class=kwd>class</span>=<span class="str">"container"</span>>
</span></code><code id="L984"><a href="#L984" class="ln">984</a><span class="com">    <span class="op"> | </span>  &lt;p <span class=kwd>class</span>=<span class="str">"lorem"</span>>Lorem&lt;/p>
</span></code><code id="L985"><a href="#L985" class="ln">985</a><span class="com">    <span class="op"> | </span>  &lt;p>Lorem&lt;/p>
</span></code><code id="L986"><a href="#L986" class="ln">986</a><span class="com">    <span class="op"> | </span>&lt;/div>
</span></code><code id="L987"><a href="#L987" class="ln">987</a><span class="com">    <span class="op"> * </span>Remove one element
</span></code><code id="L988"><a href="#L988" class="ln">988</a><span class="com">    <span class="op"> | </span>$(<span class="str">'.lorem'</span>).remove();
</span></code><code id="L989"><a href="#L989" class="ln">989</a><span class="com">    <span class="op"> * </span>The result element is:
</span></code><code id="L990"><a href="#L990" class="ln">990</a><span class="com">    <span class="op"> | </span>&lt;div <span class=kwd>class</span>=<span class="str">"container"</span>>
</span></code><code id="L991"><a href="#L991" class="ln">991</a><span class="com">    <span class="op"> | </span>  &lt;p>Lorem&lt;/p>
</span></code><code id="L992"><a href="#L992" class="ln">992</a><span class="com">    <span class="op"> | </span>&lt;/div>
</span></code><code id="L993"><a href="#L993" class="ln">993</a><span class="com">    \*/</span>
</code><code id="L994"><a href="#L994" class="ln">994</a>    remove: <span class=kwd>function</span> () {
</code><code id="L995"><a href="#L995" class="ln">995</a>      <span class=kwd>return</span> <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L996"><a href="#L996" class="ln">996</a>        <span class=kwd>if</span> (el.parentNode) {
</code><code id="L997"><a href="#L997" class="ln">997</a>          el.parentNode.removeChild(el);
</code><code id="L998"><a href="#L998" class="ln">998</a>        }
</code><code id="L999"><a href="#L999" class="ln">999</a>      });
</code><code id="L1000"><a href="#L1000" class="ln">1000</a>    },
</code><code id="L1001"><a href="#L1001" class="ln">1001</a>
</code><code id="L1002"><a href="#L1002" class="ln">1002</a>    <span class="com">// Todo: extend to accept objects and functions to set values</span>
</code><code id="L1003"><a href="#L1003" class="ln">1003</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1004"><a href="#L1004" class="ln">1004</a><span class="com">    <span class="op"> * </span>$(…).attr
</span></code><code id="L1005"><a href="#L1005" class="ln">1005</a><span class="com">     [ method ]
</span></code><code id="L1006"><a href="#L1006" class="ln">1006</a><span class="com">    <span class="op"> * </span>Get an attribute value from one element or set attributes to all matched elements.
</span></code><code id="L1007"><a href="#L1007" class="ln">1007</a><span class="com">     > Parameters
</span></code><code id="L1008"><a href="#L1008" class="ln">1008</a><span class="com">    <span class="op"> - </span>name (string) Name of the attribute.
</span></code><code id="L1009"><a href="#L1009" class="ln">1009</a><span class="com">    <span class="op"> - </span>value (string) #optional Value <span class=kwd>for</span> the attribute.
</span></code><code id="L1010"><a href="#L1010" class="ln">1010</a><span class="com">    <span class="op"> = </span>(string) Attribute value, only <span class=kwd>if</span> name was passed.
</span></code><code id="L1011"><a href="#L1011" class="ln">1011</a><span class="com">    <span class="op"> = </span>(object) Original matched collection when setting a value.
</span></code><code id="L1012"><a href="#L1012" class="ln">1012</a><span class="com">     > Usage
</span></code><code id="L1013"><a href="#L1013" class="ln">1013</a><span class="com">    <span class="op"> | </span>&lt;a href=<span class="str">"http:<span class="com">//kimbojs.com"</span>>Go to Kimbojs.com&lt;/a></span>
</span></code><code id="L1014"><a href="#L1014" class="ln">1014</a><span class="com">    <span class="op"> * </span>Get href attribute
</span></code><code id="L1015"><a href="#L1015" class="ln">1015</a><span class="com">    <span class="op"> | </span>$(<span class="str">'a'</span>).attr(<span class="str">'href'</span>); <span class="com">// Http://kimbojs.com</span>
</span></code><code id="L1016"><a href="#L1016" class="ln">1016</a><span class="com">    <span class="op"> * </span>Set a <span class=kwd>new</span> attribute
</span></code><code id="L1017"><a href="#L1017" class="ln">1017</a><span class="com">    <span class="op"> | </span>$(<span class="str">'a'</span>).attr(<span class="str">'title'</span>, <span class="str">'Go to Kimbojs.com'</span>);
</span></code><code id="L1018"><a href="#L1018" class="ln">1018</a><span class="com">    <span class="op"> * </span>Now element has a title attribute
</span></code><code id="L1019"><a href="#L1019" class="ln">1019</a><span class="com">    <span class="op"> | </span>&lt;a href=<span class="str">"http:<span class="com">//kimbojs.com"</span> title=<span class="str">"Go to Kimbojs.com"</span>>Go to Kimbojs.com&lt;/a></span>
</span></code><code id="L1020"><a href="#L1020" class="ln">1020</a><span class="com">    \*/</span>
</code><code id="L1021"><a href="#L1021" class="ln">1021</a>    attr: <span class=kwd>function</span> (name, value) {
</code><code id="L1022"><a href="#L1022" class="ln">1022</a>      <span class=kwd>if</span> (!<span class=kwd>this</span>.length) {
</code><code id="L1023"><a href="#L1023" class="ln">1023</a>        <span class=kwd>return</span> <span class=kwd>this</span>;
</code><code id="L1024"><a href="#L1024" class="ln">1024</a>      }
</code><code id="L1025"><a href="#L1025" class="ln">1025</a>
</code><code id="L1026"><a href="#L1026" class="ln">1026</a>      <span class=kwd>if</span> (Kimbo.isString(name)<span class="op"> &amp;&amp; </span>value<span class="op"> === </span><span class=kwd>undefined</span>) {
</code><code id="L1027"><a href="#L1027" class="ln">1027</a>        <span class=kwd>return</span> <span class=kwd>this</span>[<span class="lit">0</span>].getAttribute(name);
</code><code id="L1028"><a href="#L1028" class="ln">1028</a>      } <span class=kwd>else</span> {
</code><code id="L1029"><a href="#L1029" class="ln">1029</a>        <span class=kwd>return</span> <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L1030"><a href="#L1030" class="ln">1030</a>          el.setAttribute(name, value);
</code><code id="L1031"><a href="#L1031" class="ln">1031</a>        });
</code><code id="L1032"><a href="#L1032" class="ln">1032</a>      }
</code><code id="L1033"><a href="#L1033" class="ln">1033</a>    },
</code><code id="L1034"><a href="#L1034" class="ln">1034</a>
</code><code id="L1035"><a href="#L1035" class="ln">1035</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1036"><a href="#L1036" class="ln">1036</a><span class="com">    <span class="op"> * </span>$(…).removeAttr
</span></code><code id="L1037"><a href="#L1037" class="ln">1037</a><span class="com">     [ method ]
</span></code><code id="L1038"><a href="#L1038" class="ln">1038</a><span class="com">    <span class="op"> * </span>Removes an attribute from all matched elements.
</span></code><code id="L1039"><a href="#L1039" class="ln">1039</a><span class="com">     > Parameters
</span></code><code id="L1040"><a href="#L1040" class="ln">1040</a><span class="com">    <span class="op"> - </span>name (string) Name of the attribute to remove.
</span></code><code id="L1041"><a href="#L1041" class="ln">1041</a><span class="com">    <span class="op"> = </span>(object) Original matched collection.
</span></code><code id="L1042"><a href="#L1042" class="ln">1042</a><span class="com">     > Usage
</span></code><code id="L1043"><a href="#L1043" class="ln">1043</a><span class="com">    <span class="op"> | </span>&lt;a href=<span class="str">"http:<span class="com">//kimbojs.com"</span> title=<span class="str">"Go to Kimbojs.com"</span>>Go to Kimbojs.com&lt;/a></span>
</span></code><code id="L1044"><a href="#L1044" class="ln">1044</a><span class="com">    <span class="op"> * </span>Remove the title attribute
</span></code><code id="L1045"><a href="#L1045" class="ln">1045</a><span class="com">    <span class="op"> | </span>$(<span class="str">'a'</span>).removeAttr(<span class="str">'title'</span>);
</span></code><code id="L1046"><a href="#L1046" class="ln">1046</a><span class="com">    <span class="op"> * </span>Now the element has no title
</span></code><code id="L1047"><a href="#L1047" class="ln">1047</a><span class="com">    <span class="op"> | </span>&lt;a href=<span class="str">"http:<span class="com">//kimbojs.com"</span>>Go to Kimbojs.com&lt;/a></span>
</span></code><code id="L1048"><a href="#L1048" class="ln">1048</a><span class="com">    \*/</span>
</code><code id="L1049"><a href="#L1049" class="ln">1049</a>    removeAttr: <span class=kwd>function</span> (name) {
</code><code id="L1050"><a href="#L1050" class="ln">1050</a>      <span class=kwd>return</span> <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L1051"><a href="#L1051" class="ln">1051</a>        el.removeAttribute(name);
</code><code id="L1052"><a href="#L1052" class="ln">1052</a>      });
</code><code id="L1053"><a href="#L1053" class="ln">1053</a>    },
</code><code id="L1054"><a href="#L1054" class="ln">1054</a>
</code><code id="L1055"><a href="#L1055" class="ln">1055</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1056"><a href="#L1056" class="ln">1056</a><span class="com">    <span class="op"> * </span>$(…).toggleClass
</span></code><code id="L1057"><a href="#L1057" class="ln">1057</a><span class="com">     [ method ]
</span></code><code id="L1058"><a href="#L1058" class="ln">1058</a><span class="com">    <span class="op"> * </span>Removes a <span class=kwd>class</span> to all matched elements.
</span></code><code id="L1059"><a href="#L1059" class="ln">1059</a><span class="com">     > Parameters
</span></code><code id="L1060"><a href="#L1060" class="ln">1060</a><span class="com">    <span class="op"> - </span>name (string) Name of the <span class=kwd>class</span> to toggle.
</span></code><code id="L1061"><a href="#L1061" class="ln">1061</a><span class="com">    <span class="op"> - </span>state (<span class=kwd>boolean</span>) #optional If state is <span class=kwd>true</span> the <span class=kwd>class</span> will be added, <span class=kwd>if</span> <span class=kwd>false</span>, removed.
</span></code><code id="L1062"><a href="#L1062" class="ln">1062</a><span class="com">    <span class="op"> = </span>(object) Original matched collection.
</span></code><code id="L1063"><a href="#L1063" class="ln">1063</a><span class="com">     > Usage
</span></code><code id="L1064"><a href="#L1064" class="ln">1064</a><span class="com">    <span class="op"> | </span>&lt;p <span class=kwd>class</span>=<span class="str">"foo"</span>>Lorem ipsum.&lt;/p>
</span></code><code id="L1065"><a href="#L1065" class="ln">1065</a><span class="com">    <span class="op"> | </span>&lt;script>
</span></code><code id="L1066"><a href="#L1066" class="ln">1066</a><span class="com">    <span class="op"> | </span>$(<span class="str">'p'</span>).toggleClass(<span class="str">'foo'</span>);
</span></code><code id="L1067"><a href="#L1067" class="ln">1067</a><span class="com">    <span class="op"> | </span>&lt;/script>
</span></code><code id="L1068"><a href="#L1068" class="ln">1068</a><span class="com">    <span class="op"> * </span>The `p` element has the <span class=kwd>class</span> foo soo it will be removed
</span></code><code id="L1069"><a href="#L1069" class="ln">1069</a><span class="com">    <span class="op"> | </span>&lt;p>Lorem ipsum.&lt;/p>
</span></code><code id="L1070"><a href="#L1070" class="ln">1070</a><span class="com">    \*/</span>
</code><code id="L1071"><a href="#L1071" class="ln">1071</a>    toggleClass: <span class=kwd>function</span> (name, state) {
</code><code id="L1072"><a href="#L1072" class="ln">1072</a>      <span class=kwd>var</span> classNames;
</code><code id="L1073"><a href="#L1073" class="ln">1073</a>
</code><code id="L1074"><a href="#L1074" class="ln">1074</a>      <span class=kwd>if</span> (<span class=kwd>this</span>.length<span class="op"> &amp;&amp; </span>name<span class="op"> &amp;&amp; </span>Kimbo.isString(name)) {
</code><code id="L1075"><a href="#L1075" class="ln">1075</a>
</code><code id="L1076"><a href="#L1076" class="ln">1076</a>        classNames<span class="op"> = </span>name.split(SPACE_RE);
</code><code id="L1077"><a href="#L1077" class="ln">1077</a>
</code><code id="L1078"><a href="#L1078" class="ln">1078</a>        <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L1079"><a href="#L1079" class="ln">1079</a>          Kimbo.forEach(classNames, <span class=kwd>function</span> (name) {
</code><code id="L1080"><a href="#L1080" class="ln">1080</a>
</code><code id="L1081"><a href="#L1081" class="ln">1081</a>            <span class="com">// Use custom toggle (anyway it uses classList.add/remove)</span>
</code><code id="L1082"><a href="#L1082" class="ln">1082</a>            state<span class="op"> = </span>Kimbo.isBoolean(state) ? state : !_hasClass(el, name);
</code><code id="L1083"><a href="#L1083" class="ln">1083</a>            _.kimbo(el)[state ? <span class="str">'addClass'</span> : <span class="str">'removeClass'</span>](name);
</code><code id="L1084"><a href="#L1084" class="ln">1084</a>          });
</code><code id="L1085"><a href="#L1085" class="ln">1085</a>        });
</code><code id="L1086"><a href="#L1086" class="ln">1086</a>      }
</code><code id="L1087"><a href="#L1087" class="ln">1087</a>
</code><code id="L1088"><a href="#L1088" class="ln">1088</a>      <span class=kwd>return</span> <span class=kwd>this</span>;
</code><code id="L1089"><a href="#L1089" class="ln">1089</a>    },
</code><code id="L1090"><a href="#L1090" class="ln">1090</a>
</code><code id="L1091"><a href="#L1091" class="ln">1091</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1092"><a href="#L1092" class="ln">1092</a><span class="com">    <span class="op"> * </span>$(…).hasClass
</span></code><code id="L1093"><a href="#L1093" class="ln">1093</a><span class="com">     [ method ]
</span></code><code id="L1094"><a href="#L1094" class="ln">1094</a><span class="com">    <span class="op"> * </span>Determine whether any matched elements has the given <span class=kwd>class</span>.
</span></code><code id="L1095"><a href="#L1095" class="ln">1095</a><span class="com">     > Parameters
</span></code><code id="L1096"><a href="#L1096" class="ln">1096</a><span class="com">    <span class="op"> - </span>name (string) Name of the <span class=kwd>class</span> to search <span class=kwd>for</span>.
</span></code><code id="L1097"><a href="#L1097" class="ln">1097</a><span class="com">    <span class="op"> = </span>(object) Original matched collection.
</span></code><code id="L1098"><a href="#L1098" class="ln">1098</a><span class="com">     > Usage
</span></code><code id="L1099"><a href="#L1099" class="ln">1099</a><span class="com">    <span class="op"> | </span>&lt;p <span class=kwd>class</span>=<span class="str">"asd foo qwe"</span>>Lorem ipsum.&lt;/p>
</span></code><code id="L1100"><a href="#L1100" class="ln">1100</a><span class="com">    <span class="op"> * </span>Check <span class=kwd>if</span> the element has the <span class=kwd>class</span> <span class="str">'foo'</span>
</span></code><code id="L1101"><a href="#L1101" class="ln">1101</a><span class="com">    <span class="op"> | </span>$(<span class="str">'p'</span>).hasClass(<span class="str">'foo'</span>); <span class="com">// True</span>
</span></code><code id="L1102"><a href="#L1102" class="ln">1102</a><span class="com">    <span class="op"> * </span>You could also check <span class=kwd>if</span> it has multiple classes
</span></code><code id="L1103"><a href="#L1103" class="ln">1103</a><span class="com">    <span class="op"> | </span>$(<span class="str">'p'</span>).hasClass(<span class="str">'qwe asd'</span>); <span class="com">// True</span>
</span></code><code id="L1104"><a href="#L1104" class="ln">1104</a><span class="com">    \*/</span>
</code><code id="L1105"><a href="#L1105" class="ln">1105</a>    hasClass: <span class=kwd>function</span> (name) {
</code><code id="L1106"><a href="#L1106" class="ln">1106</a>      <span class=kwd>var</span> has<span class="op"> = </span><span class=kwd>false</span>;
</code><code id="L1107"><a href="#L1107" class="ln">1107</a>      <span class=kwd>var</span> classNames;
</code><code id="L1108"><a href="#L1108" class="ln">1108</a>
</code><code id="L1109"><a href="#L1109" class="ln">1109</a>      <span class=kwd>if</span> (<span class=kwd>this</span>.length<span class="op"> &amp;&amp; </span>name<span class="op"> &amp;&amp; </span>Kimbo.isString(name)) {
</code><code id="L1110"><a href="#L1110" class="ln">1110</a>
</code><code id="L1111"><a href="#L1111" class="ln">1111</a>        classNames<span class="op"> = </span>name.trim().split(SPACE_RE);
</code><code id="L1112"><a href="#L1112" class="ln">1112</a>
</code><code id="L1113"><a href="#L1113" class="ln">1113</a>        <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L1114"><a href="#L1114" class="ln">1114</a>
</code><code id="L1115"><a href="#L1115" class="ln">1115</a>          <span class="com">// Classlist.contains only accepts one <span class=kwd>class</span> parameter</span>
</code><code id="L1116"><a href="#L1116" class="ln">1116</a>          Kimbo.forEach(classNames, <span class=kwd>function</span> (name) {
</code><code id="L1117"><a href="#L1117" class="ln">1117</a>            has<span class="op"> = </span>_hasClass(el, name);
</code><code id="L1118"><a href="#L1118" class="ln">1118</a>
</code><code id="L1119"><a href="#L1119" class="ln">1119</a>            <span class="com">// When only one is missing <span class=kwd>break</span> the loop</span>
</code><code id="L1120"><a href="#L1120" class="ln">1120</a>            <span class=kwd>if</span> (!has) {
</code><code id="L1121"><a href="#L1121" class="ln">1121</a>              <span class=kwd>return</span> <span class=kwd>false</span>;
</code><code id="L1122"><a href="#L1122" class="ln">1122</a>            }
</code><code id="L1123"><a href="#L1123" class="ln">1123</a>          });
</code><code id="L1124"><a href="#L1124" class="ln">1124</a>        });
</code><code id="L1125"><a href="#L1125" class="ln">1125</a>      }
</code><code id="L1126"><a href="#L1126" class="ln">1126</a>
</code><code id="L1127"><a href="#L1127" class="ln">1127</a>      <span class=kwd>return</span> has;
</code><code id="L1128"><a href="#L1128" class="ln">1128</a>    },
</code><code id="L1129"><a href="#L1129" class="ln">1129</a>
</code><code id="L1130"><a href="#L1130" class="ln">1130</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1131"><a href="#L1131" class="ln">1131</a><span class="com">    <span class="op"> * </span>$(…).clone
</span></code><code id="L1132"><a href="#L1132" class="ln">1132</a><span class="com">     [ method ]
</span></code><code id="L1133"><a href="#L1133" class="ln">1133</a><span class="com">    <span class="op"> * </span>Clones a DOM node.
</span></code><code id="L1134"><a href="#L1134" class="ln">1134</a><span class="com">     > Parameters
</span></code><code id="L1135"><a href="#L1135" class="ln">1135</a><span class="com">    <span class="op"> = </span>(object) Original matched collection.
</span></code><code id="L1136"><a href="#L1136" class="ln">1136</a><span class="com">     > Usage
</span></code><code id="L1137"><a href="#L1137" class="ln">1137</a><span class="com">    <span class="op"> | </span>&lt;p <span class=kwd>class</span>=<span class="str">"asd foo qwe"</span>>Lorem ipsum.&lt;/p>
</span></code><code id="L1138"><a href="#L1138" class="ln">1138</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> p1<span class="op"> = </span>$(<span class="str">'p'</span>); <span class="com">// Grab the p element</span>
</span></code><code id="L1139"><a href="#L1139" class="ln">1139</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> p2<span class="op"> = </span>p1.clone(); <span class="com">// Clone p1 into p2</span>
</span></code><code id="L1140"><a href="#L1140" class="ln">1140</a><span class="com">    <span class="op"> | </span>console.log(p2<span class="op"> === </span>p1); <span class="com">// False</span>
</span></code><code id="L1141"><a href="#L1141" class="ln">1141</a><span class="com">    \*/</span>
</code><code id="L1142"><a href="#L1142" class="ln">1142</a>    clone: <span class=kwd>function</span> () {
</code><code id="L1143"><a href="#L1143" class="ln">1143</a>      <span class=kwd>return</span> <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L1144"><a href="#L1144" class="ln">1144</a>        <span class=kwd>return</span> el.cloneNode(<span class=kwd>true</span>);
</code><code id="L1145"><a href="#L1145" class="ln">1145</a>      });
</code><code id="L1146"><a href="#L1146" class="ln">1146</a>    }
</code><code id="L1147"><a href="#L1147" class="ln">1147</a>  });
</code><code id="L1148"><a href="#L1148" class="ln">1148</a>
</code><code id="L1149"><a href="#L1149" class="ln">1149</a>  <span class="com">// Generate get/set .width() and .height() methods</span>
</code><code id="L1150"><a href="#L1150" class="ln">1150</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L1151"><a href="#L1151" class="ln">1151</a><span class="com">  <span class="op"> * </span>$(…).width
</span></code><code id="L1152"><a href="#L1152" class="ln">1152</a><span class="com">   [ method ]
</span></code><code id="L1153"><a href="#L1153" class="ln">1153</a><span class="com">  <span class="op"> * </span>Get the current width of the first element or set the width of all matched elements.
</span></code><code id="L1154"><a href="#L1154" class="ln">1154</a><span class="com">   > Parameters
</span></code><code id="L1155"><a href="#L1155" class="ln">1155</a><span class="com">  <span class="op"> - </span>value (number|string) #optional An integer indicating the width of the element or a string width a unit of measure.
</span></code><code id="L1156"><a href="#L1156" class="ln">1156</a><span class="com">  <span class="op"> = </span>(number) the actual width of the element <span class=kwd>if</span> no parameter passed.
</span></code><code id="L1157"><a href="#L1157" class="ln">1157</a><span class="com">  <span class="op"> = </span>(object) Kimbo object.
</span></code><code id="L1158"><a href="#L1158" class="ln">1158</a><span class="com">   > Usage
</span></code><code id="L1159"><a href="#L1159" class="ln">1159</a><span class="com">  <span class="op"> | </span>&lt;style>
</span></code><code id="L1160"><a href="#L1160" class="ln">1160</a><span class="com">  <span class="op"> | </span>  div { width: 100px; }
</span></code><code id="L1161"><a href="#L1161" class="ln">1161</a><span class="com">  <span class="op"> | </span>&lt;/style>
</span></code><code id="L1162"><a href="#L1162" class="ln">1162</a><span class="com">  <span class="op"> | </span>&lt;div>Actual width is 100px&lt;/div>
</span></code><code id="L1163"><a href="#L1163" class="ln">1163</a><span class="com">  <span class="op"> * </span>Get the width:
</span></code><code id="L1164"><a href="#L1164" class="ln">1164</a><span class="com">  <span class="op"> | </span>$(<span class="str">'div'</span>).width(); <span class="com">// <span class="lit">100</span></span>
</span></code><code id="L1165"><a href="#L1165" class="ln">1165</a><span class="com">  <span class="op"> * </span>Change the width:
</span></code><code id="L1166"><a href="#L1166" class="ln">1166</a><span class="com">  <span class="op"> | </span>$(<span class="str">'div'</span>).width(<span class="lit">200</span>); <span class="com">// Now its width is <span class="lit">200</span></span>
</span></code><code id="L1167"><a href="#L1167" class="ln">1167</a><span class="com">  <span class="op"> * </span>Or passing a specific unit:
</span></code><code id="L1168"><a href="#L1168" class="ln">1168</a><span class="com">  <span class="op"> | </span>$(<span class="str">'div'</span>).width(<span class="str">'<span class="lit">50</span>%'</span>); <span class="com">// Now its width is <span class="lit">50</span>%</span>
</span></code><code id="L1169"><a href="#L1169" class="ln">1169</a><span class="com">  \*/</span>
</code><code id="L1170"><a href="#L1170" class="ln">1170</a>
</code><code id="L1171"><a href="#L1171" class="ln">1171</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L1172"><a href="#L1172" class="ln">1172</a><span class="com">  <span class="op"> * </span>$(…).height
</span></code><code id="L1173"><a href="#L1173" class="ln">1173</a><span class="com">   [ method ]
</span></code><code id="L1174"><a href="#L1174" class="ln">1174</a><span class="com">  <span class="op"> * </span>Get the current height of the first element or set the height of all matched elements.
</span></code><code id="L1175"><a href="#L1175" class="ln">1175</a><span class="com">   > Parameters
</span></code><code id="L1176"><a href="#L1176" class="ln">1176</a><span class="com">  <span class="op"> - </span>value (number|string) #optional An integer indicating the height of the element or a string height a unit of measure.
</span></code><code id="L1177"><a href="#L1177" class="ln">1177</a><span class="com">  <span class="op"> = </span>(number) the actual height of the element <span class=kwd>if</span> no parameter passed.
</span></code><code id="L1178"><a href="#L1178" class="ln">1178</a><span class="com">  <span class="op"> = </span>(object) Kimbo object.
</span></code><code id="L1179"><a href="#L1179" class="ln">1179</a><span class="com">   > Usage
</span></code><code id="L1180"><a href="#L1180" class="ln">1180</a><span class="com">  <span class="op"> | </span>&lt;style>
</span></code><code id="L1181"><a href="#L1181" class="ln">1181</a><span class="com">  <span class="op"> | </span>  div { height: 100px; }
</span></code><code id="L1182"><a href="#L1182" class="ln">1182</a><span class="com">  <span class="op"> | </span>&lt;/style>
</span></code><code id="L1183"><a href="#L1183" class="ln">1183</a><span class="com">  <span class="op"> | </span>&lt;div>Actual height is 100px&lt;/div>
</span></code><code id="L1184"><a href="#L1184" class="ln">1184</a><span class="com">  <span class="op"> * </span>Get the height:
</span></code><code id="L1185"><a href="#L1185" class="ln">1185</a><span class="com">  <span class="op"> | </span>$(<span class="str">'div'</span>).height(); <span class="com">// <span class="lit">100</span></span>
</span></code><code id="L1186"><a href="#L1186" class="ln">1186</a><span class="com">  <span class="op"> * </span>Change the height:
</span></code><code id="L1187"><a href="#L1187" class="ln">1187</a><span class="com">  <span class="op"> | </span>$(<span class="str">'div'</span>).height(<span class="lit">200</span>); <span class="com">// Now its height is <span class="lit">200</span></span>
</span></code><code id="L1188"><a href="#L1188" class="ln">1188</a><span class="com">  <span class="op"> * </span>Or passing a specific unit:
</span></code><code id="L1189"><a href="#L1189" class="ln">1189</a><span class="com">  <span class="op"> | </span>$(<span class="str">'div'</span>).height(<span class="str">'<span class="lit">50</span>%'</span>); <span class="com">// Now its height is <span class="lit">50</span>%</span>
</span></code><code id="L1190"><a href="#L1190" class="ln">1190</a><span class="com">  \*/</span>
</code><code id="L1191"><a href="#L1191" class="ln">1191</a>  Kimbo.forEach([<span class="str">'width'</span>, <span class="str">'height'</span>], <span class=kwd>function</span> (dimension) {
</code><code id="L1192"><a href="#L1192" class="ln">1192</a>    Kimbo.fn[dimension]<span class="op"> = </span><span class=kwd>function</span> (value) {
</code><code id="L1193"><a href="#L1193" class="ln">1193</a>      <span class=kwd>if</span> (!value) {
</code><code id="L1194"><a href="#L1194" class="ln">1194</a>        <span class=kwd>return</span> parseInt(<span class=kwd>this</span>.css(dimension), <span class="lit">10</span>);
</code><code id="L1195"><a href="#L1195" class="ln">1195</a>      }
</code><code id="L1196"><a href="#L1196" class="ln">1196</a>
</code><code id="L1197"><a href="#L1197" class="ln">1197</a>      <span class=kwd>return</span> <span class=kwd>this</span>.css(dimension, value);
</code><code id="L1198"><a href="#L1198" class="ln">1198</a>    };
</code><code id="L1199"><a href="#L1199" class="ln">1199</a>  });
</code><code id="L1200"><a href="#L1200" class="ln">1200</a>});
</code><code id="L1201"><a href="#L1201" class="ln">1201</a>
</code><code id="L1202"><a href="#L1202" class="ln">1202</a>
</code><code id="L1203"><a href="#L1203" class="ln">1203</a>Kimbo.define(<span class="str">'traversing'</span>, <span class=kwd>function</span> (_) {
</code><code id="L1204"><a href="#L1204" class="ln">1204</a>
</code><code id="L1205"><a href="#L1205" class="ln">1205</a>  <span class="str">'use strict'</span>;
</code><code id="L1206"><a href="#L1206" class="ln">1206</a>
</code><code id="L1207"><a href="#L1207" class="ln">1207</a>  <span class=kwd>var</span> query<span class="op"> = </span>Kimbo.require(<span class="str">'query'</span>);
</code><code id="L1208"><a href="#L1208" class="ln">1208</a>
</code><code id="L1209"><a href="#L1209" class="ln">1209</a>  <span class=kwd>var</span> _filter<span class="op"> = </span>Array.prototype.filter;
</code><code id="L1210"><a href="#L1210" class="ln">1210</a>
</code><code id="L1211"><a href="#L1211" class="ln">1211</a>  <span class=kwd>var</span> IS_UNIQUE<span class="op"> = </span>{
</code><code id="L1212"><a href="#L1212" class="ln">1212</a>    children: <span class=kwd>true</span>,
</code><code id="L1213"><a href="#L1213" class="ln">1213</a>    contents: <span class=kwd>true</span>,
</code><code id="L1214"><a href="#L1214" class="ln">1214</a>    next: <span class=kwd>true</span>,
</code><code id="L1215"><a href="#L1215" class="ln">1215</a>    prev: <span class=kwd>true</span>
</code><code id="L1216"><a href="#L1216" class="ln">1216</a>  };
</code><code id="L1217"><a href="#L1217" class="ln">1217</a>
</code><code id="L1218"><a href="#L1218" class="ln">1218</a>  <span class="com">// Use <span class=kwd>native</span> matchesSelector</span>
</code><code id="L1219"><a href="#L1219" class="ln">1219</a>  <span class=kwd>var</span> _matchesSelector<span class="op"> = </span>_.document.documentElement.webkitMatchesSelector ||
</code><code id="L1220"><a href="#L1220" class="ln">1220</a>    _.document.documentElement.mozMatchesSelector ||
</code><code id="L1221"><a href="#L1221" class="ln">1221</a>    _.document.documentElement.oMatchesSelector ||
</code><code id="L1222"><a href="#L1222" class="ln">1222</a>    _.document.documentElement.matchesSelector;
</code><code id="L1223"><a href="#L1223" class="ln">1223</a>
</code><code id="L1224"><a href="#L1224" class="ln">1224</a>  <span class=kwd>var</span> _matches<span class="op"> = </span><span class=kwd>function</span> (elem, selector) {
</code><code id="L1225"><a href="#L1225" class="ln">1225</a>    <span class=kwd>return</span> (!elem<span class="op"> || </span>elem.nodeType !== <span class="lit">1</span>) ? <span class=kwd>false</span> : _matchesSelector.call(elem, selector);
</code><code id="L1226"><a href="#L1226" class="ln">1226</a>  };
</code><code id="L1227"><a href="#L1227" class="ln">1227</a>
</code><code id="L1228"><a href="#L1228" class="ln">1228</a>  <span class="com">// Remove duplicates from an array</span>
</code><code id="L1229"><a href="#L1229" class="ln">1229</a>  <span class=kwd>var</span> _unique<span class="op"> = </span><span class=kwd>function</span> (array) {
</code><code id="L1230"><a href="#L1230" class="ln">1230</a>    <span class=kwd>return</span> array.filter(<span class=kwd>function</span> (item, index) {
</code><code id="L1231"><a href="#L1231" class="ln">1231</a>      <span class=kwd>return</span> array.indexOf(item)<span class="op"> === </span>index;
</code><code id="L1232"><a href="#L1232" class="ln">1232</a>    });
</code><code id="L1233"><a href="#L1233" class="ln">1233</a>  };
</code><code id="L1234"><a href="#L1234" class="ln">1234</a>
</code><code id="L1235"><a href="#L1235" class="ln">1235</a>  <span class=kwd>var</span> _sibling<span class="op"> = </span><span class=kwd>function</span> (node, elem) {
</code><code id="L1236"><a href="#L1236" class="ln">1236</a>    <span class=kwd>var</span> result<span class="op"> = </span>[];
</code><code id="L1237"><a href="#L1237" class="ln">1237</a>    <span class=kwd>for</span> (; node; node<span class="op"> = </span>node.nextSibling) {
</code><code id="L1238"><a href="#L1238" class="ln">1238</a>      <span class=kwd>if</span> (node.nodeType<span class="op"> === </span><span class="lit">1</span><span class="op"> &amp;&amp; </span>node !== elem ) {
</code><code id="L1239"><a href="#L1239" class="ln">1239</a>        result.push(node);
</code><code id="L1240"><a href="#L1240" class="ln">1240</a>      }
</code><code id="L1241"><a href="#L1241" class="ln">1241</a>    }
</code><code id="L1242"><a href="#L1242" class="ln">1242</a>    <span class=kwd>return</span> result;
</code><code id="L1243"><a href="#L1243" class="ln">1243</a>  };
</code><code id="L1244"><a href="#L1244" class="ln">1244</a>
</code><code id="L1245"><a href="#L1245" class="ln">1245</a>  <span class=kwd>var</span> _singleSibling<span class="op"> = </span><span class=kwd>function</span> (node, prop) {
</code><code id="L1246"><a href="#L1246" class="ln">1246</a>    <span class=kwd>do</span> {
</code><code id="L1247"><a href="#L1247" class="ln">1247</a>      node<span class="op"> = </span>node[prop];
</code><code id="L1248"><a href="#L1248" class="ln">1248</a>    } <span class=kwd>while</span> (node<span class="op"> &amp;&amp; </span>node.nodeType !== <span class="lit">1</span>);
</code><code id="L1249"><a href="#L1249" class="ln">1249</a>
</code><code id="L1250"><a href="#L1250" class="ln">1250</a>    <span class=kwd>return</span> node;
</code><code id="L1251"><a href="#L1251" class="ln">1251</a>  };
</code><code id="L1252"><a href="#L1252" class="ln">1252</a>
</code><code id="L1253"><a href="#L1253" class="ln">1253</a>  Kimbo.fn.extend({
</code><code id="L1254"><a href="#L1254" class="ln">1254</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1255"><a href="#L1255" class="ln">1255</a><span class="com">    <span class="op"> * </span>$(…).filter
</span></code><code id="L1256"><a href="#L1256" class="ln">1256</a><span class="com">     [ method ]
</span></code><code id="L1257"><a href="#L1257" class="ln">1257</a><span class="com">    <span class="op"> * </span>Filter element collection by the passed argument.
</span></code><code id="L1258"><a href="#L1258" class="ln">1258</a><span class="com">     > Parameters
</span></code><code id="L1259"><a href="#L1259" class="ln">1259</a><span class="com">    <span class="op"> - </span>selector (string|object|<span class=kwd>function</span>) The argument by which the collection will be filtered.
</span></code><code id="L1260"><a href="#L1260" class="ln">1260</a><span class="com">    <span class="op"> = </span>(object) Filtered elements collection.
</span></code><code id="L1261"><a href="#L1261" class="ln">1261</a><span class="com">     > Usage
</span></code><code id="L1262"><a href="#L1262" class="ln">1262</a><span class="com">    <span class="op"> | </span>&lt;ul>
</span></code><code id="L1263"><a href="#L1263" class="ln">1263</a><span class="com">    <span class="op"> | </span>  &lt;li>One&lt;/li>
</span></code><code id="L1264"><a href="#L1264" class="ln">1264</a><span class="com">    <span class="op"> | </span>  &lt;li>Two&lt;/li>
</span></code><code id="L1265"><a href="#L1265" class="ln">1265</a><span class="com">    <span class="op"> | </span>  &lt;li>Three&lt;/li>
</span></code><code id="L1266"><a href="#L1266" class="ln">1266</a><span class="com">    <span class="op"> | </span>  &lt;li>Four&lt;/li>
</span></code><code id="L1267"><a href="#L1267" class="ln">1267</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1268"><a href="#L1268" class="ln">1268</a><span class="com">    <span class="op"> * </span>Get even items.
</span></code><code id="L1269"><a href="#L1269" class="ln">1269</a><span class="com">    <span class="op"> | </span>$(<span class="str">'li'</span>).filter(<span class="str">':nth-child(even)'</span>).addClass(<span class="str">'even'</span>);
</span></code><code id="L1270"><a href="#L1270" class="ln">1270</a><span class="com">    <span class="op"> * </span>Only even items were affected.
</span></code><code id="L1271"><a href="#L1271" class="ln">1271</a><span class="com">    <span class="op"> | </span>&lt;ul>
</span></code><code id="L1272"><a href="#L1272" class="ln">1272</a><span class="com">    <span class="op"> | </span>  &lt;li>One&lt;/li>
</span></code><code id="L1273"><a href="#L1273" class="ln">1273</a><span class="com">    <span class="op"> | </span>  &lt;li <span class=kwd>class</span>=<span class="str">"even"</span>>Two&lt;/li>
</span></code><code id="L1274"><a href="#L1274" class="ln">1274</a><span class="com">    <span class="op"> | </span>  &lt;li>Three&lt;/li>
</span></code><code id="L1275"><a href="#L1275" class="ln">1275</a><span class="com">    <span class="op"> | </span>  &lt;li <span class=kwd>class</span>=<span class="str">"even"</span>>Four&lt;/li>
</span></code><code id="L1276"><a href="#L1276" class="ln">1276</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1277"><a href="#L1277" class="ln">1277</a><span class="com">     > Using a <span class=kwd>function</span>(index, element)
</span></code><code id="L1278"><a href="#L1278" class="ln">1278</a><span class="com">    <span class="op"> * </span>You can also filter the collection using a <span class=kwd>function</span>, receiving the current index and element <span class=kwd>in</span> the collection.
</span></code><code id="L1279"><a href="#L1279" class="ln">1279</a><span class="com">    <span class="op"> | </span>$(<span class="str">'li'</span>).filter(<span class=kwd>function</span> (index, element) {
</span></code><code id="L1280"><a href="#L1280" class="ln">1280</a><span class="com">    <span class="op"> | </span>  <span class=kwd>return</span> index<span class="op"> % </span><span class="lit">3</span><span class="op"> == </span><span class="lit">2</span>;
</span></code><code id="L1281"><a href="#L1281" class="ln">1281</a><span class="com">    <span class="op"> | </span>}).addClass(<span class="str">'red'</span>);
</span></code><code id="L1282"><a href="#L1282" class="ln">1282</a><span class="com">    <span class="op"> * </span>This will add a <span class="str">'red'</span> <span class=kwd>class</span> to the third, sixth, ninth elements and so on...
</span></code><code id="L1283"><a href="#L1283" class="ln">1283</a><span class="com">     > Filter by DOM or Kimbo object
</span></code><code id="L1284"><a href="#L1284" class="ln">1284</a><span class="com">    <span class="op"> * </span>You can also filter by a DOM or Kimbo object.
</span></code><code id="L1285"><a href="#L1285" class="ln">1285</a><span class="com">    <span class="op"> | </span>$(<span class="str">'li'</span>).filter(document.getElementById(<span class="str">'id'</span>));
</span></code><code id="L1286"><a href="#L1286" class="ln">1286</a><span class="com">    <span class="op"> | </span><span class="com">// Or a Kimbo object</span>
</span></code><code id="L1287"><a href="#L1287" class="ln">1287</a><span class="com">    <span class="op"> | </span>$(<span class="str">'li'</span>).filter($(<span class="str">'#id'</span>));
</span></code><code id="L1288"><a href="#L1288" class="ln">1288</a><span class="com">    \*/</span>
</code><code id="L1289"><a href="#L1289" class="ln">1289</a>    filter: <span class=kwd>function</span> (selector) {
</code><code id="L1290"><a href="#L1290" class="ln">1290</a>      <span class=kwd>var</span> result;
</code><code id="L1291"><a href="#L1291" class="ln">1291</a>
</code><code id="L1292"><a href="#L1292" class="ln">1292</a>      <span class="com">// Filter collection</span>
</code><code id="L1293"><a href="#L1293" class="ln">1293</a>      result<span class="op"> = </span>_filter.call(<span class=kwd>this</span>, <span class=kwd>function</span> (elem, i) {
</code><code id="L1294"><a href="#L1294" class="ln">1294</a>        <span class=kwd>var</span> ret;
</code><code id="L1295"><a href="#L1295" class="ln">1295</a>
</code><code id="L1296"><a href="#L1296" class="ln">1296</a>        <span class=kwd>if</span> (Kimbo.isFunction(selector)) {
</code><code id="L1297"><a href="#L1297" class="ln">1297</a>          ret<span class="op"> = </span>!!selector.call(elem, i, elem);
</code><code id="L1298"><a href="#L1298" class="ln">1298</a>        } <span class=kwd>else</span> <span class=kwd>if</span> (Kimbo.isString(selector)) {
</code><code id="L1299"><a href="#L1299" class="ln">1299</a>          ret<span class="op"> = </span>_matches(elem, selector);
</code><code id="L1300"><a href="#L1300" class="ln">1300</a>        } <span class=kwd>else</span> <span class=kwd>if</span> (selector.nodeType) {
</code><code id="L1301"><a href="#L1301" class="ln">1301</a>          ret<span class="op"> = </span>elem<span class="op"> === </span>selector;
</code><code id="L1302"><a href="#L1302" class="ln">1302</a>        } <span class=kwd>else</span> <span class=kwd>if</span> (selector <span class=kwd>instanceof</span> Kimbo) {
</code><code id="L1303"><a href="#L1303" class="ln">1303</a>          ret<span class="op"> = </span>elem<span class="op"> === </span>selector[<span class="lit">0</span>];
</code><code id="L1304"><a href="#L1304" class="ln">1304</a>        }
</code><code id="L1305"><a href="#L1305" class="ln">1305</a>
</code><code id="L1306"><a href="#L1306" class="ln">1306</a>        <span class=kwd>return</span> ret;
</code><code id="L1307"><a href="#L1307" class="ln">1307</a>      });
</code><code id="L1308"><a href="#L1308" class="ln">1308</a>
</code><code id="L1309"><a href="#L1309" class="ln">1309</a>      <span class=kwd>return</span> _.kimbo(result);
</code><code id="L1310"><a href="#L1310" class="ln">1310</a>    },
</code><code id="L1311"><a href="#L1311" class="ln">1311</a>
</code><code id="L1312"><a href="#L1312" class="ln">1312</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1313"><a href="#L1313" class="ln">1313</a><span class="com">    <span class="op"> * </span>$(…).eq
</span></code><code id="L1314"><a href="#L1314" class="ln">1314</a><span class="com">     [ method ]
</span></code><code id="L1315"><a href="#L1315" class="ln">1315</a><span class="com">    <span class="op"> * </span>Reduce the matched elements collection to the one at the specified index.
</span></code><code id="L1316"><a href="#L1316" class="ln">1316</a><span class="com">     > Parameters
</span></code><code id="L1317"><a href="#L1317" class="ln">1317</a><span class="com">    <span class="op"> - </span>index (number) An integer indicating the position of the element. Use a negative number to go backwards <span class=kwd>in</span> the collection.
</span></code><code id="L1318"><a href="#L1318" class="ln">1318</a><span class="com">    <span class="op"> = </span>(object) Kimbo object at specified index.
</span></code><code id="L1319"><a href="#L1319" class="ln">1319</a><span class="com">     > Usage
</span></code><code id="L1320"><a href="#L1320" class="ln">1320</a><span class="com">    <span class="op"> | </span>&lt;ul>
</span></code><code id="L1321"><a href="#L1321" class="ln">1321</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">1</span>&lt;/li>
</span></code><code id="L1322"><a href="#L1322" class="ln">1322</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">2</span>&lt;/li>
</span></code><code id="L1323"><a href="#L1323" class="ln">1323</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">3</span>&lt;/li>
</span></code><code id="L1324"><a href="#L1324" class="ln">1324</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">4</span>&lt;/li>
</span></code><code id="L1325"><a href="#L1325" class="ln">1325</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1326"><a href="#L1326" class="ln">1326</a><span class="com">    <span class="op"> * </span>Get 3rd element, index always start at <span class="lit">0</span>, so to get the 3rd we need to pass the number <span class="lit">2</span>.
</span></code><code id="L1327"><a href="#L1327" class="ln">1327</a><span class="com">    <span class="op"> | </span>$(<span class="str">'li'</span>).eq(<span class="lit">2</span>); <span class="com">// Item <span class="lit">3</span></span>
</span></code><code id="L1328"><a href="#L1328" class="ln">1328</a><span class="com">    \*/</span>
</code><code id="L1329"><a href="#L1329" class="ln">1329</a>    eq: <span class=kwd>function</span> (i) {
</code><code id="L1330"><a href="#L1330" class="ln">1330</a>      <span class=kwd>return</span> <span class=kwd>this</span>.length<span class="op"> &amp;&amp; </span>i<span class="op"> === </span>-<span class="lit">1</span> ? <span class=kwd>this</span>.slice(i) : <span class=kwd>this</span>.slice(i, i<span class="op"> + </span><span class="lit">1</span>);
</code><code id="L1331"><a href="#L1331" class="ln">1331</a>    },
</code><code id="L1332"><a href="#L1332" class="ln">1332</a>
</code><code id="L1333"><a href="#L1333" class="ln">1333</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1334"><a href="#L1334" class="ln">1334</a><span class="com">    <span class="op"> * </span>$(…).first
</span></code><code id="L1335"><a href="#L1335" class="ln">1335</a><span class="com">     [ method ]
</span></code><code id="L1336"><a href="#L1336" class="ln">1336</a><span class="com">    <span class="op"> * </span>Reduce the matched elements collection to the first <span class=kwd>in</span> the set.
</span></code><code id="L1337"><a href="#L1337" class="ln">1337</a><span class="com">    <span class="op"> = </span>(object) First Kimbo object of the collection
</span></code><code id="L1338"><a href="#L1338" class="ln">1338</a><span class="com">     > Usage
</span></code><code id="L1339"><a href="#L1339" class="ln">1339</a><span class="com">    <span class="op"> | </span>&lt;ul>
</span></code><code id="L1340"><a href="#L1340" class="ln">1340</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">1</span>&lt;/li>
</span></code><code id="L1341"><a href="#L1341" class="ln">1341</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">2</span>&lt;/li>
</span></code><code id="L1342"><a href="#L1342" class="ln">1342</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">3</span>&lt;/li>
</span></code><code id="L1343"><a href="#L1343" class="ln">1343</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1344"><a href="#L1344" class="ln">1344</a><span class="com">    <span class="op"> * </span>Get only the first element
</span></code><code id="L1345"><a href="#L1345" class="ln">1345</a><span class="com">    <span class="op"> | </span>$(<span class="str">'li'</span>).first(); <span class="com">// Item <span class="lit">1</span></span>
</span></code><code id="L1346"><a href="#L1346" class="ln">1346</a><span class="com">    \*/</span>
</code><code id="L1347"><a href="#L1347" class="ln">1347</a>    first: <span class=kwd>function</span> () {
</code><code id="L1348"><a href="#L1348" class="ln">1348</a>      <span class=kwd>return</span> <span class=kwd>this</span>.eq(<span class="lit">0</span>);
</code><code id="L1349"><a href="#L1349" class="ln">1349</a>    },
</code><code id="L1350"><a href="#L1350" class="ln">1350</a>
</code><code id="L1351"><a href="#L1351" class="ln">1351</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1352"><a href="#L1352" class="ln">1352</a><span class="com">    <span class="op"> * </span>$(…).last
</span></code><code id="L1353"><a href="#L1353" class="ln">1353</a><span class="com">     [ method ]
</span></code><code id="L1354"><a href="#L1354" class="ln">1354</a><span class="com">    <span class="op"> * </span>Reduce the matched elements collection to the last <span class=kwd>in</span> the set.
</span></code><code id="L1355"><a href="#L1355" class="ln">1355</a><span class="com">    <span class="op"> = </span>(object) Last Kimbo object of the collection
</span></code><code id="L1356"><a href="#L1356" class="ln">1356</a><span class="com">     > Usage
</span></code><code id="L1357"><a href="#L1357" class="ln">1357</a><span class="com">    <span class="op"> | </span>&lt;ul>
</span></code><code id="L1358"><a href="#L1358" class="ln">1358</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">1</span>&lt;/li>
</span></code><code id="L1359"><a href="#L1359" class="ln">1359</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">2</span>&lt;/li>
</span></code><code id="L1360"><a href="#L1360" class="ln">1360</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">3</span>&lt;/li>
</span></code><code id="L1361"><a href="#L1361" class="ln">1361</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1362"><a href="#L1362" class="ln">1362</a><span class="com">    <span class="op"> * </span>Get only the last element
</span></code><code id="L1363"><a href="#L1363" class="ln">1363</a><span class="com">    <span class="op"> | </span>$(<span class="str">'li'</span>).last(); <span class="com">// Item <span class="lit">3</span></span>
</span></code><code id="L1364"><a href="#L1364" class="ln">1364</a><span class="com">    \*/</span>
</code><code id="L1365"><a href="#L1365" class="ln">1365</a>    last: <span class=kwd>function</span> () {
</code><code id="L1366"><a href="#L1366" class="ln">1366</a>      <span class=kwd>return</span> <span class=kwd>this</span>.eq(-<span class="lit">1</span>);
</code><code id="L1367"><a href="#L1367" class="ln">1367</a>    },
</code><code id="L1368"><a href="#L1368" class="ln">1368</a>
</code><code id="L1369"><a href="#L1369" class="ln">1369</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1370"><a href="#L1370" class="ln">1370</a><span class="com">    <span class="op"> * </span>$(…).slice
</span></code><code id="L1371"><a href="#L1371" class="ln">1371</a><span class="com">     [ method ]
</span></code><code id="L1372"><a href="#L1372" class="ln">1372</a><span class="com">    <span class="op"> * </span>Reduce the matched elements collection to a subset specified by a range of indices
</span></code><code id="L1373"><a href="#L1373" class="ln">1373</a><span class="com">     > Parameters
</span></code><code id="L1374"><a href="#L1374" class="ln">1374</a><span class="com">    <span class="op"> - </span>start (number) An integer indicating the position at which the elements begin to be selected. Use a negative number to go backwards <span class=kwd>in</span> the collection.
</span></code><code id="L1375"><a href="#L1375" class="ln">1375</a><span class="com">    <span class="op"> - </span>end (number) #optional An integer indicating the position at which the elements stop being selected. Use a negative number to start at the end of the collection. If ommited, the range continues to the end.
</span></code><code id="L1376"><a href="#L1376" class="ln">1376</a><span class="com">    <span class="op"> = </span>(object) Reduced Kimbo object collection <span class=kwd>in</span> the range specified
</span></code><code id="L1377"><a href="#L1377" class="ln">1377</a><span class="com">     > Usage
</span></code><code id="L1378"><a href="#L1378" class="ln">1378</a><span class="com">    <span class="op"> | </span>&lt;ul>
</span></code><code id="L1379"><a href="#L1379" class="ln">1379</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">1</span>&lt;/li>
</span></code><code id="L1380"><a href="#L1380" class="ln">1380</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">2</span>&lt;/li>
</span></code><code id="L1381"><a href="#L1381" class="ln">1381</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">3</span>&lt;/li>
</span></code><code id="L1382"><a href="#L1382" class="ln">1382</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">4</span>&lt;/li>
</span></code><code id="L1383"><a href="#L1383" class="ln">1383</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">5</span>&lt;/li>
</span></code><code id="L1384"><a href="#L1384" class="ln">1384</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1385"><a href="#L1385" class="ln">1385</a><span class="com">    <span class="op"> * </span>This will add the <span class=kwd>class</span> selected to Item <span class="lit">3</span>, <span class="lit">4</span> and <span class="lit">5</span>, as the index starts at <span class="lit">0</span>
</span></code><code id="L1386"><a href="#L1386" class="ln">1386</a><span class="com">    <span class="op"> | </span>$(<span class="str">'li'</span>).slice(<span class="lit">2</span>).addClass(<span class="str">'selected'</span>);
</span></code><code id="L1387"><a href="#L1387" class="ln">1387</a><span class="com">    <span class="op"> * </span>This will select only Items <span class="lit">3</span> and <span class="lit">4</span>
</span></code><code id="L1388"><a href="#L1388" class="ln">1388</a><span class="com">    <span class="op"> | </span>$(<span class="str">'li'</span>).slice(<span class="lit">2</span>, <span class="lit">4</span>).addClass(<span class="str">'selected'</span>);
</span></code><code id="L1389"><a href="#L1389" class="ln">1389</a><span class="com">     > Negative index
</span></code><code id="L1390"><a href="#L1390" class="ln">1390</a><span class="com">    <span class="op"> * </span>Here only Item <span class="lit">4</span> will be selected since is the only between -<span class="lit">2</span> (Item <span class="lit">3</span>) and -<span class="lit">1</span> (Item <span class="lit">5</span>)
</span></code><code id="L1391"><a href="#L1391" class="ln">1391</a><span class="com">    <span class="op"> | </span>$(<span class="str">'li'</span>).slice(-<span class="lit">2</span>, -<span class="lit">1</span>).addClass(<span class="str">'selected'</span>);
</span></code><code id="L1392"><a href="#L1392" class="ln">1392</a><span class="com">    \*/</span>
</code><code id="L1393"><a href="#L1393" class="ln">1393</a>    slice: <span class=kwd>function</span> () {
</code><code id="L1394"><a href="#L1394" class="ln">1394</a>      <span class=kwd>return</span> <span class=kwd>this</span>.length<span class="op"> &amp;&amp; </span>_.kimbo(_.slice.apply(<span class=kwd>this</span>, arguments));
</code><code id="L1395"><a href="#L1395" class="ln">1395</a>    },
</code><code id="L1396"><a href="#L1396" class="ln">1396</a>
</code><code id="L1397"><a href="#L1397" class="ln">1397</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1398"><a href="#L1398" class="ln">1398</a><span class="com">    <span class="op"> * </span>$(…).each
</span></code><code id="L1399"><a href="#L1399" class="ln">1399</a><span class="com">     [ method ]
</span></code><code id="L1400"><a href="#L1400" class="ln">1400</a><span class="com">    <span class="op"> * </span>Iterate over a Kimbo objct, executing a <span class=kwd>function</span> <span class=kwd>for</span> each element.
</span></code><code id="L1401"><a href="#L1401" class="ln">1401</a><span class="com">     > Parameters
</span></code><code id="L1402"><a href="#L1402" class="ln">1402</a><span class="com">    <span class="op"> - </span>callback (<span class=kwd>function</span>) A <span class=kwd>function</span> to call <span class=kwd>for</span> each element <span class=kwd>in</span> the collection.
</span></code><code id="L1403"><a href="#L1403" class="ln">1403</a><span class="com">    <span class="op"> = </span>(object) Kimbo object
</span></code><code id="L1404"><a href="#L1404" class="ln">1404</a><span class="com">     > Usage
</span></code><code id="L1405"><a href="#L1405" class="ln">1405</a><span class="com">    <span class="op"> * </span>Here we have an unordered list:
</span></code><code id="L1406"><a href="#L1406" class="ln">1406</a><span class="com">    <span class="op"> | </span>&lt;ul>
</span></code><code id="L1407"><a href="#L1407" class="ln">1407</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">1</span>&lt;/li>
</span></code><code id="L1408"><a href="#L1408" class="ln">1408</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">2</span>&lt;/li>
</span></code><code id="L1409"><a href="#L1409" class="ln">1409</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">3</span>&lt;/li>
</span></code><code id="L1410"><a href="#L1410" class="ln">1410</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1411"><a href="#L1411" class="ln">1411</a><span class="com">    <span class="op"> * </span>You can iterate over all the list items and execute a <span class=kwd>function</span>
</span></code><code id="L1412"><a href="#L1412" class="ln">1412</a><span class="com">    <span class="op"> | </span>$(<span class="str">'li'</span>).each(<span class=kwd>function</span> (el, index, collection) {
</span></code><code id="L1413"><a href="#L1413" class="ln">1413</a><span class="com">    <span class="op"> | </span>  console.log(<span class="str">'index of '</span><span class="op"> + </span>$(<span class=kwd>this</span>).text()<span class="op"> + </span><span class="str">' is: '</span><span class="op"> + </span>index);
</span></code><code id="L1414"><a href="#L1414" class="ln">1414</a><span class="com">    <span class="op"> | </span>});
</span></code><code id="L1415"><a href="#L1415" class="ln">1415</a><span class="com">    <span class="op"> * </span>This will log the following message
</span></code><code id="L1416"><a href="#L1416" class="ln">1416</a><span class="com">     *
</span></code><code id="L1417"><a href="#L1417" class="ln">1417</a><span class="com">    <span class="op"> * </span>index of Item <span class="lit">1</span> is: <span class="lit">0</span>
</span></code><code id="L1418"><a href="#L1418" class="ln">1418</a><span class="com">     *
</span></code><code id="L1419"><a href="#L1419" class="ln">1419</a><span class="com">    <span class="op"> * </span>index of Item <span class="lit">2</span> is: <span class="lit">1</span>
</span></code><code id="L1420"><a href="#L1420" class="ln">1420</a><span class="com">     *
</span></code><code id="L1421"><a href="#L1421" class="ln">1421</a><span class="com">    <span class="op"> * </span>index of Item <span class="lit">3</span> is: <span class="lit">2</span>
</span></code><code id="L1422"><a href="#L1422" class="ln">1422</a><span class="com">    \*/</span>
</code><code id="L1423"><a href="#L1423" class="ln">1423</a>    each: <span class=kwd>function</span> (callback) {
</code><code id="L1424"><a href="#L1424" class="ln">1424</a>      <span class=kwd>return</span> Kimbo.forEach(<span class=kwd>this</span>, callback);
</code><code id="L1425"><a href="#L1425" class="ln">1425</a>    },
</code><code id="L1426"><a href="#L1426" class="ln">1426</a>
</code><code id="L1427"><a href="#L1427" class="ln">1427</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1428"><a href="#L1428" class="ln">1428</a><span class="com">    <span class="op"> * </span>$(…).map
</span></code><code id="L1429"><a href="#L1429" class="ln">1429</a><span class="com">     [ method ]
</span></code><code id="L1430"><a href="#L1430" class="ln">1430</a><span class="com">    <span class="op"> * </span>Execute a <span class=kwd>function</span> <span class=kwd>for</span> each element <span class=kwd>in</span> the collection, producing a <span class=kwd>new</span> Kimbo set <span class=kwd>with</span> the returned values
</span></code><code id="L1431"><a href="#L1431" class="ln">1431</a><span class="com">     > Parameters
</span></code><code id="L1432"><a href="#L1432" class="ln">1432</a><span class="com">    <span class="op"> - </span>callback (<span class=kwd>function</span>) A <span class=kwd>function</span> to call <span class=kwd>for</span> each element <span class=kwd>in</span> the collection.
</span></code><code id="L1433"><a href="#L1433" class="ln">1433</a><span class="com">    <span class="op"> = </span>(object) Kimbo object
</span></code><code id="L1434"><a href="#L1434" class="ln">1434</a><span class="com">     > Usage
</span></code><code id="L1435"><a href="#L1435" class="ln">1435</a><span class="com">    <span class="op"> * </span>Here we have an unordered list:
</span></code><code id="L1436"><a href="#L1436" class="ln">1436</a><span class="com">    <span class="op"> | </span>&lt;ul>
</span></code><code id="L1437"><a href="#L1437" class="ln">1437</a><span class="com">    <span class="op"> | </span>  &lt;li id=<span class="str">"item1"</span>>Item <span class="lit">1</span>&lt;/li>
</span></code><code id="L1438"><a href="#L1438" class="ln">1438</a><span class="com">    <span class="op"> | </span>  &lt;li id=<span class="str">"item2"</span>>Item <span class="lit">2</span>&lt;/li>
</span></code><code id="L1439"><a href="#L1439" class="ln">1439</a><span class="com">    <span class="op"> | </span>  &lt;li id=<span class="str">"item3"</span>>Item <span class="lit">3</span>&lt;/li>
</span></code><code id="L1440"><a href="#L1440" class="ln">1440</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1441"><a href="#L1441" class="ln">1441</a><span class="com">    <span class="op"> * </span>You can call a <span class=kwd>function</span> <span class=kwd>for</span> each element to create a <span class=kwd>new</span> Kimbo object
</span></code><code id="L1442"><a href="#L1442" class="ln">1442</a><span class="com">    <span class="op"> | </span>$(<span class="str">'li'</span>).map(<span class=kwd>function</span> (el, index) {
</span></code><code id="L1443"><a href="#L1443" class="ln">1443</a><span class="com">    <span class="op"> | </span>  <span class=kwd>return</span> <span class=kwd>this</span>.id;
</span></code><code id="L1444"><a href="#L1444" class="ln">1444</a><span class="com">    <span class="op"> | </span>}).get().join();
</span></code><code id="L1445"><a href="#L1445" class="ln">1445</a><span class="com">    <span class="op"> * </span>This will produce a list of the item ids.
</span></code><code id="L1446"><a href="#L1446" class="ln">1446</a><span class="com">    <span class="op"> | </span><span class="str">"item1,item2,item3"</span>
</span></code><code id="L1447"><a href="#L1447" class="ln">1447</a><span class="com">    \*/</span>
</code><code id="L1448"><a href="#L1448" class="ln">1448</a>    map: <span class=kwd>function</span> (callback) {
</code><code id="L1449"><a href="#L1449" class="ln">1449</a>      <span class=kwd>return</span> _.kimbo(Kimbo.map(<span class=kwd>this</span>, <span class=kwd>function</span> (elem, i) {
</code><code id="L1450"><a href="#L1450" class="ln">1450</a>        <span class=kwd>return</span> callback.call(elem, elem, i);
</code><code id="L1451"><a href="#L1451" class="ln">1451</a>      }));
</code><code id="L1452"><a href="#L1452" class="ln">1452</a>    },
</code><code id="L1453"><a href="#L1453" class="ln">1453</a>
</code><code id="L1454"><a href="#L1454" class="ln">1454</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1455"><a href="#L1455" class="ln">1455</a><span class="com">    <span class="op"> * </span>$(…).find
</span></code><code id="L1456"><a href="#L1456" class="ln">1456</a><span class="com">     [ method ]
</span></code><code id="L1457"><a href="#L1457" class="ln">1457</a><span class="com">    <span class="op"> * </span>Find descendant elements <span class=kwd>for</span> each element <span class=kwd>in</span> the current collection.
</span></code><code id="L1458"><a href="#L1458" class="ln">1458</a><span class="com">     > Parameters
</span></code><code id="L1459"><a href="#L1459" class="ln">1459</a><span class="com">    <span class="op"> - </span>selector (string) A string selector to match elements.
</span></code><code id="L1460"><a href="#L1460" class="ln">1460</a><span class="com">    <span class="op"> = </span>(object) Kimbo object
</span></code><code id="L1461"><a href="#L1461" class="ln">1461</a><span class="com">     > Usage
</span></code><code id="L1462"><a href="#L1462" class="ln">1462</a><span class="com">    <span class="op"> * </span>Here we have some HTML
</span></code><code id="L1463"><a href="#L1463" class="ln">1463</a><span class="com">    <span class="op"> | </span>&lt;div id=<span class="str">"container"</span>>
</span></code><code id="L1464"><a href="#L1464" class="ln">1464</a><span class="com">    <span class="op"> | </span>  &lt;p>Demo&lt;/p>
</span></code><code id="L1465"><a href="#L1465" class="ln">1465</a><span class="com">    <span class="op"> | </span>  &lt;div <span class=kwd>class</span>=<span class="str">"article"</span>>
</span></code><code id="L1466"><a href="#L1466" class="ln">1466</a><span class="com">    <span class="op"> | </span>    &lt;p>This is an article&lt;/p>
</span></code><code id="L1467"><a href="#L1467" class="ln">1467</a><span class="com">    <span class="op"> | </span>    &lt;p><span class=kwd>with</span> some paragraphs&lt;/p>
</span></code><code id="L1468"><a href="#L1468" class="ln">1468</a><span class="com">    <span class="op"> | </span>  &lt;/div>
</span></code><code id="L1469"><a href="#L1469" class="ln">1469</a><span class="com">    <span class="op"> | </span>&lt;/div>
</span></code><code id="L1470"><a href="#L1470" class="ln">1470</a><span class="com">    <span class="op"> * </span>You can find all paragraph elements inside the article:
</span></code><code id="L1471"><a href="#L1471" class="ln">1471</a><span class="com">    <span class="op"> | </span>$(<span class="str">'.article'</span>).find(<span class="str">'p'</span>);
</span></code><code id="L1472"><a href="#L1472" class="ln">1472</a><span class="com">    \*/</span>
</code><code id="L1473"><a href="#L1473" class="ln">1473</a>    find: <span class=kwd>function</span> (selector) {
</code><code id="L1474"><a href="#L1474" class="ln">1474</a>      <span class=kwd>var</span> i, l, length, n, r, result, elems;
</code><code id="L1475"><a href="#L1475" class="ln">1475</a>
</code><code id="L1476"><a href="#L1476" class="ln">1476</a>      <span class="com">// Make <span class=kwd>new</span> empty kimbo collection</span>
</code><code id="L1477"><a href="#L1477" class="ln">1477</a>      result<span class="op"> = </span>_.kimbo();
</code><code id="L1478"><a href="#L1478" class="ln">1478</a>
</code><code id="L1479"><a href="#L1479" class="ln">1479</a>      <span class="com">// Could use Kimbo.forEach, but <span class=kwd>this</span> is a bit faster..</span>
</code><code id="L1480"><a href="#L1480" class="ln">1480</a>      <span class=kwd>for</span> (i<span class="op"> = </span><span class="lit">0</span>, l<span class="op"> = </span><span class=kwd>this</span>.length; i &lt; l; i++) {
</code><code id="L1481"><a href="#L1481" class="ln">1481</a>        length<span class="op"> = </span>result.length;
</code><code id="L1482"><a href="#L1482" class="ln">1482</a>
</code><code id="L1483"><a href="#L1483" class="ln">1483</a>        <span class="com">// Get elements</span>
</code><code id="L1484"><a href="#L1484" class="ln">1484</a>        elems<span class="op"> = </span>query.find(<span class=kwd>this</span>[i], selector);
</code><code id="L1485"><a href="#L1485" class="ln">1485</a>
</code><code id="L1486"><a href="#L1486" class="ln">1486</a>        <span class="com">// Push them to current kimbo collection</span>
</code><code id="L1487"><a href="#L1487" class="ln">1487</a>        _.push.apply(result, elems);
</code><code id="L1488"><a href="#L1488" class="ln">1488</a>
</code><code id="L1489"><a href="#L1489" class="ln">1489</a>        <span class=kwd>if</span> (i) {
</code><code id="L1490"><a href="#L1490" class="ln">1490</a>
</code><code id="L1491"><a href="#L1491" class="ln">1491</a>          <span class="com">// Make results unique</span>
</code><code id="L1492"><a href="#L1492" class="ln">1492</a>          <span class=kwd>for</span> (n<span class="op"> = </span>length; n &lt; result.length; n++) {
</code><code id="L1493"><a href="#L1493" class="ln">1493</a>            <span class=kwd>for</span> (r<span class="op"> = </span><span class="lit">0</span>; r &lt; length; r++) {
</code><code id="L1494"><a href="#L1494" class="ln">1494</a>              <span class=kwd>if</span> (result[r]<span class="op"> === </span>result[n]) {
</code><code id="L1495"><a href="#L1495" class="ln">1495</a>                result.splice(n--, <span class="lit">1</span>);
</code><code id="L1496"><a href="#L1496" class="ln">1496</a>                <span class=kwd>break</span>;
</code><code id="L1497"><a href="#L1497" class="ln">1497</a>              }
</code><code id="L1498"><a href="#L1498" class="ln">1498</a>            }
</code><code id="L1499"><a href="#L1499" class="ln">1499</a>          }
</code><code id="L1500"><a href="#L1500" class="ln">1500</a>        }
</code><code id="L1501"><a href="#L1501" class="ln">1501</a>      }
</code><code id="L1502"><a href="#L1502" class="ln">1502</a>
</code><code id="L1503"><a href="#L1503" class="ln">1503</a>      <span class=kwd>return</span> result;
</code><code id="L1504"><a href="#L1504" class="ln">1504</a>    },
</code><code id="L1505"><a href="#L1505" class="ln">1505</a>
</code><code id="L1506"><a href="#L1506" class="ln">1506</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1507"><a href="#L1507" class="ln">1507</a><span class="com">    <span class="op"> * </span>$(…).closest
</span></code><code id="L1508"><a href="#L1508" class="ln">1508</a><span class="com">     [ method ]
</span></code><code id="L1509"><a href="#L1509" class="ln">1509</a><span class="com">    <span class="op"> * </span>Get a Kimbo collection that matches the closest selector
</span></code><code id="L1510"><a href="#L1510" class="ln">1510</a><span class="com">     > Parameters
</span></code><code id="L1511"><a href="#L1511" class="ln">1511</a><span class="com">    <span class="op"> - </span>selector (string) A string selector to match elements.
</span></code><code id="L1512"><a href="#L1512" class="ln">1512</a><span class="com">    <span class="op"> - </span>context (string) #optional A DOM element within which matching elements may be found.
</span></code><code id="L1513"><a href="#L1513" class="ln">1513</a><span class="com">    <span class="op"> = </span>(object) Kimbo object
</span></code><code id="L1514"><a href="#L1514" class="ln">1514</a><span class="com">     > Usage
</span></code><code id="L1515"><a href="#L1515" class="ln">1515</a><span class="com">    <span class="op"> * </span>Here we have a nested unordered lists:
</span></code><code id="L1516"><a href="#L1516" class="ln">1516</a><span class="com">    <span class="op"> | </span>&lt;ul>
</span></code><code id="L1517"><a href="#L1517" class="ln">1517</a><span class="com">    <span class="op"> | </span>  &lt;li>
</span></code><code id="L1518"><a href="#L1518" class="ln">1518</a><span class="com">    <span class="op"> | </span>    Item <span class="lit">1</span>
</span></code><code id="L1519"><a href="#L1519" class="ln">1519</a><span class="com">    <span class="op"> | </span>    &lt;ul <span class=kwd>class</span>=<span class="str">"ul-level-<span class="lit">2</span>"</span>>
</span></code><code id="L1520"><a href="#L1520" class="ln">1520</a><span class="com">    <span class="op"> | </span>      &lt;li <span class=kwd>class</span>=<span class="str">"item-<span class="lit">1</span>-<span class="lit">1</span>"</span>>Item <span class="lit">1.1</span>&lt;/li>
</span></code><code id="L1521"><a href="#L1521" class="ln">1521</a><span class="com">    <span class="op"> | </span>      &lt;li <span class=kwd>class</span>=<span class="str">"item-<span class="lit">1</span>-<span class="lit">2</span>"</span>>Item <span class="lit">1.2</span>&lt;/li>
</span></code><code id="L1522"><a href="#L1522" class="ln">1522</a><span class="com">    <span class="op"> | </span>    &lt;/ul>
</span></code><code id="L1523"><a href="#L1523" class="ln">1523</a><span class="com">    <span class="op"> | </span>  &lt;/li>
</span></code><code id="L1524"><a href="#L1524" class="ln">1524</a><span class="com">    <span class="op"> | </span>  &lt;li>Item <span class="lit">2</span>&lt;/li>
</span></code><code id="L1525"><a href="#L1525" class="ln">1525</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1526"><a href="#L1526" class="ln">1526</a><span class="com">    <span class="op"> * </span>You can find the containing ul of the items <span class=kwd>in</span> the nested ul:
</span></code><code id="L1527"><a href="#L1527" class="ln">1527</a><span class="com">    <span class="op"> | </span>$(<span class="str">'.item-<span class="lit">1</span>-<span class="lit">1</span>'</span>).closest(<span class="str">'ul'</span>);
</span></code><code id="L1528"><a href="#L1528" class="ln">1528</a><span class="com">    <span class="op"> * </span>This will <span class=kwd>return</span> `ul.level-<span class="lit">2</span>` element
</span></code><code id="L1529"><a href="#L1529" class="ln">1529</a><span class="com">    \*/</span>
</code><code id="L1530"><a href="#L1530" class="ln">1530</a>    closest: <span class=kwd>function</span> (selector, context) {
</code><code id="L1531"><a href="#L1531" class="ln">1531</a>      <span class=kwd>var</span> l<span class="op"> = </span><span class=kwd>this</span>.length;
</code><code id="L1532"><a href="#L1532" class="ln">1532</a>      <span class=kwd>var</span> result<span class="op"> = </span>[];
</code><code id="L1533"><a href="#L1533" class="ln">1533</a>      <span class=kwd>var</span> closest<span class="op"> = </span><span class=kwd>function</span> (node) {
</code><code id="L1534"><a href="#L1534" class="ln">1534</a>
</code><code id="L1535"><a href="#L1535" class="ln">1535</a>        <span class="com">// Check selector match and grab the element</span>
</code><code id="L1536"><a href="#L1536" class="ln">1536</a>        <span class=kwd>while</span> (node<span class="op"> &amp;&amp; </span>!_matches(node, selector)) {
</code><code id="L1537"><a href="#L1537" class="ln">1537</a>          node<span class="op"> = </span>node !== context<span class="op"> &amp;&amp; </span>node !== _.document<span class="op"> &amp;&amp; </span>node.parentNode;
</code><code id="L1538"><a href="#L1538" class="ln">1538</a>        }
</code><code id="L1539"><a href="#L1539" class="ln">1539</a>        <span class=kwd>return</span> node;
</code><code id="L1540"><a href="#L1540" class="ln">1540</a>      };
</code><code id="L1541"><a href="#L1541" class="ln">1541</a>
</code><code id="L1542"><a href="#L1542" class="ln">1542</a>      <span class=kwd>if</span> (!l) {
</code><code id="L1543"><a href="#L1543" class="ln">1543</a>        <span class=kwd>return</span> <span class=kwd>this</span>;
</code><code id="L1544"><a href="#L1544" class="ln">1544</a>
</code><code id="L1545"><a href="#L1545" class="ln">1545</a>      <span class="com">// Get closest only <span class=kwd>for</span> one element</span>
</code><code id="L1546"><a href="#L1546" class="ln">1546</a>      } <span class=kwd>else</span> <span class=kwd>if</span> (l<span class="op"> === </span><span class="lit">1</span>) {
</code><code id="L1547"><a href="#L1547" class="ln">1547</a>        result<span class="op"> = </span>closest(<span class=kwd>this</span>[<span class="lit">0</span>]);
</code><code id="L1548"><a href="#L1548" class="ln">1548</a>
</code><code id="L1549"><a href="#L1549" class="ln">1549</a>      <span class="com">// Get closest from all elements <span class=kwd>in</span> the set</span>
</code><code id="L1550"><a href="#L1550" class="ln">1550</a>      } <span class=kwd>else</span> {
</code><code id="L1551"><a href="#L1551" class="ln">1551</a>        Kimbo.forEach(<span class=kwd>this</span>, <span class=kwd>function</span> (node) {
</code><code id="L1552"><a href="#L1552" class="ln">1552</a>          node<span class="op"> = </span>closest(node);
</code><code id="L1553"><a href="#L1553" class="ln">1553</a>          <span class=kwd>if</span> (node) {
</code><code id="L1554"><a href="#L1554" class="ln">1554</a>            result.push(node);
</code><code id="L1555"><a href="#L1555" class="ln">1555</a>          }
</code><code id="L1556"><a href="#L1556" class="ln">1556</a>        });
</code><code id="L1557"><a href="#L1557" class="ln">1557</a>
</code><code id="L1558"><a href="#L1558" class="ln">1558</a>        <span class="com">// Only unique results</span>
</code><code id="L1559"><a href="#L1559" class="ln">1559</a>        result<span class="op"> = </span>result.length > <span class="lit">1</span> ? _unique(result) : result;
</code><code id="L1560"><a href="#L1560" class="ln">1560</a>      }
</code><code id="L1561"><a href="#L1561" class="ln">1561</a>
</code><code id="L1562"><a href="#L1562" class="ln">1562</a>      <span class=kwd>return</span> _.kimbo(result);
</code><code id="L1563"><a href="#L1563" class="ln">1563</a>    },
</code><code id="L1564"><a href="#L1564" class="ln">1564</a>
</code><code id="L1565"><a href="#L1565" class="ln">1565</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1566"><a href="#L1566" class="ln">1566</a><span class="com">    <span class="op"> * </span>$(…).contains
</span></code><code id="L1567"><a href="#L1567" class="ln">1567</a><span class="com">     [ method ]
</span></code><code id="L1568"><a href="#L1568" class="ln">1568</a><span class="com">    <span class="op"> * </span>Determine whether an element is contained by the current matched element.
</span></code><code id="L1569"><a href="#L1569" class="ln">1569</a><span class="com">     > Parameters
</span></code><code id="L1570"><a href="#L1570" class="ln">1570</a><span class="com">    <span class="op"> - </span>element (string|object) Selector of the element or the actual DOM or Kimbo object.
</span></code><code id="L1571"><a href="#L1571" class="ln">1571</a><span class="com">    <span class="op"> = </span>(<span class=kwd>boolean</span>) <span class=kwd>true</span> <span class=kwd>if</span> it is contained, <span class=kwd>false</span> <span class=kwd>if</span> not.
</span></code><code id="L1572"><a href="#L1572" class="ln">1572</a><span class="com">     > Usage
</span></code><code id="L1573"><a href="#L1573" class="ln">1573</a><span class="com">    <span class="op"> | </span>&lt;div id=<span class="str">"container"</span>>
</span></code><code id="L1574"><a href="#L1574" class="ln">1574</a><span class="com">    <span class="op"> | </span>  &lt;p id=<span class="str">"inside"</span>>Inside paragraph&lt;/p>
</span></code><code id="L1575"><a href="#L1575" class="ln">1575</a><span class="com">    <span class="op"> | </span>&lt;/div>
</span></code><code id="L1576"><a href="#L1576" class="ln">1576</a><span class="com">    <span class="op"> | </span>&lt;p id=<span class="str">"outside"</span>>Outside paragraph&lt;/p>
</span></code><code id="L1577"><a href="#L1577" class="ln">1577</a><span class="com">    <span class="op"> * </span>The paragraph <span class=kwd>with</span> id <span class="str">"inside"</span> is actually contained by <span class="str">"#container"</span>
</span></code><code id="L1578"><a href="#L1578" class="ln">1578</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#container'</span>).contains(<span class="str">'#inside'</span>); <span class="com">// True</span>
</span></code><code id="L1579"><a href="#L1579" class="ln">1579</a><span class="com">    <span class="op"> * </span>The paragraph ourside is not contained
</span></code><code id="L1580"><a href="#L1580" class="ln">1580</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> outside_p<span class="op"> = </span>$(<span class="str">'#outside'</span>);
</span></code><code id="L1581"><a href="#L1581" class="ln">1581</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#container'</span>).contains(outside_p); <span class="com">// False</span>
</span></code><code id="L1582"><a href="#L1582" class="ln">1582</a><span class="com">    \*/</span>
</code><code id="L1583"><a href="#L1583" class="ln">1583</a>    contains: <span class=kwd>function</span> (element) {
</code><code id="L1584"><a href="#L1584" class="ln">1584</a>      element<span class="op"> = </span>(element <span class=kwd>instanceof</span> Kimbo) ? element[<span class="lit">0</span>] :
</code><code id="L1585"><a href="#L1585" class="ln">1585</a>        (Kimbo.isString(element) ? <span class=kwd>this</span>.find(element)[<span class="lit">0</span>] : element);
</code><code id="L1586"><a href="#L1586" class="ln">1586</a>
</code><code id="L1587"><a href="#L1587" class="ln">1587</a>      <span class=kwd>return</span> query.contains(<span class=kwd>this</span>[<span class="lit">0</span>], element);
</code><code id="L1588"><a href="#L1588" class="ln">1588</a>    },
</code><code id="L1589"><a href="#L1589" class="ln">1589</a>
</code><code id="L1590"><a href="#L1590" class="ln">1590</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1591"><a href="#L1591" class="ln">1591</a><span class="com">    <span class="op"> * </span>$(…).add
</span></code><code id="L1592"><a href="#L1592" class="ln">1592</a><span class="com">     [ method ]
</span></code><code id="L1593"><a href="#L1593" class="ln">1593</a><span class="com">    <span class="op"> * </span>Add elements to the current Kimbo collection.
</span></code><code id="L1594"><a href="#L1594" class="ln">1594</a><span class="com">     > Parameters
</span></code><code id="L1595"><a href="#L1595" class="ln">1595</a><span class="com">    <span class="op"> - </span>selector (string|object) Selector of the element or the actual DOM or Kimbo object.
</span></code><code id="L1596"><a href="#L1596" class="ln">1596</a><span class="com">    <span class="op"> - </span>context (string|object) #optional Selector of the context element or the actual DOM or Kimbo object.
</span></code><code id="L1597"><a href="#L1597" class="ln">1597</a><span class="com">    <span class="op"> = </span>(object) The merged Kimbo collection.
</span></code><code id="L1598"><a href="#L1598" class="ln">1598</a><span class="com">     > Usage
</span></code><code id="L1599"><a href="#L1599" class="ln">1599</a><span class="com">    <span class="op"> | </span>&lt;ul id=<span class="str">"menu1"</span>>
</span></code><code id="L1600"><a href="#L1600" class="ln">1600</a><span class="com">    <span class="op"> | </span>  &lt;li>Apple&lt;/li>
</span></code><code id="L1601"><a href="#L1601" class="ln">1601</a><span class="com">    <span class="op"> | </span>  &lt;li>Orange&lt;/li>
</span></code><code id="L1602"><a href="#L1602" class="ln">1602</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1603"><a href="#L1603" class="ln">1603</a><span class="com">     |
</span></code><code id="L1604"><a href="#L1604" class="ln">1604</a><span class="com">    <span class="op"> | </span>&lt;ul id=<span class="str">"menu2"</span>>
</span></code><code id="L1605"><a href="#L1605" class="ln">1605</a><span class="com">    <span class="op"> | </span>  &lt;li>Lemon&lt;/li>
</span></code><code id="L1606"><a href="#L1606" class="ln">1606</a><span class="com">    <span class="op"> | </span>  &lt;li>Banana&lt;/li>
</span></code><code id="L1607"><a href="#L1607" class="ln">1607</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1608"><a href="#L1608" class="ln">1608</a><span class="com">    <span class="op"> * </span>Get the items from the #menu1 and add the ones from #menu2, all the following ways will produce the same collection
</span></code><code id="L1609"><a href="#L1609" class="ln">1609</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#menu1 li'</span>).add(<span class="str">'#menu2 li'</span>);
</span></code><code id="L1610"><a href="#L1610" class="ln">1610</a><span class="com">    <span class="op"> * </span>or
</span></code><code id="L1611"><a href="#L1611" class="ln">1611</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#menu1 li'</span>).add(<span class="str">'li'</span>, <span class="str">'#menu2'</span>);
</span></code><code id="L1612"><a href="#L1612" class="ln">1612</a><span class="com">    <span class="op"> * </span>or
</span></code><code id="L1613"><a href="#L1613" class="ln">1613</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#menu1 li'</span>).add($(<span class="str">'#menu2 li'</span>));
</span></code><code id="L1614"><a href="#L1614" class="ln">1614</a><span class="com">    \*/</span>
</code><code id="L1615"><a href="#L1615" class="ln">1615</a>    add: <span class=kwd>function</span> (selector, context) {
</code><code id="L1616"><a href="#L1616" class="ln">1616</a>      <span class=kwd>var</span> set<span class="op"> = </span>Kimbo.isString(selector) ? _.kimbo(selector, context) :
</code><code id="L1617"><a href="#L1617" class="ln">1617</a>        Kimbo.makeArray(selector<span class="op"> &amp;&amp; </span>selector.nodeType ? [selector] : selector);
</code><code id="L1618"><a href="#L1618" class="ln">1618</a>
</code><code id="L1619"><a href="#L1619" class="ln">1619</a>      <span class=kwd>var</span> all<span class="op"> = </span>Kimbo.merge(<span class=kwd>this</span>, set);
</code><code id="L1620"><a href="#L1620" class="ln">1620</a>
</code><code id="L1621"><a href="#L1621" class="ln">1621</a>      <span class=kwd>return</span> _.kimbo(all);
</code><code id="L1622"><a href="#L1622" class="ln">1622</a>    },
</code><code id="L1623"><a href="#L1623" class="ln">1623</a>
</code><code id="L1624"><a href="#L1624" class="ln">1624</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1625"><a href="#L1625" class="ln">1625</a><span class="com">    <span class="op"> * </span>$(…).is
</span></code><code id="L1626"><a href="#L1626" class="ln">1626</a><span class="com">     [ method ]
</span></code><code id="L1627"><a href="#L1627" class="ln">1627</a><span class="com">    <span class="op"> * </span>Check the current elements collection against a selector, object or <span class=kwd>function</span>.
</span></code><code id="L1628"><a href="#L1628" class="ln">1628</a><span class="com">    <span class="op"> - </span>selector (string|object|<span class=kwd>function</span>) The argument by which the collection will be matched against.
</span></code><code id="L1629"><a href="#L1629" class="ln">1629</a><span class="com">    <span class="op"> = </span>(<span class=kwd>boolean</span>)
</span></code><code id="L1630"><a href="#L1630" class="ln">1630</a><span class="com">     > Usage
</span></code><code id="L1631"><a href="#L1631" class="ln">1631</a><span class="com">    <span class="op"> | </span>&lt;ul>
</span></code><code id="L1632"><a href="#L1632" class="ln">1632</a><span class="com">    <span class="op"> | </span>  &lt;li>Click the &lt;em>Apple&lt;/em>&lt;/li>
</span></code><code id="L1633"><a href="#L1633" class="ln">1633</a><span class="com">    <span class="op"> | </span>  &lt;li>&lt;span>Click the Orange&lt;/span>&lt;/li>
</span></code><code id="L1634"><a href="#L1634" class="ln">1634</a><span class="com">    <span class="op"> | </span>  &lt;li>Or the Banana&lt;/li>
</span></code><code id="L1635"><a href="#L1635" class="ln">1635</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1636"><a href="#L1636" class="ln">1636</a><span class="com">    <span class="op"> * </span>Test <span class=kwd>if</span> the current clicked element is an `&lt;li>` element.
</span></code><code id="L1637"><a href="#L1637" class="ln">1637</a><span class="com">    <span class="op"> | </span>$(<span class="str">'ul'</span>).click(<span class=kwd>function</span> (event) {
</span></code><code id="L1638"><a href="#L1638" class="ln">1638</a><span class="com">    <span class="op"> | </span>  <span class=kwd>var</span> $target<span class="op"> = </span>$(event.target);
</span></code><code id="L1639"><a href="#L1639" class="ln">1639</a><span class="com">    <span class="op"> | </span>  <span class=kwd>if</span> ($target.is(<span class="str">'li'</span>)) {
</span></code><code id="L1640"><a href="#L1640" class="ln">1640</a><span class="com">    <span class="op"> | </span>    $target.css(<span class="str">'background-color'</span>, <span class="str">'red'</span>);
</span></code><code id="L1641"><a href="#L1641" class="ln">1641</a><span class="com">    <span class="op"> | </span>  }
</span></code><code id="L1642"><a href="#L1642" class="ln">1642</a><span class="com">    <span class="op"> | </span>});
</span></code><code id="L1643"><a href="#L1643" class="ln">1643</a><span class="com">    \*/</span>
</code><code id="L1644"><a href="#L1644" class="ln">1644</a>    is: <span class=kwd>function</span> (selector) {
</code><code id="L1645"><a href="#L1645" class="ln">1645</a>      <span class=kwd>return</span> !!(<span class=kwd>this</span>.length<span class="op"> &amp;&amp; </span><span class=kwd>this</span>.filter(selector).length);
</code><code id="L1646"><a href="#L1646" class="ln">1646</a>    }
</code><code id="L1647"><a href="#L1647" class="ln">1647</a>  });
</code><code id="L1648"><a href="#L1648" class="ln">1648</a>
</code><code id="L1649"><a href="#L1649" class="ln">1649</a>  Kimbo.forEach({
</code><code id="L1650"><a href="#L1650" class="ln">1650</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1651"><a href="#L1651" class="ln">1651</a><span class="com">    <span class="op"> * </span>$(…).parent
</span></code><code id="L1652"><a href="#L1652" class="ln">1652</a><span class="com">     [ method ]
</span></code><code id="L1653"><a href="#L1653" class="ln">1653</a><span class="com">    <span class="op"> * </span>Get the parent of each element matched <span class=kwd>in</span> the current collection.
</span></code><code id="L1654"><a href="#L1654" class="ln">1654</a><span class="com">    <span class="op"> * </span>If a selector is specified, it will <span class=kwd>return</span> the parent element only <span class=kwd>if</span> it matches that selector.
</span></code><code id="L1655"><a href="#L1655" class="ln">1655</a><span class="com">    <span class="op"> - </span>selector (string) #optional A string containing a selector expression to match elements against
</span></code><code id="L1656"><a href="#L1656" class="ln">1656</a><span class="com">    <span class="op"> = </span>(object) Kimbo object
</span></code><code id="L1657"><a href="#L1657" class="ln">1657</a><span class="com">     > Usage
</span></code><code id="L1658"><a href="#L1658" class="ln">1658</a><span class="com">    <span class="op"> * </span>Suppose a page <span class=kwd>with</span> <span class=kwd>this</span> HTML:
</span></code><code id="L1659"><a href="#L1659" class="ln">1659</a><span class="com">    <span class="op"> | </span>&lt;ul>
</span></code><code id="L1660"><a href="#L1660" class="ln">1660</a><span class="com">    <span class="op"> | </span>  &lt;li <span class=kwd>class</span>=<span class="str">"item-a"</span>>Item <span class="lit">1</span>&lt;/li>
</span></code><code id="L1661"><a href="#L1661" class="ln">1661</a><span class="com">    <span class="op"> | </span>  &lt;li <span class=kwd>class</span>=<span class="str">"item-b"</span>>Item <span class="lit">2</span>&lt;/li>
</span></code><code id="L1662"><a href="#L1662" class="ln">1662</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1663"><a href="#L1663" class="ln">1663</a><span class="com">    <span class="op"> * </span>Get the parent element of `.item-a`
</span></code><code id="L1664"><a href="#L1664" class="ln">1664</a><span class="com">    <span class="op"> | </span>$(<span class="str">'.item-a'</span>).parent(); <span class="com">// Ul</span>
</span></code><code id="L1665"><a href="#L1665" class="ln">1665</a><span class="com">    \*/</span>
</code><code id="L1666"><a href="#L1666" class="ln">1666</a>    parent: <span class=kwd>function</span> (elem) {
</code><code id="L1667"><a href="#L1667" class="ln">1667</a>      <span class=kwd>var</span> parent<span class="op"> = </span>elem.parentNode;
</code><code id="L1668"><a href="#L1668" class="ln">1668</a>
</code><code id="L1669"><a href="#L1669" class="ln">1669</a>      <span class=kwd>return</span> parent<span class="op"> &amp;&amp; </span>parent.nodeType !== <span class="lit">11</span> ? parent : <span class=kwd>null</span>;
</code><code id="L1670"><a href="#L1670" class="ln">1670</a>    },
</code><code id="L1671"><a href="#L1671" class="ln">1671</a>
</code><code id="L1672"><a href="#L1672" class="ln">1672</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1673"><a href="#L1673" class="ln">1673</a><span class="com">    <span class="op"> * </span>$(…).next
</span></code><code id="L1674"><a href="#L1674" class="ln">1674</a><span class="com">     [ method ]
</span></code><code id="L1675"><a href="#L1675" class="ln">1675</a><span class="com">    <span class="op"> * </span>Get the immedeately following sibling of each element <span class=kwd>in</span> the current collection.
</span></code><code id="L1676"><a href="#L1676" class="ln">1676</a><span class="com">    <span class="op"> * </span>If a selector is specified, it will <span class=kwd>return</span> the element only <span class=kwd>if</span> it matches that selector.
</span></code><code id="L1677"><a href="#L1677" class="ln">1677</a><span class="com">    <span class="op"> - </span>selector (string) #optional A string containing a selector expression to match elements against
</span></code><code id="L1678"><a href="#L1678" class="ln">1678</a><span class="com">    <span class="op"> = </span>(object) Kimbo object
</span></code><code id="L1679"><a href="#L1679" class="ln">1679</a><span class="com">     > Usage
</span></code><code id="L1680"><a href="#L1680" class="ln">1680</a><span class="com">    <span class="op"> * </span>Suppose a page <span class=kwd>with</span> <span class=kwd>this</span> HTML:
</span></code><code id="L1681"><a href="#L1681" class="ln">1681</a><span class="com">    <span class="op"> | </span>&lt;ul>
</span></code><code id="L1682"><a href="#L1682" class="ln">1682</a><span class="com">    <span class="op"> | </span>  &lt;li <span class=kwd>class</span>=<span class="str">"item-a"</span>>Item <span class="lit">1</span>&lt;/li>
</span></code><code id="L1683"><a href="#L1683" class="ln">1683</a><span class="com">    <span class="op"> | </span>  &lt;li <span class=kwd>class</span>=<span class="str">"item-b"</span>>Item <span class="lit">2</span>&lt;/li>
</span></code><code id="L1684"><a href="#L1684" class="ln">1684</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1685"><a href="#L1685" class="ln">1685</a><span class="com">    <span class="op"> * </span>Get the parent element of `.item-a`
</span></code><code id="L1686"><a href="#L1686" class="ln">1686</a><span class="com">    <span class="op"> | </span>$(<span class="str">'.item-a'</span>).next(); <span class="com">// .item-b</span>
</span></code><code id="L1687"><a href="#L1687" class="ln">1687</a><span class="com">    \*/</span>
</code><code id="L1688"><a href="#L1688" class="ln">1688</a>    next: <span class=kwd>function</span> (elem) {
</code><code id="L1689"><a href="#L1689" class="ln">1689</a>      <span class=kwd>return</span> _singleSibling(elem, <span class="str">'nextSibling'</span>);
</code><code id="L1690"><a href="#L1690" class="ln">1690</a>    },
</code><code id="L1691"><a href="#L1691" class="ln">1691</a>
</code><code id="L1692"><a href="#L1692" class="ln">1692</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1693"><a href="#L1693" class="ln">1693</a><span class="com">    <span class="op"> * </span>$(…).prev
</span></code><code id="L1694"><a href="#L1694" class="ln">1694</a><span class="com">     [ method ]
</span></code><code id="L1695"><a href="#L1695" class="ln">1695</a><span class="com">    <span class="op"> * </span>Get the immedeately previous sibling of each element <span class=kwd>in</span> the current collection.
</span></code><code id="L1696"><a href="#L1696" class="ln">1696</a><span class="com">    <span class="op"> * </span>If a selector is specified, it will <span class=kwd>return</span> the element only <span class=kwd>if</span> it matches that selector.
</span></code><code id="L1697"><a href="#L1697" class="ln">1697</a><span class="com">    <span class="op"> - </span>selector (string) #optional A string containing a selector expression to match elements against
</span></code><code id="L1698"><a href="#L1698" class="ln">1698</a><span class="com">    <span class="op"> = </span>(object) Kimbo object
</span></code><code id="L1699"><a href="#L1699" class="ln">1699</a><span class="com">     > Usage
</span></code><code id="L1700"><a href="#L1700" class="ln">1700</a><span class="com">    <span class="op"> * </span>Suppose a page <span class=kwd>with</span> <span class=kwd>this</span> HTML:
</span></code><code id="L1701"><a href="#L1701" class="ln">1701</a><span class="com">    <span class="op"> | </span>&lt;ul>
</span></code><code id="L1702"><a href="#L1702" class="ln">1702</a><span class="com">    <span class="op"> | </span>  &lt;li <span class=kwd>class</span>=<span class="str">"item-a"</span>>Item <span class="lit">1</span>&lt;/li>
</span></code><code id="L1703"><a href="#L1703" class="ln">1703</a><span class="com">    <span class="op"> | </span>  &lt;li <span class=kwd>class</span>=<span class="str">"item-b"</span>>Item <span class="lit">2</span>&lt;/li>
</span></code><code id="L1704"><a href="#L1704" class="ln">1704</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1705"><a href="#L1705" class="ln">1705</a><span class="com">    <span class="op"> * </span>Get the parent element of `.item-a`
</span></code><code id="L1706"><a href="#L1706" class="ln">1706</a><span class="com">    <span class="op"> | </span>$(<span class="str">'.item-b'</span>).prev(); <span class="com">// .item-a</span>
</span></code><code id="L1707"><a href="#L1707" class="ln">1707</a><span class="com">    \*/</span>
</code><code id="L1708"><a href="#L1708" class="ln">1708</a>    prev: <span class=kwd>function</span> (elem) {
</code><code id="L1709"><a href="#L1709" class="ln">1709</a>      <span class=kwd>return</span> _singleSibling(elem, <span class="str">'previousSibling'</span>);
</code><code id="L1710"><a href="#L1710" class="ln">1710</a>    },
</code><code id="L1711"><a href="#L1711" class="ln">1711</a>
</code><code id="L1712"><a href="#L1712" class="ln">1712</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1713"><a href="#L1713" class="ln">1713</a><span class="com">    <span class="op"> * </span>$(…).sibling
</span></code><code id="L1714"><a href="#L1714" class="ln">1714</a><span class="com">     [ method ]
</span></code><code id="L1715"><a href="#L1715" class="ln">1715</a><span class="com">    <span class="op"> * </span>Get the immedeately previous sibling of each element <span class=kwd>in</span> the current collection.
</span></code><code id="L1716"><a href="#L1716" class="ln">1716</a><span class="com">    <span class="op"> * </span>If a selector is specified, it will <span class=kwd>return</span> the element only <span class=kwd>if</span> it matches that selector.
</span></code><code id="L1717"><a href="#L1717" class="ln">1717</a><span class="com">    <span class="op"> - </span>selector (string) #optional A string containing a selector expression to match elements against
</span></code><code id="L1718"><a href="#L1718" class="ln">1718</a><span class="com">    <span class="op"> = </span>(object) Kimbo object
</span></code><code id="L1719"><a href="#L1719" class="ln">1719</a><span class="com">     > Usage
</span></code><code id="L1720"><a href="#L1720" class="ln">1720</a><span class="com">    <span class="op"> * </span>Suppose a page <span class=kwd>with</span> <span class=kwd>this</span> HTML:
</span></code><code id="L1721"><a href="#L1721" class="ln">1721</a><span class="com">    <span class="op"> | </span>&lt;ul>
</span></code><code id="L1722"><a href="#L1722" class="ln">1722</a><span class="com">    <span class="op"> | </span>  &lt;li <span class=kwd>class</span>=<span class="str">"item-a"</span>>Item <span class="lit">1</span>&lt;/li>
</span></code><code id="L1723"><a href="#L1723" class="ln">1723</a><span class="com">    <span class="op"> | </span>  &lt;li <span class=kwd>class</span>=<span class="str">"item-b"</span>>Item <span class="lit">2</span>&lt;/li>
</span></code><code id="L1724"><a href="#L1724" class="ln">1724</a><span class="com">    <span class="op"> | </span>&lt;/ul>
</span></code><code id="L1725"><a href="#L1725" class="ln">1725</a><span class="com">    <span class="op"> * </span>Get the parent element of `.item-a`
</span></code><code id="L1726"><a href="#L1726" class="ln">1726</a><span class="com">    <span class="op"> | </span>$(<span class="str">'.item-b'</span>).prev(); <span class="com">// .item-a</span>
</span></code><code id="L1727"><a href="#L1727" class="ln">1727</a><span class="com">    \*/</span>
</code><code id="L1728"><a href="#L1728" class="ln">1728</a>    siblings: <span class=kwd>function</span> (elem) {
</code><code id="L1729"><a href="#L1729" class="ln">1729</a>      <span class=kwd>return</span> _sibling((elem.parentNode<span class="op"> || </span>{}).firstChild, elem);
</code><code id="L1730"><a href="#L1730" class="ln">1730</a>    },
</code><code id="L1731"><a href="#L1731" class="ln">1731</a>
</code><code id="L1732"><a href="#L1732" class="ln">1732</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1733"><a href="#L1733" class="ln">1733</a><span class="com">    <span class="op"> * </span>$(…).children
</span></code><code id="L1734"><a href="#L1734" class="ln">1734</a><span class="com">     [ method ]
</span></code><code id="L1735"><a href="#L1735" class="ln">1735</a><span class="com">    <span class="op"> * </span>Get the children of all matched elements, optionally filtered by a selector.
</span></code><code id="L1736"><a href="#L1736" class="ln">1736</a><span class="com">    <span class="op"> - </span>selector (string) #optional A string selector to match elements against.
</span></code><code id="L1737"><a href="#L1737" class="ln">1737</a><span class="com">    <span class="op"> = </span>(object) Kimbo object
</span></code><code id="L1738"><a href="#L1738" class="ln">1738</a><span class="com">     > Usage
</span></code><code id="L1739"><a href="#L1739" class="ln">1739</a><span class="com">    <span class="op"> * </span>Suppose a page <span class=kwd>with</span> the following HTML:
</span></code><code id="L1740"><a href="#L1740" class="ln">1740</a><span class="com">    <span class="op"> | </span>&lt;div <span class=kwd>class</span>=<span class="str">"demo"</span>>
</span></code><code id="L1741"><a href="#L1741" class="ln">1741</a><span class="com">    <span class="op"> | </span>  &lt;p>This&lt;/p>
</span></code><code id="L1742"><a href="#L1742" class="ln">1742</a><span class="com">    <span class="op"> | </span>  &lt;p>is&lt;/p>
</span></code><code id="L1743"><a href="#L1743" class="ln">1743</a><span class="com">    <span class="op"> | </span>  &lt;p>a&lt;/p>
</span></code><code id="L1744"><a href="#L1744" class="ln">1744</a><span class="com">    <span class="op"> | </span>  &lt;p>demo.&lt;/p>
</span></code><code id="L1745"><a href="#L1745" class="ln">1745</a><span class="com">    <span class="op"> | </span>&lt;/div>
</span></code><code id="L1746"><a href="#L1746" class="ln">1746</a><span class="com">    <span class="op"> * </span>Get all children of `.demo`:
</span></code><code id="L1747"><a href="#L1747" class="ln">1747</a><span class="com">    <span class="op"> | </span>$(<span class="str">'.demo'</span>).children(); <span class="com">// Al &lt;p> tags inside .demo div</span>
</span></code><code id="L1748"><a href="#L1748" class="ln">1748</a><span class="com">    <span class="op"> * </span>Another example passing an specific selector:
</span></code><code id="L1749"><a href="#L1749" class="ln">1749</a><span class="com">    <span class="op"> | </span>&lt;form>
</span></code><code id="L1750"><a href="#L1750" class="ln">1750</a><span class="com">    <span class="op"> | </span>  &lt;input type=<span class="str">"text"</span> name=<span class="str">"name"</span> />
</span></code><code id="L1751"><a href="#L1751" class="ln">1751</a><span class="com">    <span class="op"> | </span>  &lt;input type=<span class="str">"text"</span> name=<span class="str">"last"</span> />
</span></code><code id="L1752"><a href="#L1752" class="ln">1752</a><span class="com">    <span class="op"> | </span>  &lt;input type=<span class="str">"submit"</span> value=<span class="str">"Send"</span> />
</span></code><code id="L1753"><a href="#L1753" class="ln">1753</a><span class="com">    <span class="op"> | </span>&lt;/form>
</span></code><code id="L1754"><a href="#L1754" class="ln">1754</a><span class="com">    <span class="op"> * </span>Get only the children that are text type elements:
</span></code><code id="L1755"><a href="#L1755" class="ln">1755</a><span class="com">    <span class="op"> | </span>$(<span class="str">'form'</span>).children(<span class="str">'input[type="text"]'</span>); <span class="com">// Only name and last inputs</span>
</span></code><code id="L1756"><a href="#L1756" class="ln">1756</a><span class="com">    \*/</span>
</code><code id="L1757"><a href="#L1757" class="ln">1757</a>    children: <span class=kwd>function</span> (elem) {
</code><code id="L1758"><a href="#L1758" class="ln">1758</a>      <span class=kwd>return</span> _sibling(elem.firstChild);
</code><code id="L1759"><a href="#L1759" class="ln">1759</a>    },
</code><code id="L1760"><a href="#L1760" class="ln">1760</a>
</code><code id="L1761"><a href="#L1761" class="ln">1761</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1762"><a href="#L1762" class="ln">1762</a><span class="com">    <span class="op"> * </span>$(…).contents
</span></code><code id="L1763"><a href="#L1763" class="ln">1763</a><span class="com">     [ method ]
</span></code><code id="L1764"><a href="#L1764" class="ln">1764</a><span class="com">    <span class="op"> * </span>Get the HTML content of an iframe
</span></code><code id="L1765"><a href="#L1765" class="ln">1765</a><span class="com">    <span class="op"> = </span>(object) Kimbo object
</span></code><code id="L1766"><a href="#L1766" class="ln">1766</a><span class="com">     > Usage
</span></code><code id="L1767"><a href="#L1767" class="ln">1767</a><span class="com">    <span class="op"> * </span>Suppose an iframe loading an external page:
</span></code><code id="L1768"><a href="#L1768" class="ln">1768</a><span class="com">    <span class="op"> | </span>&lt;iframe src=<span class="str">"http:<span class="com">//api.kimbojs.com"</span>>&lt;/iframe></span>
</span></code><code id="L1769"><a href="#L1769" class="ln">1769</a><span class="com">    <span class="op"> * </span>Find the body element of the contents of that iframe:
</span></code><code id="L1770"><a href="#L1770" class="ln">1770</a><span class="com">    <span class="op"> | </span>$(<span class="str">'iframe'</span>).contents().find(<span class="str">'body'</span>);
</span></code><code id="L1771"><a href="#L1771" class="ln">1771</a><span class="com">    \*/</span>
</code><code id="L1772"><a href="#L1772" class="ln">1772</a>    contents: <span class=kwd>function</span> (elem) {
</code><code id="L1773"><a href="#L1773" class="ln">1773</a>      <span class=kwd>return</span> elem.nodeName.toLowerCase()<span class="op"> === </span><span class="str">'iframe'</span> ? elem.contentDocument<span class="op"> || </span>elem.contentWindow[_.document] : Kimbo.makeArray(elem.childNodes);
</code><code id="L1774"><a href="#L1774" class="ln">1774</a>    }
</code><code id="L1775"><a href="#L1775" class="ln">1775</a>  }, <span class=kwd>function</span> (name, fn) {
</code><code id="L1776"><a href="#L1776" class="ln">1776</a>    Kimbo.fn[name]<span class="op"> = </span><span class=kwd>function</span> (selector) {
</code><code id="L1777"><a href="#L1777" class="ln">1777</a>      <span class=kwd>var</span> ret;
</code><code id="L1778"><a href="#L1778" class="ln">1778</a>
</code><code id="L1779"><a href="#L1779" class="ln">1779</a>      <span class=kwd>if</span> (!<span class=kwd>this</span>.length) {
</code><code id="L1780"><a href="#L1780" class="ln">1780</a>        <span class=kwd>return</span> <span class=kwd>this</span>;
</code><code id="L1781"><a href="#L1781" class="ln">1781</a>      }
</code><code id="L1782"><a href="#L1782" class="ln">1782</a>
</code><code id="L1783"><a href="#L1783" class="ln">1783</a>      ret<span class="op"> = </span>Kimbo.map(<span class=kwd>this</span>, fn);
</code><code id="L1784"><a href="#L1784" class="ln">1784</a>
</code><code id="L1785"><a href="#L1785" class="ln">1785</a>      <span class="com">// Clean collection</span>
</code><code id="L1786"><a href="#L1786" class="ln">1786</a>      ret<span class="op"> = </span><span class=kwd>this</span>.length > <span class="lit">1</span><span class="op"> &amp;&amp; </span>!IS_UNIQUE[name] ? _unique(ret) : ret;
</code><code id="L1787"><a href="#L1787" class="ln">1787</a>
</code><code id="L1788"><a href="#L1788" class="ln">1788</a>      <span class=kwd>if</span> (Kimbo.isString(selector)) {
</code><code id="L1789"><a href="#L1789" class="ln">1789</a>        ret<span class="op"> = </span>_.kimbo(ret).filter(selector);
</code><code id="L1790"><a href="#L1790" class="ln">1790</a>      }
</code><code id="L1791"><a href="#L1791" class="ln">1791</a>
</code><code id="L1792"><a href="#L1792" class="ln">1792</a>      <span class=kwd>return</span> _.kimbo(ret);
</code><code id="L1793"><a href="#L1793" class="ln">1793</a>    };
</code><code id="L1794"><a href="#L1794" class="ln">1794</a>  });
</code><code id="L1795"><a href="#L1795" class="ln">1795</a>});
</code><code id="L1796"><a href="#L1796" class="ln">1796</a>
</code><code id="L1797"><a href="#L1797" class="ln">1797</a>
</code><code id="L1798"><a href="#L1798" class="ln">1798</a>Kimbo.define(<span class="str">'utilities'</span>, <span class=kwd>function</span> (_) {
</code><code id="L1799"><a href="#L1799" class="ln">1799</a>
</code><code id="L1800"><a href="#L1800" class="ln">1800</a>  <span class="str">'use strict'</span>;
</code><code id="L1801"><a href="#L1801" class="ln">1801</a>
</code><code id="L1802"><a href="#L1802" class="ln">1802</a>  <span class="com">// Mobile userAgent escaped regexes</span>
</code><code id="L1803"><a href="#L1803" class="ln">1803</a>  <span class=kwd>var</span> ANDROID_RE<span class="op"> = </span><span class="str">'(Android)\\s+([\\d.]+)'</span>;
</code><code id="L1804"><a href="#L1804" class="ln">1804</a>  <span class=kwd>var</span> BLACKBERRY_RE<span class="op"> = </span><span class="str">'(BlackBerry|BB10|Playbook).*Version\/([\\d.]+)'</span>;
</code><code id="L1805"><a href="#L1805" class="ln">1805</a>  <span class=kwd>var</span> FIREFOXOS_RE<span class="op"> = </span><span class="str">'(Mozilla).*Mobile[^\/]*\/([\\d.]*)'</span>;
</code><code id="L1806"><a href="#L1806" class="ln">1806</a>  <span class=kwd>var</span> IPAD_RE<span class="op"> = </span><span class="str">'(iPad).*OS\\s([\\d_]+)'</span>;
</code><code id="L1807"><a href="#L1807" class="ln">1807</a>  <span class=kwd>var</span> IPHONE_RE<span class="op"> = </span><span class="str">'(iPhone\\sOS)\\s([\\d_]+)'</span>;
</code><code id="L1808"><a href="#L1808" class="ln">1808</a>  <span class=kwd>var</span> WEBOS<span class="op"> = </span><span class="str">'(web|hpw)OS[\\s\/]([\\d.]+)'</span>;
</code><code id="L1809"><a href="#L1809" class="ln">1809</a>
</code><code id="L1810"><a href="#L1810" class="ln">1810</a>  <span class="com">// Full regexp to test the userAgent</span>
</code><code id="L1811"><a href="#L1811" class="ln">1811</a>  <span class=kwd>var</span> MOBILE_OS_RE<span class="op"> = </span><span class=kwd>new</span> RegExp(
</code><code id="L1812"><a href="#L1812" class="ln">1812</a>    ANDROID_RE<span class="op"> + </span><span class="str">'|'</span> +
</code><code id="L1813"><a href="#L1813" class="ln">1813</a>    BLACKBERRY_RE<span class="op"> + </span><span class="str">'|'</span> +
</code><code id="L1814"><a href="#L1814" class="ln">1814</a>    FIREFOXOS_RE<span class="op"> + </span><span class="str">'|'</span> +
</code><code id="L1815"><a href="#L1815" class="ln">1815</a>    IPHONE_RE<span class="op"> + </span><span class="str">'|'</span> +
</code><code id="L1816"><a href="#L1816" class="ln">1816</a>    IPAD_RE<span class="op"> + </span><span class="str">'|'</span> +
</code><code id="L1817"><a href="#L1817" class="ln">1817</a>    WEBOS
</code><code id="L1818"><a href="#L1818" class="ln">1818</a>  );
</code><code id="L1819"><a href="#L1819" class="ln">1819</a>
</code><code id="L1820"><a href="#L1820" class="ln">1820</a>  <span class=kwd>var</span> isMobile<span class="op"> = </span><span class=kwd>null</span>;
</code><code id="L1821"><a href="#L1821" class="ln">1821</a>
</code><code id="L1822"><a href="#L1822" class="ln">1822</a>  <span class=kwd>var</span> objectTypes<span class="op"> = </span>{};
</code><code id="L1823"><a href="#L1823" class="ln">1823</a>
</code><code id="L1824"><a href="#L1824" class="ln">1824</a>  <span class="com">// Map object types</span>
</code><code id="L1825"><a href="#L1825" class="ln">1825</a>  Kimbo.forEach([ <span class="str">'Array'</span>, <span class="str">'Boolean'</span>, <span class="str">'Date'</span>, <span class="str">'Error'</span>, <span class="str">'Function'</span>,
</code><code id="L1826"><a href="#L1826" class="ln">1826</a>    <span class="str">'Number'</span>, <span class="str">'Object'</span>, <span class="str">'RegExp'</span>, <span class="str">'String'</span>
</code><code id="L1827"><a href="#L1827" class="ln">1827</a>  ], <span class=kwd>function</span> (type) {
</code><code id="L1828"><a href="#L1828" class="ln">1828</a>      objectTypes[<span class="str">'[object '</span><span class="op"> + </span>type<span class="op"> + </span><span class="str">']'</span>]<span class="op"> = </span>type.toLowerCase();
</code><code id="L1829"><a href="#L1829" class="ln">1829</a>    }
</code><code id="L1830"><a href="#L1830" class="ln">1830</a>  );
</code><code id="L1831"><a href="#L1831" class="ln">1831</a>
</code><code id="L1832"><a href="#L1832" class="ln">1832</a>  Kimbo.extend({
</code><code id="L1833"><a href="#L1833" class="ln">1833</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1834"><a href="#L1834" class="ln">1834</a><span class="com">    <span class="op"> * </span>$.typeOf
</span></code><code id="L1835"><a href="#L1835" class="ln">1835</a><span class="com">     [ method ]
</span></code><code id="L1836"><a href="#L1836" class="ln">1836</a><span class="com">    <span class="op"> * </span>Determine the internal JavaScript [[Class]] of an object.
</span></code><code id="L1837"><a href="#L1837" class="ln">1837</a><span class="com">     > Parameters
</span></code><code id="L1838"><a href="#L1838" class="ln">1838</a><span class="com">    <span class="op"> - </span>obj (object) Object to get its [[Class]] type.
</span></code><code id="L1839"><a href="#L1839" class="ln">1839</a><span class="com">    <span class="op"> = </span>(string) Type of the object.
</span></code><code id="L1840"><a href="#L1840" class="ln">1840</a><span class="com">     > Usage
</span></code><code id="L1841"><a href="#L1841" class="ln">1841</a><span class="com">    <span class="op"> | </span>$.typeOf(<span class="str">'i am a string'</span>); <span class="com">// <span class="str">'string'</span></span>
</span></code><code id="L1842"><a href="#L1842" class="ln">1842</a><span class="com">    <span class="op"> | </span>$.typeOf(/(\.regexp?)/); <span class="com">// <span class="str">'regexp'</span></span>
</span></code><code id="L1843"><a href="#L1843" class="ln">1843</a><span class="com">    <span class="op"> | </span>$.typeOf(<span class=kwd>null</span>); <span class="com">// <span class="str">'<span class=kwd>null</span>'</span></span>
</span></code><code id="L1844"><a href="#L1844" class="ln">1844</a><span class="com">    <span class="op"> | </span>$.typeOf(<span class=kwd>undefined</span>); <span class="com">// <span class="str">'<span class=kwd>undefined</span>'</span></span>
</span></code><code id="L1845"><a href="#L1845" class="ln">1845</a><span class="com">    <span class="op"> | </span>$.typeOf(window.notDefined); <span class="com">// <span class="str">'<span class=kwd>undefined</span>'</span></span>
</span></code><code id="L1846"><a href="#L1846" class="ln">1846</a><span class="com">    <span class="op"> | </span>$.typeOf(<span class=kwd>function</span> () {}); <span class="com">// <span class="str">'<span class=kwd>function</span>'</span></span>
</span></code><code id="L1847"><a href="#L1847" class="ln">1847</a><span class="com">    <span class="op"> | </span>$.typeOf({key: <span class="str">'value'</span>}); <span class="com">// <span class="str">'object'</span></span>
</span></code><code id="L1848"><a href="#L1848" class="ln">1848</a><span class="com">    <span class="op"> | </span>$.typeOf(<span class=kwd>true</span>); <span class="com">// <span class="str">'<span class=kwd>boolean</span>'</span></span>
</span></code><code id="L1849"><a href="#L1849" class="ln">1849</a><span class="com">    <span class="op"> | </span>$.typeOf([]); <span class="com">// <span class="str">'array'</span></span>
</span></code><code id="L1850"><a href="#L1850" class="ln">1850</a><span class="com">    <span class="op"> | </span>$.typeOf(<span class=kwd>new</span> Date()); <span class="com">// <span class="str">'date'</span></span>
</span></code><code id="L1851"><a href="#L1851" class="ln">1851</a><span class="com">    <span class="op"> | </span>$.typeOf(<span class="lit">3</span>); <span class="com">// <span class="str">'number'</span></span>
</span></code><code id="L1852"><a href="#L1852" class="ln">1852</a><span class="com">    \*/</span>
</code><code id="L1853"><a href="#L1853" class="ln">1853</a>    typeOf: <span class=kwd>function</span> (obj) {
</code><code id="L1854"><a href="#L1854" class="ln">1854</a>      <span class=kwd>var</span> type;
</code><code id="L1855"><a href="#L1855" class="ln">1855</a>
</code><code id="L1856"><a href="#L1856" class="ln">1856</a>      <span class=kwd>if</span> (obj<span class="op"> === </span><span class=kwd>null</span><span class="op"> || </span>obj<span class="op"> === </span><span class=kwd>undefined</span>) {
</code><code id="L1857"><a href="#L1857" class="ln">1857</a>        type<span class="op"> = </span>String(obj);
</code><code id="L1858"><a href="#L1858" class="ln">1858</a>
</code><code id="L1859"><a href="#L1859" class="ln">1859</a>      } <span class=kwd>else</span> {
</code><code id="L1860"><a href="#L1860" class="ln">1860</a>        type<span class="op"> = </span>(objectTypes[Object.prototype.toString.call(obj)]<span class="op"> || </span><span class="str">'object'</span>);
</code><code id="L1861"><a href="#L1861" class="ln">1861</a>      }
</code><code id="L1862"><a href="#L1862" class="ln">1862</a>
</code><code id="L1863"><a href="#L1863" class="ln">1863</a>      <span class=kwd>return</span> type;
</code><code id="L1864"><a href="#L1864" class="ln">1864</a>    },
</code><code id="L1865"><a href="#L1865" class="ln">1865</a>
</code><code id="L1866"><a href="#L1866" class="ln">1866</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1867"><a href="#L1867" class="ln">1867</a><span class="com">    <span class="op"> * </span>$.isArray
</span></code><code id="L1868"><a href="#L1868" class="ln">1868</a><span class="com">     [ method ]
</span></code><code id="L1869"><a href="#L1869" class="ln">1869</a><span class="com">    <span class="op"> * </span>Determine <span class=kwd>if</span> the parameter passed is an array object.
</span></code><code id="L1870"><a href="#L1870" class="ln">1870</a><span class="com">     > Parameters
</span></code><code id="L1871"><a href="#L1871" class="ln">1871</a><span class="com">    <span class="op"> - </span>obj (object) Object to test <span class=kwd>if</span> its an array.
</span></code><code id="L1872"><a href="#L1872" class="ln">1872</a><span class="com">    <span class="op"> = </span>(<span class=kwd>boolean</span>) According wether or not it is an array object.
</span></code><code id="L1873"><a href="#L1873" class="ln">1873</a><span class="com">     > Usage
</span></code><code id="L1874"><a href="#L1874" class="ln">1874</a><span class="com">    <span class="op"> | </span>$.isArray([]); <span class="com">// True</span>
</span></code><code id="L1875"><a href="#L1875" class="ln">1875</a><span class="com">    <span class="op"> | </span>$.isArray({}); <span class="com">// False</span>
</span></code><code id="L1876"><a href="#L1876" class="ln">1876</a><span class="com">    <span class="op"> | </span>$.isArray(<span class="str">'test'</span>); <span class="com">// False</span>
</span></code><code id="L1877"><a href="#L1877" class="ln">1877</a><span class="com">    \*/</span>
</code><code id="L1878"><a href="#L1878" class="ln">1878</a>    isArray: Array.isArray,
</code><code id="L1879"><a href="#L1879" class="ln">1879</a>
</code><code id="L1880"><a href="#L1880" class="ln">1880</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1881"><a href="#L1881" class="ln">1881</a><span class="com">    <span class="op"> * </span>$.isNumeric
</span></code><code id="L1882"><a href="#L1882" class="ln">1882</a><span class="com">     [ method ]
</span></code><code id="L1883"><a href="#L1883" class="ln">1883</a><span class="com">    <span class="op"> * </span>Determine <span class=kwd>if</span> the parameter passed is an number.
</span></code><code id="L1884"><a href="#L1884" class="ln">1884</a><span class="com">     > Parameters
</span></code><code id="L1885"><a href="#L1885" class="ln">1885</a><span class="com">    <span class="op"> - </span>obj (object) Object to test <span class=kwd>if</span> its a number.
</span></code><code id="L1886"><a href="#L1886" class="ln">1886</a><span class="com">    <span class="op"> = </span>(<span class=kwd>boolean</span>) According wether or not it is a number.
</span></code><code id="L1887"><a href="#L1887" class="ln">1887</a><span class="com">     > Usage
</span></code><code id="L1888"><a href="#L1888" class="ln">1888</a><span class="com">    <span class="op"> | </span>$.isNumeric(<span class="lit">3</span>); <span class="com">// True</span>
</span></code><code id="L1889"><a href="#L1889" class="ln">1889</a><span class="com">    <span class="op"> | </span>$.isNumeric(<span class="str">'<span class="lit">3</span>'</span>); <span class="com">// False</span>
</span></code><code id="L1890"><a href="#L1890" class="ln">1890</a><span class="com">    \*/</span>
</code><code id="L1891"><a href="#L1891" class="ln">1891</a>    isNumeric: <span class=kwd>function</span> (obj) {
</code><code id="L1892"><a href="#L1892" class="ln">1892</a>      <span class=kwd>return</span> !isNaN(parseFloat(obj))<span class="op"> &amp;&amp; </span>isFinite(obj);
</code><code id="L1893"><a href="#L1893" class="ln">1893</a>    },
</code><code id="L1894"><a href="#L1894" class="ln">1894</a>
</code><code id="L1895"><a href="#L1895" class="ln">1895</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1896"><a href="#L1896" class="ln">1896</a><span class="com">    <span class="op"> * </span>$.isWindow
</span></code><code id="L1897"><a href="#L1897" class="ln">1897</a><span class="com">     [ method ]
</span></code><code id="L1898"><a href="#L1898" class="ln">1898</a><span class="com">    <span class="op"> * </span>Determine <span class=kwd>if</span> the parameter passed is the window object.
</span></code><code id="L1899"><a href="#L1899" class="ln">1899</a><span class="com">     > Parameters
</span></code><code id="L1900"><a href="#L1900" class="ln">1900</a><span class="com">    <span class="op"> - </span>obj (object) Object to test <span class=kwd>if</span> its the window object.
</span></code><code id="L1901"><a href="#L1901" class="ln">1901</a><span class="com">    <span class="op"> = </span>(<span class=kwd>boolean</span>) According wether or not it is the window object.
</span></code><code id="L1902"><a href="#L1902" class="ln">1902</a><span class="com">     > Usage
</span></code><code id="L1903"><a href="#L1903" class="ln">1903</a><span class="com">    <span class="op"> | </span>$.isWindow(window); <span class="com">// True</span>
</span></code><code id="L1904"><a href="#L1904" class="ln">1904</a><span class="com">    <span class="op"> | </span>$.isWindow({ window: window }); <span class="com">// False</span>
</span></code><code id="L1905"><a href="#L1905" class="ln">1905</a><span class="com">    \*/</span>
</code><code id="L1906"><a href="#L1906" class="ln">1906</a>    isWindow: <span class=kwd>function</span> (obj) {
</code><code id="L1907"><a href="#L1907" class="ln">1907</a>      <span class=kwd>return</span> obj<span class="op"> &amp;&amp; </span>obj<span class="op"> === </span>obj.window;
</code><code id="L1908"><a href="#L1908" class="ln">1908</a>    },
</code><code id="L1909"><a href="#L1909" class="ln">1909</a>
</code><code id="L1910"><a href="#L1910" class="ln">1910</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1911"><a href="#L1911" class="ln">1911</a><span class="com">    <span class="op"> * </span>$.isEmptyObject
</span></code><code id="L1912"><a href="#L1912" class="ln">1912</a><span class="com">     [ method ]
</span></code><code id="L1913"><a href="#L1913" class="ln">1913</a><span class="com">    <span class="op"> * </span>Determine <span class=kwd>if</span> the parameter passed is an empty object.
</span></code><code id="L1914"><a href="#L1914" class="ln">1914</a><span class="com">     > Parameters
</span></code><code id="L1915"><a href="#L1915" class="ln">1915</a><span class="com">    <span class="op"> - </span>obj (object) Object to test <span class=kwd>if</span> its an empty object.
</span></code><code id="L1916"><a href="#L1916" class="ln">1916</a><span class="com">    <span class="op"> = </span>(<span class=kwd>boolean</span>) According wether or not it is an empty object.
</span></code><code id="L1917"><a href="#L1917" class="ln">1917</a><span class="com">     > Usage
</span></code><code id="L1918"><a href="#L1918" class="ln">1918</a><span class="com">    <span class="op"> | </span>$.isEmptyObject({}); <span class="com">// True</span>
</span></code><code id="L1919"><a href="#L1919" class="ln">1919</a><span class="com">    <span class="op"> | </span>$.isEmptyObject([]); <span class="com">// True</span>
</span></code><code id="L1920"><a href="#L1920" class="ln">1920</a><span class="com">    <span class="op"> | </span>$.isEmptyObject([<span class="lit">1</span>, <span class="lit">2</span>]); <span class="com">// False</span>
</span></code><code id="L1921"><a href="#L1921" class="ln">1921</a><span class="com">    \*/</span>
</code><code id="L1922"><a href="#L1922" class="ln">1922</a>    isEmptyObject: <span class=kwd>function</span> (obj) {
</code><code id="L1923"><a href="#L1923" class="ln">1923</a>      <span class=kwd>var</span> key;
</code><code id="L1924"><a href="#L1924" class="ln">1924</a>
</code><code id="L1925"><a href="#L1925" class="ln">1925</a>      <span class=kwd>for</span> (key <span class=kwd>in</span> obj) {
</code><code id="L1926"><a href="#L1926" class="ln">1926</a>        <span class=kwd>if</span> (obj.hasOwnProperty(key)) {
</code><code id="L1927"><a href="#L1927" class="ln">1927</a>          <span class=kwd>return</span> <span class=kwd>false</span>;
</code><code id="L1928"><a href="#L1928" class="ln">1928</a>        }
</code><code id="L1929"><a href="#L1929" class="ln">1929</a>      }
</code><code id="L1930"><a href="#L1930" class="ln">1930</a>
</code><code id="L1931"><a href="#L1931" class="ln">1931</a>      <span class=kwd>return</span> <span class=kwd>true</span>;
</code><code id="L1932"><a href="#L1932" class="ln">1932</a>    },
</code><code id="L1933"><a href="#L1933" class="ln">1933</a>
</code><code id="L1934"><a href="#L1934" class="ln">1934</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1935"><a href="#L1935" class="ln">1935</a><span class="com">    <span class="op"> * </span>$.isMobile
</span></code><code id="L1936"><a href="#L1936" class="ln">1936</a><span class="com">     [ method ]
</span></code><code id="L1937"><a href="#L1937" class="ln">1937</a><span class="com">    <span class="op"> * </span>Determine <span class=kwd>if</span> the current platform is a mobile device, (otherwise is a desktop browser).
</span></code><code id="L1938"><a href="#L1938" class="ln">1938</a><span class="com">     > Parameters
</span></code><code id="L1939"><a href="#L1939" class="ln">1939</a><span class="com">    <span class="op"> = </span>(<span class=kwd>boolean</span>) According wether or not is a mobile device.
</span></code><code id="L1940"><a href="#L1940" class="ln">1940</a><span class="com">     > Usage
</span></code><code id="L1941"><a href="#L1941" class="ln">1941</a><span class="com">    <span class="op"> | </span>$.isMobile(); <span class="com">// False</span>
</span></code><code id="L1942"><a href="#L1942" class="ln">1942</a><span class="com">    \*/</span>
</code><code id="L1943"><a href="#L1943" class="ln">1943</a>    isMobile: <span class=kwd>function</span> () {
</code><code id="L1944"><a href="#L1944" class="ln">1944</a>
</code><code id="L1945"><a href="#L1945" class="ln">1945</a>      <span class="com">// Check only once <span class=kwd>for</span> the current browser</span>
</code><code id="L1946"><a href="#L1946" class="ln">1946</a>      <span class=kwd>if</span> (isMobile<span class="op"> === </span><span class=kwd>null</span>) {
</code><code id="L1947"><a href="#L1947" class="ln">1947</a>        isMobile<span class="op"> = </span>MOBILE_OS_RE.test(navigator.userAgent);
</code><code id="L1948"><a href="#L1948" class="ln">1948</a>      }
</code><code id="L1949"><a href="#L1949" class="ln">1949</a>
</code><code id="L1950"><a href="#L1950" class="ln">1950</a>      <span class=kwd>return</span> isMobile;
</code><code id="L1951"><a href="#L1951" class="ln">1951</a>    },
</code><code id="L1952"><a href="#L1952" class="ln">1952</a>
</code><code id="L1953"><a href="#L1953" class="ln">1953</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1954"><a href="#L1954" class="ln">1954</a><span class="com">    <span class="op"> * </span>$.parseJSON
</span></code><code id="L1955"><a href="#L1955" class="ln">1955</a><span class="com">     [ method ]
</span></code><code id="L1956"><a href="#L1956" class="ln">1956</a><span class="com">    <span class="op"> * </span>Parses a well-formed JSON string and returns the resulting JavaScript object.
</span></code><code id="L1957"><a href="#L1957" class="ln">1957</a><span class="com">     > Parameters
</span></code><code id="L1958"><a href="#L1958" class="ln">1958</a><span class="com">    <span class="op"> - </span>data (string) The JSON string to parse.
</span></code><code id="L1959"><a href="#L1959" class="ln">1959</a><span class="com">    <span class="op"> = </span>(object) A JavaScript object.
</span></code><code id="L1960"><a href="#L1960" class="ln">1960</a><span class="com">     > Usage
</span></code><code id="L1961"><a href="#L1961" class="ln">1961</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> obj<span class="op"> = </span>$.parseJSON(<span class="str">'{"name":"Denis"}'</span>);
</span></code><code id="L1962"><a href="#L1962" class="ln">1962</a><span class="com">    <span class="op"> | </span>console.log(obj.name<span class="op"> === </span><span class="str">'Denis'</span>); <span class="com">// True</span>
</span></code><code id="L1963"><a href="#L1963" class="ln">1963</a><span class="com">    \*/</span>
</code><code id="L1964"><a href="#L1964" class="ln">1964</a>    parseJSON: <span class=kwd>function</span> (data) {
</code><code id="L1965"><a href="#L1965" class="ln">1965</a>
</code><code id="L1966"><a href="#L1966" class="ln">1966</a>      <span class="com">// Use <span class=kwd>native</span> JSON parser</span>
</code><code id="L1967"><a href="#L1967" class="ln">1967</a>      <span class=kwd>if</span> (data<span class="op"> &amp;&amp; </span>Kimbo.isString(data)) {
</code><code id="L1968"><a href="#L1968" class="ln">1968</a>        <span class=kwd>return</span> window.JSON.parse(data);
</code><code id="L1969"><a href="#L1969" class="ln">1969</a>      }
</code><code id="L1970"><a href="#L1970" class="ln">1970</a>    },
</code><code id="L1971"><a href="#L1971" class="ln">1971</a>
</code><code id="L1972"><a href="#L1972" class="ln">1972</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L1973"><a href="#L1973" class="ln">1973</a><span class="com">    <span class="op"> * </span>$.parseXML
</span></code><code id="L1974"><a href="#L1974" class="ln">1974</a><span class="com">     [ method ]
</span></code><code id="L1975"><a href="#L1975" class="ln">1975</a><span class="com">    <span class="op"> * </span>Parses a string into an XML document.
</span></code><code id="L1976"><a href="#L1976" class="ln">1976</a><span class="com">     > Parameters
</span></code><code id="L1977"><a href="#L1977" class="ln">1977</a><span class="com">    <span class="op"> - </span>data (string) The JSON string to parse.
</span></code><code id="L1978"><a href="#L1978" class="ln">1978</a><span class="com">    <span class="op"> = </span>(object) A JavaScript object.
</span></code><code id="L1979"><a href="#L1979" class="ln">1979</a><span class="com">     > Usage
</span></code><code id="L1980"><a href="#L1980" class="ln">1980</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> xml<span class="op"> = </span><span class="str">"&lt;rss version='<span class="lit">2.0</span>'>&lt;channel>&lt;title>RSS Title&lt;/title>&lt;/channel>&lt;/rss>"</span>
</span></code><code id="L1981"><a href="#L1981" class="ln">1981</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> xmlDoc<span class="op"> = </span>$.parseXML(xml);
</span></code><code id="L1982"><a href="#L1982" class="ln">1982</a><span class="com">    <span class="op"> | </span>$(xmlDoc).find(<span class="str">'title'</span>); <span class="com">// <span class="str">'RSS Title'</span></span>
</span></code><code id="L1983"><a href="#L1983" class="ln">1983</a><span class="com">    \*/</span>
</code><code id="L1984"><a href="#L1984" class="ln">1984</a>    parseXML: <span class=kwd>function</span> (data) {
</code><code id="L1985"><a href="#L1985" class="ln">1985</a>
</code><code id="L1986"><a href="#L1986" class="ln">1986</a>      <span class="com">// Use <span class=kwd>native</span> XML (DOM) parser</span>
</code><code id="L1987"><a href="#L1987" class="ln">1987</a>      <span class=kwd>var</span> domparser;
</code><code id="L1988"><a href="#L1988" class="ln">1988</a>      <span class=kwd>var</span> xml;
</code><code id="L1989"><a href="#L1989" class="ln">1989</a>
</code><code id="L1990"><a href="#L1990" class="ln">1990</a>      <span class=kwd>if</span> (data<span class="op"> &amp;&amp; </span>Kimbo.isString(data)) {
</code><code id="L1991"><a href="#L1991" class="ln">1991</a>        domparser<span class="op"> = </span><span class=kwd>new</span> window.DOMParser();
</code><code id="L1992"><a href="#L1992" class="ln">1992</a>        xml<span class="op"> = </span>domparser.parseFromString(data, <span class="str">'text/xml'</span>);
</code><code id="L1993"><a href="#L1993" class="ln">1993</a>
</code><code id="L1994"><a href="#L1994" class="ln">1994</a>        <span class=kwd>if</span> (xml.getElementsByTagName(<span class="str">'parsererror'</span>).length) {
</code><code id="L1995"><a href="#L1995" class="ln">1995</a>          <span class=kwd>throw</span> <span class=kwd>new</span> Error(<span class="str">'Invalid XML: '</span><span class="op"> + </span>data);
</code><code id="L1996"><a href="#L1996" class="ln">1996</a>        }
</code><code id="L1997"><a href="#L1997" class="ln">1997</a>
</code><code id="L1998"><a href="#L1998" class="ln">1998</a>        <span class=kwd>return</span> xml;
</code><code id="L1999"><a href="#L1999" class="ln">1999</a>      }
</code><code id="L2000"><a href="#L2000" class="ln">2000</a>    },
</code><code id="L2001"><a href="#L2001" class="ln">2001</a>
</code><code id="L2002"><a href="#L2002" class="ln">2002</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L2003"><a href="#L2003" class="ln">2003</a><span class="com">    <span class="op"> * </span>$.map
</span></code><code id="L2004"><a href="#L2004" class="ln">2004</a><span class="com">     [ method ]
</span></code><code id="L2005"><a href="#L2005" class="ln">2005</a><span class="com">    <span class="op"> * </span>Translate all items <span class=kwd>in</span> an array or object to <span class=kwd>new</span> array of items.
</span></code><code id="L2006"><a href="#L2006" class="ln">2006</a><span class="com">     > Parameters
</span></code><code id="L2007"><a href="#L2007" class="ln">2007</a><span class="com">    <span class="op"> - </span>obj (array|object) The Array or Object to translate.
</span></code><code id="L2008"><a href="#L2008" class="ln">2008</a><span class="com">    <span class="op"> = </span>(array) A <span class=kwd>new</span> array.
</span></code><code id="L2009"><a href="#L2009" class="ln">2009</a><span class="com">     > Usage
</span></code><code id="L2010"><a href="#L2010" class="ln">2010</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> arr<span class="op"> = </span>[<span class="str">'a'</span>, <span class="str">'b'</span>, <span class="str">'c'</span>];
</span></code><code id="L2011"><a href="#L2011" class="ln">2011</a><span class="com">    <span class="op"> | </span>arr<span class="op"> = </span>$.map(arr, <span class=kwd>function</span> (element, index) {
</span></code><code id="L2012"><a href="#L2012" class="ln">2012</a><span class="com">    <span class="op"> | </span>  <span class=kwd>return</span> element.toUpperCase()<span class="op"> + </span>index;
</span></code><code id="L2013"><a href="#L2013" class="ln">2013</a><span class="com">    <span class="op"> | </span>});
</span></code><code id="L2014"><a href="#L2014" class="ln">2014</a><span class="com">    <span class="op"> | </span>console.log(arr); <span class="com">// [<span class="str">'A0'</span>, <span class="str">'B1'</span>, <span class="str">'C2'</span>]</span>
</span></code><code id="L2015"><a href="#L2015" class="ln">2015</a><span class="com">    <span class="op"> * </span>Or wit an object
</span></code><code id="L2016"><a href="#L2016" class="ln">2016</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> obj<span class="op"> = </span>{a: <span class="str">'a'</span>, b: <span class="str">'b'</span>, c: <span class="str">'c'</span>};
</span></code><code id="L2017"><a href="#L2017" class="ln">2017</a><span class="com">    <span class="op"> | </span>obj<span class="op"> = </span>$.map(arr, <span class=kwd>function</span> (key, value) {
</span></code><code id="L2018"><a href="#L2018" class="ln">2018</a><span class="com">    <span class="op"> | </span>  <span class=kwd>return</span> key<span class="op"> + </span><span class="str">': '</span><span class="op"> + </span>value.toUpperCase();
</span></code><code id="L2019"><a href="#L2019" class="ln">2019</a><span class="com">    <span class="op"> | </span>});
</span></code><code id="L2020"><a href="#L2020" class="ln">2020</a><span class="com">    <span class="op"> | </span>console.log(obj); <span class="com">// [<span class="str">'a: A'</span>, <span class="str">'b: B'</span>, <span class="str">'c: C'</span>]</span>
</span></code><code id="L2021"><a href="#L2021" class="ln">2021</a><span class="com">    \*/</span>
</code><code id="L2022"><a href="#L2022" class="ln">2022</a>    map: <span class=kwd>function</span> (obj, callback) {
</code><code id="L2023"><a href="#L2023" class="ln">2023</a>      <span class=kwd>var</span> values<span class="op"> = </span>[];
</code><code id="L2024"><a href="#L2024" class="ln">2024</a>
</code><code id="L2025"><a href="#L2025" class="ln">2025</a>      <span class=kwd>if</span> (obj) {
</code><code id="L2026"><a href="#L2026" class="ln">2026</a>        Kimbo.forEach(obj, <span class=kwd>function</span> (key, val) {
</code><code id="L2027"><a href="#L2027" class="ln">2027</a>          <span class=kwd>var</span> value<span class="op"> = </span>callback(key, val);
</code><code id="L2028"><a href="#L2028" class="ln">2028</a>
</code><code id="L2029"><a href="#L2029" class="ln">2029</a>          <span class=kwd>if</span> (value !== <span class=kwd>null</span><span class="op"> &amp;&amp; </span>value !== <span class=kwd>undefined</span>) {
</code><code id="L2030"><a href="#L2030" class="ln">2030</a>            values.push(value);
</code><code id="L2031"><a href="#L2031" class="ln">2031</a>          }
</code><code id="L2032"><a href="#L2032" class="ln">2032</a>        });
</code><code id="L2033"><a href="#L2033" class="ln">2033</a>      }
</code><code id="L2034"><a href="#L2034" class="ln">2034</a>
</code><code id="L2035"><a href="#L2035" class="ln">2035</a>      <span class="com">// Flatten any nested arrays</span>
</code><code id="L2036"><a href="#L2036" class="ln">2036</a>      <span class=kwd>return</span> values.concat.apply([], values);
</code><code id="L2037"><a href="#L2037" class="ln">2037</a>    },
</code><code id="L2038"><a href="#L2038" class="ln">2038</a>
</code><code id="L2039"><a href="#L2039" class="ln">2039</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L2040"><a href="#L2040" class="ln">2040</a><span class="com">    <span class="op"> * </span>$.makeArray
</span></code><code id="L2041"><a href="#L2041" class="ln">2041</a><span class="com">     [ method ]
</span></code><code id="L2042"><a href="#L2042" class="ln">2042</a><span class="com">    <span class="op"> * </span>Create an Array from the given object
</span></code><code id="L2043"><a href="#L2043" class="ln">2043</a><span class="com">     > Parameters
</span></code><code id="L2044"><a href="#L2044" class="ln">2044</a><span class="com">    <span class="op"> - </span>obj (array|object) The Array or Object to make an array from.
</span></code><code id="L2045"><a href="#L2045" class="ln">2045</a><span class="com">    <span class="op"> = </span>(array) A <span class=kwd>new</span> array.
</span></code><code id="L2046"><a href="#L2046" class="ln">2046</a><span class="com">     > Usage
</span></code><code id="L2047"><a href="#L2047" class="ln">2047</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> lis<span class="op"> = </span>$(<span class="str">'li'</span>); <span class="com">// Kimbo object</span>
</span></code><code id="L2048"><a href="#L2048" class="ln">2048</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> arr<span class="op"> = </span>$.makeArray(lis);
</span></code><code id="L2049"><a href="#L2049" class="ln">2049</a><span class="com">     |
</span></code><code id="L2050"><a href="#L2050" class="ln">2050</a><span class="com">    <span class="op"> | </span>console.log($.isArray(lis)); <span class="com">// False</span>
</span></code><code id="L2051"><a href="#L2051" class="ln">2051</a><span class="com">    <span class="op"> | </span>console.log($.isArray(arr)); <span class="com">// True</span>
</span></code><code id="L2052"><a href="#L2052" class="ln">2052</a><span class="com">    \*/</span>
</code><code id="L2053"><a href="#L2053" class="ln">2053</a>    makeArray: <span class=kwd>function</span> (obj, results) {
</code><code id="L2054"><a href="#L2054" class="ln">2054</a>      results<span class="op"> = </span>results<span class="op"> || </span>[];
</code><code id="L2055"><a href="#L2055" class="ln">2055</a>
</code><code id="L2056"><a href="#L2056" class="ln">2056</a>      <span class=kwd>if</span> (obj) {
</code><code id="L2057"><a href="#L2057" class="ln">2057</a>        <span class=kwd>if</span> (Kimbo.isArray(obj)<span class="op"> || </span>(obj <span class=kwd>instanceof</span> Kimbo)<span class="op"> || </span>obj <span class=kwd>instanceof</span> window.NodeList) {
</code><code id="L2058"><a href="#L2058" class="ln">2058</a>          results<span class="op"> = </span>Kimbo.merge(results, obj);
</code><code id="L2059"><a href="#L2059" class="ln">2059</a>        } <span class=kwd>else</span> {
</code><code id="L2060"><a href="#L2060" class="ln">2060</a>          _.push.call(results, obj);
</code><code id="L2061"><a href="#L2061" class="ln">2061</a>        }
</code><code id="L2062"><a href="#L2062" class="ln">2062</a>      }
</code><code id="L2063"><a href="#L2063" class="ln">2063</a>
</code><code id="L2064"><a href="#L2064" class="ln">2064</a>      <span class=kwd>return</span> results;
</code><code id="L2065"><a href="#L2065" class="ln">2065</a>    },
</code><code id="L2066"><a href="#L2066" class="ln">2066</a>
</code><code id="L2067"><a href="#L2067" class="ln">2067</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L2068"><a href="#L2068" class="ln">2068</a><span class="com">    <span class="op"> * </span>$.merge
</span></code><code id="L2069"><a href="#L2069" class="ln">2069</a><span class="com">     [ method ]
</span></code><code id="L2070"><a href="#L2070" class="ln">2070</a><span class="com">    <span class="op"> * </span>Merge the contents of two arrays into the first array passed.
</span></code><code id="L2071"><a href="#L2071" class="ln">2071</a><span class="com">     > Parameters
</span></code><code id="L2072"><a href="#L2072" class="ln">2072</a><span class="com">    <span class="op"> - </span>first (array) The first array to merge the contents of the second.
</span></code><code id="L2073"><a href="#L2073" class="ln">2073</a><span class="com">    <span class="op"> - </span>second (array|string) The second array to merge into the first.
</span></code><code id="L2074"><a href="#L2074" class="ln">2074</a><span class="com">    <span class="op"> = </span>(array) The first array merged <span class=kwd>with</span> the second.
</span></code><code id="L2075"><a href="#L2075" class="ln">2075</a><span class="com">     > Usage
</span></code><code id="L2076"><a href="#L2076" class="ln">2076</a><span class="com">    <span class="op"> | </span>$.merge([<span class="str">'a'</span>, <span class="str">'b'</span>], [<span class="str">'c'</span>, <span class="str">'d'</span>]);
</span></code><code id="L2077"><a href="#L2077" class="ln">2077</a><span class="com">    <span class="op"> * </span>Result:
</span></code><code id="L2078"><a href="#L2078" class="ln">2078</a><span class="com">    <span class="op"> | </span>[<span class="str">'a'</span>, <span class="str">'b'</span>, <span class="str">'c'</span>, <span class="str">'d'</span>]
</span></code><code id="L2079"><a href="#L2079" class="ln">2079</a><span class="com">    \*/</span>
</code><code id="L2080"><a href="#L2080" class="ln">2080</a>    merge: <span class=kwd>function</span> (first, second) {
</code><code id="L2081"><a href="#L2081" class="ln">2081</a>
</code><code id="L2082"><a href="#L2082" class="ln">2082</a>      <span class="com">// Concat is very fast, use it <span class=kwd>if</span> we can</span>
</code><code id="L2083"><a href="#L2083" class="ln">2083</a>      <span class=kwd>if</span> (Kimbo.isArray(first)) {
</code><code id="L2084"><a href="#L2084" class="ln">2084</a>        first<span class="op"> = </span>first.concat(second);
</code><code id="L2085"><a href="#L2085" class="ln">2085</a>
</code><code id="L2086"><a href="#L2086" class="ln">2086</a>      <span class="com">// Kimbo object, <span class=kwd>do</span> a consecutive push</span>
</code><code id="L2087"><a href="#L2087" class="ln">2087</a>      } <span class=kwd>else</span> {
</code><code id="L2088"><a href="#L2088" class="ln">2088</a>        _.push.apply(first, _.slice.call(second));
</code><code id="L2089"><a href="#L2089" class="ln">2089</a>      }
</code><code id="L2090"><a href="#L2090" class="ln">2090</a>
</code><code id="L2091"><a href="#L2091" class="ln">2091</a>      <span class=kwd>return</span> first;
</code><code id="L2092"><a href="#L2092" class="ln">2092</a>    },
</code><code id="L2093"><a href="#L2093" class="ln">2093</a>
</code><code id="L2094"><a href="#L2094" class="ln">2094</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L2095"><a href="#L2095" class="ln">2095</a><span class="com">    <span class="op"> * </span>$.camelCase
</span></code><code id="L2096"><a href="#L2096" class="ln">2096</a><span class="com">     [ method ]
</span></code><code id="L2097"><a href="#L2097" class="ln">2097</a><span class="com">    <span class="op"> * </span>Camelize any dashed separated string
</span></code><code id="L2098"><a href="#L2098" class="ln">2098</a><span class="com">     > Parameters
</span></code><code id="L2099"><a href="#L2099" class="ln">2099</a><span class="com">    <span class="op"> - </span>str (string) A dashed separated string value to transform into camelCase.
</span></code><code id="L2100"><a href="#L2100" class="ln">2100</a><span class="com">    <span class="op"> = </span>(string) camelCase string
</span></code><code id="L2101"><a href="#L2101" class="ln">2101</a><span class="com">     > Usage
</span></code><code id="L2102"><a href="#L2102" class="ln">2102</a><span class="com">    <span class="op"> | </span>$.camelCase(<span class="str">'background-color'</span>);
</span></code><code id="L2103"><a href="#L2103" class="ln">2103</a><span class="com">    <span class="op"> * </span>Result:
</span></code><code id="L2104"><a href="#L2104" class="ln">2104</a><span class="com">    <span class="op"> | </span><span class="str">'backgroundColor'</span>
</span></code><code id="L2105"><a href="#L2105" class="ln">2105</a><span class="com">    \*/</span>
</code><code id="L2106"><a href="#L2106" class="ln">2106</a>    camelCase: <span class=kwd>function</span> (str) {
</code><code id="L2107"><a href="#L2107" class="ln">2107</a>      <span class=kwd>return</span> str.replace(/-+(.)?/g, <span class=kwd>function</span> (wholeMatch, character) {
</code><code id="L2108"><a href="#L2108" class="ln">2108</a>        <span class=kwd>return</span> character.toUpperCase();
</code><code id="L2109"><a href="#L2109" class="ln">2109</a>      });
</code><code id="L2110"><a href="#L2110" class="ln">2110</a>    },
</code><code id="L2111"><a href="#L2111" class="ln">2111</a>
</code><code id="L2112"><a href="#L2112" class="ln">2112</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L2113"><a href="#L2113" class="ln">2113</a><span class="com">    <span class="op"> * </span>$.isFunction
</span></code><code id="L2114"><a href="#L2114" class="ln">2114</a><span class="com">     [ method ]
</span></code><code id="L2115"><a href="#L2115" class="ln">2115</a><span class="com">    <span class="op"> * </span>Determine <span class=kwd>if</span> the parameter passed is a Javascript <span class=kwd>function</span> object.
</span></code><code id="L2116"><a href="#L2116" class="ln">2116</a><span class="com">     > Parameters
</span></code><code id="L2117"><a href="#L2117" class="ln">2117</a><span class="com">    <span class="op"> - </span>obj (object) Object to test <span class=kwd>if</span> its a <span class=kwd>function</span>.
</span></code><code id="L2118"><a href="#L2118" class="ln">2118</a><span class="com">    <span class="op"> = </span>(<span class=kwd>boolean</span>) According wether or not it is a <span class=kwd>function</span>.
</span></code><code id="L2119"><a href="#L2119" class="ln">2119</a><span class="com">     > Usage
</span></code><code id="L2120"><a href="#L2120" class="ln">2120</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> myFunction<span class="op"> = </span><span class=kwd>function</span> () {};
</span></code><code id="L2121"><a href="#L2121" class="ln">2121</a><span class="com">    <span class="op"> | </span>$.isFunction(myFunction); <span class="com">// True</span>
</span></code><code id="L2122"><a href="#L2122" class="ln">2122</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> something<span class="op"> = </span>[<span class="str">'lala'</span>, <span class="str">'jojo'</span>];
</span></code><code id="L2123"><a href="#L2123" class="ln">2123</a><span class="com">    <span class="op"> | </span>$.isFunction(something); <span class="com">// False</span>
</span></code><code id="L2124"><a href="#L2124" class="ln">2124</a><span class="com">    \*/</span>
</code><code id="L2125"><a href="#L2125" class="ln">2125</a>    isFunction: <span class=kwd>function</span> (obj) {
</code><code id="L2126"><a href="#L2126" class="ln">2126</a>      <span class=kwd>return</span> Kimbo.typeOf(obj)<span class="op"> === </span><span class="str">'<span class=kwd>function</span>'</span>;
</code><code id="L2127"><a href="#L2127" class="ln">2127</a>    },
</code><code id="L2128"><a href="#L2128" class="ln">2128</a>
</code><code id="L2129"><a href="#L2129" class="ln">2129</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L2130"><a href="#L2130" class="ln">2130</a><span class="com">    <span class="op"> * </span>$.isObject
</span></code><code id="L2131"><a href="#L2131" class="ln">2131</a><span class="com">     [ method ]
</span></code><code id="L2132"><a href="#L2132" class="ln">2132</a><span class="com">    <span class="op"> * </span>Determine <span class=kwd>if</span> the parameter passed is a Javascript plain object.
</span></code><code id="L2133"><a href="#L2133" class="ln">2133</a><span class="com">     > Parameters
</span></code><code id="L2134"><a href="#L2134" class="ln">2134</a><span class="com">    <span class="op"> - </span>obj (object) Object to test <span class=kwd>if</span> its a plain object.
</span></code><code id="L2135"><a href="#L2135" class="ln">2135</a><span class="com">    <span class="op"> = </span>(<span class=kwd>boolean</span>) According wether or not it is a plain object.
</span></code><code id="L2136"><a href="#L2136" class="ln">2136</a><span class="com">     > Usage
</span></code><code id="L2137"><a href="#L2137" class="ln">2137</a><span class="com">    <span class="op"> | </span>$.isObject({}); <span class="com">// True</span>
</span></code><code id="L2138"><a href="#L2138" class="ln">2138</a><span class="com">    <span class="op"> | </span>$.isObject([]); <span class="com">// False</span>
</span></code><code id="L2139"><a href="#L2139" class="ln">2139</a><span class="com">    <span class="op"> | </span>$.isObject(<span class="str">'test'</span>); <span class="com">// False</span>
</span></code><code id="L2140"><a href="#L2140" class="ln">2140</a><span class="com">    \*/</span>
</code><code id="L2141"><a href="#L2141" class="ln">2141</a>    isObject: <span class=kwd>function</span> (obj) {
</code><code id="L2142"><a href="#L2142" class="ln">2142</a>      <span class=kwd>return</span> Kimbo.typeOf(obj)<span class="op"> === </span><span class="str">'object'</span>;
</code><code id="L2143"><a href="#L2143" class="ln">2143</a>    },
</code><code id="L2144"><a href="#L2144" class="ln">2144</a>
</code><code id="L2145"><a href="#L2145" class="ln">2145</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L2146"><a href="#L2146" class="ln">2146</a><span class="com">    <span class="op"> * </span>$.isString
</span></code><code id="L2147"><a href="#L2147" class="ln">2147</a><span class="com">     [ method ]
</span></code><code id="L2148"><a href="#L2148" class="ln">2148</a><span class="com">    <span class="op"> * </span>Determine <span class=kwd>if</span> the parameter passed is a string.
</span></code><code id="L2149"><a href="#L2149" class="ln">2149</a><span class="com">     > Parameters
</span></code><code id="L2150"><a href="#L2150" class="ln">2150</a><span class="com">    <span class="op"> - </span>obj (object) Object to test <span class=kwd>if</span> its a string.
</span></code><code id="L2151"><a href="#L2151" class="ln">2151</a><span class="com">    <span class="op"> = </span>(<span class=kwd>boolean</span>) According wether or not it is a string.
</span></code><code id="L2152"><a href="#L2152" class="ln">2152</a><span class="com">     > Usage
</span></code><code id="L2153"><a href="#L2153" class="ln">2153</a><span class="com">    <span class="op"> | </span>$.isString(<span class="str">'test'</span>); <span class="com">// True</span>
</span></code><code id="L2154"><a href="#L2154" class="ln">2154</a><span class="com">    <span class="op"> | </span>$.isString({ name: <span class="str">'asd'</span> }); <span class="com">// False</span>
</span></code><code id="L2155"><a href="#L2155" class="ln">2155</a><span class="com">    \*/</span>
</code><code id="L2156"><a href="#L2156" class="ln">2156</a>    isString: <span class=kwd>function</span> (obj) {
</code><code id="L2157"><a href="#L2157" class="ln">2157</a>      <span class=kwd>return</span> Kimbo.typeOf(obj)<span class="op"> === </span><span class="str">'string'</span>;
</code><code id="L2158"><a href="#L2158" class="ln">2158</a>    },
</code><code id="L2159"><a href="#L2159" class="ln">2159</a>
</code><code id="L2160"><a href="#L2160" class="ln">2160</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L2161"><a href="#L2161" class="ln">2161</a><span class="com">    <span class="op"> * </span>$.isBoolean
</span></code><code id="L2162"><a href="#L2162" class="ln">2162</a><span class="com">     [ method ]
</span></code><code id="L2163"><a href="#L2163" class="ln">2163</a><span class="com">    <span class="op"> * </span>Determine <span class=kwd>if</span> the parameter passed is <span class=kwd>boolean</span>.
</span></code><code id="L2164"><a href="#L2164" class="ln">2164</a><span class="com">     > Parameters
</span></code><code id="L2165"><a href="#L2165" class="ln">2165</a><span class="com">    <span class="op"> - </span>obj (object) Object to test <span class=kwd>if</span> its <span class=kwd>boolean</span>..
</span></code><code id="L2166"><a href="#L2166" class="ln">2166</a><span class="com">    <span class="op"> = </span>(<span class=kwd>boolean</span>) According wether or not it is <span class=kwd>boolean</span>.
</span></code><code id="L2167"><a href="#L2167" class="ln">2167</a><span class="com">     > Usage
</span></code><code id="L2168"><a href="#L2168" class="ln">2168</a><span class="com">    <span class="op"> | </span>$.isBoolean(<span class=kwd>false</span>); <span class="com">// True</span>
</span></code><code id="L2169"><a href="#L2169" class="ln">2169</a><span class="com">    <span class="op"> | </span>$.isBoolean(<span class="lit">3</span>); <span class="com">// False</span>
</span></code><code id="L2170"><a href="#L2170" class="ln">2170</a><span class="com">    \*/</span>
</code><code id="L2171"><a href="#L2171" class="ln">2171</a>    isBoolean: <span class=kwd>function</span> (obj) {
</code><code id="L2172"><a href="#L2172" class="ln">2172</a>      <span class=kwd>return</span> Kimbo.typeOf(obj)<span class="op"> === </span><span class="str">'<span class=kwd>boolean</span>'</span>;
</code><code id="L2173"><a href="#L2173" class="ln">2173</a>    }
</code><code id="L2174"><a href="#L2174" class="ln">2174</a>  });
</code><code id="L2175"><a href="#L2175" class="ln">2175</a>
</code><code id="L2176"><a href="#L2176" class="ln">2176</a>  <span class="com">// Save reference to Kimbo wrapped document as the <span class=kwd>default</span> context</span>
</code><code id="L2177"><a href="#L2177" class="ln">2177</a>  _.rootContext<span class="op"> = </span>_.kimbo(_.rootContext);
</code><code id="L2178"><a href="#L2178" class="ln">2178</a>});
</code><code id="L2179"><a href="#L2179" class="ln">2179</a>
</code><code id="L2180"><a href="#L2180" class="ln">2180</a>
</code><code id="L2181"><a href="#L2181" class="ln">2181</a>Kimbo.define(<span class="str">'events'</span>, <span class=kwd>function</span> (_) {
</code><code id="L2182"><a href="#L2182" class="ln">2182</a>
</code><code id="L2183"><a href="#L2183" class="ln">2183</a>  <span class="str">'use strict'</span>;
</code><code id="L2184"><a href="#L2184" class="ln">2184</a>
</code><code id="L2185"><a href="#L2185" class="ln">2185</a>  <span class=kwd>var</span> query<span class="op"> = </span>Kimbo.require(<span class="str">'query'</span>);
</code><code id="L2186"><a href="#L2186" class="ln">2186</a>
</code><code id="L2187"><a href="#L2187" class="ln">2187</a>  <span class=kwd>var</span> _guid<span class="op"> = </span><span class="lit">1</span>;
</code><code id="L2188"><a href="#L2188" class="ln">2188</a>
</code><code id="L2189"><a href="#L2189" class="ln">2189</a>  <span class=kwd>var</span> MOUSE_EVENT_RE<span class="op"> = </span>/^(?:mouse|menu)|click/;
</code><code id="L2190"><a href="#L2190" class="ln">2190</a>
</code><code id="L2191"><a href="#L2191" class="ln">2191</a>  <span class=kwd>var</span> KEY_EVENT_RE<span class="op"> = </span>/^key/;
</code><code id="L2192"><a href="#L2192" class="ln">2192</a>
</code><code id="L2193"><a href="#L2193" class="ln">2193</a>  <span class=kwd>var</span> DEFAULT_EVENT_PROPS<span class="op"> = </span>[
</code><code id="L2194"><a href="#L2194" class="ln">2194</a>    <span class="str">'altKey'</span>, <span class="str">'bubbles'</span>, <span class="str">'cancelable'</span>, <span class="str">'ctrlKey'</span>, <span class="str">'currentTarget'</span>, <span class="str">'defaultPrevented'</span>, <span class="str">'eventPhase'</span>,
</code><code id="L2195"><a href="#L2195" class="ln">2195</a>    <span class="str">'metaKey'</span>, <span class="str">'relatedTarget'</span>, <span class="str">'shiftKey'</span>, <span class="str">'target'</span>, <span class="str">'timeStamp'</span>, <span class="str">'type'</span>, <span class="str">'view'</span>, <span class="str">'which'</span>
</code><code id="L2196"><a href="#L2196" class="ln">2196</a>  ];
</code><code id="L2197"><a href="#L2197" class="ln">2197</a>
</code><code id="L2198"><a href="#L2198" class="ln">2198</a>  <span class=kwd>var</span> MOUSE_EVENT_PROPS<span class="op"> = </span>[
</code><code id="L2199"><a href="#L2199" class="ln">2199</a>    <span class="str">'button'</span>, <span class="str">'buttons'</span>, <span class="str">'clientX'</span>, <span class="str">'clientY'</span>, <span class="str">'fromElement'</span>,
</code><code id="L2200"><a href="#L2200" class="ln">2200</a>    <span class="str">'offsetX'</span>, <span class="str">'offsetY'</span>, <span class="str">'screenX'</span>, <span class="str">'screenY'</span>, <span class="str">'toElement'</span>
</code><code id="L2201"><a href="#L2201" class="ln">2201</a>  ];
</code><code id="L2202"><a href="#L2202" class="ln">2202</a>
</code><code id="L2203"><a href="#L2203" class="ln">2203</a>  <span class=kwd>var</span> KEY_EVENT_PROPS<span class="op"> = </span>[<span class="str">'<span class=kwd>char</span>'</span>, <span class="str">'charCode'</span>, <span class="str">'key'</span>, <span class="str">'keyCode'</span>];
</code><code id="L2204"><a href="#L2204" class="ln">2204</a>
</code><code id="L2205"><a href="#L2205" class="ln">2205</a>  <span class="com">// Gestures fallback <span class=kwd>for</span> not mobile environment</span>
</code><code id="L2206"><a href="#L2206" class="ln">2206</a>  <span class=kwd>var</span> GESTURES_FALLBACK<span class="op"> = </span>Kimbo.isMobile() ? {} : {
</code><code id="L2207"><a href="#L2207" class="ln">2207</a>    touchstart: <span class="str">'mousedown'</span>,
</code><code id="L2208"><a href="#L2208" class="ln">2208</a>    touchmove: <span class="str">'mousemove'</span>,
</code><code id="L2209"><a href="#L2209" class="ln">2209</a>    touchend: <span class="str">'mouseup'</span>,
</code><code id="L2210"><a href="#L2210" class="ln">2210</a>    touch: <span class="str">'click'</span>,
</code><code id="L2211"><a href="#L2211" class="ln">2211</a>    doubletap: <span class="str">'dblclick'</span>,
</code><code id="L2212"><a href="#L2212" class="ln">2212</a>    orientationchange: <span class="str">'resize'</span>
</code><code id="L2213"><a href="#L2213" class="ln">2213</a>  };
</code><code id="L2214"><a href="#L2214" class="ln">2214</a>
</code><code id="L2215"><a href="#L2215" class="ln">2215</a>  <span class=kwd>var</span> handlersHash<span class="op"> = </span>{};
</code><code id="L2216"><a href="#L2216" class="ln">2216</a>  <span class=kwd>var</span> fixEventProps<span class="op"> = </span>{};
</code><code id="L2217"><a href="#L2217" class="ln">2217</a>  <span class=kwd>var</span> specialEvents<span class="op"> = </span>{};
</code><code id="L2218"><a href="#L2218" class="ln">2218</a>
</code><code id="L2219"><a href="#L2219" class="ln">2219</a>  <span class=kwd>var</span> _fixEvent<span class="op"> = </span><span class=kwd>function</span> (event) {
</code><code id="L2220"><a href="#L2220" class="ln">2220</a>    <span class=kwd>var</span> originalEvent, eventProps, props;
</code><code id="L2221"><a href="#L2221" class="ln">2221</a>
</code><code id="L2222"><a href="#L2222" class="ln">2222</a>    <span class="com">// Already fixed</span>
</code><code id="L2223"><a href="#L2223" class="ln">2223</a>    <span class=kwd>if</span> (event[Kimbo.ref]) {
</code><code id="L2224"><a href="#L2224" class="ln">2224</a>      <span class=kwd>return</span> event;
</code><code id="L2225"><a href="#L2225" class="ln">2225</a>    }
</code><code id="L2226"><a href="#L2226" class="ln">2226</a>
</code><code id="L2227"><a href="#L2227" class="ln">2227</a>    <span class="com">// Get event properties</span>
</code><code id="L2228"><a href="#L2228" class="ln">2228</a>    originalEvent<span class="op"> = </span>event;
</code><code id="L2229"><a href="#L2229" class="ln">2229</a>    eventProps<span class="op"> = </span>fixEventProps[event.type]<span class="op"> || </span>[];
</code><code id="L2230"><a href="#L2230" class="ln">2230</a>    props<span class="op"> = </span>DEFAULT_EVENT_PROPS.concat(eventProps);
</code><code id="L2231"><a href="#L2231" class="ln">2231</a>
</code><code id="L2232"><a href="#L2232" class="ln">2232</a>    <span class="com">// Create a <span class=kwd>new</span> event writable custom event object</span>
</code><code id="L2233"><a href="#L2233" class="ln">2233</a>    event<span class="op"> = </span><span class=kwd>new</span> Kimbo.Event(originalEvent);
</code><code id="L2234"><a href="#L2234" class="ln">2234</a>
</code><code id="L2235"><a href="#L2235" class="ln">2235</a>    <span class="com">// Set event props to Kimbo.Event object</span>
</code><code id="L2236"><a href="#L2236" class="ln">2236</a>    Kimbo.forEach(props, <span class=kwd>function</span> (prop) {
</code><code id="L2237"><a href="#L2237" class="ln">2237</a>      event[prop]<span class="op"> = </span>originalEvent[prop];
</code><code id="L2238"><a href="#L2238" class="ln">2238</a>    });
</code><code id="L2239"><a href="#L2239" class="ln">2239</a>
</code><code id="L2240"><a href="#L2240" class="ln">2240</a>    <span class=kwd>return</span> event;
</code><code id="L2241"><a href="#L2241" class="ln">2241</a>  };
</code><code id="L2242"><a href="#L2242" class="ln">2242</a>
</code><code id="L2243"><a href="#L2243" class="ln">2243</a>  <span class="com">// Return element id</span>
</code><code id="L2244"><a href="#L2244" class="ln">2244</a>  <span class=kwd>var</span> _getElementId<span class="op"> = </span><span class=kwd>function</span> (element) {
</code><code id="L2245"><a href="#L2245" class="ln">2245</a>    <span class=kwd>return</span> element._guid<span class="op"> || </span>(element._guid<span class="op"> = </span>_guid++);
</code><code id="L2246"><a href="#L2246" class="ln">2246</a>  };
</code><code id="L2247"><a href="#L2247" class="ln">2247</a>
</code><code id="L2248"><a href="#L2248" class="ln">2248</a>  <span class="com">// Get element handlers <span class=kwd>for</span> the specified type</span>
</code><code id="L2249"><a href="#L2249" class="ln">2249</a>  <span class=kwd>var</span> _getHandlers<span class="op"> = </span><span class=kwd>function</span> (elementId, type) {
</code><code id="L2250"><a href="#L2250" class="ln">2250</a>    <span class=kwd>var</span> events<span class="op"> = </span>((handlersHash[elementId]<span class="op"> || </span>{}).events<span class="op"> || </span>{});
</code><code id="L2251"><a href="#L2251" class="ln">2251</a>
</code><code id="L2252"><a href="#L2252" class="ln">2252</a>    <span class=kwd>return</span> (type ? events[type] : events)<span class="op"> || </span>[];
</code><code id="L2253"><a href="#L2253" class="ln">2253</a>  };
</code><code id="L2254"><a href="#L2254" class="ln">2254</a>
</code><code id="L2255"><a href="#L2255" class="ln">2255</a>  <span class="com">// Quick is() to check <span class=kwd>if</span> event target matches when events are delegated</span>
</code><code id="L2256"><a href="#L2256" class="ln">2256</a>  <span class=kwd>var</span> _is<span class="op"> = </span><span class=kwd>function</span> (target, selector, element) {
</code><code id="L2257"><a href="#L2257" class="ln">2257</a>    <span class=kwd>return</span> (target.nodeName.toLowerCase()<span class="op"> === </span>selector<span class="op"> &amp;&amp; </span>_.kimbo(target).closest(selector, element)[<span class="lit">0</span>]);
</code><code id="L2258"><a href="#L2258" class="ln">2258</a>  };
</code><code id="L2259"><a href="#L2259" class="ln">2259</a>
</code><code id="L2260"><a href="#L2260" class="ln">2260</a>  <span class=kwd>var</span> _returnFalse<span class="op"> = </span><span class=kwd>function</span> () {
</code><code id="L2261"><a href="#L2261" class="ln">2261</a>    <span class=kwd>return</span> <span class=kwd>false</span>;
</code><code id="L2262"><a href="#L2262" class="ln">2262</a>  };
</code><code id="L2263"><a href="#L2263" class="ln">2263</a>
</code><code id="L2264"><a href="#L2264" class="ln">2264</a>  <span class=kwd>var</span> _returnTrue<span class="op"> = </span><span class=kwd>function</span> () {
</code><code id="L2265"><a href="#L2265" class="ln">2265</a>    <span class=kwd>return</span> <span class=kwd>true</span>;
</code><code id="L2266"><a href="#L2266" class="ln">2266</a>  };
</code><code id="L2267"><a href="#L2267" class="ln">2267</a>
</code><code id="L2268"><a href="#L2268" class="ln">2268</a>  <span class="com">// Register events to dom elements</span>
</code><code id="L2269"><a href="#L2269" class="ln">2269</a>  <span class=kwd>var</span> _addEvent<span class="op"> = </span><span class=kwd>function</span> (element, type, callback, data, selector) {
</code><code id="L2270"><a href="#L2270" class="ln">2270</a>
</code><code id="L2271"><a href="#L2271" class="ln">2271</a>    <span class="com">// TODO: element should use Kimbo.ref and the handler the _guid</span>
</code><code id="L2272"><a href="#L2272" class="ln">2272</a>    <span class=kwd>var</span> elementId<span class="op"> = </span>_getElementId(element);
</code><code id="L2273"><a href="#L2273" class="ln">2273</a>    <span class=kwd>var</span> elementHandlers<span class="op"> = </span>handlersHash[elementId];
</code><code id="L2274"><a href="#L2274" class="ln">2274</a>    <span class=kwd>var</span> origType<span class="op"> = </span>type;
</code><code id="L2275"><a href="#L2275" class="ln">2275</a>    <span class=kwd>var</span> events, handlers, handleObj, handler;
</code><code id="L2276"><a href="#L2276" class="ln">2276</a>
</code><code id="L2277"><a href="#L2277" class="ln">2277</a>    <span class="com">// Could be a special type like mouseenter/mouseleave</span>
</code><code id="L2278"><a href="#L2278" class="ln">2278</a>    type<span class="op"> = </span>specialEvents[type] ? specialEvents[type].origType : type;
</code><code id="L2279"><a href="#L2279" class="ln">2279</a>
</code><code id="L2280"><a href="#L2280" class="ln">2280</a>    <span class="com">// Create hash <span class=kwd>for</span> <span class=kwd>this</span> element <span class=kwd>if</span> first init</span>
</code><code id="L2281"><a href="#L2281" class="ln">2281</a>    <span class=kwd>if</span> (!elementHandlers) {
</code><code id="L2282"><a href="#L2282" class="ln">2282</a>      handlersHash[elementId]<span class="op"> = </span>elementHandlers<span class="op"> = </span>{};
</code><code id="L2283"><a href="#L2283" class="ln">2283</a>    }
</code><code id="L2284"><a href="#L2284" class="ln">2284</a>
</code><code id="L2285"><a href="#L2285" class="ln">2285</a>    <span class="com">// Create events object <span class=kwd>if</span> first init</span>
</code><code id="L2286"><a href="#L2286" class="ln">2286</a>    events<span class="op"> = </span>elementHandlers.events;
</code><code id="L2287"><a href="#L2287" class="ln">2287</a>    <span class=kwd>if</span> (!events) {
</code><code id="L2288"><a href="#L2288" class="ln">2288</a>      elementHandlers.events<span class="op"> = </span>events<span class="op"> = </span>{};
</code><code id="L2289"><a href="#L2289" class="ln">2289</a>    }
</code><code id="L2290"><a href="#L2290" class="ln">2290</a>
</code><code id="L2291"><a href="#L2291" class="ln">2291</a>    <span class="com">// Create the handler <span class=kwd>for</span> <span class=kwd>this</span> element <span class=kwd>if</span> first init</span>
</code><code id="L2292"><a href="#L2292" class="ln">2292</a>    handler<span class="op"> = </span>elementHandlers.handler;
</code><code id="L2293"><a href="#L2293" class="ln">2293</a>    <span class=kwd>if</span> (!handler) {
</code><code id="L2294"><a href="#L2294" class="ln">2294</a>      elementHandlers.handler<span class="op"> = </span>handler<span class="op"> = </span><span class=kwd>function</span> () {
</code><code id="L2295"><a href="#L2295" class="ln">2295</a>        <span class=kwd>return</span> _dispatchEvent.apply(element, arguments);
</code><code id="L2296"><a href="#L2296" class="ln">2296</a>      };
</code><code id="L2297"><a href="#L2297" class="ln">2297</a>    }
</code><code id="L2298"><a href="#L2298" class="ln">2298</a>
</code><code id="L2299"><a href="#L2299" class="ln">2299</a>    <span class="com">// Create handler object</span>
</code><code id="L2300"><a href="#L2300" class="ln">2300</a>    handleObj<span class="op"> = </span>{
</code><code id="L2301"><a href="#L2301" class="ln">2301</a>      type: type,
</code><code id="L2302"><a href="#L2302" class="ln">2302</a>      origType: origType,
</code><code id="L2303"><a href="#L2303" class="ln">2303</a>      data: data,
</code><code id="L2304"><a href="#L2304" class="ln">2304</a>      callback: callback,
</code><code id="L2305"><a href="#L2305" class="ln">2305</a>      selector: selector
</code><code id="L2306"><a href="#L2306" class="ln">2306</a>    };
</code><code id="L2307"><a href="#L2307" class="ln">2307</a>
</code><code id="L2308"><a href="#L2308" class="ln">2308</a>    <span class="com">// Only add an event listener one time <span class=kwd>for</span> each type of event</span>
</code><code id="L2309"><a href="#L2309" class="ln">2309</a>    handlers<span class="op"> = </span>events[type];
</code><code id="L2310"><a href="#L2310" class="ln">2310</a>    <span class=kwd>if</span> (!handlers) {
</code><code id="L2311"><a href="#L2311" class="ln">2311</a>
</code><code id="L2312"><a href="#L2312" class="ln">2312</a>      <span class="com">// Array of events <span class=kwd>for</span> the current type</span>
</code><code id="L2313"><a href="#L2313" class="ln">2313</a>      handlers<span class="op"> = </span>events[type]<span class="op"> = </span>[];
</code><code id="L2314"><a href="#L2314" class="ln">2314</a>      handlers.delegateCount<span class="op"> = </span><span class="lit">0</span>;
</code><code id="L2315"><a href="#L2315" class="ln">2315</a>
</code><code id="L2316"><a href="#L2316" class="ln">2316</a>      <span class="com">// Add event</span>
</code><code id="L2317"><a href="#L2317" class="ln">2317</a>      <span class=kwd>if</span> (element.addEventListener) {
</code><code id="L2318"><a href="#L2318" class="ln">2318</a>        element.addEventListener(type, handler, <span class=kwd>false</span>);
</code><code id="L2319"><a href="#L2319" class="ln">2319</a>      }
</code><code id="L2320"><a href="#L2320" class="ln">2320</a>    }
</code><code id="L2321"><a href="#L2321" class="ln">2321</a>
</code><code id="L2322"><a href="#L2322" class="ln">2322</a>    <span class="com">// Add to handlers hash, delegates first</span>
</code><code id="L2323"><a href="#L2323" class="ln">2323</a>    <span class=kwd>if</span> (selector) {
</code><code id="L2324"><a href="#L2324" class="ln">2324</a>      handlers.splice(handlers.delegateCount++, <span class="lit">0</span>, handleObj);
</code><code id="L2325"><a href="#L2325" class="ln">2325</a>
</code><code id="L2326"><a href="#L2326" class="ln">2326</a>    } <span class=kwd>else</span> {
</code><code id="L2327"><a href="#L2327" class="ln">2327</a>      handlers.push(handleObj);
</code><code id="L2328"><a href="#L2328" class="ln">2328</a>    }
</code><code id="L2329"><a href="#L2329" class="ln">2329</a>  };
</code><code id="L2330"><a href="#L2330" class="ln">2330</a>
</code><code id="L2331"><a href="#L2331" class="ln">2331</a>  <span class="com">// Unregister events from dom elements</span>
</code><code id="L2332"><a href="#L2332" class="ln">2332</a>  <span class=kwd>var</span> _removeEvent<span class="op"> = </span><span class=kwd>function</span> (element, type, callback, selector) {
</code><code id="L2333"><a href="#L2333" class="ln">2333</a>    <span class=kwd>var</span> elementId<span class="op"> = </span>_getElementId(element);
</code><code id="L2334"><a href="#L2334" class="ln">2334</a>    <span class=kwd>var</span> handleObj, handlers, name, i;
</code><code id="L2335"><a href="#L2335" class="ln">2335</a>
</code><code id="L2336"><a href="#L2336" class="ln">2336</a>    <span class=kwd>if</span> (!elementId) {
</code><code id="L2337"><a href="#L2337" class="ln">2337</a>      <span class=kwd>return</span>;
</code><code id="L2338"><a href="#L2338" class="ln">2338</a>    }
</code><code id="L2339"><a href="#L2339" class="ln">2339</a>
</code><code id="L2340"><a href="#L2340" class="ln">2340</a>    handlers<span class="op"> = </span>_getHandlers(elementId, type);
</code><code id="L2341"><a href="#L2341" class="ln">2341</a>
</code><code id="L2342"><a href="#L2342" class="ln">2342</a>    <span class="com">// Return <span class=kwd>if</span> no handlers <span class=kwd>for</span> the current event type</span>
</code><code id="L2343"><a href="#L2343" class="ln">2343</a>    <span class=kwd>if</span> (type<span class="op"> &amp;&amp; </span>!handlers.length) {
</code><code id="L2344"><a href="#L2344" class="ln">2344</a>      <span class=kwd>return</span>;
</code><code id="L2345"><a href="#L2345" class="ln">2345</a>    }
</code><code id="L2346"><a href="#L2346" class="ln">2346</a>
</code><code id="L2347"><a href="#L2347" class="ln">2347</a>    <span class="com">// Remove all handlers <span class=kwd>if</span> no type provided</span>
</code><code id="L2348"><a href="#L2348" class="ln">2348</a>    <span class=kwd>if</span> (!type) {
</code><code id="L2349"><a href="#L2349" class="ln">2349</a>      <span class=kwd>for</span> (name <span class=kwd>in</span> handlers) {
</code><code id="L2350"><a href="#L2350" class="ln">2350</a>        <span class=kwd>if</span> (handlers.hasOwnProperty(name)) {
</code><code id="L2351"><a href="#L2351" class="ln">2351</a>          _removeEvent(element, name, callback, selector);
</code><code id="L2352"><a href="#L2352" class="ln">2352</a>        }
</code><code id="L2353"><a href="#L2353" class="ln">2353</a>      }
</code><code id="L2354"><a href="#L2354" class="ln">2354</a>    }
</code><code id="L2355"><a href="#L2355" class="ln">2355</a>
</code><code id="L2356"><a href="#L2356" class="ln">2356</a>    <span class="com">// Remove handlers that match</span>
</code><code id="L2357"><a href="#L2357" class="ln">2357</a>    <span class=kwd>for</span> (i<span class="op"> = </span><span class="lit">0</span>; i &lt; handlers.length; i++) {
</code><code id="L2358"><a href="#L2358" class="ln">2358</a>      handleObj<span class="op"> = </span>handlers[i];
</code><code id="L2359"><a href="#L2359" class="ln">2359</a>      <span class=kwd>if</span> ((!callback<span class="op"> || </span>callback<span class="op"> === </span>handleObj.callback)<span class="op"> &amp;&amp; </span>(!selector<span class="op"> || </span>selector<span class="op"> === </span>handleObj.selector)) {
</code><code id="L2360"><a href="#L2360" class="ln">2360</a>
</code><code id="L2361"><a href="#L2361" class="ln">2361</a>        <span class="com">// Remove current handler from stack</span>
</code><code id="L2362"><a href="#L2362" class="ln">2362</a>        handlers.splice(i--, <span class="lit">1</span>);
</code><code id="L2363"><a href="#L2363" class="ln">2363</a>
</code><code id="L2364"><a href="#L2364" class="ln">2364</a>        <span class="com">// Decrement delegate count</span>
</code><code id="L2365"><a href="#L2365" class="ln">2365</a>        <span class=kwd>if</span> (handleObj.selector) {
</code><code id="L2366"><a href="#L2366" class="ln">2366</a>          handlers.delegateCount--;
</code><code id="L2367"><a href="#L2367" class="ln">2367</a>        }
</code><code id="L2368"><a href="#L2368" class="ln">2368</a>      }
</code><code id="L2369"><a href="#L2369" class="ln">2369</a>    }
</code><code id="L2370"><a href="#L2370" class="ln">2370</a>
</code><code id="L2371"><a href="#L2371" class="ln">2371</a>    <span class="com">// If no more events <span class=kwd>for</span> the current type <span class=kwd>delete</span> its hash</span>
</code><code id="L2372"><a href="#L2372" class="ln">2372</a>    <span class=kwd>if</span> (!handlers.length) {
</code><code id="L2373"><a href="#L2373" class="ln">2373</a>
</code><code id="L2374"><a href="#L2374" class="ln">2374</a>      <span class="com">// Remove event handler</span>
</code><code id="L2375"><a href="#L2375" class="ln">2375</a>      element.removeEventListener(type, handlersHash[elementId].handler, <span class=kwd>false</span>);
</code><code id="L2376"><a href="#L2376" class="ln">2376</a>      <span class=kwd>delete</span> handlersHash[elementId].events[type];
</code><code id="L2377"><a href="#L2377" class="ln">2377</a>    }
</code><code id="L2378"><a href="#L2378" class="ln">2378</a>
</code><code id="L2379"><a href="#L2379" class="ln">2379</a>    <span class="com">// Remove kimbo reference <span class=kwd>if</span> element have no more events</span>
</code><code id="L2380"><a href="#L2380" class="ln">2380</a>    <span class="com">// If (Kimbo.isEmptyObject(handlersHash[elementId].events)) {</span>
</code><code id="L2381"><a href="#L2381" class="ln">2381</a>    <span class="com">//   <span class=kwd>delete</span> handlersHash[elementId];</span>
</code><code id="L2382"><a href="#L2382" class="ln">2382</a>    <span class="com">//   <span class=kwd>delete</span> element._guid;</span>
</code><code id="L2383"><a href="#L2383" class="ln">2383</a>    <span class="com">// }</span>
</code><code id="L2384"><a href="#L2384" class="ln">2384</a>  };
</code><code id="L2385"><a href="#L2385" class="ln">2385</a>
</code><code id="L2386"><a href="#L2386" class="ln">2386</a>  <span class="com">// Triggers a provided event type</span>
</code><code id="L2387"><a href="#L2387" class="ln">2387</a>  <span class=kwd>var</span> _triggerEvent<span class="op"> = </span><span class=kwd>function</span> (element, type, data) {
</code><code id="L2388"><a href="#L2388" class="ln">2388</a>
</code><code id="L2389"><a href="#L2389" class="ln">2389</a><span class="com">    <span class="com"><span class="com">/* jshint validthis: <span class=kwd>true</span></span> */</span></span>
</code><code id="L2390"><a href="#L2390" class="ln">2390</a>    <span class=kwd>var</span> currentElement, lastElement, eventTree, elementId, event;
</code><code id="L2391"><a href="#L2391" class="ln">2391</a>
</code><code id="L2392"><a href="#L2392" class="ln">2392</a>    <span class="com">// Don't <span class=kwd>do</span> events <span class=kwd>if</span> element is text or comment node</span>
</code><code id="L2393"><a href="#L2393" class="ln">2393</a>    <span class="com">// Or <span class=kwd>if</span> there is no event type at all or type is not a string</span>
</code><code id="L2394"><a href="#L2394" class="ln">2394</a>    <span class=kwd>if</span> ((element<span class="op"> &amp;&amp; </span>(element.nodeType<span class="op"> === </span><span class="lit">3</span><span class="op"> || </span>element.nodeType<span class="op"> === </span><span class="lit">8</span>))<span class="op"> || </span>!type<span class="op"> || </span>!Kimbo.isString(type)) {
</code><code id="L2395"><a href="#L2395" class="ln">2395</a>      <span class=kwd>return</span> <span class=kwd>this</span>;
</code><code id="L2396"><a href="#L2396" class="ln">2396</a>    }
</code><code id="L2397"><a href="#L2397" class="ln">2397</a>
</code><code id="L2398"><a href="#L2398" class="ln">2398</a>    <span class="com">// Try triggering <span class=kwd>native</span> focus and blur events</span>
</code><code id="L2399"><a href="#L2399" class="ln">2399</a>    <span class=kwd>if</span> (type<span class="op"> === </span><span class="str">'focus'</span><span class="op"> || </span>type<span class="op"> === </span><span class="str">'blur'</span>) {
</code><code id="L2400"><a href="#L2400" class="ln">2400</a>      <span class=kwd>try</span> {
</code><code id="L2401"><a href="#L2401" class="ln">2401</a>        <span class=kwd>return</span> element[type]();
</code><code id="L2402"><a href="#L2402" class="ln">2402</a>      } <span class=kwd>catch</span> (e) {}
</code><code id="L2403"><a href="#L2403" class="ln">2403</a>    }
</code><code id="L2404"><a href="#L2404" class="ln">2404</a>
</code><code id="L2405"><a href="#L2405" class="ln">2405</a>    <span class="com">// Create a <span class=kwd>new</span> writable custom event object</span>
</code><code id="L2406"><a href="#L2406" class="ln">2406</a>    event<span class="op"> = </span><span class=kwd>new</span> Kimbo.Event(type);
</code><code id="L2407"><a href="#L2407" class="ln">2407</a>
</code><code id="L2408"><a href="#L2408" class="ln">2408</a>    <span class="com">// Triggered programatically</span>
</code><code id="L2409"><a href="#L2409" class="ln">2409</a>    event.isTrigger<span class="op"> = </span><span class=kwd>true</span>;
</code><code id="L2410"><a href="#L2410" class="ln">2410</a>
</code><code id="L2411"><a href="#L2411" class="ln">2411</a>    <span class="com">// Set the target</span>
</code><code id="L2412"><a href="#L2412" class="ln">2412</a>    <span class=kwd>if</span> (!event.target) {
</code><code id="L2413"><a href="#L2413" class="ln">2413</a>      event.target<span class="op"> = </span>element;
</code><code id="L2414"><a href="#L2414" class="ln">2414</a>    }
</code><code id="L2415"><a href="#L2415" class="ln">2415</a>
</code><code id="L2416"><a href="#L2416" class="ln">2416</a>    <span class="com">// Include data <span class=kwd>if</span> any</span>
</code><code id="L2417"><a href="#L2417" class="ln">2417</a>    data<span class="op"> = </span>data ? Kimbo.makeArray(data) : [];
</code><code id="L2418"><a href="#L2418" class="ln">2418</a>    <span class="com">// Event goes first</span>
</code><code id="L2419"><a href="#L2419" class="ln">2419</a>    data.unshift(event);
</code><code id="L2420"><a href="#L2420" class="ln">2420</a>
</code><code id="L2421"><a href="#L2421" class="ln">2421</a>    <span class="com">// Generate a stack of [element, event] to be triggered</span>
</code><code id="L2422"><a href="#L2422" class="ln">2422</a>    eventTree<span class="op"> = </span>[[element, type]];
</code><code id="L2423"><a href="#L2423" class="ln">2423</a>    <span class=kwd>if</span> (!Kimbo.isWindow(element)) {
</code><code id="L2424"><a href="#L2424" class="ln">2424</a>
</code><code id="L2425"><a href="#L2425" class="ln">2425</a>      <span class="com">// Get all parent elements to bubble event later</span>
</code><code id="L2426"><a href="#L2426" class="ln">2426</a>      <span class=kwd>for</span> (currentElement<span class="op"> = </span>element.parentNode; currentElement; currentElement<span class="op"> = </span>currentElement.parentNode) {
</code><code id="L2427"><a href="#L2427" class="ln">2427</a>        eventTree.push([currentElement, type]);
</code><code id="L2428"><a href="#L2428" class="ln">2428</a>        lastElement<span class="op"> = </span>currentElement;
</code><code id="L2429"><a href="#L2429" class="ln">2429</a>      }
</code><code id="L2430"><a href="#L2430" class="ln">2430</a>
</code><code id="L2431"><a href="#L2431" class="ln">2431</a>      <span class="com">// Only add window object <span class=kwd>if</span> we got to document (e.g., not plain obj or detached DOM)</span>
</code><code id="L2432"><a href="#L2432" class="ln">2432</a>      <span class=kwd>if</span> (lastElement<span class="op"> &amp;&amp; </span>lastElement<span class="op"> === </span>element.ownerDocument) {
</code><code id="L2433"><a href="#L2433" class="ln">2433</a>        eventTree.push([window, type]);
</code><code id="L2434"><a href="#L2434" class="ln">2434</a>      }
</code><code id="L2435"><a href="#L2435" class="ln">2435</a>    }
</code><code id="L2436"><a href="#L2436" class="ln">2436</a>
</code><code id="L2437"><a href="#L2437" class="ln">2437</a>    <span class="com">// Fire handlers up to the document (or the last element)</span>
</code><code id="L2438"><a href="#L2438" class="ln">2438</a>    Kimbo.forEach(eventTree, <span class=kwd>function</span> (branch) {
</code><code id="L2439"><a href="#L2439" class="ln">2439</a>
</code><code id="L2440"><a href="#L2440" class="ln">2440</a>      <span class="com">// Element</span>
</code><code id="L2441"><a href="#L2441" class="ln">2441</a>      currentElement<span class="op"> = </span>branch[<span class="lit">0</span>];
</code><code id="L2442"><a href="#L2442" class="ln">2442</a>
</code><code id="L2443"><a href="#L2443" class="ln">2443</a>      <span class="com">// Type</span>
</code><code id="L2444"><a href="#L2444" class="ln">2444</a>      event.type<span class="op"> = </span>branch[<span class="lit">1</span>];
</code><code id="L2445"><a href="#L2445" class="ln">2445</a>
</code><code id="L2446"><a href="#L2446" class="ln">2446</a>      <span class="com">// Get element id</span>
</code><code id="L2447"><a href="#L2447" class="ln">2447</a>      elementId<span class="op"> = </span>currentElement._guid;
</code><code id="L2448"><a href="#L2448" class="ln">2448</a>
</code><code id="L2449"><a href="#L2449" class="ln">2449</a>      <span class="com">// If the current element has events of the specified type, dispatch them</span>
</code><code id="L2450"><a href="#L2450" class="ln">2450</a>      <span class=kwd>if</span> (elementId<span class="op"> &amp;&amp; </span>_getHandlers(elementId, type)) {
</code><code id="L2451"><a href="#L2451" class="ln">2451</a>        handlersHash[elementId].handler.apply(currentElement, data);
</code><code id="L2452"><a href="#L2452" class="ln">2452</a>      }
</code><code id="L2453"><a href="#L2453" class="ln">2453</a>    });
</code><code id="L2454"><a href="#L2454" class="ln">2454</a>  };
</code><code id="L2455"><a href="#L2455" class="ln">2455</a>
</code><code id="L2456"><a href="#L2456" class="ln">2456</a>  <span class="com">// Own defined dispatchEvent()</span>
</code><code id="L2457"><a href="#L2457" class="ln">2457</a>  <span class=kwd>var</span> _dispatchEvent<span class="op"> = </span><span class=kwd>function</span> (event) {
</code><code id="L2458"><a href="#L2458" class="ln">2458</a><span class="com">    <span class="com"><span class="com">/* jshint -W040</span> */</span></span>
</code><code id="L2459"><a href="#L2459" class="ln">2459</a>
</code><code id="L2460"><a href="#L2460" class="ln">2460</a>    <span class="com">// Use own event object</span>
</code><code id="L2461"><a href="#L2461" class="ln">2461</a>    event<span class="op"> = </span>_fixEvent(event);
</code><code id="L2462"><a href="#L2462" class="ln">2462</a>
</code><code id="L2463"><a href="#L2463" class="ln">2463</a>    <span class=kwd>var</span> elementId<span class="op"> = </span>_getElementId(<span class=kwd>this</span>);
</code><code id="L2464"><a href="#L2464" class="ln">2464</a>    <span class=kwd>var</span> handlers<span class="op"> = </span>_getHandlers(elementId, event.type);
</code><code id="L2465"><a href="#L2465" class="ln">2465</a>    <span class=kwd>var</span> delegateCount<span class="op"> = </span>handlers.delegateCount;
</code><code id="L2466"><a href="#L2466" class="ln">2466</a>    <span class=kwd>var</span> args<span class="op"> = </span>_.slice.call(arguments);
</code><code id="L2467"><a href="#L2467" class="ln">2467</a>    <span class=kwd>var</span> handlerQueue<span class="op"> = </span>[];
</code><code id="L2468"><a href="#L2468" class="ln">2468</a>    <span class=kwd>var</span> currentElement, ret, selMatch, matches, handleObj, selector, i;
</code><code id="L2469"><a href="#L2469" class="ln">2469</a>
</code><code id="L2470"><a href="#L2470" class="ln">2470</a>    <span class="com">// Set the <span class=kwd>native</span> event to be the fixed event</span>
</code><code id="L2471"><a href="#L2471" class="ln">2471</a>    args[<span class="lit">0</span>]<span class="op"> = </span>event;
</code><code id="L2472"><a href="#L2472" class="ln">2472</a>
</code><code id="L2473"><a href="#L2473" class="ln">2473</a>    <span class="com">// Save the delegate target element</span>
</code><code id="L2474"><a href="#L2474" class="ln">2474</a>    event.delegateTarget<span class="op"> = </span><span class=kwd>this</span>;
</code><code id="L2475"><a href="#L2475" class="ln">2475</a>
</code><code id="L2476"><a href="#L2476" class="ln">2476</a>    <span class="com">// Get delegated handlers <span class=kwd>if</span> any</span>
</code><code id="L2477"><a href="#L2477" class="ln">2477</a>    <span class=kwd>if</span> (delegateCount) {
</code><code id="L2478"><a href="#L2478" class="ln">2478</a>
</code><code id="L2479"><a href="#L2479" class="ln">2479</a>      <span class="com">// Go up to the dom finding the elements that matches the current selector from delegated event</span>
</code><code id="L2480"><a href="#L2480" class="ln">2480</a>      <span class=kwd>for</span> (currentElement<span class="op"> = </span>event.target; currentElement !== <span class=kwd>this</span>; currentElement<span class="op"> = </span>currentElement.parentNode<span class="op"> || </span><span class=kwd>this</span>) {
</code><code id="L2481"><a href="#L2481" class="ln">2481</a>
</code><code id="L2482"><a href="#L2482" class="ln">2482</a>        <span class="com">// Don't <span class=kwd>do</span> events on disabled elements</span>
</code><code id="L2483"><a href="#L2483" class="ln">2483</a>        <span class=kwd>if</span> (currentElement.disabled !== <span class=kwd>true</span><span class="op"> || </span>event.type !== <span class="str">'click'</span>) {
</code><code id="L2484"><a href="#L2484" class="ln">2484</a>          selMatch<span class="op"> = </span>{};
</code><code id="L2485"><a href="#L2485" class="ln">2485</a>          matches<span class="op"> = </span>[];
</code><code id="L2486"><a href="#L2486" class="ln">2486</a>
</code><code id="L2487"><a href="#L2487" class="ln">2487</a>          <span class="com">// Loop throgh delegated events</span>
</code><code id="L2488"><a href="#L2488" class="ln">2488</a>          <span class=kwd>for</span> (i<span class="op"> = </span><span class="lit">0</span>; i &lt; delegateCount; i++) {
</code><code id="L2489"><a href="#L2489" class="ln">2489</a>
</code><code id="L2490"><a href="#L2490" class="ln">2490</a>            <span class="com">// Get its handler</span>
</code><code id="L2491"><a href="#L2491" class="ln">2491</a>            handleObj<span class="op"> = </span>handlers[i];
</code><code id="L2492"><a href="#L2492" class="ln">2492</a>
</code><code id="L2493"><a href="#L2493" class="ln">2493</a>            <span class="com">// Get its selector</span>
</code><code id="L2494"><a href="#L2494" class="ln">2494</a>            selector<span class="op"> = </span>handleObj.selector;
</code><code id="L2495"><a href="#L2495" class="ln">2495</a>
</code><code id="L2496"><a href="#L2496" class="ln">2496</a>            <span class=kwd>if</span> (!selMatch[selector]) {
</code><code id="L2497"><a href="#L2497" class="ln">2497</a>              selMatch[selector]<span class="op"> = </span>_is(currentElement, selector, <span class=kwd>this</span>);
</code><code id="L2498"><a href="#L2498" class="ln">2498</a>            }
</code><code id="L2499"><a href="#L2499" class="ln">2499</a>
</code><code id="L2500"><a href="#L2500" class="ln">2500</a>            <span class=kwd>if</span> (selMatch[selector]) {
</code><code id="L2501"><a href="#L2501" class="ln">2501</a>              matches.push(handleObj);
</code><code id="L2502"><a href="#L2502" class="ln">2502</a>            }
</code><code id="L2503"><a href="#L2503" class="ln">2503</a>          }
</code><code id="L2504"><a href="#L2504" class="ln">2504</a>
</code><code id="L2505"><a href="#L2505" class="ln">2505</a>          <span class=kwd>if</span> (matches.length) {
</code><code id="L2506"><a href="#L2506" class="ln">2506</a>            handlerQueue.push({elem: currentElement, matches: matches});
</code><code id="L2507"><a href="#L2507" class="ln">2507</a>          }
</code><code id="L2508"><a href="#L2508" class="ln">2508</a>        }
</code><code id="L2509"><a href="#L2509" class="ln">2509</a>      }
</code><code id="L2510"><a href="#L2510" class="ln">2510</a>    }
</code><code id="L2511"><a href="#L2511" class="ln">2511</a>
</code><code id="L2512"><a href="#L2512" class="ln">2512</a>    <span class="com">// Add the remaining not delegated handlers</span>
</code><code id="L2513"><a href="#L2513" class="ln">2513</a>    <span class=kwd>if</span> (handlers.length > delegateCount) {
</code><code id="L2514"><a href="#L2514" class="ln">2514</a>      handlerQueue.push({elem: <span class=kwd>this</span>, matches: handlers.slice(delegateCount)});
</code><code id="L2515"><a href="#L2515" class="ln">2515</a>    }
</code><code id="L2516"><a href="#L2516" class="ln">2516</a>
</code><code id="L2517"><a href="#L2517" class="ln">2517</a>    <span class="com">// Fire callbacks queue</span>
</code><code id="L2518"><a href="#L2518" class="ln">2518</a>    Kimbo.forEach(handlerQueue, <span class=kwd>function</span> (handler) {
</code><code id="L2519"><a href="#L2519" class="ln">2519</a>
</code><code id="L2520"><a href="#L2520" class="ln">2520</a>      <span class="com">// Only fire handler <span class=kwd>if</span> event wasnt stopped</span>
</code><code id="L2521"><a href="#L2521" class="ln">2521</a>      <span class=kwd>if</span> (!event.isPropagationStopped()) {
</code><code id="L2522"><a href="#L2522" class="ln">2522</a>        event.currentTarget<span class="op"> = </span>handler.elem;
</code><code id="L2523"><a href="#L2523" class="ln">2523</a>
</code><code id="L2524"><a href="#L2524" class="ln">2524</a>        Kimbo.forEach(handler.matches, <span class=kwd>function</span> (handleObj) {
</code><code id="L2525"><a href="#L2525" class="ln">2525</a>
</code><code id="L2526"><a href="#L2526" class="ln">2526</a>          <span class="com">// Only fire bubble <span class=kwd>if</span> not stopped</span>
</code><code id="L2527"><a href="#L2527" class="ln">2527</a>          <span class=kwd>if</span> (!event.isImmediatePropagationStopped()) {
</code><code id="L2528"><a href="#L2528" class="ln">2528</a>            event.data<span class="op"> = </span>handleObj.data;
</code><code id="L2529"><a href="#L2529" class="ln">2529</a>            event.handleObj<span class="op"> = </span>handleObj;
</code><code id="L2530"><a href="#L2530" class="ln">2530</a>
</code><code id="L2531"><a href="#L2531" class="ln">2531</a>            <span class="com">// Call original callback, check <span class=kwd>if</span> its an special event first</span>
</code><code id="L2532"><a href="#L2532" class="ln">2532</a>            ret<span class="op"> = </span>((specialEvents[handleObj.origType]<span class="op"> || </span>{}).handle<span class="op"> || </span>handleObj.callback).apply(handler.elem, args);
</code><code id="L2533"><a href="#L2533" class="ln">2533</a>
</code><code id="L2534"><a href="#L2534" class="ln">2534</a>            <span class="com">// If callback returns <span class=kwd>false</span>, stop the event</span>
</code><code id="L2535"><a href="#L2535" class="ln">2535</a>            <span class=kwd>if</span> (ret<span class="op"> === </span><span class=kwd>false</span>) {
</code><code id="L2536"><a href="#L2536" class="ln">2536</a>              event.preventDefault();
</code><code id="L2537"><a href="#L2537" class="ln">2537</a>              event.stopPropagation();
</code><code id="L2538"><a href="#L2538" class="ln">2538</a>            }
</code><code id="L2539"><a href="#L2539" class="ln">2539</a>          }
</code><code id="L2540"><a href="#L2540" class="ln">2540</a>        });
</code><code id="L2541"><a href="#L2541" class="ln">2541</a>      }
</code><code id="L2542"><a href="#L2542" class="ln">2542</a>    });
</code><code id="L2543"><a href="#L2543" class="ln">2543</a>
</code><code id="L2544"><a href="#L2544" class="ln">2544</a><span class="com">    <span class="com"><span class="com">/* jshint +W040</span> */</span></span>
</code><code id="L2545"><a href="#L2545" class="ln">2545</a>  };
</code><code id="L2546"><a href="#L2546" class="ln">2546</a>
</code><code id="L2547"><a href="#L2547" class="ln">2547</a>  Kimbo.Event<span class="op"> = </span><span class=kwd>function</span> (event) {
</code><code id="L2548"><a href="#L2548" class="ln">2548</a>
</code><code id="L2549"><a href="#L2549" class="ln">2549</a>    <span class="com">// Is event object</span>
</code><code id="L2550"><a href="#L2550" class="ln">2550</a>    <span class=kwd>if</span> (event<span class="op"> &amp;&amp; </span>event.type) {
</code><code id="L2551"><a href="#L2551" class="ln">2551</a>      <span class=kwd>this</span>.originalEvent<span class="op"> = </span>event;
</code><code id="L2552"><a href="#L2552" class="ln">2552</a>      <span class=kwd>this</span>.type<span class="op"> = </span>event.type;
</code><code id="L2553"><a href="#L2553" class="ln">2553</a>
</code><code id="L2554"><a href="#L2554" class="ln">2554</a>      <span class="com">// The event may have been prevented</span>
</code><code id="L2555"><a href="#L2555" class="ln">2555</a>      <span class="com">// Check dom level <span class="lit">3</span> <span class=kwd>new</span> attribute and set proper value</span>
</code><code id="L2556"><a href="#L2556" class="ln">2556</a>      <span class=kwd>if</span> (event.defaultPrevented) {
</code><code id="L2557"><a href="#L2557" class="ln">2557</a>        <span class=kwd>this</span>.isDefaultPrevented<span class="op"> = </span>_returnTrue;
</code><code id="L2558"><a href="#L2558" class="ln">2558</a>      } <span class=kwd>else</span> {
</code><code id="L2559"><a href="#L2559" class="ln">2559</a>        <span class=kwd>this</span>.isDefaultPrevented<span class="op"> = </span>_returnFalse;
</code><code id="L2560"><a href="#L2560" class="ln">2560</a>      }
</code><code id="L2561"><a href="#L2561" class="ln">2561</a>
</code><code id="L2562"><a href="#L2562" class="ln">2562</a>    <span class="com">// Is event type</span>
</code><code id="L2563"><a href="#L2563" class="ln">2563</a>    } <span class=kwd>else</span> {
</code><code id="L2564"><a href="#L2564" class="ln">2564</a>      <span class=kwd>this</span>.type<span class="op"> = </span>event;
</code><code id="L2565"><a href="#L2565" class="ln">2565</a>    }
</code><code id="L2566"><a href="#L2566" class="ln">2566</a>
</code><code id="L2567"><a href="#L2567" class="ln">2567</a>    <span class="com">// Create a timestamp <span class=kwd>if</span> doesn't have one</span>
</code><code id="L2568"><a href="#L2568" class="ln">2568</a>    <span class=kwd>this</span>.timeStamp<span class="op"> = </span>(event<span class="op"> &amp;&amp; </span>event.timeStamp)<span class="op"> || </span>Date.now();
</code><code id="L2569"><a href="#L2569" class="ln">2569</a>
</code><code id="L2570"><a href="#L2570" class="ln">2570</a>    <span class="com">// Made by kimbo, yeah</span>
</code><code id="L2571"><a href="#L2571" class="ln">2571</a>    <span class=kwd>this</span>[Kimbo.ref]<span class="op"> = </span><span class=kwd>true</span>;
</code><code id="L2572"><a href="#L2572" class="ln">2572</a>  };
</code><code id="L2573"><a href="#L2573" class="ln">2573</a>
</code><code id="L2574"><a href="#L2574" class="ln">2574</a>  <span class="com">// Dom-Level-<span class="lit">3</span>-Events compliant</span>
</code><code id="L2575"><a href="#L2575" class="ln">2575</a>  Kimbo.Event.prototype<span class="op"> = </span>{
</code><code id="L2576"><a href="#L2576" class="ln">2576</a>    isDefaultPrevented: _returnFalse,
</code><code id="L2577"><a href="#L2577" class="ln">2577</a>    isPropagationStopped: _returnFalse,
</code><code id="L2578"><a href="#L2578" class="ln">2578</a>    isImmediatePropagationStopped: _returnFalse,
</code><code id="L2579"><a href="#L2579" class="ln">2579</a>
</code><code id="L2580"><a href="#L2580" class="ln">2580</a>    preventDefault: <span class=kwd>function</span> () {
</code><code id="L2581"><a href="#L2581" class="ln">2581</a>      <span class=kwd>this</span>.isDefaultPrevented<span class="op"> = </span>_returnTrue;
</code><code id="L2582"><a href="#L2582" class="ln">2582</a>
</code><code id="L2583"><a href="#L2583" class="ln">2583</a>      <span class="com">// Originalevent is not present when trigger is called</span>
</code><code id="L2584"><a href="#L2584" class="ln">2584</a>      <span class=kwd>if</span> (!<span class=kwd>this</span>.isTrigger) {
</code><code id="L2585"><a href="#L2585" class="ln">2585</a>        <span class=kwd>this</span>.originalEvent.preventDefault();
</code><code id="L2586"><a href="#L2586" class="ln">2586</a>      }
</code><code id="L2587"><a href="#L2587" class="ln">2587</a>    },
</code><code id="L2588"><a href="#L2588" class="ln">2588</a>
</code><code id="L2589"><a href="#L2589" class="ln">2589</a>    stopPropagation: <span class=kwd>function</span> () {
</code><code id="L2590"><a href="#L2590" class="ln">2590</a>      <span class=kwd>this</span>.isPropagationStopped<span class="op"> = </span>_returnTrue;
</code><code id="L2591"><a href="#L2591" class="ln">2591</a>
</code><code id="L2592"><a href="#L2592" class="ln">2592</a>      <span class=kwd>if</span> (!<span class=kwd>this</span>.isTrigger) {
</code><code id="L2593"><a href="#L2593" class="ln">2593</a>        <span class=kwd>this</span>.originalEvent.stopPropagation();
</code><code id="L2594"><a href="#L2594" class="ln">2594</a>      }
</code><code id="L2595"><a href="#L2595" class="ln">2595</a>    },
</code><code id="L2596"><a href="#L2596" class="ln">2596</a>
</code><code id="L2597"><a href="#L2597" class="ln">2597</a>    stopImmediatePropagation: <span class=kwd>function</span> () {
</code><code id="L2598"><a href="#L2598" class="ln">2598</a>      <span class=kwd>this</span>.isImmediatePropagationStopped<span class="op"> = </span>_returnTrue;
</code><code id="L2599"><a href="#L2599" class="ln">2599</a>
</code><code id="L2600"><a href="#L2600" class="ln">2600</a>      <span class=kwd>if</span> (!<span class=kwd>this</span>.isTrigger) {
</code><code id="L2601"><a href="#L2601" class="ln">2601</a>        <span class=kwd>this</span>.originalEvent.stopImmediatePropagation();
</code><code id="L2602"><a href="#L2602" class="ln">2602</a>      }
</code><code id="L2603"><a href="#L2603" class="ln">2603</a>    }
</code><code id="L2604"><a href="#L2604" class="ln">2604</a>  };
</code><code id="L2605"><a href="#L2605" class="ln">2605</a>
</code><code id="L2606"><a href="#L2606" class="ln">2606</a>  Kimbo.fn.extend({
</code><code id="L2607"><a href="#L2607" class="ln">2607</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L2608"><a href="#L2608" class="ln">2608</a><span class="com">    <span class="op"> * </span>$(…).on
</span></code><code id="L2609"><a href="#L2609" class="ln">2609</a><span class="com">     [ method ]
</span></code><code id="L2610"><a href="#L2610" class="ln">2610</a><span class="com">    <span class="op"> * </span>Add an event handler to the selected elements.
</span></code><code id="L2611"><a href="#L2611" class="ln">2611</a><span class="com">     > Parameters
</span></code><code id="L2612"><a href="#L2612" class="ln">2612</a><span class="com">    <span class="op"> - </span>type (string) A string name <span class=kwd>for</span> the event to register.
</span></code><code id="L2613"><a href="#L2613" class="ln">2613</a><span class="com">    <span class="op"> - </span>selector (string) #optional Delegate an event providing a string selector.
</span></code><code id="L2614"><a href="#L2614" class="ln">2614</a><span class="com">    <span class="op"> - </span>data (any) #optional Data to be passed to the handler <span class=kwd>in</span> `event.data` when an event is triggered.
</span></code><code id="L2615"><a href="#L2615" class="ln">2615</a><span class="com">    <span class="op"> - </span>callback (<span class=kwd>function</span>) A callback <span class=kwd>function</span> to execute when the event is triggered.
</span></code><code id="L2616"><a href="#L2616" class="ln">2616</a><span class="com">     > Usage
</span></code><code id="L2617"><a href="#L2617" class="ln">2617</a><span class="com">    <span class="op"> * </span>Suppose a button element:
</span></code><code id="L2618"><a href="#L2618" class="ln">2618</a><span class="com">    <span class="op"> | </span>&lt;button id=<span class="str">'btn'</span>>click me&lt;/button>
</span></code><code id="L2619"><a href="#L2619" class="ln">2619</a><span class="com">    <span class="op"> * </span>Register a click event handler
</span></code><code id="L2620"><a href="#L2620" class="ln">2620</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#btn'</span>).on(<span class="str">'click'</span>, <span class=kwd>function</span> (event) {
</span></code><code id="L2621"><a href="#L2621" class="ln">2621</a><span class="com">    <span class="op"> | </span>  console.log(<span class="str">'clicked!'</span>, event);
</span></code><code id="L2622"><a href="#L2622" class="ln">2622</a><span class="com">    <span class="op"> | </span>});
</span></code><code id="L2623"><a href="#L2623" class="ln">2623</a><span class="com">    <span class="op"> * </span>There are shorthands <span class=kwd>for</span> all events <span class=kwd>for</span> example:
</span></code><code id="L2624"><a href="#L2624" class="ln">2624</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#btn'</span>).click(<span class=kwd>function</span> (event) {
</span></code><code id="L2625"><a href="#L2625" class="ln">2625</a><span class="com">    <span class="op"> | </span>  console.log(<span class="str">'clicked!'</span>, event);
</span></code><code id="L2626"><a href="#L2626" class="ln">2626</a><span class="com">    <span class="op"> | </span>});
</span></code><code id="L2627"><a href="#L2627" class="ln">2627</a><span class="com">    <span class="op"> * </span>Passing some data when registering the handler:
</span></code><code id="L2628"><a href="#L2628" class="ln">2628</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#btn'</span>).on(<span class="str">'click'</span>, { name: <span class="str">'denis'</span> }, <span class=kwd>function</span> (event) {
</span></code><code id="L2629"><a href="#L2629" class="ln">2629</a><span class="com">    <span class="op"> | </span>  <span class="com">// Data passed is inside event.data</span>
</span></code><code id="L2630"><a href="#L2630" class="ln">2630</a><span class="com">    <span class="op"> | </span>  console.log(<span class="str">'name:'</span>, event.data.name);
</span></code><code id="L2631"><a href="#L2631" class="ln">2631</a><span class="com">    <span class="op"> | </span>});
</span></code><code id="L2632"><a href="#L2632" class="ln">2632</a><span class="com">    <span class="op"> * </span>Here is a list <span class=kwd>for</span> all the shorthand methods available:
</span></code><code id="L2633"><a href="#L2633" class="ln">2633</a><span class="com">    <span class="op"> | </span><span class="str">'blur'</span>, <span class="str">'change'</span>, <span class="str">'click'</span>, <span class="str">'contextmenu'</span>, <span class="str">'dblclick'</span>, <span class="str">'error'</span>,
</span></code><code id="L2634"><a href="#L2634" class="ln">2634</a><span class="com">    <span class="op"> | </span><span class="str">'focus'</span>, <span class="str">'keydown'</span>, <span class="str">'keypress'</span>, <span class="str">'keyup'</span>, <span class="str">'load'</span>, <span class="str">'mousedown'</span>, <span class="str">'mouseenter'</span>, <span class="str">'mouseleave'</span>,
</span></code><code id="L2635"><a href="#L2635" class="ln">2635</a><span class="com">    <span class="op"> | </span><span class="str">'mousemove'</span>, <span class="str">'mouseout'</span>, <span class="str">'mouseup'</span>, <span class="str">'mouseover'</span>, <span class="str">'resize'</span>, <span class="str">'scroll'</span>, <span class="str">'select'</span>, <span class="str">'submit'</span>, <span class="str">'unload'</span>
</span></code><code id="L2636"><a href="#L2636" class="ln">2636</a><span class="com">    \*/</span>
</code><code id="L2637"><a href="#L2637" class="ln">2637</a>    on: <span class=kwd>function</span> (type, selector, data, callback) {
</code><code id="L2638"><a href="#L2638" class="ln">2638</a>      <span class="com">// Prepare the arguments</span>
</code><code id="L2639"><a href="#L2639" class="ln">2639</a>
</code><code id="L2640"><a href="#L2640" class="ln">2640</a>      <span class="com">// (type, callback)</span>
</code><code id="L2641"><a href="#L2641" class="ln">2641</a>      <span class=kwd>if</span> (!data<span class="op"> &amp;&amp; </span>!callback) {
</code><code id="L2642"><a href="#L2642" class="ln">2642</a>        callback<span class="op"> = </span>selector;
</code><code id="L2643"><a href="#L2643" class="ln">2643</a>        data<span class="op"> = </span>selector<span class="op"> = </span><span class=kwd>undefined</span>;
</code><code id="L2644"><a href="#L2644" class="ln">2644</a>
</code><code id="L2645"><a href="#L2645" class="ln">2645</a>      <span class="com">// (type, selector, callback)</span>
</code><code id="L2646"><a href="#L2646" class="ln">2646</a>      } <span class=kwd>else</span> <span class=kwd>if</span> (!callback) {
</code><code id="L2647"><a href="#L2647" class="ln">2647</a>        <span class=kwd>if</span> (Kimbo.isString(selector)) {
</code><code id="L2648"><a href="#L2648" class="ln">2648</a>          callback<span class="op"> = </span>data;
</code><code id="L2649"><a href="#L2649" class="ln">2649</a>          data<span class="op"> = </span><span class=kwd>undefined</span>;
</code><code id="L2650"><a href="#L2650" class="ln">2650</a>
</code><code id="L2651"><a href="#L2651" class="ln">2651</a>        <span class="com">// (type, data, callback)</span>
</code><code id="L2652"><a href="#L2652" class="ln">2652</a>        } <span class=kwd>else</span> {
</code><code id="L2653"><a href="#L2653" class="ln">2653</a>          callback<span class="op"> = </span>data;
</code><code id="L2654"><a href="#L2654" class="ln">2654</a>          data<span class="op"> = </span>selector;
</code><code id="L2655"><a href="#L2655" class="ln">2655</a>          selector<span class="op"> = </span><span class=kwd>undefined</span>;
</code><code id="L2656"><a href="#L2656" class="ln">2656</a>        }
</code><code id="L2657"><a href="#L2657" class="ln">2657</a>      }
</code><code id="L2658"><a href="#L2658" class="ln">2658</a>
</code><code id="L2659"><a href="#L2659" class="ln">2659</a>      <span class="com">// Don't add events <span class=kwd>if</span> no callback</span>
</code><code id="L2660"><a href="#L2660" class="ln">2660</a>      <span class=kwd>if</span> (!callback) {
</code><code id="L2661"><a href="#L2661" class="ln">2661</a>        <span class=kwd>return</span> <span class=kwd>this</span>;
</code><code id="L2662"><a href="#L2662" class="ln">2662</a>      }
</code><code id="L2663"><a href="#L2663" class="ln">2663</a>
</code><code id="L2664"><a href="#L2664" class="ln">2664</a>      type<span class="op"> = </span>GESTURES_FALLBACK[type]<span class="op"> || </span>type;
</code><code id="L2665"><a href="#L2665" class="ln">2665</a>
</code><code id="L2666"><a href="#L2666" class="ln">2666</a>      <span class="com">// Add the event</span>
</code><code id="L2667"><a href="#L2667" class="ln">2667</a>      <span class=kwd>return</span> <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L2668"><a href="#L2668" class="ln">2668</a>        _addEvent(el, type, callback, data, selector);
</code><code id="L2669"><a href="#L2669" class="ln">2669</a>      });
</code><code id="L2670"><a href="#L2670" class="ln">2670</a>    },
</code><code id="L2671"><a href="#L2671" class="ln">2671</a>
</code><code id="L2672"><a href="#L2672" class="ln">2672</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L2673"><a href="#L2673" class="ln">2673</a><span class="com">    <span class="op"> * </span>$(…).off
</span></code><code id="L2674"><a href="#L2674" class="ln">2674</a><span class="com">     [ method ]
</span></code><code id="L2675"><a href="#L2675" class="ln">2675</a><span class="com">    <span class="op"> * </span>Remove an event handler to the selected elements <span class=kwd>for</span> the specified type, or all of them <span class=kwd>if</span> no type defined.
</span></code><code id="L2676"><a href="#L2676" class="ln">2676</a><span class="com">     > Parameters
</span></code><code id="L2677"><a href="#L2677" class="ln">2677</a><span class="com">    <span class="op"> - </span>type (string) #optional A string name <span class=kwd>for</span> the event to remove, or All <span class=kwd>if</span> none specified.
</span></code><code id="L2678"><a href="#L2678" class="ln">2678</a><span class="com">    <span class="op"> - </span>selector (string) #optional A string selector to undelegate an event from that element.
</span></code><code id="L2679"><a href="#L2679" class="ln">2679</a><span class="com">    <span class="op"> - </span>callback (<span class=kwd>function</span>) #optional A specific callback <span class=kwd>function</span> <span class=kwd>if</span> there are multiple registered under the same event type
</span></code><code id="L2680"><a href="#L2680" class="ln">2680</a><span class="com">     > Usage
</span></code><code id="L2681"><a href="#L2681" class="ln">2681</a><span class="com">    <span class="op"> * </span>Suppose a button element:
</span></code><code id="L2682"><a href="#L2682" class="ln">2682</a><span class="com">    <span class="op"> | </span>&lt;button id=<span class="str">'btn'</span>>click me&lt;/button>
</span></code><code id="L2683"><a href="#L2683" class="ln">2683</a><span class="com">    <span class="op"> * </span>Register a click event handler
</span></code><code id="L2684"><a href="#L2684" class="ln">2684</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#btn'</span>).on(<span class="str">'click'</span>, <span class=kwd>function</span> (event) {
</span></code><code id="L2685"><a href="#L2685" class="ln">2685</a><span class="com">    <span class="op"> | </span>  console.log(<span class="str">'clicked!'</span>, event);
</span></code><code id="L2686"><a href="#L2686" class="ln">2686</a><span class="com">    <span class="op"> | </span>});
</span></code><code id="L2687"><a href="#L2687" class="ln">2687</a><span class="com">    <span class="op"> * </span>Remove the handler
</span></code><code id="L2688"><a href="#L2688" class="ln">2688</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#btn'</span>).off(<span class="str">'click'</span>);
</span></code><code id="L2689"><a href="#L2689" class="ln">2689</a><span class="com">    <span class="op"> * </span>Also you could specify the handler <span class=kwd>for</span> example:
</span></code><code id="L2690"><a href="#L2690" class="ln">2690</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> firstFunction<span class="op"> = </span><span class=kwd>function</span> () { console.log(<span class="str">'first fn'</span>); };
</span></code><code id="L2691"><a href="#L2691" class="ln">2691</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> secondFunction<span class="op"> = </span><span class=kwd>function</span> () { console.log(<span class="str">'second fn'</span>); };
</span></code><code id="L2692"><a href="#L2692" class="ln">2692</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> btn<span class="op"> = </span>$(<span class="str">'#btn'</span>);
</span></code><code id="L2693"><a href="#L2693" class="ln">2693</a><span class="com">    <span class="op"> | </span>btn.click(firstFunction);
</span></code><code id="L2694"><a href="#L2694" class="ln">2694</a><span class="com">    <span class="op"> | </span>btn.click(secondFunction);
</span></code><code id="L2695"><a href="#L2695" class="ln">2695</a><span class="com">    <span class="op"> * </span>If you want to remove the click event only <span class=kwd>for</span> the second <span class=kwd>function</span>, <span class=kwd>do</span> <span class=kwd>this</span>:
</span></code><code id="L2696"><a href="#L2696" class="ln">2696</a><span class="com">    <span class="op"> | </span>btn.off(<span class="str">'click'</span>, secondFunction);
</span></code><code id="L2697"><a href="#L2697" class="ln">2697</a><span class="com">    <span class="op"> * </span>Or <span class=kwd>if</span> you want to remove All handlers (click and any other attached):
</span></code><code id="L2698"><a href="#L2698" class="ln">2698</a><span class="com">    <span class="op"> | </span>btn.off();
</span></code><code id="L2699"><a href="#L2699" class="ln">2699</a><span class="com">    \*/</span>
</code><code id="L2700"><a href="#L2700" class="ln">2700</a>    off: <span class=kwd>function</span> (type, selector, callback) {
</code><code id="L2701"><a href="#L2701" class="ln">2701</a>
</code><code id="L2702"><a href="#L2702" class="ln">2702</a>      <span class="com">// Prepare the arguments</span>
</code><code id="L2703"><a href="#L2703" class="ln">2703</a>
</code><code id="L2704"><a href="#L2704" class="ln">2704</a>      <span class="com">// (type, callback)</span>
</code><code id="L2705"><a href="#L2705" class="ln">2705</a>      <span class=kwd>if</span> (Kimbo.isFunction(selector)) {
</code><code id="L2706"><a href="#L2706" class="ln">2706</a>        callback<span class="op"> = </span>selector;
</code><code id="L2707"><a href="#L2707" class="ln">2707</a>        selector<span class="op"> = </span><span class=kwd>undefined</span>;
</code><code id="L2708"><a href="#L2708" class="ln">2708</a>      }
</code><code id="L2709"><a href="#L2709" class="ln">2709</a>
</code><code id="L2710"><a href="#L2710" class="ln">2710</a>      <span class="com">// Remove the event</span>
</code><code id="L2711"><a href="#L2711" class="ln">2711</a>      <span class=kwd>return</span> <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L2712"><a href="#L2712" class="ln">2712</a>        _removeEvent(el, type, callback, selector);
</code><code id="L2713"><a href="#L2713" class="ln">2713</a>      });
</code><code id="L2714"><a href="#L2714" class="ln">2714</a>    },
</code><code id="L2715"><a href="#L2715" class="ln">2715</a>
</code><code id="L2716"><a href="#L2716" class="ln">2716</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L2717"><a href="#L2717" class="ln">2717</a><span class="com">    <span class="op"> * </span>$(…).trigger
</span></code><code id="L2718"><a href="#L2718" class="ln">2718</a><span class="com">     [ method ]
</span></code><code id="L2719"><a href="#L2719" class="ln">2719</a><span class="com">    <span class="op"> * </span>Execute all handlers attached to the matched elements <span class=kwd>for</span> the fiven event type.
</span></code><code id="L2720"><a href="#L2720" class="ln">2720</a><span class="com">     > Parameters
</span></code><code id="L2721"><a href="#L2721" class="ln">2721</a><span class="com">    <span class="op"> - </span>type (string) #optional A string name <span class=kwd>for</span> the event to remove, or All <span class=kwd>if</span> none specified.
</span></code><code id="L2722"><a href="#L2722" class="ln">2722</a><span class="com">    <span class="op"> - </span>data (any) #optional Additional parameters to be passed to the handler <span class=kwd>in</span> `event.data` when an event is triggered.
</span></code><code id="L2723"><a href="#L2723" class="ln">2723</a><span class="com">     > Usage
</span></code><code id="L2724"><a href="#L2724" class="ln">2724</a><span class="com">    <span class="op"> * </span>Suppose a button element:
</span></code><code id="L2725"><a href="#L2725" class="ln">2725</a><span class="com">    <span class="op"> | </span>&lt;button id=<span class="str">'btn'</span>>click me&lt;/button>
</span></code><code id="L2726"><a href="#L2726" class="ln">2726</a><span class="com">    <span class="op"> * </span>Register a click event handler
</span></code><code id="L2727"><a href="#L2727" class="ln">2727</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#btn'</span>).on(<span class="str">'click'</span>, <span class=kwd>function</span> (event, data) {
</span></code><code id="L2728"><a href="#L2728" class="ln">2728</a><span class="com">    <span class="op"> | </span>  console.log(<span class="str">'name'</span>, data.name);
</span></code><code id="L2729"><a href="#L2729" class="ln">2729</a><span class="com">    <span class="op"> | </span>});
</span></code><code id="L2730"><a href="#L2730" class="ln">2730</a><span class="com">    <span class="op"> * </span>Trigger the event programatically passing some data:
</span></code><code id="L2731"><a href="#L2731" class="ln">2731</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#btn'</span>).trigger(<span class="str">'click'</span>, { name: <span class="str">'denis'</span> });
</span></code><code id="L2732"><a href="#L2732" class="ln">2732</a><span class="com">    <span class="op"> | </span><span class="com">// <span class="str">'name denis'</span></span>
</span></code><code id="L2733"><a href="#L2733" class="ln">2733</a><span class="com">    <span class="op"> * </span>Allow the handler to recieve multiple data:
</span></code><code id="L2734"><a href="#L2734" class="ln">2734</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#btn'</span>).on(<span class="str">'click'</span>, <span class=kwd>function</span> (event, name, last) {
</span></code><code id="L2735"><a href="#L2735" class="ln">2735</a><span class="com">    <span class="op"> | </span>  console.log(<span class="str">'name'</span>, name);
</span></code><code id="L2736"><a href="#L2736" class="ln">2736</a><span class="com">    <span class="op"> | </span>  console.log(<span class="str">'last'</span>, last);
</span></code><code id="L2737"><a href="#L2737" class="ln">2737</a><span class="com">    <span class="op"> | </span>});
</span></code><code id="L2738"><a href="#L2738" class="ln">2738</a><span class="com">    <span class="op"> | </span>$(<span class="str">'#btn'</span>).trigger(<span class="str">'click'</span>, [<span class="str">'denis'</span>, <span class="str">'ciccale'</span>]);
</span></code><code id="L2739"><a href="#L2739" class="ln">2739</a><span class="com">    <span class="op"> | </span><span class="com">// Name denis</span>
</span></code><code id="L2740"><a href="#L2740" class="ln">2740</a><span class="com">    <span class="op"> | </span><span class="com">// Last ciccale</span>
</span></code><code id="L2741"><a href="#L2741" class="ln">2741</a><span class="com">    \*/</span>
</code><code id="L2742"><a href="#L2742" class="ln">2742</a>    trigger: <span class=kwd>function</span> (type, data) {
</code><code id="L2743"><a href="#L2743" class="ln">2743</a>      <span class=kwd>return</span> <span class=kwd>this</span>.each(<span class=kwd>function</span> (el) {
</code><code id="L2744"><a href="#L2744" class="ln">2744</a>        _triggerEvent(el, type, data);
</code><code id="L2745"><a href="#L2745" class="ln">2745</a>      });
</code><code id="L2746"><a href="#L2746" class="ln">2746</a>    },
</code><code id="L2747"><a href="#L2747" class="ln">2747</a>
</code><code id="L2748"><a href="#L2748" class="ln">2748</a><span class="com">    <span class="com">/*\</span>
</span></code><code id="L2749"><a href="#L2749" class="ln">2749</a><span class="com">    <span class="op"> * </span>$(…).hover
</span></code><code id="L2750"><a href="#L2750" class="ln">2750</a><span class="com">     [ method ]
</span></code><code id="L2751"><a href="#L2751" class="ln">2751</a><span class="com">    <span class="op"> * </span>A shortcut method to register moseenter and/or mouseleave event handlers to the matched elements.
</span></code><code id="L2752"><a href="#L2752" class="ln">2752</a><span class="com">     > Parameters
</span></code><code id="L2753"><a href="#L2753" class="ln">2753</a><span class="com">    <span class="op"> - </span>fnOver (<span class=kwd>function</span>) A <span class=kwd>function</span> to execute when the cursor enters the element.
</span></code><code id="L2754"><a href="#L2754" class="ln">2754</a><span class="com">    <span class="op"> - </span>fnOut (<span class=kwd>function</span>) #optional A <span class=kwd>function</span> to execute when the cursor leaves the element.
</span></code><code id="L2755"><a href="#L2755" class="ln">2755</a><span class="com">     > Usage
</span></code><code id="L2756"><a href="#L2756" class="ln">2756</a><span class="com">    <span class="op"> * </span>Suppose a div element:
</span></code><code id="L2757"><a href="#L2757" class="ln">2757</a><span class="com">    <span class="op"> | </span>&lt;div id=<span class="str">'box'</span>>&lt;/div>
</span></code><code id="L2758"><a href="#L2758" class="ln">2758</a><span class="com">    <span class="op"> * </span>Register hover event
</span></code><code id="L2759"><a href="#L2759" class="ln">2759</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> fnOver<span class="op"> = </span><span class=kwd>function</span> () { console.log(<span class="str">'enter'</span>); };
</span></code><code id="L2760"><a href="#L2760" class="ln">2760</a><span class="com">    <span class="op"> | </span><span class=kwd>var</span> fnOut<span class="op"> = </span><span class=kwd>function</span> () { console.log(<span class="str">'leave'</span>); };
</span></code><code id="L2761"><a href="#L2761" class="ln">2761</a><span class="com">     |
</span></code><code id="L2762"><a href="#L2762" class="ln">2762</a><span class="com">    <span class="op"> | </span>$(<span class="str">'.box'</span>).hover(fnOver, fnOut);
</span></code><code id="L2763"><a href="#L2763" class="ln">2763</a><span class="com">    <span class="op"> * </span>When the cursor enters the `.box` element the console will log:
</span></code><code id="L2764"><a href="#L2764" class="ln">2764</a><span class="com">    <span class="op"> | </span><span class="str">'enter'</span>
</span></code><code id="L2765"><a href="#L2765" class="ln">2765</a><span class="com">    <span class="op"> * </span>When the cursor leaves the `.box` element the console will log:
</span></code><code id="L2766"><a href="#L2766" class="ln">2766</a><span class="com">    <span class="op"> | </span><span class="str">'leave'</span>
</span></code><code id="L2767"><a href="#L2767" class="ln">2767</a><span class="com">    \*/</span>
</code><code id="L2768"><a href="#L2768" class="ln">2768</a>    hover: <span class=kwd>function</span> (fnOver, fnOut) {
</code><code id="L2769"><a href="#L2769" class="ln">2769</a>      <span class=kwd>return</span> <span class=kwd>this</span>.mouseenter(fnOver).mouseleave(fnOut<span class="op"> || </span>fnOver);
</code><code id="L2770"><a href="#L2770" class="ln">2770</a>    }
</code><code id="L2771"><a href="#L2771" class="ln">2771</a>  });
</code><code id="L2772"><a href="#L2772" class="ln">2772</a>
</code><code id="L2773"><a href="#L2773" class="ln">2773</a>  <span class="com">// Shortcut methods <span class=kwd>for</span> each event type</span>
</code><code id="L2774"><a href="#L2774" class="ln">2774</a>  Kimbo.forEach([<span class="str">'blur'</span>, <span class="str">'change'</span>, <span class="str">'click'</span>, <span class="str">'contextmenu'</span>, <span class="str">'dblclick'</span>, <span class="str">'error'</span>,
</code><code id="L2775"><a href="#L2775" class="ln">2775</a>    <span class="str">'focus'</span>, <span class="str">'keydown'</span>, <span class="str">'keypress'</span>, <span class="str">'keyup'</span>, <span class="str">'load'</span>, <span class="str">'mousedown'</span>, <span class="str">'mouseenter'</span>, <span class="str">'mouseleave'</span>, <span class="str">'mousemove'</span>,
</code><code id="L2776"><a href="#L2776" class="ln">2776</a>    <span class="str">'mouseout'</span>, <span class="str">'mouseup'</span>, <span class="str">'mouseover'</span>, <span class="str">'resize'</span>, <span class="str">'scroll'</span>, <span class="str">'select'</span>, <span class="str">'submit'</span>, <span class="str">'unload'</span>], <span class=kwd>function</span> (type) {
</code><code id="L2777"><a href="#L2777" class="ln">2777</a>
</code><code id="L2778"><a href="#L2778" class="ln">2778</a>    Kimbo.fn[type]<span class="op"> = </span><span class=kwd>function</span> (data, callback) {
</code><code id="L2779"><a href="#L2779" class="ln">2779</a>      <span class=kwd>return</span> arguments.length > <span class="lit">0</span> ? <span class=kwd>this</span>.on(type, <span class=kwd>null</span>, data, callback) : <span class=kwd>this</span>.trigger(type);
</code><code id="L2780"><a href="#L2780" class="ln">2780</a>    };
</code><code id="L2781"><a href="#L2781" class="ln">2781</a>
</code><code id="L2782"><a href="#L2782" class="ln">2782</a>    <span class="com">// Set event props <span class=kwd>for</span> the specific type</span>
</code><code id="L2783"><a href="#L2783" class="ln">2783</a>    fixEventProps[type]<span class="op"> = </span>KEY_EVENT_RE.test(type) ? KEY_EVENT_PROPS : MOUSE_EVENT_RE.test(type) ? MOUSE_EVENT_PROPS : <span class=kwd>null</span>;
</code><code id="L2784"><a href="#L2784" class="ln">2784</a>  });
</code><code id="L2785"><a href="#L2785" class="ln">2785</a>
</code><code id="L2786"><a href="#L2786" class="ln">2786</a>  <span class="com">// Fix mouseover and mouseout events to use mouseenter mouseleave</span>
</code><code id="L2787"><a href="#L2787" class="ln">2787</a>  Kimbo.forEach({
</code><code id="L2788"><a href="#L2788" class="ln">2788</a>    mouseenter: <span class="str">'mouseover'</span>,
</code><code id="L2789"><a href="#L2789" class="ln">2789</a>    mouseleave: <span class="str">'mouseout'</span>
</code><code id="L2790"><a href="#L2790" class="ln">2790</a>  }, <span class=kwd>function</span> (orig, fix) {
</code><code id="L2791"><a href="#L2791" class="ln">2791</a>    specialEvents[orig]<span class="op"> = </span>{
</code><code id="L2792"><a href="#L2792" class="ln">2792</a>      origType: fix,
</code><code id="L2793"><a href="#L2793" class="ln">2793</a>
</code><code id="L2794"><a href="#L2794" class="ln">2794</a>      handle: <span class=kwd>function</span> (event) {
</code><code id="L2795"><a href="#L2795" class="ln">2795</a>        <span class=kwd>var</span> target<span class="op"> = </span><span class=kwd>this</span>;
</code><code id="L2796"><a href="#L2796" class="ln">2796</a>        <span class=kwd>var</span> related<span class="op"> = </span>event.relatedTarget;
</code><code id="L2797"><a href="#L2797" class="ln">2797</a>        <span class=kwd>var</span> handleObj<span class="op"> = </span>event.handleObj;
</code><code id="L2798"><a href="#L2798" class="ln">2798</a>        <span class=kwd>var</span> ret;
</code><code id="L2799"><a href="#L2799" class="ln">2799</a>
</code><code id="L2800"><a href="#L2800" class="ln">2800</a>        <span class=kwd>if</span> (!related<span class="op"> || </span>(related !== target<span class="op"> &amp;&amp; </span>!query.contains(target, related))) {
</code><code id="L2801"><a href="#L2801" class="ln">2801</a>          event.type<span class="op"> = </span>handleObj.origType;
</code><code id="L2802"><a href="#L2802" class="ln">2802</a>          ret<span class="op"> = </span>handleObj.callback.apply(<span class=kwd>this</span>, arguments);
</code><code id="L2803"><a href="#L2803" class="ln">2803</a>          event.type<span class="op"> = </span>fix;
</code><code id="L2804"><a href="#L2804" class="ln">2804</a>        }
</code><code id="L2805"><a href="#L2805" class="ln">2805</a>
</code><code id="L2806"><a href="#L2806" class="ln">2806</a>        <span class=kwd>return</span> ret;
</code><code id="L2807"><a href="#L2807" class="ln">2807</a>      }
</code><code id="L2808"><a href="#L2808" class="ln">2808</a>    };
</code><code id="L2809"><a href="#L2809" class="ln">2809</a>  });
</code><code id="L2810"><a href="#L2810" class="ln">2810</a>
</code><code id="L2811"><a href="#L2811" class="ln">2811</a>});
</code><code id="L2812"><a href="#L2812" class="ln">2812</a>
</code><code id="L2813"><a href="#L2813" class="ln">2813</a>
</code><code id="L2814"><a href="#L2814" class="ln">2814</a>Kimbo.define(<span class="str">'ajax'</span>, <span class=kwd>function</span> (_) {
</code><code id="L2815"><a href="#L2815" class="ln">2815</a>
</code><code id="L2816"><a href="#L2816" class="ln">2816</a>  <span class="str">'use strict'</span>;
</code><code id="L2817"><a href="#L2817" class="ln">2817</a>
</code><code id="L2818"><a href="#L2818" class="ln">2818</a>  <span class=kwd>var</span> JSONP_RE<span class="op"> = </span>/(\=)\?(&amp;|$)|\?\?/i;
</code><code id="L2819"><a href="#L2819" class="ln">2819</a>
</code><code id="L2820"><a href="#L2820" class="ln">2820</a>  <span class=kwd>var</span> MIME_TYPES<span class="op"> = </span>{
</code><code id="L2821"><a href="#L2821" class="ln">2821</a>    html: <span class="str">'text/html'</span>,
</code><code id="L2822"><a href="#L2822" class="ln">2822</a>    json: <span class="str">'application/json'</span>,
</code><code id="L2823"><a href="#L2823" class="ln">2823</a>    script: <span class="str">'text/javascript, application/javascript'</span>,
</code><code id="L2824"><a href="#L2824" class="ln">2824</a>    text: <span class="str">'text/plain'</span>,
</code><code id="L2825"><a href="#L2825" class="ln">2825</a>    xml: <span class="str">'application/xml, text/xml'</span>
</code><code id="L2826"><a href="#L2826" class="ln">2826</a>  };
</code><code id="L2827"><a href="#L2827" class="ln">2827</a>
</code><code id="L2828"><a href="#L2828" class="ln">2828</a>  <span class=kwd>var</span> dataParse<span class="op"> = </span>{
</code><code id="L2829"><a href="#L2829" class="ln">2829</a>    json: Kimbo.parseJSON,
</code><code id="L2830"><a href="#L2830" class="ln">2830</a>    xml: Kimbo.parseXML
</code><code id="L2831"><a href="#L2831" class="ln">2831</a>  };
</code><code id="L2832"><a href="#L2832" class="ln">2832</a>
</code><code id="L2833"><a href="#L2833" class="ln">2833</a>  <span class=kwd>var</span> xhrCallbacks<span class="op"> = </span>{};
</code><code id="L2834"><a href="#L2834" class="ln">2834</a>
</code><code id="L2835"><a href="#L2835" class="ln">2835</a>  <span class="com">// Success and error callbacks</span>
</code><code id="L2836"><a href="#L2836" class="ln">2836</a>  Kimbo.forEach([<span class="str">'success'</span>, <span class="str">'error'</span>], <span class=kwd>function</span> (type) {
</code><code id="L2837"><a href="#L2837" class="ln">2837</a>    xhrCallbacks[type]<span class="op"> = </span><span class=kwd>function</span> (res, msg, xhr, settings) {
</code><code id="L2838"><a href="#L2838" class="ln">2838</a>      settings<span class="op"> = </span>settings<span class="op"> || </span>xhr;
</code><code id="L2839"><a href="#L2839" class="ln">2839</a>      <span class=kwd>if</span> (Kimbo.isFunction(settings[type])) {
</code><code id="L2840"><a href="#L2840" class="ln">2840</a>        settings[type].apply(settings.context, arguments);
</code><code id="L2841"><a href="#L2841" class="ln">2841</a>      }
</code><code id="L2842"><a href="#L2842" class="ln">2842</a>    };
</code><code id="L2843"><a href="#L2843" class="ln">2843</a>  });
</code><code id="L2844"><a href="#L2844" class="ln">2844</a>
</code><code id="L2845"><a href="#L2845" class="ln">2845</a>  <span class=kwd>var</span> _getResponse<span class="op"> = </span><span class=kwd>function</span> (response, type) {
</code><code id="L2846"><a href="#L2846" class="ln">2846</a>    <span class=kwd>return</span> (dataParse[type] ? dataParse[type](response) : response);
</code><code id="L2847"><a href="#L2847" class="ln">2847</a>  };
</code><code id="L2848"><a href="#L2848" class="ln">2848</a>
</code><code id="L2849"><a href="#L2849" class="ln">2849</a>  <span class=kwd>var</span> _handleResponse<span class="op"> = </span><span class=kwd>function</span> (xhr, settings) {
</code><code id="L2850"><a href="#L2850" class="ln">2850</a>    <span class=kwd>var</span> response, contentType;
</code><code id="L2851"><a href="#L2851" class="ln">2851</a>
</code><code id="L2852"><a href="#L2852" class="ln">2852</a>    <span class="com">// Set dataType <span class=kwd>if</span> missing</span>
</code><code id="L2853"><a href="#L2853" class="ln">2853</a>    <span class=kwd>if</span> (!settings.dataType) {
</code><code id="L2854"><a href="#L2854" class="ln">2854</a>      contentType<span class="op"> = </span>xhr.getResponseHeader(<span class="str">'Content-Type'</span>);
</code><code id="L2855"><a href="#L2855" class="ln">2855</a>
</code><code id="L2856"><a href="#L2856" class="ln">2856</a>      Kimbo.forEach(MIME_TYPES, <span class=kwd>function</span> (name, type) {
</code><code id="L2857"><a href="#L2857" class="ln">2857</a>        <span class=kwd>if</span> (type.match(contentType)) {
</code><code id="L2858"><a href="#L2858" class="ln">2858</a>          settings.dataType<span class="op"> = </span>name;
</code><code id="L2859"><a href="#L2859" class="ln">2859</a>          <span class=kwd>return</span> <span class=kwd>false</span>;
</code><code id="L2860"><a href="#L2860" class="ln">2860</a>        }
</code><code id="L2861"><a href="#L2861" class="ln">2861</a>      });
</code><code id="L2862"><a href="#L2862" class="ln">2862</a>
</code><code id="L2863"><a href="#L2863" class="ln">2863</a>      <span class="com">// Fix settings headers</span>
</code><code id="L2864"><a href="#L2864" class="ln">2864</a>      _setHeaders(settings);
</code><code id="L2865"><a href="#L2865" class="ln">2865</a>    }
</code><code id="L2866"><a href="#L2866" class="ln">2866</a>
</code><code id="L2867"><a href="#L2867" class="ln">2867</a>    <span class=kwd>try</span> {
</code><code id="L2868"><a href="#L2868" class="ln">2868</a>      response<span class="op"> = </span>_getResponse(xhr.responseText, settings.dataType);
</code><code id="L2869"><a href="#L2869" class="ln">2869</a>    } <span class=kwd>catch</span> (e) {
</code><code id="L2870"><a href="#L2870" class="ln">2870</a>      response<span class="op"> = </span><span class=kwd>false</span>;
</code><code id="L2871"><a href="#L2871" class="ln">2871</a>      xhrCallbacks.error(<span class="str">'parseerror'</span>, e, xhr, settings);
</code><code id="L2872"><a href="#L2872" class="ln">2872</a>    }
</code><code id="L2873"><a href="#L2873" class="ln">2873</a>
</code><code id="L2874"><a href="#L2874" class="ln">2874</a>    <span class=kwd>return</span> response;
</code><code id="L2875"><a href="#L2875" class="ln">2875</a>  };
</code><code id="L2876"><a href="#L2876" class="ln">2876</a>
</code><code id="L2877"><a href="#L2877" class="ln">2877</a>  <span class=kwd>var</span> _setHeaders<span class="op"> = </span><span class=kwd>function</span> (settings) {
</code><code id="L2878"><a href="#L2878" class="ln">2878</a>    <span class=kwd>if</span> (!settings.crossDomain<span class="op"> &amp;&amp; </span>!settings.headers[<span class="str">'X-Requested-With'</span>]) {
</code><code id="L2879"><a href="#L2879" class="ln">2879</a>      settings.headers[<span class="str">'X-Requested-With'</span>]<span class="op"> = </span><span class="str">'XMLHttpRequest'</span>;
</code><code id="L2880"><a href="#L2880" class="ln">2880</a>    }
</code><code id="L2881"><a href="#L2881" class="ln">2881</a>
</code><code id="L2882"><a href="#L2882" class="ln">2882</a>    <span class=kwd>if</span> (settings.contentType) {
</code><code id="L2883"><a href="#L2883" class="ln">2883</a>      settings.headers[<span class="str">'Content-Type'</span>]<span class="op"> = </span>settings.contentType;
</code><code id="L2884"><a href="#L2884" class="ln">2884</a>    }
</code><code id="L2885"><a href="#L2885" class="ln">2885</a>
</code><code id="L2886"><a href="#L2886" class="ln">2886</a>    settings.headers.Accept<span class="op"> = </span>MIME_TYPES[settings.dataType]<span class="op"> || </span><span class="str">'*<span class="com">/*'</span>;</span>
</code><code id="L2887"><a href="#L2887" class="ln">2887</a>  };
</code><code id="L2888"><a href="#L2888" class="ln">2888</a>
</code><code id="L2889"><a href="#L2889" class="ln">2889</a>  <span class=kwd>var</span> _timeout<span class="op"> = </span><span class=kwd>function</span> (xhr, settings) {
</code><code id="L2890"><a href="#L2890" class="ln">2890</a>    xhr.onreadystatechange<span class="op"> = </span><span class=kwd>null</span>;
</code><code id="L2891"><a href="#L2891" class="ln">2891</a>    xhr.abort();
</code><code id="L2892"><a href="#L2892" class="ln">2892</a>    xhrCallbacks.error(<span class="str">'error'</span>, <span class="str">'timeout'</span>, xhr, settings);
</code><code id="L2893"><a href="#L2893" class="ln">2893</a>  };
</code><code id="L2894"><a href="#L2894" class="ln">2894</a>
</code><code id="L2895"><a href="#L2895" class="ln">2895</a>  <span class=kwd>var</span> _createAbortTimeout<span class="op"> = </span><span class=kwd>function</span> (xhr, settings) {
</code><code id="L2896"><a href="#L2896" class="ln">2896</a>    <span class=kwd>return</span> window.setTimeout(<span class=kwd>function</span> () {
</code><code id="L2897"><a href="#L2897" class="ln">2897</a>      _timeout(xhr, settings);
</code><code id="L2898"><a href="#L2898" class="ln">2898</a>    }, settings.timeout);
</code><code id="L2899"><a href="#L2899" class="ln">2899</a>  };
</code><code id="L2900"><a href="#L2900" class="ln">2900</a>
</code><code id="L2901"><a href="#L2901" class="ln">2901</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L2902"><a href="#L2902" class="ln">2902</a><span class="com">  <span class="op"> * </span>$.ajaxSettings
</span></code><code id="L2903"><a href="#L2903" class="ln">2903</a><span class="com">   [ property ]
</span></code><code id="L2904"><a href="#L2904" class="ln">2904</a><span class="com">  <span class="op"> * </span>Default ajax settings object.
</span></code><code id="L2905"><a href="#L2905" class="ln">2905</a><span class="com">   > Usage
</span></code><code id="L2906"><a href="#L2906" class="ln">2906</a><span class="com">  <span class="op"> * </span>If you want to change the global and <span class=kwd>default</span> ajax settings, change <span class=kwd>this</span> object properties:
</span></code><code id="L2907"><a href="#L2907" class="ln">2907</a><span class="com">  <span class="op"> | </span>$.ajaxSettings.error<span class="op"> = </span><span class=kwd>function</span> () {
</span></code><code id="L2908"><a href="#L2908" class="ln">2908</a><span class="com">  <span class="op"> | </span>  <span class="com">// Handle any failed ajax request <span class=kwd>in</span> your app</span>
</span></code><code id="L2909"><a href="#L2909" class="ln">2909</a><span class="com">  <span class="op"> | </span>};
</span></code><code id="L2910"><a href="#L2910" class="ln">2910</a><span class="com">  <span class="op"> | </span>$.ajaxSettings.timeout<span class="op"> = </span><span class="lit">1000</span>; <span class="com">// <span class="lit">1</span> second</span>
</span></code><code id="L2911"><a href="#L2911" class="ln">2911</a><span class="com">  \*/</span>
</code><code id="L2912"><a href="#L2912" class="ln">2912</a>  Kimbo.ajaxSettings<span class="op"> = </span>{
</code><code id="L2913"><a href="#L2913" class="ln">2913</a>    type: <span class="str">'GET'</span>,
</code><code id="L2914"><a href="#L2914" class="ln">2914</a>    async: <span class=kwd>true</span>,
</code><code id="L2915"><a href="#L2915" class="ln">2915</a>    success: {},
</code><code id="L2916"><a href="#L2916" class="ln">2916</a>    error: {},
</code><code id="L2917"><a href="#L2917" class="ln">2917</a>    context: <span class=kwd>null</span>,
</code><code id="L2918"><a href="#L2918" class="ln">2918</a>    headers: {},
</code><code id="L2919"><a href="#L2919" class="ln">2919</a>    data: <span class=kwd>null</span>,
</code><code id="L2920"><a href="#L2920" class="ln">2920</a>    crossDomain: <span class=kwd>false</span>,
</code><code id="L2921"><a href="#L2921" class="ln">2921</a>    timeout: <span class="lit">0</span>,
</code><code id="L2922"><a href="#L2922" class="ln">2922</a>    contentType: <span class="str">'application/x-www-form-urlencoded; charset=UTF-<span class="lit">8</span>'</span>,
</code><code id="L2923"><a href="#L2923" class="ln">2923</a>    xhr: <span class=kwd>function</span> () {
</code><code id="L2924"><a href="#L2924" class="ln">2924</a>      <span class=kwd>return</span> <span class=kwd>new</span> window.XMLHttpRequest();
</code><code id="L2925"><a href="#L2925" class="ln">2925</a>    }
</code><code id="L2926"><a href="#L2926" class="ln">2926</a>  };
</code><code id="L2927"><a href="#L2927" class="ln">2927</a>
</code><code id="L2928"><a href="#L2928" class="ln">2928</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L2929"><a href="#L2929" class="ln">2929</a><span class="com">  <span class="op"> * </span>$.ajax
</span></code><code id="L2930"><a href="#L2930" class="ln">2930</a><span class="com">   [ method ]
</span></code><code id="L2931"><a href="#L2931" class="ln">2931</a><span class="com">  <span class="op"> * </span>Perform an asynchronous HTTP (Ajax) request.
</span></code><code id="L2932"><a href="#L2932" class="ln">2932</a><span class="com">   > Parameters
</span></code><code id="L2933"><a href="#L2933" class="ln">2933</a><span class="com">  <span class="op"> - </span>options (object) #optional An object <span class=kwd>with</span> options
</span></code><code id="L2934"><a href="#L2934" class="ln">2934</a><span class="com">   o {
</span></code><code id="L2935"><a href="#L2935" class="ln">2935</a><span class="com">   o   url (string) Url to make the request.
</span></code><code id="L2936"><a href="#L2936" class="ln">2936</a><span class="com">   o   type (string) #optional Type of request. Could be `<span class="str">'GET'</span>` or `<span class="str">'POST'</span>`. Default value is `<span class="str">'GET'</span>`.
</span></code><code id="L2937"><a href="#L2937" class="ln">2937</a><span class="com">   o   async (<span class=kwd>boolean</span>) #optional Default value is `<span class=kwd>true</span>` <span class=kwd>if</span> you want synchronous requests set option to `<span class=kwd>false</span>`.
</span></code><code id="L2938"><a href="#L2938" class="ln">2938</a><span class="com">   o   success (<span class=kwd>function</span>) #optional A <span class=kwd>function</span> that will be called <span class=kwd>if</span> the request succeeds. Recieving (response, responseMessage, xhr, settings).
</span></code><code id="L2939"><a href="#L2939" class="ln">2939</a><span class="com">   o   error (<span class=kwd>function</span>) #optional A <span class=kwd>function</span> that will be called <span class=kwd>if</span> the request fails. Recieving (response, responseMessage, xhr, settings).
</span></code><code id="L2940"><a href="#L2940" class="ln">2940</a><span class="com">   o   context (object) #optional The context <span class=kwd>in</span> which all ajax request are made. By <span class=kwd>default</span> the context are the settings object. Could be any DOM element.
</span></code><code id="L2941"><a href="#L2941" class="ln">2941</a><span class="com">   o   headers (object) #optional An object <span class=kwd>with</span> additional header key/value pairs to send along <span class=kwd>with</span> the request.
</span></code><code id="L2942"><a href="#L2942" class="ln">2942</a><span class="com">   o   data (string|object) #optional Additional data to send <span class=kwd>with</span> the request, <span class=kwd>if</span> it is an object is converted to a query string.
</span></code><code id="L2943"><a href="#L2943" class="ln">2943</a><span class="com">   o   xhr (<span class=kwd>function</span>) #optional A <span class=kwd>function</span> that returns a `<span class=kwd>new</span> XMLHttpRequest()` object by <span class=kwd>default</span>.
</span></code><code id="L2944"><a href="#L2944" class="ln">2944</a><span class="com">   o   crossDomain (<span class=kwd>boolean</span>) #optional Indicate wether you want to force crossDomain requests. `<span class=kwd>false</span>` by defualt.
</span></code><code id="L2945"><a href="#L2945" class="ln">2945</a><span class="com">   o   timeout (number) #optional Set a <span class=kwd>default</span> timeout <span class=kwd>in</span> milliseconds <span class=kwd>for</span> the request.
</span></code><code id="L2946"><a href="#L2946" class="ln">2946</a><span class="com">   o   contentType (string) #optional The <span class=kwd>default</span> and finest contentType <span class=kwd>for</span> most cases is `<span class="str">'application/x-www-form-urlencoded; charset=UTF-<span class="lit">8</span>'</span>`.
</span></code><code id="L2947"><a href="#L2947" class="ln">2947</a><span class="com">   o }
</span></code><code id="L2948"><a href="#L2948" class="ln">2948</a><span class="com">  <span class="op"> = </span>(object) The <span class=kwd>native</span> xhr object.
</span></code><code id="L2949"><a href="#L2949" class="ln">2949</a><span class="com">   > Usage
</span></code><code id="L2950"><a href="#L2950" class="ln">2950</a><span class="com">  <span class="op"> * </span>Get a username passing an id to the /users url
</span></code><code id="L2951"><a href="#L2951" class="ln">2951</a><span class="com">  <span class="op"> | </span>$.ajax({
</span></code><code id="L2952"><a href="#L2952" class="ln">2952</a><span class="com">  <span class="op"> | </span>  url <span class="str">'/users'</span>,
</span></code><code id="L2953"><a href="#L2953" class="ln">2953</a><span class="com">  <span class="op"> | </span>  data: {
</span></code><code id="L2954"><a href="#L2954" class="ln">2954</a><span class="com">  <span class="op"> | </span>    id: <span class="lit">3</span>
</span></code><code id="L2955"><a href="#L2955" class="ln">2955</a><span class="com">  <span class="op"> | </span>  },
</span></code><code id="L2956"><a href="#L2956" class="ln">2956</a><span class="com">  <span class="op"> | </span>  success: <span class=kwd>function</span> (response, responseMessage, xhr, settings) {
</span></code><code id="L2957"><a href="#L2957" class="ln">2957</a><span class="com">  <span class="op"> | </span>    <span class="com">// Success...</span>
</span></code><code id="L2958"><a href="#L2958" class="ln">2958</a><span class="com">  <span class="op"> | </span>  },
</span></code><code id="L2959"><a href="#L2959" class="ln">2959</a><span class="com">  <span class="op"> | </span>  error: <span class=kwd>function</span> (response, responseMessage, xhr, settings) {
</span></code><code id="L2960"><a href="#L2960" class="ln">2960</a><span class="com">  <span class="op"> | </span>    <span class="com">// Error...</span>
</span></code><code id="L2961"><a href="#L2961" class="ln">2961</a><span class="com">  <span class="op"> | </span>  }
</span></code><code id="L2962"><a href="#L2962" class="ln">2962</a><span class="com">  <span class="op"> | </span>});
</span></code><code id="L2963"><a href="#L2963" class="ln">2963</a><span class="com">  \*/</span>
</code><code id="L2964"><a href="#L2964" class="ln">2964</a>  Kimbo.ajax<span class="op"> = </span><span class=kwd>function</span> (options) {
</code><code id="L2965"><a href="#L2965" class="ln">2965</a>    <span class=kwd>var</span> settings<span class="op"> = </span>Kimbo.extend({}, Kimbo.ajaxSettings, options);
</code><code id="L2966"><a href="#L2966" class="ln">2966</a>    <span class=kwd>var</span> xhr, abortTimeout, callback;
</code><code id="L2967"><a href="#L2967" class="ln">2967</a>
</code><code id="L2968"><a href="#L2968" class="ln">2968</a>    <span class="com">// Add data to url</span>
</code><code id="L2969"><a href="#L2969" class="ln">2969</a>    <span class=kwd>if</span> (settings.data) {
</code><code id="L2970"><a href="#L2970" class="ln">2970</a>      settings.url += (/\?/.test(settings.url) ? <span class="str">'&amp;'</span> : <span class="str">'?'</span>) +
</code><code id="L2971"><a href="#L2971" class="ln">2971</a>        Kimbo.param(settings.data);
</code><code id="L2972"><a href="#L2972" class="ln">2972</a>      <span class=kwd>delete</span> settings.data;
</code><code id="L2973"><a href="#L2973" class="ln">2973</a>    }
</code><code id="L2974"><a href="#L2974" class="ln">2974</a>
</code><code id="L2975"><a href="#L2975" class="ln">2975</a>    <span class="com">// Set <span class=kwd>default</span> context</span>
</code><code id="L2976"><a href="#L2976" class="ln">2976</a>    <span class=kwd>if</span> (!settings.context) {
</code><code id="L2977"><a href="#L2977" class="ln">2977</a>      settings.context<span class="op"> = </span>settings;
</code><code id="L2978"><a href="#L2978" class="ln">2978</a>    }
</code><code id="L2979"><a href="#L2979" class="ln">2979</a>
</code><code id="L2980"><a href="#L2980" class="ln">2980</a>    <span class="com">// Check <span class=kwd>if</span> its jsonp</span>
</code><code id="L2981"><a href="#L2981" class="ln">2981</a>    <span class=kwd>if</span> (JSONP_RE.test(settings.url)) {
</code><code id="L2982"><a href="#L2982" class="ln">2982</a>      <span class=kwd>return</span> _getJSONP(settings);
</code><code id="L2983"><a href="#L2983" class="ln">2983</a>    }
</code><code id="L2984"><a href="#L2984" class="ln">2984</a>
</code><code id="L2985"><a href="#L2985" class="ln">2985</a>    <span class="com">// Create <span class=kwd>new</span> instance</span>
</code><code id="L2986"><a href="#L2986" class="ln">2986</a>    xhr<span class="op"> = </span>settings.xhr();
</code><code id="L2987"><a href="#L2987" class="ln">2987</a>
</code><code id="L2988"><a href="#L2988" class="ln">2988</a>    <span class="com">// User specified timeout</span>
</code><code id="L2989"><a href="#L2989" class="ln">2989</a>    <span class=kwd>if</span> (settings.timeout > <span class="lit">0</span>) {
</code><code id="L2990"><a href="#L2990" class="ln">2990</a>      abortTimeout<span class="op"> = </span>_createAbortTimeout(xhr, settings);
</code><code id="L2991"><a href="#L2991" class="ln">2991</a>    }
</code><code id="L2992"><a href="#L2992" class="ln">2992</a>
</code><code id="L2993"><a href="#L2993" class="ln">2993</a>    <span class="com">// On complete callback</span>
</code><code id="L2994"><a href="#L2994" class="ln">2994</a>    callback<span class="op"> = </span><span class=kwd>function</span> () {
</code><code id="L2995"><a href="#L2995" class="ln">2995</a>      <span class=kwd>var</span> response, status;
</code><code id="L2996"><a href="#L2996" class="ln">2996</a>
</code><code id="L2997"><a href="#L2997" class="ln">2997</a>      <span class="com">// Request complete</span>
</code><code id="L2998"><a href="#L2998" class="ln">2998</a>      <span class=kwd>if</span> (xhr.readyState<span class="op"> === </span><span class="lit">4</span>) {
</code><code id="L2999"><a href="#L2999" class="ln">2999</a>        status<span class="op"> = </span>xhr.status;
</code><code id="L3000"><a href="#L3000" class="ln">3000</a>
</code><code id="L3001"><a href="#L3001" class="ln">3001</a>        <span class="com">// Clear timeout</span>
</code><code id="L3002"><a href="#L3002" class="ln">3002</a>        window.clearTimeout(abortTimeout);
</code><code id="L3003"><a href="#L3003" class="ln">3003</a>
</code><code id="L3004"><a href="#L3004" class="ln">3004</a>        <span class="com">// Scuccess</span>
</code><code id="L3005"><a href="#L3005" class="ln">3005</a>        <span class=kwd>if</span> ((status >= <span class="lit">200</span><span class="op"> &amp;&amp; </span>status &lt; <span class="lit">300</span>)<span class="op"> || </span>status<span class="op"> === </span><span class="lit">304</span>) {
</code><code id="L3006"><a href="#L3006" class="ln">3006</a>          <span class=kwd>if</span> (settings.async) {
</code><code id="L3007"><a href="#L3007" class="ln">3007</a>            response<span class="op"> = </span>_handleResponse(xhr, settings);
</code><code id="L3008"><a href="#L3008" class="ln">3008</a>            <span class=kwd>if</span> (response !== <span class=kwd>false</span>) {
</code><code id="L3009"><a href="#L3009" class="ln">3009</a>              xhrCallbacks.success(response, xhr, settings);
</code><code id="L3010"><a href="#L3010" class="ln">3010</a>            }
</code><code id="L3011"><a href="#L3011" class="ln">3011</a>          }
</code><code id="L3012"><a href="#L3012" class="ln">3012</a>
</code><code id="L3013"><a href="#L3013" class="ln">3013</a>        <span class="com">// Fail</span>
</code><code id="L3014"><a href="#L3014" class="ln">3014</a>        } <span class=kwd>else</span> {
</code><code id="L3015"><a href="#L3015" class="ln">3015</a>          xhrCallbacks.error(<span class="str">'error'</span>, xhr.statusText, xhr, settings);
</code><code id="L3016"><a href="#L3016" class="ln">3016</a>        }
</code><code id="L3017"><a href="#L3017" class="ln">3017</a>      }
</code><code id="L3018"><a href="#L3018" class="ln">3018</a>    };
</code><code id="L3019"><a href="#L3019" class="ln">3019</a>
</code><code id="L3020"><a href="#L3020" class="ln">3020</a>    <span class="com">// Listen <span class=kwd>for</span> response</span>
</code><code id="L3021"><a href="#L3021" class="ln">3021</a>    xhr.onreadystatechange<span class="op"> = </span>callback;
</code><code id="L3022"><a href="#L3022" class="ln">3022</a>
</code><code id="L3023"><a href="#L3023" class="ln">3023</a>    <span class="com">// Init request</span>
</code><code id="L3024"><a href="#L3024" class="ln">3024</a>    xhr.open(settings.type, settings.url, settings.async);
</code><code id="L3025"><a href="#L3025" class="ln">3025</a>
</code><code id="L3026"><a href="#L3026" class="ln">3026</a>    <span class="com">// Set settings headers</span>
</code><code id="L3027"><a href="#L3027" class="ln">3027</a>    _setHeaders(settings);
</code><code id="L3028"><a href="#L3028" class="ln">3028</a>
</code><code id="L3029"><a href="#L3029" class="ln">3029</a>    <span class="com">// Set xhr headers</span>
</code><code id="L3030"><a href="#L3030" class="ln">3030</a>    Kimbo.forEach(settings.headers, <span class=kwd>function</span> (header, value) {
</code><code id="L3031"><a href="#L3031" class="ln">3031</a>      xhr.setRequestHeader(header, value);
</code><code id="L3032"><a href="#L3032" class="ln">3032</a>    });
</code><code id="L3033"><a href="#L3033" class="ln">3033</a>
</code><code id="L3034"><a href="#L3034" class="ln">3034</a>    <span class="com">// Try to send request</span>
</code><code id="L3035"><a href="#L3035" class="ln">3035</a>    xhr.send(settings.data);
</code><code id="L3036"><a href="#L3036" class="ln">3036</a>
</code><code id="L3037"><a href="#L3037" class="ln">3037</a>    <span class=kwd>return</span> (settings.async) ? xhr : callback();
</code><code id="L3038"><a href="#L3038" class="ln">3038</a>  };
</code><code id="L3039"><a href="#L3039" class="ln">3039</a>
</code><code id="L3040"><a href="#L3040" class="ln">3040</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L3041"><a href="#L3041" class="ln">3041</a><span class="com">  <span class="op"> * </span>$.get
</span></code><code id="L3042"><a href="#L3042" class="ln">3042</a><span class="com">   [ method ]
</span></code><code id="L3043"><a href="#L3043" class="ln">3043</a><span class="com">  <span class="op"> * </span>Load data from the server using HTTP GET request.
</span></code><code id="L3044"><a href="#L3044" class="ln">3044</a><span class="com">   > Parameters
</span></code><code id="L3045"><a href="#L3045" class="ln">3045</a><span class="com">  <span class="op"> - </span>url (string) A string containing the URL to which the request is sent.
</span></code><code id="L3046"><a href="#L3046" class="ln">3046</a><span class="com">  <span class="op"> - </span>data (string|object) #optional An option string or object <span class=kwd>with</span> data params to send to the server.
</span></code><code id="L3047"><a href="#L3047" class="ln">3047</a><span class="com">  <span class="op"> - </span>callback (<span class=kwd>function</span>) A callback <span class=kwd>function</span> to execute <span class=kwd>if</span> the request succeeds.
</span></code><code id="L3048"><a href="#L3048" class="ln">3048</a><span class="com">  <span class="op"> - </span>type (string) #optional String <span class=kwd>with</span> the type of the data to send (intelligent guess by <span class=kwd>default</span>).
</span></code><code id="L3049"><a href="#L3049" class="ln">3049</a><span class="com">   > Usage
</span></code><code id="L3050"><a href="#L3050" class="ln">3050</a><span class="com">  <span class="op"> | </span>$.get(<span class="str">'url/users.php'</span>, { id: <span class="str">'<span class="lit">123</span>'</span> }, <span class=kwd>function</span> (data) {
</span></code><code id="L3051"><a href="#L3051" class="ln">3051</a><span class="com">  <span class="op"> | </span>  <span class="com">// Success</span>
</span></code><code id="L3052"><a href="#L3052" class="ln">3052</a><span class="com">  <span class="op"> | </span>  console.log(<span class="str">'response:'</span>, data);
</span></code><code id="L3053"><a href="#L3053" class="ln">3053</a><span class="com">  <span class="op"> | </span>});
</span></code><code id="L3054"><a href="#L3054" class="ln">3054</a><span class="com">  <span class="op"> * </span>This method is a shorthand <span class=kwd>for</span> the $.ajax
</span></code><code id="L3055"><a href="#L3055" class="ln">3055</a><span class="com">  <span class="op"> | </span>$.ajax({
</span></code><code id="L3056"><a href="#L3056" class="ln">3056</a><span class="com">  <span class="op"> | </span>  url: url,
</span></code><code id="L3057"><a href="#L3057" class="ln">3057</a><span class="com">  <span class="op"> | </span>  data: data,
</span></code><code id="L3058"><a href="#L3058" class="ln">3058</a><span class="com">  <span class="op"> | </span>  success: success,
</span></code><code id="L3059"><a href="#L3059" class="ln">3059</a><span class="com">  <span class="op"> | </span>  dataType: dataType
</span></code><code id="L3060"><a href="#L3060" class="ln">3060</a><span class="com">  <span class="op"> | </span>});
</span></code><code id="L3061"><a href="#L3061" class="ln">3061</a><span class="com">  \*/</span>
</code><code id="L3062"><a href="#L3062" class="ln">3062</a>
</code><code id="L3063"><a href="#L3063" class="ln">3063</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L3064"><a href="#L3064" class="ln">3064</a><span class="com">  <span class="op"> * </span>$.post
</span></code><code id="L3065"><a href="#L3065" class="ln">3065</a><span class="com">   [ method ]
</span></code><code id="L3066"><a href="#L3066" class="ln">3066</a><span class="com">  <span class="op"> * </span>Load data from the server using HTTP POST request.
</span></code><code id="L3067"><a href="#L3067" class="ln">3067</a><span class="com">   > Parameters
</span></code><code id="L3068"><a href="#L3068" class="ln">3068</a><span class="com">  <span class="op"> - </span>url (string) A string containing the URL to which the request is sent.
</span></code><code id="L3069"><a href="#L3069" class="ln">3069</a><span class="com">  <span class="op"> - </span>data (string|object) #optional An option string or object <span class=kwd>with</span> data params to send to the server.
</span></code><code id="L3070"><a href="#L3070" class="ln">3070</a><span class="com">  <span class="op"> - </span>callback (<span class=kwd>function</span>) A callback <span class=kwd>function</span> to execute <span class=kwd>if</span> the request succeeds.
</span></code><code id="L3071"><a href="#L3071" class="ln">3071</a><span class="com">  <span class="op"> - </span>type (string) #optional String <span class=kwd>with</span> the type of the data to send (intelligent guess by <span class=kwd>default</span>).
</span></code><code id="L3072"><a href="#L3072" class="ln">3072</a><span class="com">   > Usage
</span></code><code id="L3073"><a href="#L3073" class="ln">3073</a><span class="com">  <span class="op"> | </span>$.post(<span class="str">'url/users.php'</span>, { user: <span class="str">'denis'</span>, pass: <span class="str">'<span class="lit">123</span>'</span> }, <span class=kwd>function</span> (data) {
</span></code><code id="L3074"><a href="#L3074" class="ln">3074</a><span class="com">  <span class="op"> | </span>  <span class="com">// Success</span>
</span></code><code id="L3075"><a href="#L3075" class="ln">3075</a><span class="com">  <span class="op"> | </span>  console.log(<span class="str">'response:'</span>, data);
</span></code><code id="L3076"><a href="#L3076" class="ln">3076</a><span class="com">  <span class="op"> | </span>});
</span></code><code id="L3077"><a href="#L3077" class="ln">3077</a><span class="com">  <span class="op"> * </span>This method is a shorthand <span class=kwd>for</span> the $.ajax
</span></code><code id="L3078"><a href="#L3078" class="ln">3078</a><span class="com">  <span class="op"> | </span>$.ajax({
</span></code><code id="L3079"><a href="#L3079" class="ln">3079</a><span class="com">  <span class="op"> | </span>  type: <span class="str">'POST'</span>,
</span></code><code id="L3080"><a href="#L3080" class="ln">3080</a><span class="com">  <span class="op"> | </span>  url: url,
</span></code><code id="L3081"><a href="#L3081" class="ln">3081</a><span class="com">  <span class="op"> | </span>  data: data,
</span></code><code id="L3082"><a href="#L3082" class="ln">3082</a><span class="com">  <span class="op"> | </span>  success: success,
</span></code><code id="L3083"><a href="#L3083" class="ln">3083</a><span class="com">  <span class="op"> | </span>  dataType: dataType
</span></code><code id="L3084"><a href="#L3084" class="ln">3084</a><span class="com">  <span class="op"> | </span>});
</span></code><code id="L3085"><a href="#L3085" class="ln">3085</a><span class="com">  \*/</span>
</code><code id="L3086"><a href="#L3086" class="ln">3086</a>  Kimbo.forEach([<span class="str">'get'</span>, <span class="str">'post'</span>], <span class=kwd>function</span> (method) {
</code><code id="L3087"><a href="#L3087" class="ln">3087</a>    Kimbo[method]<span class="op"> = </span><span class=kwd>function</span> (url, data, callback, type) {
</code><code id="L3088"><a href="#L3088" class="ln">3088</a>
</code><code id="L3089"><a href="#L3089" class="ln">3089</a>      <span class="com">// Prepare arguments</span>
</code><code id="L3090"><a href="#L3090" class="ln">3090</a>      <span class=kwd>if</span> (Kimbo.isFunction(data)) {
</code><code id="L3091"><a href="#L3091" class="ln">3091</a>        type<span class="op"> = </span>type<span class="op"> || </span>callback;
</code><code id="L3092"><a href="#L3092" class="ln">3092</a>        callback<span class="op"> = </span>data;
</code><code id="L3093"><a href="#L3093" class="ln">3093</a>        data<span class="op"> = </span><span class=kwd>null</span>;
</code><code id="L3094"><a href="#L3094" class="ln">3094</a>      }
</code><code id="L3095"><a href="#L3095" class="ln">3095</a>
</code><code id="L3096"><a href="#L3096" class="ln">3096</a>      <span class="com">// Call ajax</span>
</code><code id="L3097"><a href="#L3097" class="ln">3097</a>      <span class=kwd>return</span> Kimbo.ajax({
</code><code id="L3098"><a href="#L3098" class="ln">3098</a>        type: method.toUpperCase(),
</code><code id="L3099"><a href="#L3099" class="ln">3099</a>        url: url,
</code><code id="L3100"><a href="#L3100" class="ln">3100</a>        data: data,
</code><code id="L3101"><a href="#L3101" class="ln">3101</a>        success: callback,
</code><code id="L3102"><a href="#L3102" class="ln">3102</a>        dataType: type
</code><code id="L3103"><a href="#L3103" class="ln">3103</a>      });
</code><code id="L3104"><a href="#L3104" class="ln">3104</a>    };
</code><code id="L3105"><a href="#L3105" class="ln">3105</a>  });
</code><code id="L3106"><a href="#L3106" class="ln">3106</a>
</code><code id="L3107"><a href="#L3107" class="ln">3107</a>  Kimbo.extend({
</code><code id="L3108"><a href="#L3108" class="ln">3108</a><span class="com">   <span class="com">/*\</span>
</span></code><code id="L3109"><a href="#L3109" class="ln">3109</a><span class="com">   <span class="op"> * </span>$.getScript
</span></code><code id="L3110"><a href="#L3110" class="ln">3110</a><span class="com">    [ method ]
</span></code><code id="L3111"><a href="#L3111" class="ln">3111</a><span class="com">   <span class="op"> * </span>Load a JavaScript file from the server using a GET HTTP request, then execute it.
</span></code><code id="L3112"><a href="#L3112" class="ln">3112</a><span class="com">    > Parameters
</span></code><code id="L3113"><a href="#L3113" class="ln">3113</a><span class="com">   <span class="op"> - </span>url (string) A string containing the URL to which the request is sent.
</span></code><code id="L3114"><a href="#L3114" class="ln">3114</a><span class="com">   <span class="op"> - </span>callback (<span class=kwd>function</span>) A callback <span class=kwd>function</span> to execute <span class=kwd>if</span> the request succeeds.
</span></code><code id="L3115"><a href="#L3115" class="ln">3115</a><span class="com">    > Usage
</span></code><code id="L3116"><a href="#L3116" class="ln">3116</a><span class="com">   <span class="op"> | </span>$.getScript(<span class="str">'url/script.js'</span>, <span class=kwd>function</span> (data) {
</span></code><code id="L3117"><a href="#L3117" class="ln">3117</a><span class="com">   <span class="op"> | </span>  <span class="com">// Success</span>
</span></code><code id="L3118"><a href="#L3118" class="ln">3118</a><span class="com">   <span class="op"> | </span>  console.log(<span class="str">'response:'</span>, data);
</span></code><code id="L3119"><a href="#L3119" class="ln">3119</a><span class="com">   <span class="op"> | </span>});
</span></code><code id="L3120"><a href="#L3120" class="ln">3120</a><span class="com">   <span class="op"> * </span>This method is a shorthand <span class=kwd>for</span> the $.ajax
</span></code><code id="L3121"><a href="#L3121" class="ln">3121</a><span class="com">   <span class="op"> | </span>$.ajax({
</span></code><code id="L3122"><a href="#L3122" class="ln">3122</a><span class="com">   <span class="op"> | </span>  url: url,
</span></code><code id="L3123"><a href="#L3123" class="ln">3123</a><span class="com">   <span class="op"> | </span>  dataType: <span class="str">'script'</span>,
</span></code><code id="L3124"><a href="#L3124" class="ln">3124</a><span class="com">   <span class="op"> | </span>  success: success
</span></code><code id="L3125"><a href="#L3125" class="ln">3125</a><span class="com">   <span class="op"> | </span>});
</span></code><code id="L3126"><a href="#L3126" class="ln">3126</a><span class="com">   \*/</span>
</code><code id="L3127"><a href="#L3127" class="ln">3127</a>    getScript: <span class=kwd>function</span> (url, callback) {
</code><code id="L3128"><a href="#L3128" class="ln">3128</a>      <span class=kwd>return</span> Kimbo.get(url, callback, <span class="str">'script'</span>);
</code><code id="L3129"><a href="#L3129" class="ln">3129</a>    },
</code><code id="L3130"><a href="#L3130" class="ln">3130</a>
</code><code id="L3131"><a href="#L3131" class="ln">3131</a><span class="com">   <span class="com">/*\</span>
</span></code><code id="L3132"><a href="#L3132" class="ln">3132</a><span class="com">   <span class="op"> * </span>$.getJSON
</span></code><code id="L3133"><a href="#L3133" class="ln">3133</a><span class="com">    [ method ]
</span></code><code id="L3134"><a href="#L3134" class="ln">3134</a><span class="com">   <span class="op"> * </span>Load data from the server using HTTP POST request.
</span></code><code id="L3135"><a href="#L3135" class="ln">3135</a><span class="com">    > Parameters
</span></code><code id="L3136"><a href="#L3136" class="ln">3136</a><span class="com">   <span class="op"> - </span>url (string) A string containing the URL to which the request is sent.
</span></code><code id="L3137"><a href="#L3137" class="ln">3137</a><span class="com">   <span class="op"> - </span>data (string|object) #optional An option string or object <span class=kwd>with</span> data params to send to the server.
</span></code><code id="L3138"><a href="#L3138" class="ln">3138</a><span class="com">   <span class="op"> - </span>callback (<span class=kwd>function</span>) A callback <span class=kwd>function</span> to execute <span class=kwd>if</span> the request succeeds.
</span></code><code id="L3139"><a href="#L3139" class="ln">3139</a><span class="com">   <span class="op"> - </span>type (string) #optional String <span class=kwd>with</span> the type of the data to send (intelligent guess by <span class=kwd>default</span>).
</span></code><code id="L3140"><a href="#L3140" class="ln">3140</a><span class="com">    > Usage
</span></code><code id="L3141"><a href="#L3141" class="ln">3141</a><span class="com">   <span class="op"> | </span>$.getJSON(<span class="str">'url/test.json'</span>, { id: <span class="str">'<span class="lit">2</span>'</span> }, <span class=kwd>function</span> (data) {
</span></code><code id="L3142"><a href="#L3142" class="ln">3142</a><span class="com">   <span class="op"> | </span>  <span class="com">// Success</span>
</span></code><code id="L3143"><a href="#L3143" class="ln">3143</a><span class="com">   <span class="op"> | </span>  console.log(<span class="str">'response:'</span>, data);
</span></code><code id="L3144"><a href="#L3144" class="ln">3144</a><span class="com">   <span class="op"> | </span>});
</span></code><code id="L3145"><a href="#L3145" class="ln">3145</a><span class="com">   <span class="op"> * </span>This method is a shorthand <span class=kwd>for</span> the $.ajax
</span></code><code id="L3146"><a href="#L3146" class="ln">3146</a><span class="com">   <span class="op"> | </span>$.ajax({
</span></code><code id="L3147"><a href="#L3147" class="ln">3147</a><span class="com">   <span class="op"> | </span>  url: url,
</span></code><code id="L3148"><a href="#L3148" class="ln">3148</a><span class="com">   <span class="op"> | </span>  dataType: <span class="str">'json'</span>,
</span></code><code id="L3149"><a href="#L3149" class="ln">3149</a><span class="com">   <span class="op"> | </span>  success: success
</span></code><code id="L3150"><a href="#L3150" class="ln">3150</a><span class="com">   <span class="op"> | </span>});
</span></code><code id="L3151"><a href="#L3151" class="ln">3151</a><span class="com">   <span class="op"> * </span>To get json data <span class=kwd>with</span> jsonp:
</span></code><code id="L3152"><a href="#L3152" class="ln">3152</a><span class="com">   <span class="op"> | </span>$.getJSON(<span class="str">'http:<span class="com">//search.twitter.com/search.json?callback=?'</span>, <span class="str">'q=#javascript'</span>, <span class=kwd>function</span> (data) {</span>
</span></code><code id="L3153"><a href="#L3153" class="ln">3153</a><span class="com">   <span class="op"> | </span>  console.log(data);
</span></code><code id="L3154"><a href="#L3154" class="ln">3154</a><span class="com">   <span class="op"> | </span>});
</span></code><code id="L3155"><a href="#L3155" class="ln">3155</a><span class="com">   \*/</span>
</code><code id="L3156"><a href="#L3156" class="ln">3156</a>    getJSON: <span class=kwd>function</span> (url, data, callback) {
</code><code id="L3157"><a href="#L3157" class="ln">3157</a>      <span class=kwd>return</span> Kimbo.get(url, data, callback, <span class="str">'json'</span>);
</code><code id="L3158"><a href="#L3158" class="ln">3158</a>    }
</code><code id="L3159"><a href="#L3159" class="ln">3159</a>  });
</code><code id="L3160"><a href="#L3160" class="ln">3160</a>
</code><code id="L3161"><a href="#L3161" class="ln">3161</a>  <span class="com">// getJSONP internal use</span>
</code><code id="L3162"><a href="#L3162" class="ln">3162</a>  <span class=kwd>var</span> _getJSONP<span class="op"> = </span><span class=kwd>function</span> (settings) {
</code><code id="L3163"><a href="#L3163" class="ln">3163</a>    <span class=kwd>var</span> jsonpCallback<span class="op"> = </span>Kimbo.ref<span class="op"> + </span><span class="str">'_'</span><span class="op"> + </span>Date.now();
</code><code id="L3164"><a href="#L3164" class="ln">3164</a>    <span class=kwd>var</span> script<span class="op"> = </span>_.document.createElement(<span class="str">'script'</span>);
</code><code id="L3165"><a href="#L3165" class="ln">3165</a>    <span class=kwd>var</span> head<span class="op"> = </span>_.document.head;
</code><code id="L3166"><a href="#L3166" class="ln">3166</a>    <span class=kwd>var</span> xhr<span class="op"> = </span>{
</code><code id="L3167"><a href="#L3167" class="ln">3167</a>      abort: <span class=kwd>function</span> () {
</code><code id="L3168"><a href="#L3168" class="ln">3168</a>        window.clearTimeout(abortTimeout);
</code><code id="L3169"><a href="#L3169" class="ln">3169</a>        head.removeChild(script);
</code><code id="L3170"><a href="#L3170" class="ln">3170</a>        <span class=kwd>delete</span> window[jsonpCallback];
</code><code id="L3171"><a href="#L3171" class="ln">3171</a>      }
</code><code id="L3172"><a href="#L3172" class="ln">3172</a>    };
</code><code id="L3173"><a href="#L3173" class="ln">3173</a>    <span class=kwd>var</span> abortTimeout;
</code><code id="L3174"><a href="#L3174" class="ln">3174</a>
</code><code id="L3175"><a href="#L3175" class="ln">3175</a>    <span class="com">// User specified timeout</span>
</code><code id="L3176"><a href="#L3176" class="ln">3176</a>    <span class=kwd>if</span> (settings.timeout > <span class="lit">0</span>) {
</code><code id="L3177"><a href="#L3177" class="ln">3177</a>      abortTimeout<span class="op"> = </span>_createAbortTimeout(xhr, settings);
</code><code id="L3178"><a href="#L3178" class="ln">3178</a>    }
</code><code id="L3179"><a href="#L3179" class="ln">3179</a>
</code><code id="L3180"><a href="#L3180" class="ln">3180</a>    <span class="com">// Set url</span>
</code><code id="L3181"><a href="#L3181" class="ln">3181</a>    script.src<span class="op"> = </span>settings.url.replace(JSONP_RE, <span class="str">'$<span class="lit">1</span>'</span><span class="op"> + </span>jsonpCallback<span class="op"> + </span><span class="str">'$<span class="lit">2</span>'</span>);
</code><code id="L3182"><a href="#L3182" class="ln">3182</a>
</code><code id="L3183"><a href="#L3183" class="ln">3183</a>    <span class="com">// Jsonp callback</span>
</code><code id="L3184"><a href="#L3184" class="ln">3184</a>    window[jsonpCallback]<span class="op"> = </span><span class=kwd>function</span> (response) {
</code><code id="L3185"><a href="#L3185" class="ln">3185</a>
</code><code id="L3186"><a href="#L3186" class="ln">3186</a>      <span class="com">// Remove script</span>
</code><code id="L3187"><a href="#L3187" class="ln">3187</a>      xhr.abort();
</code><code id="L3188"><a href="#L3188" class="ln">3188</a>
</code><code id="L3189"><a href="#L3189" class="ln">3189</a>      <span class="com">// Fake xhr</span>
</code><code id="L3190"><a href="#L3190" class="ln">3190</a>      Kimbo.extend(xhr, {
</code><code id="L3191"><a href="#L3191" class="ln">3191</a>        statusText: <span class="str">'OK'</span>,
</code><code id="L3192"><a href="#L3192" class="ln">3192</a>        status: <span class="lit">200</span>,
</code><code id="L3193"><a href="#L3193" class="ln">3193</a>        response: response,
</code><code id="L3194"><a href="#L3194" class="ln">3194</a>        headers: settings.headers
</code><code id="L3195"><a href="#L3195" class="ln">3195</a>      });
</code><code id="L3196"><a href="#L3196" class="ln">3196</a>
</code><code id="L3197"><a href="#L3197" class="ln">3197</a>      <span class="com">// Success</span>
</code><code id="L3198"><a href="#L3198" class="ln">3198</a>      xhrCallbacks.success(response, xhr, settings);
</code><code id="L3199"><a href="#L3199" class="ln">3199</a>    };
</code><code id="L3200"><a href="#L3200" class="ln">3200</a>
</code><code id="L3201"><a href="#L3201" class="ln">3201</a>    <span class="com">// Set settings headers</span>
</code><code id="L3202"><a href="#L3202" class="ln">3202</a>    _setHeaders(settings);
</code><code id="L3203"><a href="#L3203" class="ln">3203</a>
</code><code id="L3204"><a href="#L3204" class="ln">3204</a>    <span class="com">// Apend script to head to make the request</span>
</code><code id="L3205"><a href="#L3205" class="ln">3205</a>    head.appendChild(script);
</code><code id="L3206"><a href="#L3206" class="ln">3206</a>
</code><code id="L3207"><a href="#L3207" class="ln">3207</a>    <span class="com">// Return fake xhr object to abort manually</span>
</code><code id="L3208"><a href="#L3208" class="ln">3208</a>    <span class=kwd>return</span> xhr;
</code><code id="L3209"><a href="#L3209" class="ln">3209</a>  };
</code><code id="L3210"><a href="#L3210" class="ln">3210</a>
</code><code id="L3211"><a href="#L3211" class="ln">3211</a><span class="com">  <span class="com">/*\</span>
</span></code><code id="L3212"><a href="#L3212" class="ln">3212</a><span class="com">  <span class="op"> * </span>$.param
</span></code><code id="L3213"><a href="#L3213" class="ln">3213</a><span class="com">   [ method ]
</span></code><code id="L3214"><a href="#L3214" class="ln">3214</a><span class="com">  <span class="op"> * </span>Create a serialized representation of an array or object, suitable <span class=kwd>for</span> use <span class=kwd>in</span> a URL query string or Ajax request.
</span></code><code id="L3215"><a href="#L3215" class="ln">3215</a><span class="com">   > Parameters
</span></code><code id="L3216"><a href="#L3216" class="ln">3216</a><span class="com">  <span class="op"> - </span>data (string|object) A string or object to serialize.
</span></code><code id="L3217"><a href="#L3217" class="ln">3217</a><span class="com">   > Usage
</span></code><code id="L3218"><a href="#L3218" class="ln">3218</a><span class="com">  <span class="op"> | </span><span class=kwd>var</span> obj<span class="op"> = </span>{ name: <span class="str">'Denis'</span>, last: <span class="str">'Ciccale'</span> };
</span></code><code id="L3219"><a href="#L3219" class="ln">3219</a><span class="com">  <span class="op"> | </span><span class=kwd>var</span> serialized<span class="op"> = </span>$.param(obj); <span class="com">// <span class="str">'name=Denis&amp;last=Ciccale'</span></span>
</span></code><code id="L3220"><a href="#L3220" class="ln">3220</a><span class="com">  \*/</span>
</code><code id="L3221"><a href="#L3221" class="ln">3221</a>  Kimbo.param<span class="op"> = </span><span class=kwd>function</span> (data) {
</code><code id="L3222"><a href="#L3222" class="ln">3222</a>    <span class=kwd>var</span> params<span class="op"> = </span><span class="str">''</span>;
</code><code id="L3223"><a href="#L3223" class="ln">3223</a>
</code><code id="L3224"><a href="#L3224" class="ln">3224</a>    <span class=kwd>if</span> (Kimbo.isObject(data)) {
</code><code id="L3225"><a href="#L3225" class="ln">3225</a>      Kimbo.forEach(data, <span class=kwd>function</span> (name, value) {
</code><code id="L3226"><a href="#L3226" class="ln">3226</a>        params += name<span class="op"> + </span><span class="str">'='</span><span class="op"> + </span>value<span class="op"> + </span><span class="str">'&amp;'</span>;
</code><code id="L3227"><a href="#L3227" class="ln">3227</a>      });
</code><code id="L3228"><a href="#L3228" class="ln">3228</a>    } <span class=kwd>else</span> {
</code><code id="L3229"><a href="#L3229" class="ln">3229</a>      params<span class="op"> = </span>data;
</code><code id="L3230"><a href="#L3230" class="ln">3230</a>    }
</code><code id="L3231"><a href="#L3231" class="ln">3231</a>
</code><code id="L3232"><a href="#L3232" class="ln">3232</a>    <span class=kwd>return</span> window.encodeURIComponent(params)
</code><code id="L3233"><a href="#L3233" class="ln">3233</a>      .replace(/%<span class="lit">20</span>/g, <span class="str">'+'</span>)
</code><code id="L3234"><a href="#L3234" class="ln">3234</a>      .replace(/%\d[D6F]/g, window.unescape)
</code><code id="L3235"><a href="#L3235" class="ln">3235</a>      .replace(/^\?|&amp;$/g, <span class="str">''</span>);
</code><code id="L3236"><a href="#L3236" class="ln">3236</a>  };
</code><code id="L3237"><a href="#L3237" class="ln">3237</a>});
</code><code id="L3238"><a href="#L3238" class="ln">3238</a>
</code></pre>
</body>
